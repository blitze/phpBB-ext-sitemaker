(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[258],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return d},kt:function(){return m}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var o=r.createContext({}),c=function(e){var n=r.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=c(e.components);return r.createElement(o.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(t),m=i,k=u["".concat(o,".").concat(m)]||u[m]||p[m]||a;return t?r.createElement(k,l(l({ref:n},d),{},{components:t})):r.createElement(k,l({ref:n},d))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,l=new Array(a);l[0]=u;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s.mdxType="string"==typeof e?e:i,l[1]=s;for(var c=2;c<a;c++)l[c]=t[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},3790:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return o},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var r=t(2122),i=t(9756),a=(t(7294),t(3905)),l=["components"],s={title:"phpBB SiteMaker erweitern",sidebar_position:1},o=void 0,c={unversionedId:"dev/overview",id:"dev/overview",isDocsHomePage:!1,title:"phpBB SiteMaker erweitern",description:"Sie k\xf6nnen phpBB SiteMaker mit Service Ersatz, Service Dekorationund phpBB Eventsystem erweitern/\xe4ndern. Eine Liste der unterst\xfctzten Events finden Sie hier.",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/dev/overview.md",sourceDirName:"dev",slug:"/dev/overview",permalink:"/phpBB-ext-sitemaker/de/docs/dev/overview",editUrl:"https://crowdin.com/project/phpbb-ext-sitemaker/de",version:"current",sidebarPosition:1,frontMatter:{title:"phpBB SiteMaker erweitern",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Bl\xf6cke Anzeige anpassen",permalink:"/phpBB-ext-sitemaker/de/docs/user/site/block-modifiers"},next:{title:"phpBB SiteMaker Ereignisse",permalink:"/phpBB-ext-sitemaker/de/docs/dev/events"}},d=[{value:"Erstellen eines SiteMaker-Blocks",id:"erstellen-eines-sitemaker-blocks",children:[{value:"Blockeinstellungen",id:"blockeinstellungen",children:[]},{value:"Benennen von Bl\xf6cken",id:"benennen-von-bl\xf6cken",children:[]},{value:"\xdcbersetzung",id:"\xfcbersetzung",children:[]},{value:"Den Block rendern",id:"den-block-rendern",children:[]},{value:"Assets blockieren",id:"assets-blockieren",children:[]}]}],p={toc:d};function u(e){var n=e.components,t=(0,i.Z)(e,l);return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Sie k\xf6nnen phpBB SiteMaker mit ",(0,a.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-replacement"},"Service Ersatz"),", ",(0,a.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-decoration"},"Service Dekoration"),"und ",(0,a.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_events.html"},"phpBB Eventsystem")," erweitern/\xe4ndern. Eine Liste der unterst\xfctzten Events ",(0,a.kt)("a",{parentName:"p",href:"/phpBB-ext-sitemaker/de/docs/dev/events"},"finden Sie hier"),"."),(0,a.kt)("h2",{id:"erstellen-eines-sitemaker-blocks"},"Erstellen eines SiteMaker-Blocks"),(0,a.kt)("p",null,"Ein phpBB SiteMaker Block ist einfach eine Klasse, die den blitze\\sitemaker\\services\\blocks\\driver\\block class erweitert und ein Array aus der \"display\"-Methode mit einem 'title' und 'content' zur\xfcckgibt. Alles andere zwischendurch liegt bei Ihnen. Um deinen Block von phpBB SiteMaker entdeckbar zu machen, musst du ihm das \"sitemaker.block\"-Tag geben."),(0,a.kt)("p",null,'Sagen wir, wir haben eine Erweiterung mit Anbieter/Erweiterung als mich/Beispiel. Um einen Block namens "my_block" f\xfcr phpBB SiteMaker zu erstellen:'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},'Einen "Blocks" Ordner erstellen'),(0,a.kt)("li",{parentName:"ul"},"Erstelle my_block.php Datei im Blockordner mit folgendem Inhalt")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"namespace mein\\beispiel\\blocks;\n\nblitze\\sitemaker\\services\\blocks\\driver\\block;\n\nKlasse my_block erweitert Block\n{\n    /**\n     * {@inheritdoc}\n     */\n    public function display(array $settings, $edit_mode = false)\n    {\n        return array(\n            'title' => 'my block title',\n            'content' => 'my block content',\n        );\n    }\n}\n")),(0,a.kt)("p",null,"F\xfcgen Sie dann in Ihrer config.yml-Datei folgendes hinzu:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yml"},"Dienste:\n\n...\n\n    my.example.block.my_block:\n        Klasse: mein\\example\\blocks\\my_block\n        rufe:\n            - [set_name, [my.example.block.my_block]]\n        tags:\n            - { name: sitemaker.block }\n\n....\n\n")),(0,a.kt)("p",null,"Auf einem absoluten Minimum ist das alles, was du brauchst. Wenn du in den Bearbeitungsmodus gehst, solltest du den Block als 'MY_EXAMPLE_BLOCK_MY_BLOCK' aufgelistet sehen, der auf jede Blockposition gezogen und geworfen werden kann. Aber dieser Block macht nichts Spannendes. Es hat keine Einstellungen und \xfcbersetzt nicht den Blocknamen. Machen wir es interessanter."),(0,a.kt)("h3",{id:"blockeinstellungen"},"Blockeinstellungen"),(0,a.kt)("p",null,'Lass uns unsere Bl\xf6cke/meinen Block \xe4ndern. hp-Datei und f\xfcgen Sie eine "get_config"-Methode bei der R\xfcckgabe eines Arrays hinzu, wobei die Schl\xfcssel die Blockeinstellungen sind und die Werte ein Array sind, das die Einstellungen wie folgt beschreibt:'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"    /**\n     * @inheritdoc\n     */\n    public function get_config(array $settings)\n    {\n        $options = array(1 => 'SOME_LANG_VAR', 2 => 'OTHER_LANG_VAR');\n        return array(\n            'legend1'   => 'TAB1',\n            'checkbox'  => array('lang' => 'SOME_LANG_VAR_1', 'validate' => 'string', 'type' => 'checkbox', 'options' => $options, 'default' => array(), 'explain' => false),\n            'yes_no'    => array('lang' => 'SOME_LANG_VAR_2', 'validate' => 'bool', 'type' => 'radio:yes_no', 'explain' => false, 'default' => false),\n            'radio'     => array('lang' => 'SOME_LANG_VAR_3', 'validate' => 'bool', 'type' => 'radio', 'options' => $options, 'explain' => false, 'default' => 'topic'),\n            'select'    => array('lang' => 'SOME_LANG_VAR_4', 'validate' => 'string', 'type' => 'select', 'options' => $options, 'default' => '', 'explain' => false),\n            'multi'     => array('lang' => 'SOME_LANG_VAR_5', 'validate' => 'string', 'type' => 'multi_select', 'options' => $options, 'default' => array(), 'explain' => false),\n            'legend2'   => 'TAB2',\n            'number'    => array('lang' => 'SOME_LANG_VAR_6', 'validate' => 'int:0:20', 'type' => 'number:0:20', 'maxlength' => 2, 'explain' => false, 'default' => 5),\n            'textarea'  => array('lang' => 'SOME_LANG_VAR_7', 'validate' => 'string', 'type' => 'textarea:3:40', 'maxlength' => 2, 'explain' => true, 'default' => ''),\n            'togglable' => array('lang' => 'SOME_TOGGLABLE_VAR', 'validate' => 'string', 'type' => 'select:1:0:toggle_key', 'options' => $options, 'default' => '', 'append' => '<div id=\"toggle_key-1\">Only show when option 1 is selected</div>'),\n        );\n    }\n")),(0,a.kt)("p",null,"Dies ist genauso konstruiert wie phpBB die Konfiguration f\xfcr die Board-Einstellungen in ACP. Weitere Beispiele finden Sie ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/phpbb/phpbb/blob/master/phpBB/includes/acp/acp_board.php"},"hier"),"."),(0,a.kt)("p",null,"If you want a custom field type, you can see an example ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/blitze/phpBB-ext-sitemaker_content/blob/develop/blocks/recent.php"},"here")," ('content_type' setting)."),(0,a.kt)("p",null,"Beachte 'legend1' und 'legend2': Diese werden verwendet, um die Einstellungen in Tabs zu trennen."),(0,a.kt)("h3",{id:"benennen-von-bl\xf6cken"},"Benennen von Bl\xf6cken"),(0,a.kt)("p",null,"Die Konvention f\xfcr Blocknamen ist, dass der Service-Name (z. B. my.example.block. y",(0,a.kt)("em",{parentName:"p"},"-Block oben) wird als Sprachschl\xfcssel verwendet, indem die Punkte (.) durch Unterstriche ("),") ersetzt werden (z.B. MY_EXAMPLE_BLOCK_MY_BLOCK)."),(0,a.kt)("h3",{id:"\xfcbersetzung"},"\xdcbersetzung"),(0,a.kt)("p",null,'Beachten Sie auch, dass wir mehrere Sprachschl\xfcssel haben, die \xfcbersetzt werden m\xfcssen. Erstellen Sie dazu eine Datei namens "blocks_admin.php" in Ihrem Sprachordner. Diese Datei wird automatisch beim Bearbeiten von Bl\xf6cken geladen und sollte \xdcbersetzungen f\xfcr Ihre Blockeinstellungen und Blocknamen enthalten.'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$lang = array_merge($lang, array(\n    'SOME_LANG_VAR' => 'Option 1',\n    'ANDERER_LANG_VAR' => 'Option 2',\n    'SOME_LANG_VAR_1' => 'Setzen 1',\n....\n    'MY_EXAMPLE_BLOCK_MY_BLOCK' => 'Mein Block',\n);\n")),(0,a.kt)("p",null,"Da 'blocks_admin.php' nur beim Bearbeiten von Bl\xf6cken geladen wird, m\xfcssen Sie andere \xdcbersetzungen (z. Block-Titel) durch Laden einer Sprachdatei in Ihrer Anzeigemethode wie so ",(0,a.kt)("inlineCode",{parentName:"p"},"$language->add_lang('my_lang_file', 'my/example');")),(0,a.kt)("h3",{id:"den-block-rendern"},"Den Block rendern"),(0,a.kt)("p",null,"Der neue Block wird nur angezeigt, wenn etwas dargestellt wird. Ihr Block kann jede Zeichenkette als Inhalt zur\xfcckgeben, aber in den meisten F\xe4llen ben\xf6tigen Sie eine Vorlage, um Ihren Inhalt darzustellen. Um deinen Block mit Vorlagen zu rendern der Block muss ein Array zur\xfcckgeben, das die Daten enth\xe4lt, die Sie an die Vorlage \xfcbergeben m\xf6chten, und die ",(0,a.kt)("inlineCode",{parentName:"p"},"get_template")," Methode wie unten gezeigt implementieren:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"    /**\n     * @inheritdoc\n     */\n    public function get_config(array $settings)\n    {\n        $options = array(1 => 'SOME_LANG_VAR', 2 => 'ANDERER_LANG_VAR');\n        return array(\n            'legend1' => 'TAB1',\n            'some_setting' => array('lang' => 'SOME_LANG_VAR_1', 'validate' => 'string', 'type' => 'checkbox', 'options' => $options, 'default' => array(), 'explain' => false),\n        );\n    }\n\n    /**\n     * {@inheritdoc}\n     */\n    public function get_template()\n    {\n        return '@my_example/my_block. tml';\n    }\n\n    /**\n     * {@inheritdoc}\n     */\n    public function display(array $data, $edit_mode = false)\n    {\n        if ($edit_mode)\n        {\n            // nur im Bearbeitungsmodus\n        }\n\n        return array(\n            'title' => 'MY_BLOCK_TITLE',\n            'data' => array(\n                'some_var' => $data['settings']['some_setting'],\n            ),\n        );\n}\n")),(0,a.kt)("p",null,"Dann k\xf6nnte deine styles/all/my_block.html oder styles/prosilver/my_block.html Datei so aussehen:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"<p>Sie haben ausgew\xe4hlt: {{ some_var }}</p>\n")),(0,a.kt)("p",null,"Zusammenfassend Ihr Block muss ein Array mit einer ",(0,a.kt)("inlineCode",{parentName:"p"},"-Titel-Taste")," (f\xfcr den Block-Titel) und einer ",(0,a.kt)("inlineCode",{parentName:"p"},"Inhalts-Taste")," (wenn der Block nur einen String anzeigt und keine Vorlage verwendet) oder einer ",(0,a.kt)("inlineCode",{parentName:"p"},"Daten-Taste")," (wenn der Block eine Vorlage verwendet, in diesem Fall m\xfcssen Sie auch die Methode ",(0,a.kt)("inlineCode",{parentName:"p"},"get_template")," implementieren)."),(0,a.kt)("h3",{id:"assets-blockieren"},"Assets blockieren"),(0,a.kt)("p",null,"Wenn Ihr Block Assets (css/js) zur Seite hinzuf\xfcgen muss, empfehle ich daf\xfcr den Sitemaker ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/blitze/phpBB-ext-sitemaker/blob/develop/services/util.php"},"util class")," zu verwenden. Da es mehr als eine Instanz desselben Blocks auf der Seite geben kann oder andere Bl\xf6cke das gleiche Asset hinzuf\xfcgen, stellt die Util-Klasse sicher, dass das Asset nur hinzugef\xfcgt wird."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"        $this->util->add_assets(array(\n            'js' => array(\n                '@my_example/assets/einige. s',\n                100 => '@my_example/assets/others. s', // Priorit\xe4t setzen\n            ),\n            'css' => array(\n                '@my_example/assets/some ss',\n            )\n));\n")),(0,a.kt)("p",null,"Die Util-Klasse muss nat\xfcrlich zu Ihren Service-Definitionen in config.yml hinzugef\xfcgt werden, wie so: ",(0,a.kt)("inlineCode",{parentName:"p"},"- '@blitze.sitemaker. bis")," und definiert im Konstruktor Ihres Blocks ",(0,a.kt)("inlineCode",{parentName:"p"},"\\blitze\\sitemaker\\services\\util $util"),"."),(0,a.kt)("p",null,"Und das war's. Wir sind fertig!"))}u.isMDXComponent=!0}}]);