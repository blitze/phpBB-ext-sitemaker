<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Extending phpBB SiteMaker · phpBB SiteMaker</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;You can extend/modify phpBB SiteMaker using &lt;a href=&quot;https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-replacement&quot;&gt;service replacement&lt;/a&gt;, &lt;a href=&quot;https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-decoration&quot;&gt;service decoration&lt;/a&gt;, and &lt;a href=&quot;https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_events.html&quot;&gt;phpBB&#x27;s event system&lt;/a&gt;. You can find a list of supported events &lt;a href=&quot;/phpBB-ext-sitemaker/docs/en/developer-events&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Extending phpBB SiteMaker · phpBB SiteMaker"/><meta property="og:type" content="website"/><meta property="og:url" content="https://blitze.github.io/phpBB-ext-sitemaker/"/><meta property="og:description" content="&lt;p&gt;You can extend/modify phpBB SiteMaker using &lt;a href=&quot;https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-replacement&quot;&gt;service replacement&lt;/a&gt;, &lt;a href=&quot;https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-decoration&quot;&gt;service decoration&lt;/a&gt;, and &lt;a href=&quot;https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_events.html&quot;&gt;phpBB&#x27;s event system&lt;/a&gt;. You can find a list of supported events &lt;a href=&quot;/phpBB-ext-sitemaker/docs/en/developer-events&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/phpBB-ext-sitemaker/false"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://blitze.github.io/phpBB-ext-sitemaker/blog/atom.xml" title="phpBB SiteMaker Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://blitze.github.io/phpBB-ext-sitemaker/blog/feed.xml" title="phpBB SiteMaker Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-134749797-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="/phpBB-ext-sitemaker/js/copy-code-button.js"></script><script type="text/javascript" src="https://crowdin.com/js/crowdjet/crowdjet.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100,"backgroundColor":"#777"}
          )
        });
        </script><script src="/phpBB-ext-sitemaker/js/scrollSpy.js"></script><link rel="stylesheet" href="/phpBB-ext-sitemaker/css/main.css"/><script src="/phpBB-ext-sitemaker/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/phpBB-ext-sitemaker/en"><h2 class="headerTitle">phpBB SiteMaker</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/phpBB-ext-sitemaker/docs/en/introduction" target="_self">Docs</a></li><li class=""><a href="/phpBB-ext-sitemaker/en/help" target="_self">Help</a></li><li class=""><a href="/phpBB-ext-sitemaker/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/phpBB-ext-sitemaker/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/phpBB-ext-sitemaker/docs/de/developer-extensions">Deutsch</a></li><li><a href="/phpBB-ext-sitemaker/docs/es/developer-extensions">Español</a></li><li><a href="/phpBB-ext-sitemaker/docs/fr/developer-extensions">Français</a></li><li><a href="/phpBB-ext-sitemaker/docs/it/developer-extensions">Italiano</a></li><li><a href="/phpBB-ext-sitemaker/docs/pt/developer-extensions">Português</a></li><li><a href="/phpBB-ext-sitemaker/docs/ru/developer-extensions">Русский</a></li><li><a href="/phpBB-ext-sitemaker/docs/zh_cmn_hans/developer-extensions">中文</a></li><li><a href="https://crowdin.com/project/phpbb-ext-sitemaker" target="_blank" rel="noreferrer noopener">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class=""><a href="https://www.github.com/blitze/phpBB-ext-sitemaker" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Developer Guide</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">User Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Getting Started</h4><ul><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/installation">Installing / Upgrading</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Building Blocks</h4><ul><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/blocks-overview">What are blocks?</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/blocks-views">Block Views</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/blocks-managing">Managing Blocks</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/blocks-custom">Custom Block</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Menus</h4><ul><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/menus-managing">Managing Menus</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/menus-managing-items">Managing Menu Items</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/menus-display">Displaying Menus</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Building your site</h4><ul><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/site-layouts">Layouts</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/site-navbar">Navigation Bar</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/site-block-modifiers">Customizing Blocks Display</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/site-startpage">Setting a Start Page</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/site-default-layout">Setting a Default Layout</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/blocks-inheritance">Understanding Block Inheritance</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Developer Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/developer-extensions">Extending phpBB SiteMaker</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/developer-events">phpBB SiteMaker Events</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/developer-theming">Theming</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Contribute<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/contrib-overview">Get Involved</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/contrib-translators">Translators</a></li><li class="navListItem"><a class="navItem" href="/phpBB-ext-sitemaker/docs/en/contrib-pull-requests">Pull Requests</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/blitze/phpBB-ext-sitemaker/edit/develop/docs/docs/developer-extensions.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Extending phpBB SiteMaker</h1></header><article><div><span><p>You can extend/modify phpBB SiteMaker using <a href="https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-replacement">service replacement</a>, <a href="https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-decoration">service decoration</a>, and <a href="https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_events.html">phpBB's event system</a>. You can find a list of supported events <a href="/phpBB-ext-sitemaker/docs/en/developer-events">here</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="creating-a-sitemaker-block"></a><a href="#creating-a-sitemaker-block" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a SiteMaker block</h2>
<p>A phpBB SiteMaker block is simply a class that extends the blitze\sitemaker\services\blocks\driver\block class and returns an array from the &quot;display&quot; method with a 'title' and 'content'. Everything else inbetween is up to you.
To make your block discoverable by phpBB SiteMaker, you'll need to give it the &quot;sitemaker.block&quot; tag.</p>
<p>Say we have an extension with vendor/extension as my/example. To create a block called &quot;my_block&quot; for phpBB SiteMaker:</p>
<ul>
<li>Create a &quot;blocks&quot; folder</li>
<li>Create my_block.php file in the blocks folder with the following content</li>
</ul>
<pre><code class="hljs css language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">my</span>\<span class="hljs-title">example</span>\<span class="hljs-title">blocks</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">blitze</span>\<span class="hljs-title">sitemaker</span>\<span class="hljs-title">services</span>\<span class="hljs-title">blocks</span>\<span class="hljs-title">driver</span>\<span class="hljs-title">block</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">my_block</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">block</span>
</span>{
    <span class="hljs-comment">/**
     * {<span class="hljs-doctag">@inheritdoc</span>}
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display</span><span class="hljs-params">(array $settings, $edit_mode = false)</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'title'</span>     =&gt; <span class="hljs-string">'my block title'</span>,
            <span class="hljs-string">'content'</span>   =&gt; <span class="hljs-string">'my block content'</span>,
        );
    }
}
</code></pre>
<p>Then in your config.yml file, add the following:</p>
<pre><code class="hljs css language-yml"><span class="hljs-attr">services:</span>

    <span class="hljs-string">...</span>

    <span class="hljs-string">my.example.block.my_block:</span>
<span class="hljs-attr">        class:</span> <span class="hljs-string">my\example\blocks\my_block</span>
<span class="hljs-attr">        calls:</span>
<span class="hljs-bullet">            -</span> <span class="hljs-string">[set_name,</span> <span class="hljs-string">[my.example.block.my_block]]</span>
<span class="hljs-attr">        tags:</span>
<span class="hljs-bullet">            -</span> <span class="hljs-string">{</span> <span class="hljs-attr">name:</span> <span class="hljs-string">sitemaker.block</span> <span class="hljs-string">}</span>

    <span class="hljs-string">....</span>

</code></pre>
<p>At a bare minimum, that's all you need. If you go into edit mode, you should see the block listed as 'MY_EXAMPLE_BLOCK_MY_BLOCK' that can be dragged and dropped on any block position. But this block doesn't do anything exciting. It has not settings and does not translate the block name. Let's make it more interesting.</p>
<h3><a class="anchor" aria-hidden="true" id="block-settings"></a><a href="#block-settings" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Block Settings</h3>
<p>Let's modify our blocks/my_block.php file and add a &quot;get_config&quot; method that returns an array with the keys being the block settings and the values being an array describing the settings like so:</p>
<pre><code class="hljs css language-php">    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@inheritdoc</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_config</span><span class="hljs-params">(array $settings)</span>
    </span>{
        $options = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span> =&gt; <span class="hljs-string">'SOME_LANG_VAR'</span>, <span class="hljs-number">2</span> =&gt; <span class="hljs-string">'OTHER_LANG_VAR'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'legend1'</span>   =&gt; <span class="hljs-string">'TAB1'</span>,
            <span class="hljs-string">'checkbox'</span>  =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'lang'</span> =&gt; <span class="hljs-string">'SOME_LANG_VAR_1'</span>, <span class="hljs-string">'validate'</span> =&gt; <span class="hljs-string">'string'</span>, <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'checkbox'</span>, <span class="hljs-string">'options'</span> =&gt; $options, <span class="hljs-string">'default'</span> =&gt; <span class="hljs-keyword">array</span>(), <span class="hljs-string">'explain'</span> =&gt; <span class="hljs-keyword">false</span>),
            <span class="hljs-string">'yes_no'</span>    =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'lang'</span> =&gt; <span class="hljs-string">'SOME_LANG_VAR_2'</span>, <span class="hljs-string">'validate'</span> =&gt; <span class="hljs-string">'bool'</span>, <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'radio:yes_no'</span>, <span class="hljs-string">'explain'</span> =&gt; <span class="hljs-keyword">false</span>, <span class="hljs-string">'default'</span> =&gt; <span class="hljs-keyword">false</span>),
            <span class="hljs-string">'radio'</span>     =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'lang'</span> =&gt; <span class="hljs-string">'SOME_LANG_VAR_3'</span>, <span class="hljs-string">'validate'</span> =&gt; <span class="hljs-string">'bool'</span>, <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'radio'</span>, <span class="hljs-string">'options'</span> =&gt; $options, <span class="hljs-string">'explain'</span> =&gt; <span class="hljs-keyword">false</span>, <span class="hljs-string">'default'</span> =&gt; <span class="hljs-string">'topic'</span>),
            <span class="hljs-string">'select'</span>    =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'lang'</span> =&gt; <span class="hljs-string">'SOME_LANG_VAR_4'</span>, <span class="hljs-string">'validate'</span> =&gt; <span class="hljs-string">'string'</span>, <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'select'</span>, <span class="hljs-string">'options'</span> =&gt; $options, <span class="hljs-string">'default'</span> =&gt; <span class="hljs-string">''</span>, <span class="hljs-string">'explain'</span> =&gt; <span class="hljs-keyword">false</span>),
            <span class="hljs-string">'multi'</span>     =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'lang'</span> =&gt; <span class="hljs-string">'SOME_LANG_VAR_5'</span>, <span class="hljs-string">'validate'</span> =&gt; <span class="hljs-string">'string'</span>, <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'multi_select'</span>, <span class="hljs-string">'options'</span> =&gt; $options, <span class="hljs-string">'default'</span> =&gt; <span class="hljs-keyword">array</span>(), <span class="hljs-string">'explain'</span> =&gt; <span class="hljs-keyword">false</span>),
            <span class="hljs-string">'legend2'</span>   =&gt; <span class="hljs-string">'TAB2'</span>,
            <span class="hljs-string">'number'</span>    =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'lang'</span> =&gt; <span class="hljs-string">'SOME_LANG_VAR_6'</span>, <span class="hljs-string">'validate'</span> =&gt; <span class="hljs-string">'int:0:20'</span>, <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'number:0:20'</span>, <span class="hljs-string">'maxlength'</span> =&gt; <span class="hljs-number">2</span>, <span class="hljs-string">'explain'</span> =&gt; <span class="hljs-keyword">false</span>, <span class="hljs-string">'default'</span> =&gt; <span class="hljs-number">5</span>),
            <span class="hljs-string">'textarea'</span>  =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'lang'</span> =&gt; <span class="hljs-string">'SOME_LANG_VAR_7'</span>, <span class="hljs-string">'validate'</span> =&gt; <span class="hljs-string">'string'</span>, <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'textarea:3:40'</span>, <span class="hljs-string">'maxlength'</span> =&gt; <span class="hljs-number">2</span>, <span class="hljs-string">'explain'</span> =&gt; <span class="hljs-keyword">true</span>, <span class="hljs-string">'default'</span> =&gt; <span class="hljs-string">''</span>),
            <span class="hljs-string">'togglable'</span> =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'lang'</span> =&gt; <span class="hljs-string">'SOME_TOGGLABLE_VAR'</span>, <span class="hljs-string">'validate'</span> =&gt; <span class="hljs-string">'string'</span>, <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'select:1:0:toggle_key'</span>, <span class="hljs-string">'options'</span> =&gt; $options, <span class="hljs-string">'default'</span> =&gt; <span class="hljs-string">''</span>, <span class="hljs-string">'append'</span> =&gt; <span class="hljs-string">'&lt;div id="toggle_key-1"&gt;Only show when option 1 is selected&lt;/div&gt;'</span>),
        );
    }
</code></pre>
<p>This is constructed the same way that phpBB builds the configuration for board settings in ACP. You can see more examples <a href="https://github.com/phpbb/phpbb/blob/master/phpBB/includes/acp/acp_board.php">here</a>.</p>
<p>If you want a custom field type, you can see an example <a href="https://github.com/blitze/phpBB-ext-sitemaker_content/blob/develop/blocks/recent.php">here</a> ('content_type' setting).</p>
<p>Notice 'legend1' and 'legend2': These are used to separate the settings into tabs.</p>
<h3><a class="anchor" aria-hidden="true" id="naming-blocks"></a><a href="#naming-blocks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Naming Blocks</h3>
<p>The convention for block names is that the service name (e.g my.example.block.my_block above) will be used as the language key by replacing the dots (.) with underscore (_) (e.g MY_EXAMPLE_BLOCK_MY_BLOCK).</p>
<h3><a class="anchor" aria-hidden="true" id="translation"></a><a href="#translation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Translation</h3>
<p>Also notice that we have several language keys that need to be translated.
To do this, create a file named &quot;blocks_admin.php&quot; in your language folder.
This file will be automatically loaded when editing blocks, and should have translations for your blocks settings and block names.</p>
<pre><code class="hljs">$lang = array_merge($lang, <span class="hljs-keyword">array</span>(
    <span class="hljs-string">'SOME_LANG_VAR'</span>     =&gt; <span class="hljs-string">'Option 1'</span>,
    <span class="hljs-string">'OTHER_LANG_VAR'</span>    =&gt; <span class="hljs-string">'Option 2'</span>,
    <span class="hljs-string">'SOME_LANG_VAR_1'</span>   =&gt; <span class="hljs-string">'Setting 1'</span>,
    ....
    <span class="hljs-string">'MY_EXAMPLE_BLOCK_MY_BLOCK'</span> =&gt; <span class="hljs-string">'My Block'</span>,
);
</code></pre>
<p>Because 'blocks_admin.php' is only loaded when editing blocks, you will need to add other translations (e.g. block title) by loading a language file in your display method like so <code>$language-&gt;add_lang('my_lang_file', 'my/example');</code></p>
<h3><a class="anchor" aria-hidden="true" id="rendering-the-block"></a><a href="#rendering-the-block" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rendering the block</h3>
<p>The new block will only be displayed if it is rendering something.
Your block can return any string as content but in most cases, you need a template to render your content.
To render your block using templates, the block class inherits a 'ptemplate' property. So the display method might look something like this:</p>
<pre><code class="hljs css language-php">    <span class="hljs-comment">/**
     * {<span class="hljs-doctag">@inheritdoc</span>}
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display</span><span class="hljs-params">(array $data, $edit_mode = false)</span>
    </span>{
        <span class="hljs-keyword">if</span> ($edit_mode)
        {
            <span class="hljs-comment">// do something only in edit mode</span>
        }

        <span class="hljs-keyword">$this</span>-&gt;ptemplate-&gt;assign_vars(<span class="hljs-keyword">array</span>(
            <span class="hljs-string">'SOME_VAR'</span>  =&gt; $data[<span class="hljs-string">'settings'</span>][<span class="hljs-string">'checkbox'</span>],
        ));

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'title'</span>     =&gt; <span class="hljs-string">'MY_BLOCK_TITLE'</span>,
            <span class="hljs-string">'content'</span>   =&gt; <span class="hljs-keyword">$this</span>-&gt;ptemplate-&gt;render_view(<span class="hljs-string">'my/example'</span>, <span class="hljs-string">'my_block.html'</span>, <span class="hljs-string">'my_block'</span>),
        );
    }
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="block-assets"></a><a href="#block-assets" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Block Assets</h3>
<p>If your block needs to add assets (css/js) to the page, I recommend using the sitemaker <a href="https://github.com/blitze/phpBB-ext-sitemaker/blob/develop/services/util.php">util class</a> for that.
Since there can be more than one instance of the same block on the page, or other blocks might be adding the same asset, the util class ensures that the asset is only added ones.</p>
<pre><code class="hljs css language-php">        <span class="hljs-keyword">$this</span>-&gt;util-&gt;add_assets(<span class="hljs-keyword">array</span>(
            <span class="hljs-string">'js'</span>    =&gt; <span class="hljs-keyword">array</span>(
                <span class="hljs-string">'@my_example/assets/some.js'</span>,
                <span class="hljs-number">100</span> =&gt; <span class="hljs-string">'@my_example/assets/other.js'</span>,  <span class="hljs-comment">// set priority</span>
            ),
            <span class="hljs-string">'css'</span>   =&gt; <span class="hljs-keyword">array</span>(
                <span class="hljs-string">'@my_example/assets/some.css'</span>,
            )
        ));
</code></pre>
<p>The util class will, of course, need to be added to your service definitions in config.yml like so: <code>- '@blitze.sitemaker.util'</code> and defined in your block's constructor <code>\blitze\sitemaker\services\util $util</code>.</p>
<p>And that's it. We're done!</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2/15/2020 by Dmitry</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/phpBB-ext-sitemaker/docs/en/blocks-inheritance"><span class="arrow-prev">← </span><span>Understanding Block Inheritance</span></a><a class="docs-next button" href="/phpBB-ext-sitemaker/docs/en/developer-events"><span class="function-name-prevnext">phpBB SiteMaker Events</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#creating-a-sitemaker-block">Creating a SiteMaker block</a><ul class="toc-headings"><li><a href="#block-settings">Block Settings</a></li><li><a href="#naming-blocks">Naming Blocks</a></li><li><a href="#translation">Translation</a></li><li><a href="#rendering-the-block">Rendering the block</a></li><li><a href="#block-assets">Block Assets</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/phpBB-ext-sitemaker/" class="nav-home"></a><div><h5>Docs</h5><a href="/phpBB-ext-sitemaker/docs/en/introduction">User Guide</a><a href="/phpBB-ext-sitemaker/docs/en/developer-extensions">Developer Guide</a><a href="/phpBB-ext-sitemaker/docs/en/contrib-overview">Contribute</a></div><div><h5>Community</h5><a href="https://www.phpbb.com/customise/db/extension/phpbb_sitemaker_2/support">Project support page</a><a title="Crowdin" target="_blank" href="https://crowdin.com/project/phpbb-ext-sitemaker"><img src="https://d322cqt584bo4o.cloudfront.net/phpbb-ext-sitemaker/localized.svg"/></a></div><div><h5>More</h5><a href="/phpBB-ext-sitemaker/blog">Blog</a><a href="https://github.com/blitze" target="_blank">GitHub</a><a class="github-button" href="https://github.com/blitze/phpBB-ext-sitemaker" data-icon="octicon-star" data-count-href="/blitze/phpBB-ext-sitemaker/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2020 phpBB SiteMaker</section><div id="crowdjet-container" data-project-id="345963" data-language-code="" style="bottom:90px;right:20px"></div><div id="crowdjet-expand-container" style="bottom:10px;right:20px"></div></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'fecaa594ae467c72b7b00d16529b0028',
                indexName: 'phpbb',
                inputSelector: '#search_input_react'
              });
            </script></body></html>