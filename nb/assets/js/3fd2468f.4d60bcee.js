(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[697],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return p},kt:function(){return u}});var r=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,l=function(e,n){if(null==e)return{};var t,r,l={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=r.createContext({}),k=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},p=function(e){var n=k(e.components);return r.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=k(t),u=l,g=m["".concat(s,".").concat(u)]||m[u]||d[u]||i;return t?r.createElement(g,a(a({ref:n},p),{},{components:t})):r.createElement(g,a({ref:n},p))}));function u(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var i=t.length,a=new Array(i);a[0]=m;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:l,a[1]=o;for(var k=2;k<i;k++)a[k]=t[k];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},2136:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return k},toc:function(){return p},default:function(){return m}});var r=t(2122),l=t(9756),i=(t(7294),t(3905)),a=["components"],o={title:"Utvide phpBB SiteMaker",sidebar_position:1},s=void 0,k={unversionedId:"dev/overview",id:"dev/overview",isDocsHomePage:!1,title:"Utvide phpBB SiteMaker",description:"Du kan utvide/endre phpBB SiteMaker ved hjelp av tjeneste erstatting, servicedekorasjon, og phpBB's hendelsessystem. Du finner en liste over st\xf8ttede hendelser her.",source:"@site/i18n/nb/docusaurus-plugin-content-docs/current/dev/overview.md",sourceDirName:"dev",slug:"/dev/overview",permalink:"/phpBB-ext-sitemaker/nb/docs/dev/overview",editUrl:"https://crowdin.com/project/phpbb-ext-sitemaker/nb",version:"current",sidebarPosition:1,frontMatter:{title:"Utvide phpBB SiteMaker",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Tilpasse visning av blokker",permalink:"/phpBB-ext-sitemaker/nb/docs/user/site/block-modifiers"},next:{title:"phpBB SiteMaker Hendelser",permalink:"/phpBB-ext-sitemaker/nb/docs/dev/events"}},p=[{value:"Oppretter en SiteMaker-blokk",id:"oppretter-en-sitemaker-blokk",children:[{value:"Blokker innstillinger",id:"blokker-innstillinger",children:[]},{value:"Navngi blokker",id:"navngi-blokker",children:[]},{value:"Oversettelse",id:"oversettelse",children:[]},{value:"Gjengir blokken",id:"gjengir-blokken",children:[]},{value:"Blokker Eiendeler",id:"blokker-eiendeler",children:[]}]}],d={toc:p};function m(e){var n=e.components,t=(0,l.Z)(e,a);return(0,i.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Du kan utvide/endre phpBB SiteMaker ved hjelp av ",(0,i.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-replacement"},"tjeneste erstatting"),", ",(0,i.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-decoration"},"servicedekorasjon"),", og ",(0,i.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_events.html"},"phpBB's hendelsessystem"),". Du finner en liste over st\xf8ttede hendelser ",(0,i.kt)("a",{parentName:"p",href:"/phpBB-ext-sitemaker/nb/docs/dev/events"},"her"),"."),(0,i.kt)("h2",{id:"oppretter-en-sitemaker-blokk"},"Oppretter en SiteMaker-blokk"),(0,i.kt)("p",null,"En phpBB SiteMaker blokk er ganske enkelt en klasse som utvider blitze\\sitemaker\\services\\blocks\\driver\\block class og returnerer en array fra \"display\" metoden med en 'title' og 'content'. Alt annet i mellom er opp til deg. For \xe5 gj\xf8re blokken din synlig av phpBB SiteMaker, m\xe5 du gi den \"sitemaker.block\" -taggen."),(0,i.kt)("p",null,'Si at vi har en utvidelse med leverand\xf8r/utvidelse som min/eksempel. For \xe5 opprette en blokk kalt "my_block" for phpBB SiteMaker:'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'Opprett en "blocks" mappe'),(0,i.kt)("li",{parentName:"ul"},"Lag filen my_block.php i blokkmappen med f\xf8lgende innhold")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"navneomr\xe5de my\\example\\blocks;\n\nbruk blitze\\sitemaker\\services\\blocks\\driver\\block;\n\nklasse my_block utvider blokk\n{\n    /**\n     * {@inheritdoc}\n     */\n    public function display(array $settings $edit_mode = false)\n    {\n        returarray(\n            'title' => 'min blokktittel',\n            'content' => 'mitt blokkinnhold',\n        );\n    }\n}\n")),(0,i.kt)("p",null,"S\xe5 i din config.yml fil, legg til f\xf8lgende:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"Tjenester:\n\n...\n\n    mitt.example.block.my_block:\n        klasse: mitt\\example\\blocks\\my_block\n        calls:\n            - [set_name, [my.example.block.my_block]]\n        koder:\n            - { name: sitemaker.block }\n\n....\n\n")),(0,i.kt)("p",null,"P\xe5 et bart minimum er alt du trenger. Hvis du g\xe5r i redigeringsmodus, b\xf8r du se blokken listet som 'MY_EXAMPLE_BLOCK_MY_BLOCK' som kan dras og slippes p\xe5 en hvilken som helst blokkposisjon. Men denne blokken gj\xf8r ikke noe spennende. Den har ingen innstillinger og har ikke oversette blokknavnet. La oss gj\xf8re det mer interessant."),(0,i.kt)("h3",{id:"blokker-innstillinger"},"Blokker innstillinger"),(0,i.kt)("p",null,'La oss endre v\xe5re blokker/my_block. hp fil og legg til en "get_config" metode i \xe5 returnere en liste med tastene som blokkinnstillingene og verdiene som en liste beskriver innstillinger som:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"    /**\n     * @inheritdoc\n     */\n    offentlig funksjon get_config(array $settings)\n    {\n        $options = array(1 => 'SOME_LANG_VAR', 2 => 'OTHER_LANG_VAR');\n        returarray(\n            'legend1' => 'TAB1',\n            'checkbox' => array('lang' => 'SOME_LANG_VAR_1', 'valider' => 'streng', 'type' => 'avkrysningsboks', 'valg' => $options, 'standard' => matrise(), 'Forklarer' => false),\n            'yes_no' => array('lang' => 'SOME_LANG_VAR_2', 'validere' => 'bool', 'type' => 'radio:yes_no', 'Forklarer' => false, 'default' => usann),\n            'radio' => array('lang' => 'SOME_LANG_VAR_3', 'valider' => 'bool', 'type' => 'radio', 'valg' => $options, 'Forklarer' => usann, 'default' => 'emne'),\n            'valg' => array('lang' => 'SOME_LANG_VAR_4', 'valider' => 'string', 'type' => 'select', 'valg' => $options, 'default' => '', 'Forklarer' => usann),\n            'multi' => array('lang' => 'SOME_LANG_VAR_5', 'valider' => 'string', 'type' => 'multi_select', 'options' => $options, 'default' => array(), 'Forklarer' => usann),\n            'legend2' => 'TAB2',\n            'nummer' => array('lang' => 'SOME_LANG_VAR_6', 'Godkjenn' => 'int:0:20', 'type' => 'number:0:20', 'maxlength' => 2, 'Forklarer' => feil, 'standard' => 5),\n            'textarea' => array('lang' => 'SOME_LANG_VAR_7', 'valider' => 'string', 'type' => 'tekstfelt:3:40', 'makslengde' => 2, 'Forklarer' => sann, 'standard' => ''),\n            \xabaktiverbar\xbb => array('lang' => 'SOME_TOGGLABLE_VAR', 'valider' => 'string', 'type' => 'select:1:0:toggle_key', 'options' => $options, 'standard' => '', 'lagt til' => '<div id=\"toggle_key-1\">Vis bare n\xe5r valg 1 er valgt</div>'),\n\n}\n")),(0,i.kt)("p",null,"Denne er konstruert p\xe5 samme m\xe5te som phpBB bygger konfigurasjonen for bordinnstillinger i ACP. Du kan se flere eksempler ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/phpbb/phpbb/blob/master/phpBB/includes/acp/acp_board.php"},"her"),"."),(0,i.kt)("p",null,"Dersom du \xf8nsker en egendefinert felttype, kan du se et eksempel ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/blitze/phpBB-ext-sitemaker_content/blob/develop/blocks/recent.php"},"her")," ('content_type'-innstillingen."),(0,i.kt)("p",null,"Merk 'legend1' og 'legend2': Disse blir brukt til \xe5 skille innstillingene i faner."),(0,i.kt)("h3",{id:"navngi-blokker"},"Navngi blokker"),(0,i.kt)("p",null,"Konvensjonen om blokknavn er at tjenestenavnet (f.eks my.example.block. y",(0,i.kt)("em",{parentName:"p"},"blokk ovenfor) vil bli brukt som spr\xe5kkode ved \xe5 erstatte prikkene (.) med understreking ("),") (f.eks MY_EXAMPLE_BLOCK_MY_BLOCK)."),(0,i.kt)("h3",{id:"oversettelse"},"Oversettelse"),(0,i.kt)("p",null,'Legg ogs\xe5 merke til at vi har flere spr\xe5kn\xf8kler som m\xe5 oversettes. For \xe5 gj\xf8re dette, m\xe5 du opprette en fil som heter "blocks_admin.php" i spr\xe5kmappen. Denne filen vil automatisk bli lastet n\xe5r du redigerer blokker, og b\xf8r ha oversettelser for blokkene innstillingene og blokk\xe9r navn.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$lang = array_merge($lang, array(\n    'SOME_LANG_VAR' => 'Alternativ 1',\n    'OTHER_LANG_VAR' => 'Alternativ 2',\n    'SOME_LANG_VAR_1' => 'Innstilling 1',\n....\n    'MY_EXAMPLE_BLOCK_MY_BLOCK' => 'Min blokk',\n);\n")),(0,i.kt)("p",null,"Fordi 'blocks_admin.php' bare er lastet inn n\xe5r du redigerer blokker, m\xe5 du legge til andre oversettelser (f.eks. blokk tittel) ved \xe5 laste en spr\xe5kfil i din visningsmetode s\xe5 ",(0,i.kt)("inlineCode",{parentName:"p"},"$language->add_lang('my_lang_file', 'mitt/eksempel');")),(0,i.kt)("h3",{id:"gjengir-blokken"},"Gjengir blokken"),(0,i.kt)("p",null,"Den nye blokken vises bare hvis den gjengir noe. Blokken din kan returnere en streng som innhold, men du trenger i de fleste tilfeller en mal for \xe5 gjengi innholdet. For \xe5 gjengi blokka din bruk av maler, blokken m\xe5 returnere en liste med dataene du vil sende til malen, og ogs\xe5 implementere ",(0,i.kt)("inlineCode",{parentName:"p"},"get_template")," metoden som vist nedenfor:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"    /**\n     * @inheritdoc\n     */\n    offentlig funksjon get_config(array $settings)\n    {\n        $options = array(1 => 'SOME_LANG_VAR', 2 => 'OTHER_LANG_VAR');\n        returarray(\n            'legend1' => 'TAB1',\n            'some_setting' => array('lang' => 'SOME_LANG_VAR_1', 'valider' => 'streng', 'type' => 'avkrysningsboks', 'valg' => $options, 'standard' => matrise(), 'forklarende' => false),\n        );\n    }\n\n    /**\n     * {@inheritdoc}\n     */\n    offentlige funksjoner get_template()\n    {\n        return '@my_example/my_block. tml';\n    }\n\n    /**\n     * {@inheritdoc}\n     */\n    public function display(array $data, $edit_mode = false)\n    {\n        hvis ($edit_mode)\n        {\n            // gj\xf8r noe bare i redigeringsmodus\n        }\n\n        returarray(\n            'title' => 'MY_BLOCK_TITLE',\n            'data' => array(\n                'some_var' => $data['settings']['some_setting'],\n            ),\n        );\n}\n")),(0,i.kt)("p",null,"Deretter kan dine stiler/all/my_block.html eller styles/prosilver/my_block.html se omtrent slik ut:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"<p>Du valgte: {{ some_var }}</p>\n")),(0,i.kt)("p",null,"Kort fattet, blokken m\xe5 returnere en liste med en ",(0,i.kt)("inlineCode",{parentName:"p"},"tittel")," tast (for blokktittelen) og en ",(0,i.kt)("inlineCode",{parentName:"p"},"innhold")," n\xf8kkel (hvis blokken akkurat viser en streng og ikke bruker en mal) eller en ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," n\xf8kkel (hvis blokken bruker en mal i s\xe5 fall m\xe5 du ogs\xe5 implementere metoden, ",(0,i.kt)("inlineCode",{parentName:"p"},"get_template"),")."),(0,i.kt)("h3",{id:"blokker-eiendeler"},"Blokker Eiendeler"),(0,i.kt)("p",null,"Hvis blokken din trenger \xe5 legge til eiendeler (css/js) til siden, anbefaler jeg \xe5 bruke sitemaker ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/blitze/phpBB-ext-sitemaker/blob/develop/services/util.php"},"util klasse")," for det. Siden det kan v\xe6re mer enn \xe9n forekomst av samme blokk p\xe5 siden, eller andre blokker kan legge til samme aktivum, util klassen sikrer at aktivumet bare blir lagt til."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"        $this->benytt->add_assets(array(\n            'js' => array(\n                '@my_example/assets/som. s',\n                100 => '@my_example/assets/other. s', // sett prioritet\n            ),\n            'css' => array(\n                '@my_example/assets/som. s',\n            )\n));\n")),(0,i.kt)("p",null,"Selvsagt m\xe5 util klassen dine legges til i tjenestedefinisjonene dine i config.yml: ",(0,i.kt)("inlineCode",{parentName:"p"},"- '@blitze.sitemaker. til'")," og definert i din blokks konstrukt\xf8r ",(0,i.kt)("inlineCode",{parentName:"p"},"\\blitze\\sitemaker\\services\\util $util"),"."),(0,i.kt)("p",null,"Og det er det. Vi er ferdig!"))}m.isMDXComponent=!0}}]);