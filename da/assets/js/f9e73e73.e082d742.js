(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[209],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return p},kt:function(){return m}});var r=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,l=function(e,n){if(null==e)return{};var t,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=r.createContext({}),d=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=d(e.components);return r.createElement(s.Provider,{value:n},e.children)},k={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,l=e.mdxType,a=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=d(t),m=l,c=u["".concat(s,".").concat(m)]||u[m]||k[m]||a;return t?r.createElement(c,i(i({ref:n},p),{},{components:t})):r.createElement(c,i({ref:n},p))}));function m(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var a=t.length,i=new Array(a);i[0]=u;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var d=2;d<a;d++)i[d]=t[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},352:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return d},toc:function(){return p},default:function(){return u}});var r=t(2122),l=t(9756),a=(t(7294),t(3905)),i=["components"],o={title:"Udvidelse af phpBB SiteMaker",sidebar_position:1},s=void 0,d={unversionedId:"dev/overview",id:"dev/overview",isDocsHomePage:!1,title:"Udvidelse af phpBB SiteMaker",description:"Du kan udvide/\xe6ndre phpBB SiteMaker ved hj\xe6lp af service udskiftning, service dekorationog phpBB's event system. Du kan finde en liste over underst\xf8ttede begivenheder her.",source:"@site/i18n/da/docusaurus-plugin-content-docs/current/dev/overview.md",sourceDirName:"dev",slug:"/dev/overview",permalink:"/phpBB-ext-sitemaker/da/docs/dev/overview",editUrl:"https://crowdin.com/project/phpbb-ext-sitemaker/da",version:"current",sidebarPosition:1,frontMatter:{title:"Udvidelse af phpBB SiteMaker",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Tilpasning Af Blokkevisning",permalink:"/phpBB-ext-sitemaker/da/docs/user/site/block-modifiers"},next:{title:"phpBB SiteMaker begivenheder",permalink:"/phpBB-ext-sitemaker/da/docs/dev/events"}},p=[{value:"Opretter en SiteMaker blok",id:"opretter-en-sitemaker-blok",children:[{value:"Bloker Indstillinger",id:"bloker-indstillinger",children:[]},{value:"Navnende Blokke",id:"navnende-blokke",children:[]},{value:"Overs\xe6ttelse",id:"overs\xe6ttelse",children:[]},{value:"Gengiver blokken",id:"gengiver-blokken",children:[]},{value:"Aktiver Blok",id:"aktiver-blok",children:[]}]}],k={toc:p};function u(e){var n=e.components,t=(0,l.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},k,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Du kan udvide/\xe6ndre phpBB SiteMaker ved hj\xe6lp af ",(0,a.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-replacement"},"service udskiftning"),", ",(0,a.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-decoration"},"service dekoration"),"og ",(0,a.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_events.html"},"phpBB's event system"),". Du kan finde en liste over underst\xf8ttede begivenheder ",(0,a.kt)("a",{parentName:"p",href:"/phpBB-ext-sitemaker/da/docs/dev/events"},"her"),"."),(0,a.kt)("h2",{id:"opretter-en-sitemaker-blok"},"Opretter en SiteMaker blok"),(0,a.kt)("p",null,"En phpBB SiteMaker blok er blot en klasse, der udvider blitze\\sitemaker\\services\\blocks\\driver\\block class og returnerer et array fra \"display\" metoden med en 'titel' og 'indhold'. Alt andet mellem er op til jer. For at g\xf8re din blok synlig af phpBB SiteMaker, skal du give det \"sitemaker.block\" tag."),(0,a.kt)("p",null,'Sig at vi har en forl\xe6ngelse med s\xe6lger/udvidelse som min/eksempel. For at oprette en blok kaldet "my_block" til phpBB SiteMaker:'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},'Opret en "blokke" mappe'),(0,a.kt)("li",{parentName:"ul"},"Opret my_block.php-fil i blokmappen med f\xf8lgende indhold")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"namespace min\\example\\blocks;\n\nbrug blitze\\sitemaker\\services\\blocks\\driver\\block;\n\nklasse my_block udvider blok\n{\n    /**\n     * {@inheritdoc}\n     */\n    public function display(array $settings, $edit_mode = false)\n    {\n        return array(\n            'titel' => 'min blok titel',\n            'indhold' => 'mit blokindhold',\n        );\n    }\n}\n")),(0,a.kt)("p",null,"Derefter i din config.yml fil, tilf\xf8je f\xf8lgende:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yml"},"tjenesteydelser:\n\n...\n\n    my.example.block.my_block:\n        class: my\\example\\blocks\\my_block\n        calls:\n            - [set_name, [my.example.block.my_block]]\n        tags:\n            - { name: sitemaker.block }\n\n....\n\n")),(0,a.kt)("p",null,"P\xe5 et minimum, det er alt hvad du beh\xf8ver. Hvis du g\xe5r ind i redigeringstilstand, skal du se blokken opf\xf8rt som 'MY_EXAMPLE_BLOCK_MY_BLOCK', der kan tr\xe6kkes og slippes p\xe5 en hvilken som helst blokposition. Men denne blok g\xf8r ikke noget sp\xe6ndende. Det har ingen indstillinger og overs\xe6tter ikke blokkens navn. Lad os g\xf8re det mere interessant."),(0,a.kt)("h3",{id:"bloker-indstillinger"},"Bloker Indstillinger"),(0,a.kt)("p",null,'Lad os \xe6ndre vores blokke/my_block. hp fil og tilf\xf8je en "get_config" metode th p\xe5 returnerer et array med tasterne er blokken indstillinger og v\xe6rdierne er et array der beskriver indstillingerne som s\xe5:'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"    /**\n     * @inheritdoc\n     */\n    public function get_config(array $settings)\n    {\n        $options = array(1 => 'SOME_LANG_VAR', 2 => 'OTHER_LANG_VAR');\n        returarray(\n            'legend1' => 'TAB1',\n            'checkbox' => array('lang' => 'SOME_LANG_VAR_1', 'validate' => 'streng', 'type' => 'checkbox', 'indstillinger' => $options, 'default' => array(), 'explain' => false)\n            'yes_no' => array('lang' => 'SOME_LANG_VAR_2', 'validate' => 'bool', 'type' => 'radio:yes_no', 'explain' => false, 'default' => false)\n            'radio' => array('lang' => 'SOME_LANG_VAR_3', 'validate' => 'bool', 'type' => 'radio', 'options' => $options, 'explain' => false, 'default' => 'emne'),\n            'select' => array('lang' => 'SOME_LANG_VAR_4', 'validate' => 'streng', 'type' => 'select', 'options' => $options, 'default' => '', 'explain' => false)\n            'multi' => array('lang' => 'SOME_LANG_VAR_5', 'validate' => 'streng', 'type' => 'multi_select', 'indstillinger' => $options, 'default' => array(), 'explain' => false),\n            'legend2' => 'TAB2',\n            'tal' => array('lang' => 'SOME_LANG_VAR_6', 'validate' => 'int:0:20', 'type' => 'number:0:20', 'maxlength' => 2, 'explain' => false, 'default' => 5),\n            'textarea' => array('lang' => 'SOME_LANG_VAR_7', 'validate' => 'streng', 'type' => 'textarea:3:40', 'maxlength' => 2, 'explain' => true 'default' => ''),\n            'togglable' => array('lang' => 'SOME_TOGGLABLE_VAR', 'validate' => 'streng', 'type' => 'select:1:0:toggle_key', 'options' => $options, 'default' => '', 'append' => '<div id=\"toggle_key-1\">Vis kun, n\xe5r indstilling 1 er valgt</div>'),\n        );\n}\n")),(0,a.kt)("p",null,"Dette er konstrueret p\xe5 samme m\xe5de, som phpBB bygger konfiguration for board indstillinger i ACP. Du kan se flere eksempler ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/phpbb/phpbb/blob/master/phpBB/includes/acp/acp_board.php"},"her"),"."),(0,a.kt)("p",null,"Hvis du vil have en brugerdefineret felttype, kan du se et eksempel ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/blitze/phpBB-ext-sitemaker_content/blob/develop/blocks/recent.php"},"her")," ('content_type' indstilling)."),(0,a.kt)("p",null,"Bem\xe6rk 'legend1' og 'legend2': Disse bruges til at adskille indstillingerne i faneblade."),(0,a.kt)("h3",{id:"navnende-blokke"},"Navnende Blokke"),(0,a.kt)("p",null,"Konventionen for bloknavne er, at tjenestenavnet (f.eks. my.example.block. y",(0,a.kt)("em",{parentName:"p"},"blok ovenfor) vil blive brugt som sprogn\xf8glen ved at erstatte prikker (.) med understregning ("),") (f.eks MY_EXAMPLE_BLOCK_MY_BLOCK)."),(0,a.kt)("h3",{id:"overs\xe6ttelse"},"Overs\xe6ttelse"),(0,a.kt)("p",null,'Bem\xe6rk ogs\xe5, at vi har flere sprogn\xf8gler, der skal overs\xe6ttes. For at g\xf8re dette skal du oprette en fil med navnet "blocks_admin.php" i din sprogmappe. Denne fil vil automatisk blive indl\xe6st, n\xe5r du redigerer blokke, og b\xf8r have overs\xe6ttelser til dine blokindstillinger og blokere navne.'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$lang = array_merge($lang, array(\n    'SOME_LANG_VAR' => 'Option 1',\n    'OTHER_LANG_VAR' => 'Option 2',\n    'SOME_LANG_VAR_1' => 'Indstilling 1',\n....\n    'MY_EXAMPLE_BLOCK_MY_BLOCK' => 'Min Block',\n);\n")),(0,a.kt)("p",null,"Da 'blocks_admin.php' kun indl\xe6ses ved redigering af blokke, skal du tilf\xf8je andre overs\xe6ttelser (f.eks. blok titel) ved at indl\xe6se en sprogfil i din visningsmetode som ",(0,a.kt)("inlineCode",{parentName:"p"},"$language->add_lang('my_lang_file', 'my/example');")),(0,a.kt)("h3",{id:"gengiver-blokken"},"Gengiver blokken"),(0,a.kt)("p",null,"Den nye blok vil kun blive vist, hvis den gengiver noget. Din blok kan returnere enhver streng som indhold, men i de fleste tilf\xe6lde har du brug for en skabelon for at gengive dit indhold. For at vise din blok ved hj\xe6lp af skabeloner, blokken skal returnere et array, der indeholder de data, du \xf8nsker at videregive til skabelonen, og skal ogs\xe5 implementere ",(0,a.kt)("inlineCode",{parentName:"p"},"get_template")," -metoden som vist nedenfor:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"    /**\n     * @inheritdoc\n     */\n    public function get_config(array $settings)\n    {\n        $options = array(1 => 'SOME_LANG_VAR', 2 => 'OTHER_LANG_VAR');\n        returarray(\n            'legend1' => 'TAB1',\n            'some_setting' => array('lang' => 'SOME_LANG_VAR_1', 'validate' => 'streng', 'type' => 'checkbox', 'indstillinger' => $options, 'default' => array(), 'explain' => false),\n        );\n    }\n\n    /**\n     * {@inheritdoc}\n     */\n    public function get_template()\n    {\n        return '@my_example/my_block. tml';\n    }\n\n    /**\n     * {@inheritdoc}\n     */\n    public function display(array $data, $edit_mode = false)\n    {\n        if ($edit_mode)\n        {\n            // g\xf8r noget kun i redigeringstilstand\n        }\n\n        returarray(\n            'title' => 'MY_BLOCK_TITLE',\n            'data' => array(\n                'some_var' => $data['settings']['some_setting'],\n            ),\n        );\n}\n")),(0,a.kt)("p",null,"S\xe5 kan din stil/all/my_block.html eller stil/prosilver/my_block.html fil se s\xe5dan ud:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"<p>Du valgte: {{ some_var }}</p>\n")),(0,a.kt)("p",null,"Sammenfattende din blok skal returnere et array med en ",(0,a.kt)("inlineCode",{parentName:"p"},"titel")," -n\xf8gle (for blokkens titel) og en ",(0,a.kt)("inlineCode",{parentName:"p"},"indholds")," -n\xf8gle (hvis blokken bare viser en streng og ikke bruger en skabelon) eller en ",(0,a.kt)("inlineCode",{parentName:"p"},"-data-")," -n\xf8gle (hvis blokken bruger en skabelon, i hvilket tilf\xe6lde skal du ogs\xe5 implementere ",(0,a.kt)("inlineCode",{parentName:"p"},"get_template")," metoden)."),(0,a.kt)("h3",{id:"aktiver-blok"},"Aktiver Blok"),(0,a.kt)("p",null,"Hvis din blok har brug for at tilf\xf8je aktiver (css/js) til siden, anbefaler jeg at bruge sitemaker ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/blitze/phpBB-ext-sitemaker/blob/develop/services/util.php"},"util class")," for at. Da der kan v\xe6re mere end en instans af den samme blok p\xe5 siden, eller andre blokke kan v\xe6re at tilf\xf8je det samme aktiv, util klassen sikrer, at aktivet kun er tilf\xf8jet."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"        $this->util->add_assets(array(\n            'js' => array(\n                '@my_example/assets/some. s',\n                100 => '@my_example/assets/other. s', // fastsat prioritet\n            ),\n            'css' => array(\n                '@my_example/assets/some. ss',\n            )\n));\n")),(0,a.kt)("p",null,"Den util klasse vil naturligvis skal f\xf8jes til din service definitioner i config.yml som s\xe5: ",(0,a.kt)("inlineCode",{parentName:"p"},"- '@blitze.sitemaker. til'")," og defineret i din bloks konstrukt\xf8r ",(0,a.kt)("inlineCode",{parentName:"p"},"\\blitze\\sitemaker\\services\\util $util"),"."),(0,a.kt)("p",null,"Og det er det. Vi er f\xe6rdig!"))}u.isMDXComponent=!0}}]);