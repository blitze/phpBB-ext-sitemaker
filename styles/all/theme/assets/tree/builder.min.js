(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["tree/builder"],{

/***/ "./develop/components/BtnGrpDrop/index.js":
/*!************************************************!*\
  !*** ./develop/components/BtnGrpDrop/index.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return BtnGrpDrop; });
/* harmony import */ var _Button_button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Button/button */ "./develop/components/Button/button.js");
/* harmony import */ var _OutsideClick__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../OutsideClick */ "./develop/components/OutsideClick/index.js");


function BtnGrpDrop(selector) {
  var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'down';
  var onShow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;
  var $dropBtn = Object(_Button_button__WEBPACK_IMPORTED_MODULE_0__["default"])(selector, {
    text: false,
    icons: {
      primary: 'ui-icon-triangle-1-s'
    }
  }, function (e) {
    e.preventDefault();
    var $button = $(e.currentTarget);
    $button.closest('.bulk-dropdown').find(selector).not($button).filter('.dropped').each(function (i, el) {
      $(el).removeClass('dropped').parent().next().hide();
    });
    $button.toggleClass('dropped').blur();
    var $dropdown = $button.parent().next();
    var width = $dropdown.width();
    var height = $dropdown.height();
    var pos = $button.offset();
    var offset;

    if (dir === 'down') {
      offset = {
        top: pos.top + $button.height() + 10,
        left: pos.left - width / 2 + $button.width()
      };
    } else {
      offset = {
        top: pos.top - height,
        left: pos.left - width / 2 - $button.width()
      };
    }

    $dropdown.slideToggle().offset(offset);

    if (typeof onShow === 'function' && $button.hasClass('dropped')) {
      onShow();
    }
  });
  var $dropdownDiv = $dropBtn.parent().buttonset().next();
  Object(_OutsideClick__WEBPACK_IMPORTED_MODULE_1__["default"])($dropdownDiv, function () {
    $dropBtn.removeClass('dropped');
    $dropdownDiv.slideUp();
  });
  return $dropBtn;
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./develop/components/Icons/picker.js":
/*!********************************************!*\
  !*** ./develop/components/Icons/picker.js ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var jquery_ui_ui_widgets_tabs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery-ui/ui/widgets/tabs */ "./node_modules/jquery-ui/ui/widgets/tabs.js");
/* harmony import */ var jquery_ui_ui_widgets_tabs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widgets_tabs__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jquery_ui_themes_base_core_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery-ui/themes/base/core.css */ "./node_modules/jquery-ui-themes/themes/smoothness/jquery-ui.css");
/* harmony import */ var jquery_ui_themes_base_core_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_themes_base_core_css__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jquery_ui_themes_base_theme_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery-ui/themes/base/theme.css */ "./node_modules/jquery-ui-themes/themes/smoothness/theme.css");
/* harmony import */ var jquery_ui_themes_base_theme_css__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_themes_base_theme_css__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jquery_ui_themes_base_tabs_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery-ui/themes/base/tabs.css */ "./node_modules/jquery-ui/themes/base/tabs.css");
/* harmony import */ var jquery_ui_themes_base_tabs_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_themes_base_tabs_css__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _OutsideClick__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../OutsideClick */ "./develop/components/OutsideClick/index.js");
/* harmony import */ var _picker_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./picker.scss */ "./develop/components/Icons/picker.scss");
/* harmony import */ var _picker_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_picker_scss__WEBPACK_IMPORTED_MODULE_5__);
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/*!
 * Sitemaker iconPicker
 * Author: @blitze
 * Licensed under the GPL license
 */






var pluginName = 'iconPicker';
var dataPlugin = "plugin_".concat(pluginName);
var defaults = {
  selector: '',
  width: '350px',
  onSelect: function onSelect() {}
};
var currentItem = {}; // The actual plugin constructor

var Plugin = function constructor($element) {
  this.options = $.extend({}, defaults);
  this.$container = $element;
};

Plugin.prototype = {
  init: function init(options) {
    var _this = this;

    this.selectedIcon = '';
    this.$iconsDiv = $('#icon-picker');
    this.$iconsSearch = this.$iconsDiv.find('#icons-search');
    this.$fontList = this.$iconsDiv.find('#icons-font-list');
    this.$icons = this.$fontList.find('.filter-icon');
    this.$colorBoxes = this.$iconsDiv.find('.icons-color-container');
    this.$customization = this.$iconsDiv.find('#icon-customization');
    this.$preview = this.$iconsDiv.find('#icon-picker-preview');
    $.extend(this.options, options);
    this.$container.on('click', this.options.selector, function (e) {
      e.preventDefault();
      e.stopPropagation();
      var $element = $(e.currentTarget);

      if (!_this.$element || _this.$element.context !== $element.context) {
        _this.showPicker($element);

        var $iconCats = _this.$fontList.find('.icon-cat');

        var height = $iconCats.eq(0).height(); // create cache of icon cats and their heights relative to the top of the icons list container
        // we only do this once

        _this.catsCache = _this.catsCache || $iconCats.map(function (i, el) {
          var $category = $(el);

          var _$category$position = $category.position(),
              top = _$category$position.top;

          return {
            id: $category.attr('id'),
            top: top,
            bottom: top + height
          };
        }).get();
      } else {
        _this.hidePicker();
      }
    });
    this.$icons.find('i').click(function (e) {
      e.preventDefault();
      e.stopImmediatePropagation();

      _this.selectIcon($(e.currentTarget));
    });
    this.$iconsSearch.keyup(function (e) {
      var keyword = $(e.currentTarget).val();

      if (keyword.length) {
        _this.$icons.hide().filter("div[data-filter*=\"".concat(keyword, "\"]")).show();
      } else {
        _this.$icons.show();
      }
    });
    var $categoriesList = this.$iconsDiv.width(this.options.width).find('#icons-font-cat-list').change(function (e) {
      e.preventDefault();

      _this.$iconsSearch.val('');

      _this.$icons.show();

      _this.scrollToIcon($($(e.target).find(':selected').val()));
    });
    this.$fontList.on('scroll', function () {
      if (!_this.$iconsSearch.val().length) {
        // find icon cat that is in viewport
        var category = _this.catsCache.find(function (cat) {
          return _this.isInViewport(cat);
        });

        if (category) {
          $categoriesList.val("#".concat(category.id));
        }
      }
    });
    this.$iconsDiv.find('#icon-picker-insert').click(function (e) {
      e.preventDefault();
      e.stopImmediatePropagation();

      _this.insertIcon(_this.selectedIcon);
    });
    this.$iconsDiv.find('#icon-picker-none').click(function (e) {
      e.preventDefault();
      e.stopImmediatePropagation();

      _this.insertIcon('');
    });
    this.$customization.find('.icons-customize').change(function (e) {
      e.preventDefault();

      _this.previewIcon();
    });
    this.$colorBoxes.click(function (e) {
      e.preventDefault();

      _this.$colorBoxes.removeClass('selected');

      $(e.currentTarget).addClass('selected').next().prop('checked', 'checked').trigger('click');

      _this.previewIcon();
    });
    var $tabs = $('#icons-tab').tabs().parent(); // fix the classes

    var tabsBottomSelector = '.icons-bottom-tabs .ui-tabs-nav, .icons-bottom-tabs .ui-tabs-nav > *';
    $tabs.find(tabsBottomSelector).removeClass('ui-corner-all ui-corner-top').addClass('ui-corner-bottom'); // move the nav to the bottom

    $tabs.find('.icons-bottom-tabs .ui-tabs-nav').appendTo('.icons-bottom-tabs');
    this.hidePicker = this.hidePicker.bind(this);
    Object(_OutsideClick__WEBPACK_IMPORTED_MODULE_4__["default"])(this.$iconsDiv, this.hidePicker);
  },
  isInViewport: function isInViewport(cat) {
    var viewportTop = this.$fontList.scrollTop();
    var viewportBottom = viewportTop + this.$fontList.height() / 2;
    return cat.bottom > viewportTop && cat.top < viewportBottom;
  },
  getIconProps: function getIconProps(iconClass) {
    var classes = [];

    if (iconClass) {
      classes.push(iconClass);
      $.each(this.$customization.serializeArray(), function (i, field) {
        if (field.value) {
          classes.push(field.value);
        }
      });
    }

    return classes.join(' ');
  },
  insertIcon: function insertIcon(icon) {
    if ($.isEmptyObject(currentItem) !== true) {
      var iconClass = this.getIconProps(icon);
      var iconHtml = iconClass ? "<i class=\"".concat(iconClass, "\" aria-hidden=\"true\"></i>") : '';
      currentItem.html(iconHtml);
      this.options.onSelect.call(this, currentItem, iconClass, iconHtml);
    }

    this.hidePicker();
  },
  previewIcon: function previewIcon() {
    this.$preview.children('i').attr('class', this.getIconProps(this.selectedIcon));
  },
  selectIcon: function selectIcon($element) {
    this.$fontList.find('a').removeClass('icon-selected');
    this.selectedIcon = $element.attr('class');
    this.previewIcon(this.selectedIcon);
    $element.parent().addClass('icon-selected');
  },
  setCurrentIcon: function setCurrentIcon($element) {
    var $currIcon = $element.find('i');
    var $settings = this.$customization.find(':input').removeAttr('checked').removeAttr('selected');
    this.$colorBoxes.removeClass('selected');
    this.$fontList.find('a').removeClass('icon-selected');
    this.selectedIcon = '';

    if ($currIcon.length) {
      var iconInfo = $currIcon.attr('class').trim().split(' ');
      var prefix = iconInfo.shift();
      var iconClass = iconInfo.shift();
      var $icon = this.$fontList.find(".".concat(iconClass)).eq(0);

      if ($icon.length > 0) {
        $icon.parent().addClass('icon-selected');
        this.selectedIcon = "".concat(prefix, " ").concat(iconClass);
        this.scrollToIcon($icon, true);
        var $selects = $settings.filter('select').children();
        var $inputs = $settings.not('select');
        $.each(iconInfo, function (i, val) {
          $inputs.filter("[value=".concat(val, "]")).attr('checked', true);
          $selects.filter("[value=".concat(val, "]")).parent().val(val);
        });
        var $color = this.$customization.find('input[name=color]:checked');

        if ($color.length > 0) {
          $color.prev().addClass('selected');
        }
      }
    }

    this.previewIcon();
  },
  showPicker: function showPicker($element) {
    var pos = $element.offset();
    var height = $element.height();
    $element.removeClass('icons-drop');
    this.$iconsDiv.slideDown().offset({
      top: pos.top + height,
      left: pos.left - 15
    });
    this.setCurrentIcon($element);
    this.$element = $element;
    currentItem = $element.addClass('icons-drop');
  },
  hidePicker: function hidePicker() {
    if (this.$element) {
      this.$iconsDiv.slideUp();
      this.$element.removeClass('icons-drop');
      this.$element = undefined;
    }
  },
  scrollToIcon: function scrollToIcon($element, center) {
    var adjustment = 0;

    if (center) {
      adjustment = -(this.$fontList.height() / 2);
    }

    this.$fontList.animate({
      scrollTop: this.$fontList.scrollTop() + $element.position().top + adjustment
    }, 1000);
  },
  destroy: function destroy() {
    this.$element.data(dataPlugin, null);
  }
};

$.fn[pluginName] = function pluginInstance(arg) {
  if (!(this.data(dataPlugin) instanceof Plugin)) {
    this.data(dataPlugin, new Plugin(this));
  }

  var instance = this.data(dataPlugin);

  if (instance !== undefined) {
    instance.element = this;

    if (typeof arg === 'undefined' || _typeof(arg) === 'object') {
      if (typeof instance.init === 'function') {
        instance.init(arg);
      }
    } else if (typeof arg === 'string' && typeof instance[arg] === 'function') {
      for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        rest[_key - 1] = arguments[_key];
      }

      return instance[arg].apply(instance, [arg].concat(rest));
    } else {
      $.error("Method ".concat(arg, " does not exist on jQuery.").concat(pluginName));
    }
  }

  return this;
};
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./develop/components/Icons/picker.scss":
/*!**********************************************!*\
  !*** ./develop/components/Icons/picker.scss ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./develop/components/OutsideClick/index.js":
/*!**************************************************!*\
  !*** ./develop/components/OutsideClick/index.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return OutsideClick; });
function OutsideClick($element, handleOutsideClick) {
  $(document.body).click(function (e) {
    if ($element.is(':visible') && $element.html().indexOf(e.target.innerHTML) < 0) {
      handleOutsideClick();
    }
  });
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./develop/components/Tree/Add/index.js":
/*!**********************************************!*\
  !*** ./develop/components/Tree/Add/index.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return AddBtn; });
/* harmony import */ var _Button_button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Button/button */ "./develop/components/Button/button.js");
/* eslint-disable no-underscore-dangle */

var _window = window,
    lang = _window.lang;
function AddBtn(tree, $editDialog) {
  var $addBtn = Object(_Button_button__WEBPACK_IMPORTED_MODULE_0__["default"])(tree.options.addBtn, {
    icons: {
      primary: 'ui-icon-plus'
    }
  }, function () {
    if (tree.options.dialogEdit.length) {
      tree._populateForm();

      $editDialog.dialog('option', 'title', lang.addNode).dialog('open');
    } else {
      tree.addItem();
    }
  });
  tree.addBtnOffset = $addBtn.offset();
}

/***/ }),

/***/ "./develop/components/Tree/Bulk/index.js":
/*!***********************************************!*\
  !*** ./develop/components/Tree/Bulk/index.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return AddBulkBtn; });
/* harmony import */ var _Button_button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Button/button */ "./develop/components/Button/button.js");
/* harmony import */ var _BtnGrpDrop__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../BtnGrpDrop */ "./develop/components/BtnGrpDrop/index.js");
/* eslint-disable no-underscore-dangle */


var _window = window,
    lang = _window.lang;
function AddBulkBtn(tree) {
  function getOptions($list, padding, options) {
    $list.children('li').each(function (i, element) {
      var $item = $(element);

      var id = tree._getItemId($item);

      var title = "".concat(padding, "&#x251c;&#x2500; ").concat($item.find('.editable:first').text());
      var option = "<option value=\"".concat(id, "\">").concat(title, "</option>");
      options += getOptions($item.children('ol'), "&nbsp;&nbsp;&nbsp;&nbsp;".concat(padding), option);
    });
    return options;
  }

  var codeMirror;
  var $textarea = $(tree.options.addBulkList);
  var $addBulkBtn = Object(_BtnGrpDrop__WEBPACK_IMPORTED_MODULE_1__["default"])(tree.options.addBulkBtn, 'down', function () {
    __webpack_require__.e(/*! import() | codemirror/codemirror */ "codemirror/codemirror").then(__webpack_require__.bind(null, /*! ../../CodeMirror */ "./develop/components/CodeMirror/index.js")).then(function (_ref) {
      var CodeMirror = _ref.default,
          initCodeMirror = _ref.initCodeMirror,
          insertText = _ref.insertText;

      if (!$textarea.next().hasClass('CodeMirror')) {
        codeMirror = initCodeMirror(tree.options.addBulkList);
        var cmTabs = 0;
        codeMirror.on('keyup', function (cm) {
          var doc = cm.getDoc();
          var line = doc.getLine(cm.getCursor().line);
          var matches = line.match(/\s/gim);
          cmTabs = matches ? matches.length : 0;
        });
        codeMirror.on('change', function (cm, change) {
          var spaces = cmTabs * cm.options.tabSize;
          cm.operation(function () {
            for (var line = change.from.line + 1, end = CodeMirror.changeEnd(change).line; line <= end; line += 1) {
              cm.indentLine(line, spaces);
            }
          });
        });
        Object(_Button_button__WEBPACK_IMPORTED_MODULE_0__["default"])('.bulk-type', {}, function (e) {
          e.preventDefault();
          var itemsStr = $(e.currentTarget).data('items').trim();
          insertText(codeMirror, itemsStr, true);
        }).each(function (i, element) {
          var list = [];
          var $type = $(element);
          var items = $type.data('items').trim().split('\n');
          $.each(items, function (j, item) {
            var parts = item.split('|');
            var title = parts[0].replace(/\t/g, '&nbsp; &nbsp;');
            list.push("<a href=\"#\" data-item=\"".concat(item, "\">").concat(title, "</a>"));
          });
          $type.parent().next('.bulk-dropdown').children('.inner').html(list.join('\n'));
        });
        Object(_BtnGrpDrop__WEBPACK_IMPORTED_MODULE_1__["default"])('.bulk-type-list', 'up');
        $('.bulk-type-items').on('click', 'a', function (e) {
          e.preventDefault();
          var $item = $(e.currentTarget);
          insertText(codeMirror, $item.data('item').trim(), true);
          $item.parents('.bulk-type-items').toggle();
        });
      } else {
        // reset codemirror
        codeMirror.setValue('');
        codeMirror.clearHistory();
      }
    });
    var options = "<option value=\"0\">".concat(lang.none, "</option>");
    $addBulkBtn.parent().next().find('select').html(getOptions(tree.nestedList, '', options)).next().val();
  });
  $('.toggle-view').click(function (e) {
    e.preventDefault();
    $($(e.currentTarget).attr('href')).slideToggle();
  });
  $addBulkBtn.parent().show().next().find('#cancel').click(function () {
    return $addBulkBtn.trigger('click');
  }).next().click(function (e) {
    e.preventDefault();
    var data = {
      add_list: codeMirror.getValue()
    };
    var $form = $(e.target).closest('form');
    data[tree.options.fields.parentId] = $form.find('#parent_id').val();

    tree._addBulk($.param(data));

    $addBulkBtn.trigger('click');
  });
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./develop/components/Tree/Delete/index.js":
/*!*************************************************!*\
  !*** ./develop/components/Tree/Delete/index.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DeleteItem; });
/* harmony import */ var _Dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Dialog */ "./develop/components/Dialog/index.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/* eslint-disable no-underscore-dangle */

var _window = window,
    lang = _window.lang;
function DeleteItem(tree) {
  var _defaultButtons;

  var itemID;
  var $deleteDialog;
  var defaultButtons = (_defaultButtons = {}, _defineProperty(_defaultButtons, lang.deleteChildNodes, function delChildNode() {
    var $node = $("li#item-".concat(itemID));

    tree._removeNode($node);

    $(this).dialog('close');

    tree._saveTree();
  }), _defineProperty(_defaultButtons, lang.deleteNode, function delNode() {
    var $node = $("li#item-".concat(itemID));

    if ($node.children(tree.options.listType).length) {
      $node.children(tree.options.listType).children('li').appendTo($node.parent(tree.options.listType));
    }

    tree._removeNode($node);

    $(this).dialog('close');

    tree._saveTree();
  }), _defineProperty(_defaultButtons, lang.cancel, function cancelBtn() {
    $(this).dialog('close');
  }), _defaultButtons);
  tree.nestedList.on('click', tree.options.deleteItemClass, function (e) {
    e.preventDefault();
    itemID = tree._getItemId($(e.currentTarget));

    var buttons = _objectSpread({}, defaultButtons);

    if ($("#item-".concat(itemID)).children(tree.options.listType).children('li').length < 1) {
      delete buttons[lang.deleteChildNodes];
    }

    $deleteDialog.dialog({
      buttons: buttons
    }).dialog('open');
  });
  $deleteDialog = new _Dialog__WEBPACK_IMPORTED_MODULE_0__["default"](tree.options.dialogConfirm);
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./develop/components/Tree/DeleteSelected/index.js":
/*!*********************************************************!*\
  !*** ./develop/components/Tree/DeleteSelected/index.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SelectAll; });
/* harmony import */ var _Button_button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Button/button */ "./develop/components/Button/button.js");
/* harmony import */ var _Dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Dialog */ "./develop/components/Dialog/index.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/* eslint-disable no-underscore-dangle */


var _window = window,
    lang = _window.lang;
function SelectAll(tree) {
  var _buttons;

  var selectItemClass = tree.options.selectItemClass;
  var $confirm = new _Dialog__WEBPACK_IMPORTED_MODULE_1__["default"](tree.options.dialogConfirm, {
    buttons: (_buttons = {}, _defineProperty(_buttons, lang.deleteNode, function confirmBtn() {
      tree.nestedList.find("".concat(selectItemClass, ":checked")).closest('li').each(function iterator() {
        tree._removeNode($(this));
      });

      tree._saveTree();

      $(this).dialog('close');
    }), _defineProperty(_buttons, lang.cancel, function cancelBtn() {
      $(this).dialog('close');
    }), _buttons)
  });
  var $deleteSelBtn = Object(_Button_button__WEBPACK_IMPORTED_MODULE_0__["default"])(tree.options.deleteSelBtn, {
    disabled: true,
    icons: {
      primary: 'ui-icon-trash'
    }
  }, function (e) {
    e.preventDefault();
    $confirm.dialog('open');
  });
  tree.$selectAll = $(tree.options.selectAll).click(function (e) {
    tree.nestedList.find(selectItemClass).prop('checked', e.currentTarget.checked);

    if (e.currentTarget.checked) {
      $deleteSelBtn.button('enable');
    } else {
      $deleteSelBtn.button('disable');
    }
  });
  tree.nestedList.on('click', tree.options.selectItemClass, function () {
    var $checkboxes = tree.nestedList.find("".concat(selectItemClass));
    var numSelected = $checkboxes.filter(':checked').length;

    if (numSelected > 0) {
      $deleteSelBtn.button('enable');
    } else {
      $deleteSelBtn.button('disable');
    }

    if (numSelected === $checkboxes.length) {
      tree.$selectAll.prop('checked', true);
    } else {
      tree.$selectAll.prop('checked', false);
    }
  });
  return $deleteSelBtn;
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./develop/components/Tree/Edit/index.js":
/*!***********************************************!*\
  !*** ./develop/components/Tree/Edit/index.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return EditItem; });
/* harmony import */ var _Dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Dialog */ "./develop/components/Dialog/index.js");
/* harmony import */ var _InlineEditor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../InlineEditor */ "./develop/components/InlineEditor/index.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/* eslint-disable no-underscore-dangle */


var _window = window,
    lang = _window.lang;
function EditItem(tree) {
  var _buttons;

  var itemID;
  var $editDialog;
  var dialogEdit = tree.options.dialogEdit;

  function checkRequired() {
    $("".concat(dialogEdit, " .error")).remove();
    var valid = true;
    $("".concat(dialogEdit, " .required")).each(function iter() {
      if (!$(this).val()) {
        var html = "<div class=\"error\">".concat(lang.required, "</div>");
        $(html).insertAfter(this);
        valid = false;
      }
    });
    return valid;
  }

  function submitForm() {
    var action = itemID ? 'save_item' : 'add_item';

    tree._saveItem(action, tree.editForm.serializeArray(), itemID);
  }

  function handleTitleUpdate(e) {
    var $element = $(e.currentTarget);

    var id = tree._getItemId($element.closest('li'));

    var title = e.currentTarget.value;
    var field = $element.closest('span').data('field');

    if (id && field && title) {
      var _data;

      var data = (_data = {}, _defineProperty(_data, field, title), _defineProperty(_data, "field", field), _data);

      tree._saveItem('update_item', data, id);
    }

    return lang.processing;
  }

  Object(_InlineEditor__WEBPACK_IMPORTED_MODULE_1__["default"])('.editable', handleTitleUpdate);
  tree.nestedList.on('click', tree.options.editItemClass, function (e) {
    e.preventDefault();
    itemID = tree._getItemId($(e.currentTarget));

    tree._populateForm(itemID, function () {
      var title = itemID ? lang.editNode : lang.addNode;
      $editDialog.dialog('option', 'title', title).dialog('open');
    });
  });
  $editDialog = new _Dialog__WEBPACK_IMPORTED_MODULE_0__["default"](dialogEdit, {
    buttons: (_buttons = {}, _defineProperty(_buttons, lang.saveNode, function editBtn() {
      if (checkRequired()) {
        submitForm();
        itemID = 0;
        $(this).dialog('close');
      }
    }), _defineProperty(_buttons, lang.cancel, function cancelBtn() {
      itemID = 0;
      $(this).dialog('close');
    }), _buttons)
  });
  return $editDialog;
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./develop/components/Tree/Items/index.js":
/*!************************************************!*\
  !*** ./develop/components/Tree/Items/index.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TreeItems; });
/* harmony import */ var nestedSortable_jquery_mjs_nestedSortable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nestedSortable/jquery.mjs.nestedSortable */ "./node_modules/nestedSortable/jquery.mjs.nestedSortable.js");
/* harmony import */ var nestedSortable_jquery_mjs_nestedSortable__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nestedSortable_jquery_mjs_nestedSortable__WEBPACK_IMPORTED_MODULE_0__);

function TreeItems(tree) {
  var _tree$options = tree.options,
      nestedList = _tree$options.nestedList,
      noNesting = _tree$options.noNesting,
      listType = _tree$options.listType,
      ajaxMessage = _tree$options.ajaxMessage;
  return tree.element.addClass('tree-builder').find(nestedList).nestedSortable({
    disableNesting: noNesting,
    forcePlaceholderSize: true,
    listType: listType,
    handle: 'div',
    helper: 'clone',
    items: 'li',
    opacity: 0.6,
    placeholder: 'placeholder',
    tabSize: 25,
    tolerance: 'pointer',
    toleranceElement: '> div',
    excludeRoot: true,
    rootID: 0,
    errorClass: ajaxMessage,
    update: function update() {
      tree.itemsChanged = true;

      tree._trigger('updated'); // eslint-disable-line no-underscore-dangle


      if (tree.$saveBtn.button('option', 'disabled')) {
        tree.$saveBtn.button('option', 'disabled', false);
      }
    }
  });
}

/***/ }),

/***/ "./develop/components/Tree/Rebuild/index.js":
/*!**************************************************!*\
  !*** ./develop/components/Tree/Rebuild/index.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return RebuildBtn; });
/* harmony import */ var _Button_button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Button/button */ "./develop/components/Button/button.js");
/* eslint-disable no-underscore-dangle */

function RebuildBtn(tree) {
  return Object(_Button_button__WEBPACK_IMPORTED_MODULE_0__["default"])(tree.options.rebuildBtn, {
    disabled: true,
    icons: {
      primary: 'ui-icon-refresh'
    }
  }, function (e) {
    e.preventDefault();

    tree._saveTree();
  });
}

/***/ }),

/***/ "./develop/components/Tree/Save/index.js":
/*!***********************************************!*\
  !*** ./develop/components/Tree/Save/index.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SaveBtn; });
/* harmony import */ var _Button_button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Button/button */ "./develop/components/Button/button.js");
/* eslint-disable no-underscore-dangle */

var _window = window,
    lang = _window.lang;
function SaveBtn(tree) {
  /* eslint-disable consistent-return */
  window.onbeforeunload = function (e) {
    if (tree.itemsChanged) {
      e = e || window.event; // For IE and Firefox

      if (e) {
        e.returnValue = lang.unsavedChanges;
      } // For Safari


      return lang.unsavedChanges;
    }
  };

  return Object(_Button_button__WEBPACK_IMPORTED_MODULE_0__["default"])(tree.options.saveBtn, {
    disabled: true,
    icons: {
      primary: 'ui-icon-check'
    }
  }, function (e) {
    e.preventDefault();

    if (tree.itemsChanged) {
      tree._saveTree();
    }
  });
}

/***/ }),

/***/ "./develop/components/Tree/builder.js":
/*!********************************************!*\
  !*** ./develop/components/Tree/builder.js ***!
  \********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var jquery_ui_ui_widget__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery-ui/ui/widget */ "./node_modules/jquery-ui/ui/widget.js");
/* harmony import */ var jquery_ui_ui_widget__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widget__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jquery_ui_ui_widgets_sortable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery-ui/ui/widgets/sortable */ "./node_modules/jquery-ui/ui/widgets/sortable.js");
/* harmony import */ var jquery_ui_ui_widgets_sortable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widgets_sortable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jquery_ui_ui_effects_effect_slide__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery-ui/ui/effects/effect-slide */ "./node_modules/jquery-ui/ui/effects/effect-slide.js");
/* harmony import */ var jquery_ui_ui_effects_effect_slide__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_effects_effect_slide__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jquery_deserialize__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery-deserialize */ "./node_modules/jquery-deserialize/src/jquery.deserialize.js");
/* harmony import */ var jquery_deserialize__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery_deserialize__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Add__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Add */ "./develop/components/Tree/Add/index.js");
/* harmony import */ var _Bulk__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Bulk */ "./develop/components/Tree/Bulk/index.js");
/* harmony import */ var _Edit__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Edit */ "./develop/components/Tree/Edit/index.js");
/* harmony import */ var _Delete__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Delete */ "./develop/components/Tree/Delete/index.js");
/* harmony import */ var _Items__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Items */ "./develop/components/Tree/Items/index.js");
/* harmony import */ var _Rebuild__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Rebuild */ "./develop/components/Tree/Rebuild/index.js");
/* harmony import */ var _Save__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Save */ "./develop/components/Tree/Save/index.js");
/* harmony import */ var _DeleteSelected__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./DeleteSelected */ "./develop/components/Tree/DeleteSelected/index.js");
/* harmony import */ var _Icons_picker__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Icons/picker */ "./develop/components/Icons/picker.js");
/* harmony import */ var _builder_scss__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./builder.scss */ "./develop/components/Tree/builder.scss");
/* harmony import */ var _builder_scss__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_builder_scss__WEBPACK_IMPORTED_MODULE_13__);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

/*!
 * Sitemaker treeBuilder
 * Author: @blitze
 * Licensed under the GPL license
 */

/* eslint-disable no-underscore-dangle */














var _window = window,
    lang = _window.lang;
$.widget('sitemaker.treeBuilder', {
  options: {
    ajaxUrl: '',
    loadSpeed: 10,
    fields: {
      itemId: 'item_id',
      itemIcon: 'item_icon',
      itemTitle: 'item_title',
      parentId: 'parent_id'
    },
    listType: 'ol',
    noNesting: '.no-nest',
    nestedList: '#sortable',
    editForm: '#edit-form',
    noItems: '#no-items',
    addBtn: '#add-new',
    addBulkBtn: '#add-bulk',
    addBulkList: '#add_list',
    saveBtn: '#save',
    deleteSelBtn: '#delete-selected',
    rebuildBtn: '#rebuild-tree',
    selectAll: '#select-all',
    loading: '#loading',
    ajaxMessage: '#ajax-message',
    itemTemplate: '#item-template',
    editItemClass: '.item-edit',
    deleteItemClass: '.item-delete',
    selectItemClass: '.select-item',
    iconSelectClass: '.icon-select',
    dialogEdit: '',
    dialogConfirm: '#dialog-confirm',
    init: function init() {},
    loaded: function loaded() {},
    updated: function updated() {}
  },
  _create: function _create() {
    var _this = this;

    this.nestedList = Object(_Items__WEBPACK_IMPORTED_MODULE_8__["default"])(this);
    this.noItems = this.element.find(this.options.noItems);
    this.msgObj = this.element.find(this.options.ajaxMessage);
    this.editForm = $(this.options.editForm);
    Promise.all([__webpack_require__.e(/*! import() | twig/twig */ "twig/twig").then(__webpack_require__.t.bind(null, /*! twig */ "./node_modules/twig/twig.js", 7)), Promise.resolve(/*! import() */).then(__webpack_require__.bind(null, /*! ../Icons/picker */ "./develop/components/Icons/picker.js"))]).then(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 1),
          Twig = _ref2[0].default;

      Twig.extendFunction('lang', function (value) {
        return typeof lang[value] !== 'undefined' ? lang[value] : value;
      });
      _this.template = Twig.twig({
        data: $(_this.options.itemTemplate).html()
      });

      _this.nestedList.iconPicker({
        selector: _this.options.iconSelectClass,
        onSelect: function onSelect($item, iconClass) {
          var itemID = _this._getItemId($item.closest('li'));

          _this.updateItem(_defineProperty({}, _this.options.fields.itemIcon, iconClass), itemID);
        }
      });

      var $editDialog = Object(_Edit__WEBPACK_IMPORTED_MODULE_6__["default"])(_this);
      Object(_Add__WEBPACK_IMPORTED_MODULE_4__["default"])(_this, $editDialog);
      Object(_Bulk__WEBPACK_IMPORTED_MODULE_5__["default"])(_this);
      Object(_Delete__WEBPACK_IMPORTED_MODULE_7__["default"])(_this);
      _this.$deleteSelBtn = Object(_DeleteSelected__WEBPACK_IMPORTED_MODULE_11__["default"])(_this);
      _this.$rebuildBtn = Object(_Rebuild__WEBPACK_IMPORTED_MODULE_9__["default"])(_this);
      _this.$saveBtn = Object(_Save__WEBPACK_IMPORTED_MODULE_10__["default"])(_this);

      _this._trigger('init');
    });
  },
  addItem: function addItem() {
    this._saveItem('add_item', {});
  },
  updateItem: function updateItem(data, id) {
    this._saveItem('update_item', data, id);
  },
  getItems: function getItems() {
    var _this2 = this;

    $.getJSON("".concat(this.options.ajaxUrl, "load_items")).done(function (data) {
      _this2.nestedList.empty();

      _this2._resetActions();

      if (data.items && data.items.length > 0) {
        _this2._showActions();

        _this2._addToTree(data.items);
      }

      _this2._trigger('loaded', null, {
        items: data.items
      });
    });
  },
  getCodeMirrorInstance: function getCodeMirrorInstance() {
    return this.codeMirror;
  },
  isUnsaved: function isUnsaved() {
    return !!this.itemsChanged;
  },
  showMessage: function showMessage(message) {
    if (message) {
      this.msgObj.text(message);
      this.msgObj.fadeIn().delay(3000).fadeOut();
    }
  },
  _addBulk: function _addBulk(data) {
    var _this3 = this;

    $.post("".concat(this.options.ajaxUrl, "add_bulk"), data).done(function (resp) {
      if (!resp.error) {
        _this3._showActions();

        _this3._addToTree(resp.items);
      }
    });
  },
  _addToTree: function _addToTree(items, callback) {
    var _this4 = this;

    if (items.length > 0) {
      var $html = {};
      var item = items.shift();
      var listType = this.options.listType;
      var _this$options$fields = this.options.fields,
          itemTitle = _this$options$fields.itemTitle,
          parentId = _this$options$fields.parentId;
      item[itemTitle] = item[itemTitle] || lang.changeMe;

      if (item[parentId] > 0) {
        var $parentItem = $("#item-".concat(item[parentId]));
        var $childItems = $parentItem.children(listType);

        if (!$childItems.length) {
          $html = $("<".concat(listType, ">\n\t\t\t\t\t\t\t").concat(this._renderItem(item), "\n\t\t\t\t\t\t</").concat(listType, ">")).hide();
          $html.appendTo($parentItem);
        } else {
          $html = $(this._renderItem(item)).hide();
          $html.appendTo($parentItem.children(listType));
        }
      } else {
        $html = $(this._renderItem(item)).hide();
        $html.appendTo(this.nestedList);
      }

      $html.effect('slide', {
        direction: 'right',
        mode: 'show'
      }, this.options.loadSpeed, function () {
        return _this4._addToTree(items, callback);
      });
    }

    if (callback !== undefined) {
      callback.apply(this, [items]);
    }

    this._trigger('loaded', null, {
      items: items
    });
  },
  _getItemId: function _getItemId($element) {
    return $element.attr('id').substring(5);
  },
  _populateForm: function _populateForm(id, callBack) {
    var _this5 = this;

    if (id) {
      var ajaxUrl = this.options.ajaxUrl;
      var itemId = this.options.fields.itemId;
      $.get("".concat(ajaxUrl, "load_item?").concat(itemId, "=").concat(id)).done(function (data) {
        _this5.showMessage(data.message);

        _this5.editForm.deserialize(data);

        callBack();
      });
    } else {
      this.editForm[0].reset();
    }
  },
  _resetActions: function _resetActions(itemsCount) {
    var display = 'initial';

    if (!itemsCount) {
      this.noItems.show();
      display = 'none';
    }

    this.itemsChanged = false;
    this.$selectAll.prop('checked', false).parent().css('display', display);
    this.$deleteSelBtn.button('disable').css('display', display);
    this.$saveBtn.button('disable').css('display', display);
    this.$rebuildBtn.css('display', display);
  },
  _saveItem: function _saveItem(mode, data, id) {
    var _this6 = this;

    var ajaxUrl = this.options.ajaxUrl;
    var itemId = this.options.fields.itemId;
    $.post("".concat(ajaxUrl).concat(mode).concat(id ? "?".concat(itemId, "=").concat(id) : ''), data).done(function (resp) {
      if (!resp.error) {
        if (mode === 'add_item') {
          _this6._addToTree([resp], function () {
            var $element = $("#item-".concat(resp[_this6.options.fields.itemId]));

            _this6._showActions();

            _this6._scrollTo($element, _this6.addBtnOffset.top, function () {
              if (!_this6.options.dialogEdit) {
                $element.find('.editable').trigger('click');
              }
            });
          });
        } else if (mode === 'update_item') {
          _this6._refreshItem(resp);
        } else if (mode === 'save_item') {
          var $element = _this6._refreshItem(resp);

          _this6._trigger('updated', null, $element);
        }
      }
    });
  },
  _saveTree: function _saveTree() {
    var _this7 = this;

    var tree = this.nestedList.nestedSortable('toArray').reduce(function (accumulator, row) {
      var id = row.id,
          rest = _objectWithoutProperties(row, ["id"]);

      accumulator.push(_objectSpread(_defineProperty({}, _this7.options.fields.itemId, id), rest));
      return accumulator;
    }, []);

    this._saveItem('save_tree', {
      tree: tree
    });

    this._resetActions(tree.length);
  },
  _scrollTo: function _scrollTo($element, fromHeight, callback) {
    var offset = $element.offset();
    var offsetTop = offset.top;
    var scrollTop = offsetTop - fromHeight;
    this.nestedList.animate({
      scrollTop: scrollTop
    }, 1000, callback);
  },
  _showActions: function _showActions() {
    this.noItems.hide();
    this.nestedList.show();
    this.$selectAll.parent().show();
    this.$deleteSelBtn.show();
    this.$saveBtn.show();
    this.$rebuildBtn.button('enable').show();
  },
  _removeNode: function _removeNode($node) {
    var $parentNode = $node.parent(this.options.listType).not(this.options.nestedList); // if node has sibblings, or it's parent is the root ol/ul, remove node and leave parent

    if ($node.siblings().length || !$parentNode.length) {
      $node.remove(); // if node does not have sibblings, remove parent ol/ul
    } else {
      $parentNode.remove();
    }
  },
  _renderItem: function _renderItem(data) {
    data.item_icon = data[this.options.fields.itemIcon];
    return this.template.render(data);
  },
  _refreshItem: function _refreshItem(data) {
    var replacement = $(this._renderItem(data)).children();
    return $("#item-".concat(data[this.options.fields.itemId])).children(':first').replaceWith(replacement);
  }
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./develop/components/Tree/builder.scss":
/*!**********************************************!*\
  !*** ./develop/components/Tree/builder.scss ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./node_modules/jquery-deserialize/src/jquery.deserialize.js":
/*!*******************************************************************!*\
  !*** ./node_modules/jquery-deserialize/src/jquery.deserialize.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_window_dot_jQuery) {/**
 * Copyright (C) 2017 Kyle Florence
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 *
 * @website https://github.com/kflorence/jquery-deserialize/
 * @version 2.0.0-rc1
 *
 * Dual licensed under the MIT and GPLv2 licenses.
 */
(function( factory ) {
  if (  true && module.exports ) {
    // Node/CommonJS
    module.exports = factory( __webpack_require__( /*! jquery */ "jquery" ) );

  } else {
    // Browser globals
    factory( __webpack_provided_window_dot_jQuery );
  }
}(function( $ ) {

  /**
   * Updates a key/valueArray with the given property and value. Values will always be stored as arrays.
   *
   * @param prop The property to add the value to.
   * @param value The value to add.
   * @param obj The object to update.
   * @returns {object} Updated object.
   */
  function updateKeyValueArray( prop, value, obj ) {
    var current = obj[ prop ];

    if ( current === undefined ) {
      obj[ prop ] = [ value ];

    } else {
      current.push( value );
    }

    return obj;
  }

  /**
   * Get all of the fields contained within the given elements by name.
   *
   * @param $elements jQuery object of elements.
   * @param filter Custom filter to apply to the list of fields.
   * @returns {object} All of the fields contained within the given elements, keyed by name.
   */
  function getFieldsByName( $elements, filter ) {
    var elementsByName = {};

    // Extract fields from elements
    var fields = $elements
      .map(function convertFormToElements() {
        return this.elements ? $.makeArray( this.elements ) : this;
      })
      .filter( filter || ":input:not(:disabled)" )
      .get();

    $.each( fields, function( index, field ) {
      updateKeyValueArray( field.name, field, elementsByName );
    });

    return elementsByName;
  }

  /**
   * Figure out the type of an element. Input type will be used first, falling back to nodeName.
   *
   * @param element DOM element to check type of.
   * @returns {string} The element's type.
   */
  function getElementType( element ) {
    return ( element.type || element.nodeName ).toLowerCase();
  }

  /**
   * Normalize the provided data into a key/valueArray store.
   *
   * @param data The data provided by the user to the plugin.
   * @returns {object} The data normalized into a key/valueArray store.
   */
  function normalizeData( data ) {
    var normalized = {};
    var rPlus = /\+/g;

    // Convert data from .serializeObject() notation
    if ( $.isPlainObject( data ) ) {
      $.extend( normalized, data );

      // Convert non-array values into an array
      $.each( normalized, function( name, value ) {
        if ( !$.isArray( value ) ) {
          normalized[ name ] = [ value ];
        }
      });

    // Convert data from .serializeArray() notation
    } else if ( $.isArray( data ) ) {
      $.each( data, function( index, field ) {
        updateKeyValueArray( field.name, field.value, normalized );
      });

    // Convert data from .serialize() notation
    } else if ( typeof data === "string" ) {
      $.each( data.split( "&" ), function( index, field ) {
        var current = field.split( "=" );
        var name = decodeURIComponent( current[ 0 ].replace( rPlus, "%20" ) );
        var value = decodeURIComponent( current[ 1 ].replace( rPlus, "%20" ) );
        updateKeyValueArray( name, value, normalized );
      });
    }

    return normalized;
  }

  /**
   * Map of property name -> element types.
   *
   * @type {object}
   */
  var updateTypes = {
    checked: [
      "radio",
      "checkbox"
    ],
    selected: [
      "option",
      "select-one",
      "select-multiple"
    ],
    value: [
      "button",
      "color",
      "date",
      "datetime",
      "datetime-local",
      "email",
      "hidden",
      "month",
      "number",
      "password",
      "range",
      "reset",
      "search",
      "submit",
      "tel",
      "text",
      "textarea",
      "time",
      "url",
      "week"
    ]
  };

  /**
   * Get the property to update on an element being updated.
   *
   * @param element The DOM element to get the property for.
   * @returns The name of the property to update if element is supported, otherwise `undefined`.
   */
  function getPropertyToUpdate( element ) {
    var type = getElementType( element );
    var elementProperty = undefined;

    $.each( updateTypes, function( property, types ) {
      if ( $.inArray( type, types ) > -1 ) {
        elementProperty = property;
        return false;
      }
    });

    return elementProperty;
  }

  /**
   * Update the element based on the provided data.
   *
   * @param element The DOM element to update.
   * @param elementIndex The index of this element in the list of elements with the same name.
   * @param value The serialized element value.
   * @param valueIndex The index of the value in the list of values for elements with the same name.
   * @param callback A function to call if the value of an element was updated.
   */
  function update( element, elementIndex, value, valueIndex, callback ) {
    var property = getPropertyToUpdate( element );

    // Handle value inputs
    // If there are multiple value inputs with the same name, they will be populated by matching indexes.
    if ( property == "value" && elementIndex == valueIndex ) {
      element.value = value;
      callback.call( element, value );

    // Handle select menus, checkboxes and radio buttons
    } else if ( property == "checked" || property == "selected" ) {
      var fields = [];

      // Extract option fields from select menus
      if ( element.options ) {
        $.each( element.options, function( index, option ) {
          fields.push( option );
        });

      } else {
        fields.push( element );
      }

      // #37: Remove selection from multiple select menus before deserialization
      if ( element.multiple && valueIndex == 0 ) {
        element.selectedIndex = -1;
      }

      $.each( fields, function( index, field ) {
        if ( field.value == value ) {
          field[ property ] = true;
          callback.call( field, value );
        }
      });
    }
  }

  /**
   * Default plugin options.
   *
   * @type {object}
   */
  var defaultOptions = {
    change: $.noop,
    complete: $.noop
  };

  /**
   * The $.deserialize function.
   *
   * @param data The data to deserialize.
   * @param options Additional options.
   * @returns {jQuery} The jQuery object that was provided to the plugin.
   */
  $.fn.deserialize = function( data, options ) {

    // Backwards compatible with old arguments: data, callback
    if ( $.isFunction( options ) ) {
      options = { complete: options };
    }

    options = $.extend( defaultOptions, options || {} );
    data = normalizeData( data );

    var elementsByName = getFieldsByName( this, options.filter );

    $.each( data, function( name, values ) {
      $.each( elementsByName[ name ], function( elementIndex, element ) {
        $.each( values, function( valueIndex, value ) {
          update( element, elementIndex, value, valueIndex, options.change );
        });
      });
    });

    options.complete.call( this );

    return this;
  };
}));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./node_modules/jquery-ui/themes/base/tabs.css":
/*!*****************************************************!*\
  !*** ./node_modules/jquery-ui/themes/base/tabs.css ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./node_modules/jquery-ui/ui/effect.js":
/*!*********************************************!*\
  !*** ./node_modules/jquery-ui/ui/effect.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jQuery UI Effects 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Effects Core
//>>group: Effects
// jscs:disable maximumLineLength
//>>description: Extends the internal jQuery effects. Includes morphing and easing. Required by all other effects.
// jscs:enable maximumLineLength
//>>docs: http://api.jqueryui.com/category/effects-core/
//>>demos: http://jqueryui.com/effect/

( function( factory ) {
	if ( true ) {

		// AMD. Register as an anonymous module.
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(/*! jquery */ "jquery"), __webpack_require__(/*! ./version */ "./node_modules/jquery-ui/ui/version.js") ], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}
}( function( $ ) {

var dataSpace = "ui-effects-",
	dataSpaceStyle = "ui-effects-style",
	dataSpaceAnimated = "ui-effects-animated",

	// Create a local jQuery because jQuery Color relies on it and the
	// global may not exist with AMD and a custom build (#10199)
	jQuery = $;

$.effects = {
	effect: {}
};

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
( function( jQuery, undefined ) {

	var stepHooks = "backgroundColor borderBottomColor borderLeftColor borderRightColor " +
		"borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",

	// Plusequals test for += 100 -= 100
	rplusequals = /^([\-+])=\s*(\d+\.?\d*)/,

	// A set of RE's that can match strings and generate color tuples.
	stringParsers = [ {
			re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ],
					execResult[ 3 ],
					execResult[ 4 ]
				];
			}
		}, {
			re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ] * 2.55,
					execResult[ 2 ] * 2.55,
					execResult[ 3 ] * 2.55,
					execResult[ 4 ]
				];
			}
		}, {

			// This regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ], 16 )
				];
			}
		}, {

			// This regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ] + execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ] + execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ] + execResult[ 3 ], 16 )
				];
			}
		}, {
			re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			space: "hsla",
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ] / 100,
					execResult[ 3 ] / 100,
					execResult[ 4 ]
				];
			}
		} ],

	// JQuery.Color( )
	color = jQuery.Color = function( color, green, blue, alpha ) {
		return new jQuery.Color.fn.parse( color, green, blue, alpha );
	},
	spaces = {
		rgba: {
			props: {
				red: {
					idx: 0,
					type: "byte"
				},
				green: {
					idx: 1,
					type: "byte"
				},
				blue: {
					idx: 2,
					type: "byte"
				}
			}
		},

		hsla: {
			props: {
				hue: {
					idx: 0,
					type: "degrees"
				},
				saturation: {
					idx: 1,
					type: "percent"
				},
				lightness: {
					idx: 2,
					type: "percent"
				}
			}
		}
	},
	propTypes = {
		"byte": {
			floor: true,
			max: 255
		},
		"percent": {
			max: 1
		},
		"degrees": {
			mod: 360,
			floor: true
		}
	},
	support = color.support = {},

	// Element for support tests
	supportElem = jQuery( "<p>" )[ 0 ],

	// Colors = jQuery.Color.names
	colors,

	// Local aliases of functions called often
	each = jQuery.each;

// Determine rgba support immediately
supportElem.style.cssText = "background-color:rgba(1,1,1,.5)";
support.rgba = supportElem.style.backgroundColor.indexOf( "rgba" ) > -1;

// Define cache name and alpha properties
// for rgba and hsla spaces
each( spaces, function( spaceName, space ) {
	space.cache = "_" + spaceName;
	space.props.alpha = {
		idx: 3,
		type: "percent",
		def: 1
	};
} );

function clamp( value, prop, allowEmpty ) {
	var type = propTypes[ prop.type ] || {};

	if ( value == null ) {
		return ( allowEmpty || !prop.def ) ? null : prop.def;
	}

	// ~~ is an short way of doing floor for positive numbers
	value = type.floor ? ~~value : parseFloat( value );

	// IE will pass in empty strings as value for alpha,
	// which will hit this case
	if ( isNaN( value ) ) {
		return prop.def;
	}

	if ( type.mod ) {

		// We add mod before modding to make sure that negatives values
		// get converted properly: -10 -> 350
		return ( value + type.mod ) % type.mod;
	}

	// For now all property types without mod have min and max
	return 0 > value ? 0 : type.max < value ? type.max : value;
}

function stringParse( string ) {
	var inst = color(),
		rgba = inst._rgba = [];

	string = string.toLowerCase();

	each( stringParsers, function( i, parser ) {
		var parsed,
			match = parser.re.exec( string ),
			values = match && parser.parse( match ),
			spaceName = parser.space || "rgba";

		if ( values ) {
			parsed = inst[ spaceName ]( values );

			// If this was an rgba parse the assignment might happen twice
			// oh well....
			inst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];
			rgba = inst._rgba = parsed._rgba;

			// Exit each( stringParsers ) here because we matched
			return false;
		}
	} );

	// Found a stringParser that handled it
	if ( rgba.length ) {

		// If this came from a parsed string, force "transparent" when alpha is 0
		// chrome, (and maybe others) return "transparent" as rgba(0,0,0,0)
		if ( rgba.join() === "0,0,0,0" ) {
			jQuery.extend( rgba, colors.transparent );
		}
		return inst;
	}

	// Named colors
	return colors[ string ];
}

color.fn = jQuery.extend( color.prototype, {
	parse: function( red, green, blue, alpha ) {
		if ( red === undefined ) {
			this._rgba = [ null, null, null, null ];
			return this;
		}
		if ( red.jquery || red.nodeType ) {
			red = jQuery( red ).css( green );
			green = undefined;
		}

		var inst = this,
			type = jQuery.type( red ),
			rgba = this._rgba = [];

		// More than 1 argument specified - assume ( red, green, blue, alpha )
		if ( green !== undefined ) {
			red = [ red, green, blue, alpha ];
			type = "array";
		}

		if ( type === "string" ) {
			return this.parse( stringParse( red ) || colors._default );
		}

		if ( type === "array" ) {
			each( spaces.rgba.props, function( key, prop ) {
				rgba[ prop.idx ] = clamp( red[ prop.idx ], prop );
			} );
			return this;
		}

		if ( type === "object" ) {
			if ( red instanceof color ) {
				each( spaces, function( spaceName, space ) {
					if ( red[ space.cache ] ) {
						inst[ space.cache ] = red[ space.cache ].slice();
					}
				} );
			} else {
				each( spaces, function( spaceName, space ) {
					var cache = space.cache;
					each( space.props, function( key, prop ) {

						// If the cache doesn't exist, and we know how to convert
						if ( !inst[ cache ] && space.to ) {

							// If the value was null, we don't need to copy it
							// if the key was alpha, we don't need to copy it either
							if ( key === "alpha" || red[ key ] == null ) {
								return;
							}
							inst[ cache ] = space.to( inst._rgba );
						}

						// This is the only case where we allow nulls for ALL properties.
						// call clamp with alwaysAllowEmpty
						inst[ cache ][ prop.idx ] = clamp( red[ key ], prop, true );
					} );

					// Everything defined but alpha?
					if ( inst[ cache ] &&
							jQuery.inArray( null, inst[ cache ].slice( 0, 3 ) ) < 0 ) {

						// Use the default of 1
						inst[ cache ][ 3 ] = 1;
						if ( space.from ) {
							inst._rgba = space.from( inst[ cache ] );
						}
					}
				} );
			}
			return this;
		}
	},
	is: function( compare ) {
		var is = color( compare ),
			same = true,
			inst = this;

		each( spaces, function( _, space ) {
			var localCache,
				isCache = is[ space.cache ];
			if ( isCache ) {
				localCache = inst[ space.cache ] || space.to && space.to( inst._rgba ) || [];
				each( space.props, function( _, prop ) {
					if ( isCache[ prop.idx ] != null ) {
						same = ( isCache[ prop.idx ] === localCache[ prop.idx ] );
						return same;
					}
				} );
			}
			return same;
		} );
		return same;
	},
	_space: function() {
		var used = [],
			inst = this;
		each( spaces, function( spaceName, space ) {
			if ( inst[ space.cache ] ) {
				used.push( spaceName );
			}
		} );
		return used.pop();
	},
	transition: function( other, distance ) {
		var end = color( other ),
			spaceName = end._space(),
			space = spaces[ spaceName ],
			startColor = this.alpha() === 0 ? color( "transparent" ) : this,
			start = startColor[ space.cache ] || space.to( startColor._rgba ),
			result = start.slice();

		end = end[ space.cache ];
		each( space.props, function( key, prop ) {
			var index = prop.idx,
				startValue = start[ index ],
				endValue = end[ index ],
				type = propTypes[ prop.type ] || {};

			// If null, don't override start value
			if ( endValue === null ) {
				return;
			}

			// If null - use end
			if ( startValue === null ) {
				result[ index ] = endValue;
			} else {
				if ( type.mod ) {
					if ( endValue - startValue > type.mod / 2 ) {
						startValue += type.mod;
					} else if ( startValue - endValue > type.mod / 2 ) {
						startValue -= type.mod;
					}
				}
				result[ index ] = clamp( ( endValue - startValue ) * distance + startValue, prop );
			}
		} );
		return this[ spaceName ]( result );
	},
	blend: function( opaque ) {

		// If we are already opaque - return ourself
		if ( this._rgba[ 3 ] === 1 ) {
			return this;
		}

		var rgb = this._rgba.slice(),
			a = rgb.pop(),
			blend = color( opaque )._rgba;

		return color( jQuery.map( rgb, function( v, i ) {
			return ( 1 - a ) * blend[ i ] + a * v;
		} ) );
	},
	toRgbaString: function() {
		var prefix = "rgba(",
			rgba = jQuery.map( this._rgba, function( v, i ) {
				return v == null ? ( i > 2 ? 1 : 0 ) : v;
			} );

		if ( rgba[ 3 ] === 1 ) {
			rgba.pop();
			prefix = "rgb(";
		}

		return prefix + rgba.join() + ")";
	},
	toHslaString: function() {
		var prefix = "hsla(",
			hsla = jQuery.map( this.hsla(), function( v, i ) {
				if ( v == null ) {
					v = i > 2 ? 1 : 0;
				}

				// Catch 1 and 2
				if ( i && i < 3 ) {
					v = Math.round( v * 100 ) + "%";
				}
				return v;
			} );

		if ( hsla[ 3 ] === 1 ) {
			hsla.pop();
			prefix = "hsl(";
		}
		return prefix + hsla.join() + ")";
	},
	toHexString: function( includeAlpha ) {
		var rgba = this._rgba.slice(),
			alpha = rgba.pop();

		if ( includeAlpha ) {
			rgba.push( ~~( alpha * 255 ) );
		}

		return "#" + jQuery.map( rgba, function( v ) {

			// Default to 0 when nulls exist
			v = ( v || 0 ).toString( 16 );
			return v.length === 1 ? "0" + v : v;
		} ).join( "" );
	},
	toString: function() {
		return this._rgba[ 3 ] === 0 ? "transparent" : this.toRgbaString();
	}
} );
color.fn.parse.prototype = color.fn;

// Hsla conversions adapted from:
// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021

function hue2rgb( p, q, h ) {
	h = ( h + 1 ) % 1;
	if ( h * 6 < 1 ) {
		return p + ( q - p ) * h * 6;
	}
	if ( h * 2 < 1 ) {
		return q;
	}
	if ( h * 3 < 2 ) {
		return p + ( q - p ) * ( ( 2 / 3 ) - h ) * 6;
	}
	return p;
}

spaces.hsla.to = function( rgba ) {
	if ( rgba[ 0 ] == null || rgba[ 1 ] == null || rgba[ 2 ] == null ) {
		return [ null, null, null, rgba[ 3 ] ];
	}
	var r = rgba[ 0 ] / 255,
		g = rgba[ 1 ] / 255,
		b = rgba[ 2 ] / 255,
		a = rgba[ 3 ],
		max = Math.max( r, g, b ),
		min = Math.min( r, g, b ),
		diff = max - min,
		add = max + min,
		l = add * 0.5,
		h, s;

	if ( min === max ) {
		h = 0;
	} else if ( r === max ) {
		h = ( 60 * ( g - b ) / diff ) + 360;
	} else if ( g === max ) {
		h = ( 60 * ( b - r ) / diff ) + 120;
	} else {
		h = ( 60 * ( r - g ) / diff ) + 240;
	}

	// Chroma (diff) == 0 means greyscale which, by definition, saturation = 0%
	// otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)
	if ( diff === 0 ) {
		s = 0;
	} else if ( l <= 0.5 ) {
		s = diff / add;
	} else {
		s = diff / ( 2 - add );
	}
	return [ Math.round( h ) % 360, s, l, a == null ? 1 : a ];
};

spaces.hsla.from = function( hsla ) {
	if ( hsla[ 0 ] == null || hsla[ 1 ] == null || hsla[ 2 ] == null ) {
		return [ null, null, null, hsla[ 3 ] ];
	}
	var h = hsla[ 0 ] / 360,
		s = hsla[ 1 ],
		l = hsla[ 2 ],
		a = hsla[ 3 ],
		q = l <= 0.5 ? l * ( 1 + s ) : l + s - l * s,
		p = 2 * l - q;

	return [
		Math.round( hue2rgb( p, q, h + ( 1 / 3 ) ) * 255 ),
		Math.round( hue2rgb( p, q, h ) * 255 ),
		Math.round( hue2rgb( p, q, h - ( 1 / 3 ) ) * 255 ),
		a
	];
};

each( spaces, function( spaceName, space ) {
	var props = space.props,
		cache = space.cache,
		to = space.to,
		from = space.from;

	// Makes rgba() and hsla()
	color.fn[ spaceName ] = function( value ) {

		// Generate a cache for this space if it doesn't exist
		if ( to && !this[ cache ] ) {
			this[ cache ] = to( this._rgba );
		}
		if ( value === undefined ) {
			return this[ cache ].slice();
		}

		var ret,
			type = jQuery.type( value ),
			arr = ( type === "array" || type === "object" ) ? value : arguments,
			local = this[ cache ].slice();

		each( props, function( key, prop ) {
			var val = arr[ type === "object" ? key : prop.idx ];
			if ( val == null ) {
				val = local[ prop.idx ];
			}
			local[ prop.idx ] = clamp( val, prop );
		} );

		if ( from ) {
			ret = color( from( local ) );
			ret[ cache ] = local;
			return ret;
		} else {
			return color( local );
		}
	};

	// Makes red() green() blue() alpha() hue() saturation() lightness()
	each( props, function( key, prop ) {

		// Alpha is included in more than one space
		if ( color.fn[ key ] ) {
			return;
		}
		color.fn[ key ] = function( value ) {
			var vtype = jQuery.type( value ),
				fn = ( key === "alpha" ? ( this._hsla ? "hsla" : "rgba" ) : spaceName ),
				local = this[ fn ](),
				cur = local[ prop.idx ],
				match;

			if ( vtype === "undefined" ) {
				return cur;
			}

			if ( vtype === "function" ) {
				value = value.call( this, cur );
				vtype = jQuery.type( value );
			}
			if ( value == null && prop.empty ) {
				return this;
			}
			if ( vtype === "string" ) {
				match = rplusequals.exec( value );
				if ( match ) {
					value = cur + parseFloat( match[ 2 ] ) * ( match[ 1 ] === "+" ? 1 : -1 );
				}
			}
			local[ prop.idx ] = value;
			return this[ fn ]( local );
		};
	} );
} );

// Add cssHook and .fx.step function for each named hook.
// accept a space separated string of properties
color.hook = function( hook ) {
	var hooks = hook.split( " " );
	each( hooks, function( i, hook ) {
		jQuery.cssHooks[ hook ] = {
			set: function( elem, value ) {
				var parsed, curElem,
					backgroundColor = "";

				if ( value !== "transparent" && ( jQuery.type( value ) !== "string" ||
						( parsed = stringParse( value ) ) ) ) {
					value = color( parsed || value );
					if ( !support.rgba && value._rgba[ 3 ] !== 1 ) {
						curElem = hook === "backgroundColor" ? elem.parentNode : elem;
						while (
							( backgroundColor === "" || backgroundColor === "transparent" ) &&
							curElem && curElem.style
						) {
							try {
								backgroundColor = jQuery.css( curElem, "backgroundColor" );
								curElem = curElem.parentNode;
							} catch ( e ) {
							}
						}

						value = value.blend( backgroundColor && backgroundColor !== "transparent" ?
							backgroundColor :
							"_default" );
					}

					value = value.toRgbaString();
				}
				try {
					elem.style[ hook ] = value;
				} catch ( e ) {

					// Wrapped to prevent IE from throwing errors on "invalid" values like
					// 'auto' or 'inherit'
				}
			}
		};
		jQuery.fx.step[ hook ] = function( fx ) {
			if ( !fx.colorInit ) {
				fx.start = color( fx.elem, hook );
				fx.end = color( fx.end );
				fx.colorInit = true;
			}
			jQuery.cssHooks[ hook ].set( fx.elem, fx.start.transition( fx.end, fx.pos ) );
		};
	} );

};

color.hook( stepHooks );

jQuery.cssHooks.borderColor = {
	expand: function( value ) {
		var expanded = {};

		each( [ "Top", "Right", "Bottom", "Left" ], function( i, part ) {
			expanded[ "border" + part + "Color" ] = value;
		} );
		return expanded;
	}
};

// Basic color names only.
// Usage of any of the other color names requires adding yourself or including
// jquery.color.svg-names.js.
colors = jQuery.Color.names = {

	// 4.1. Basic color keywords
	aqua: "#00ffff",
	black: "#000000",
	blue: "#0000ff",
	fuchsia: "#ff00ff",
	gray: "#808080",
	green: "#008000",
	lime: "#00ff00",
	maroon: "#800000",
	navy: "#000080",
	olive: "#808000",
	purple: "#800080",
	red: "#ff0000",
	silver: "#c0c0c0",
	teal: "#008080",
	white: "#ffffff",
	yellow: "#ffff00",

	// 4.2.3. "transparent" color keyword
	transparent: [ null, null, null, 0 ],

	_default: "#ffffff"
};

} )( jQuery );

/******************************************************************************/
/****************************** CLASS ANIMATIONS ******************************/
/******************************************************************************/
( function() {

var classAnimationActions = [ "add", "remove", "toggle" ],
	shorthandStyles = {
		border: 1,
		borderBottom: 1,
		borderColor: 1,
		borderLeft: 1,
		borderRight: 1,
		borderTop: 1,
		borderWidth: 1,
		margin: 1,
		padding: 1
	};

$.each(
	[ "borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle" ],
	function( _, prop ) {
		$.fx.step[ prop ] = function( fx ) {
			if ( fx.end !== "none" && !fx.setAttr || fx.pos === 1 && !fx.setAttr ) {
				jQuery.style( fx.elem, prop, fx.end );
				fx.setAttr = true;
			}
		};
	}
);

function getElementStyles( elem ) {
	var key, len,
		style = elem.ownerDocument.defaultView ?
			elem.ownerDocument.defaultView.getComputedStyle( elem, null ) :
			elem.currentStyle,
		styles = {};

	if ( style && style.length && style[ 0 ] && style[ style[ 0 ] ] ) {
		len = style.length;
		while ( len-- ) {
			key = style[ len ];
			if ( typeof style[ key ] === "string" ) {
				styles[ $.camelCase( key ) ] = style[ key ];
			}
		}

	// Support: Opera, IE <9
	} else {
		for ( key in style ) {
			if ( typeof style[ key ] === "string" ) {
				styles[ key ] = style[ key ];
			}
		}
	}

	return styles;
}

function styleDifference( oldStyle, newStyle ) {
	var diff = {},
		name, value;

	for ( name in newStyle ) {
		value = newStyle[ name ];
		if ( oldStyle[ name ] !== value ) {
			if ( !shorthandStyles[ name ] ) {
				if ( $.fx.step[ name ] || !isNaN( parseFloat( value ) ) ) {
					diff[ name ] = value;
				}
			}
		}
	}

	return diff;
}

// Support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

$.effects.animateClass = function( value, duration, easing, callback ) {
	var o = $.speed( duration, easing, callback );

	return this.queue( function() {
		var animated = $( this ),
			baseClass = animated.attr( "class" ) || "",
			applyClassChange,
			allAnimations = o.children ? animated.find( "*" ).addBack() : animated;

		// Map the animated objects to store the original styles.
		allAnimations = allAnimations.map( function() {
			var el = $( this );
			return {
				el: el,
				start: getElementStyles( this )
			};
		} );

		// Apply class change
		applyClassChange = function() {
			$.each( classAnimationActions, function( i, action ) {
				if ( value[ action ] ) {
					animated[ action + "Class" ]( value[ action ] );
				}
			} );
		};
		applyClassChange();

		// Map all animated objects again - calculate new styles and diff
		allAnimations = allAnimations.map( function() {
			this.end = getElementStyles( this.el[ 0 ] );
			this.diff = styleDifference( this.start, this.end );
			return this;
		} );

		// Apply original class
		animated.attr( "class", baseClass );

		// Map all animated objects again - this time collecting a promise
		allAnimations = allAnimations.map( function() {
			var styleInfo = this,
				dfd = $.Deferred(),
				opts = $.extend( {}, o, {
					queue: false,
					complete: function() {
						dfd.resolve( styleInfo );
					}
				} );

			this.el.animate( this.diff, opts );
			return dfd.promise();
		} );

		// Once all animations have completed:
		$.when.apply( $, allAnimations.get() ).done( function() {

			// Set the final class
			applyClassChange();

			// For each animated element,
			// clear all css properties that were animated
			$.each( arguments, function() {
				var el = this.el;
				$.each( this.diff, function( key ) {
					el.css( key, "" );
				} );
			} );

			// This is guarnteed to be there if you use jQuery.speed()
			// it also handles dequeuing the next anim...
			o.complete.call( animated[ 0 ] );
		} );
	} );
};

$.fn.extend( {
	addClass: ( function( orig ) {
		return function( classNames, speed, easing, callback ) {
			return speed ?
				$.effects.animateClass.call( this,
					{ add: classNames }, speed, easing, callback ) :
				orig.apply( this, arguments );
		};
	} )( $.fn.addClass ),

	removeClass: ( function( orig ) {
		return function( classNames, speed, easing, callback ) {
			return arguments.length > 1 ?
				$.effects.animateClass.call( this,
					{ remove: classNames }, speed, easing, callback ) :
				orig.apply( this, arguments );
		};
	} )( $.fn.removeClass ),

	toggleClass: ( function( orig ) {
		return function( classNames, force, speed, easing, callback ) {
			if ( typeof force === "boolean" || force === undefined ) {
				if ( !speed ) {

					// Without speed parameter
					return orig.apply( this, arguments );
				} else {
					return $.effects.animateClass.call( this,
						( force ? { add: classNames } : { remove: classNames } ),
						speed, easing, callback );
				}
			} else {

				// Without force parameter
				return $.effects.animateClass.call( this,
					{ toggle: classNames }, force, speed, easing );
			}
		};
	} )( $.fn.toggleClass ),

	switchClass: function( remove, add, speed, easing, callback ) {
		return $.effects.animateClass.call( this, {
			add: add,
			remove: remove
		}, speed, easing, callback );
	}
} );

} )();

/******************************************************************************/
/*********************************** EFFECTS **********************************/
/******************************************************************************/

( function() {

if ( $.expr && $.expr.filters && $.expr.filters.animated ) {
	$.expr.filters.animated = ( function( orig ) {
		return function( elem ) {
			return !!$( elem ).data( dataSpaceAnimated ) || orig( elem );
		};
	} )( $.expr.filters.animated );
}

if ( $.uiBackCompat !== false ) {
	$.extend( $.effects, {

		// Saves a set of properties in a data storage
		save: function( element, set ) {
			var i = 0, length = set.length;
			for ( ; i < length; i++ ) {
				if ( set[ i ] !== null ) {
					element.data( dataSpace + set[ i ], element[ 0 ].style[ set[ i ] ] );
				}
			}
		},

		// Restores a set of previously saved properties from a data storage
		restore: function( element, set ) {
			var val, i = 0, length = set.length;
			for ( ; i < length; i++ ) {
				if ( set[ i ] !== null ) {
					val = element.data( dataSpace + set[ i ] );
					element.css( set[ i ], val );
				}
			}
		},

		setMode: function( el, mode ) {
			if ( mode === "toggle" ) {
				mode = el.is( ":hidden" ) ? "show" : "hide";
			}
			return mode;
		},

		// Wraps the element around a wrapper that copies position properties
		createWrapper: function( element ) {

			// If the element is already wrapped, return it
			if ( element.parent().is( ".ui-effects-wrapper" ) ) {
				return element.parent();
			}

			// Wrap the element
			var props = {
					width: element.outerWidth( true ),
					height: element.outerHeight( true ),
					"float": element.css( "float" )
				},
				wrapper = $( "<div></div>" )
					.addClass( "ui-effects-wrapper" )
					.css( {
						fontSize: "100%",
						background: "transparent",
						border: "none",
						margin: 0,
						padding: 0
					} ),

				// Store the size in case width/height are defined in % - Fixes #5245
				size = {
					width: element.width(),
					height: element.height()
				},
				active = document.activeElement;

			// Support: Firefox
			// Firefox incorrectly exposes anonymous content
			// https://bugzilla.mozilla.org/show_bug.cgi?id=561664
			try {
				active.id;
			} catch ( e ) {
				active = document.body;
			}

			element.wrap( wrapper );

			// Fixes #7595 - Elements lose focus when wrapped.
			if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
				$( active ).trigger( "focus" );
			}

			// Hotfix for jQuery 1.4 since some change in wrap() seems to actually
			// lose the reference to the wrapped element
			wrapper = element.parent();

			// Transfer positioning properties to the wrapper
			if ( element.css( "position" ) === "static" ) {
				wrapper.css( { position: "relative" } );
				element.css( { position: "relative" } );
			} else {
				$.extend( props, {
					position: element.css( "position" ),
					zIndex: element.css( "z-index" )
				} );
				$.each( [ "top", "left", "bottom", "right" ], function( i, pos ) {
					props[ pos ] = element.css( pos );
					if ( isNaN( parseInt( props[ pos ], 10 ) ) ) {
						props[ pos ] = "auto";
					}
				} );
				element.css( {
					position: "relative",
					top: 0,
					left: 0,
					right: "auto",
					bottom: "auto"
				} );
			}
			element.css( size );

			return wrapper.css( props ).show();
		},

		removeWrapper: function( element ) {
			var active = document.activeElement;

			if ( element.parent().is( ".ui-effects-wrapper" ) ) {
				element.parent().replaceWith( element );

				// Fixes #7595 - Elements lose focus when wrapped.
				if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
					$( active ).trigger( "focus" );
				}
			}

			return element;
		}
	} );
}

$.extend( $.effects, {
	version: "1.12.1",

	define: function( name, mode, effect ) {
		if ( !effect ) {
			effect = mode;
			mode = "effect";
		}

		$.effects.effect[ name ] = effect;
		$.effects.effect[ name ].mode = mode;

		return effect;
	},

	scaledDimensions: function( element, percent, direction ) {
		if ( percent === 0 ) {
			return {
				height: 0,
				width: 0,
				outerHeight: 0,
				outerWidth: 0
			};
		}

		var x = direction !== "horizontal" ? ( ( percent || 100 ) / 100 ) : 1,
			y = direction !== "vertical" ? ( ( percent || 100 ) / 100 ) : 1;

		return {
			height: element.height() * y,
			width: element.width() * x,
			outerHeight: element.outerHeight() * y,
			outerWidth: element.outerWidth() * x
		};

	},

	clipToBox: function( animation ) {
		return {
			width: animation.clip.right - animation.clip.left,
			height: animation.clip.bottom - animation.clip.top,
			left: animation.clip.left,
			top: animation.clip.top
		};
	},

	// Injects recently queued functions to be first in line (after "inprogress")
	unshift: function( element, queueLength, count ) {
		var queue = element.queue();

		if ( queueLength > 1 ) {
			queue.splice.apply( queue,
				[ 1, 0 ].concat( queue.splice( queueLength, count ) ) );
		}
		element.dequeue();
	},

	saveStyle: function( element ) {
		element.data( dataSpaceStyle, element[ 0 ].style.cssText );
	},

	restoreStyle: function( element ) {
		element[ 0 ].style.cssText = element.data( dataSpaceStyle ) || "";
		element.removeData( dataSpaceStyle );
	},

	mode: function( element, mode ) {
		var hidden = element.is( ":hidden" );

		if ( mode === "toggle" ) {
			mode = hidden ? "show" : "hide";
		}
		if ( hidden ? mode === "hide" : mode === "show" ) {
			mode = "none";
		}
		return mode;
	},

	// Translates a [top,left] array into a baseline value
	getBaseline: function( origin, original ) {
		var y, x;

		switch ( origin[ 0 ] ) {
		case "top":
			y = 0;
			break;
		case "middle":
			y = 0.5;
			break;
		case "bottom":
			y = 1;
			break;
		default:
			y = origin[ 0 ] / original.height;
		}

		switch ( origin[ 1 ] ) {
		case "left":
			x = 0;
			break;
		case "center":
			x = 0.5;
			break;
		case "right":
			x = 1;
			break;
		default:
			x = origin[ 1 ] / original.width;
		}

		return {
			x: x,
			y: y
		};
	},

	// Creates a placeholder element so that the original element can be made absolute
	createPlaceholder: function( element ) {
		var placeholder,
			cssPosition = element.css( "position" ),
			position = element.position();

		// Lock in margins first to account for form elements, which
		// will change margin if you explicitly set height
		// see: http://jsfiddle.net/JZSMt/3/ https://bugs.webkit.org/show_bug.cgi?id=107380
		// Support: Safari
		element.css( {
			marginTop: element.css( "marginTop" ),
			marginBottom: element.css( "marginBottom" ),
			marginLeft: element.css( "marginLeft" ),
			marginRight: element.css( "marginRight" )
		} )
		.outerWidth( element.outerWidth() )
		.outerHeight( element.outerHeight() );

		if ( /^(static|relative)/.test( cssPosition ) ) {
			cssPosition = "absolute";

			placeholder = $( "<" + element[ 0 ].nodeName + ">" ).insertAfter( element ).css( {

				// Convert inline to inline block to account for inline elements
				// that turn to inline block based on content (like img)
				display: /^(inline|ruby)/.test( element.css( "display" ) ) ?
					"inline-block" :
					"block",
				visibility: "hidden",

				// Margins need to be set to account for margin collapse
				marginTop: element.css( "marginTop" ),
				marginBottom: element.css( "marginBottom" ),
				marginLeft: element.css( "marginLeft" ),
				marginRight: element.css( "marginRight" ),
				"float": element.css( "float" )
			} )
			.outerWidth( element.outerWidth() )
			.outerHeight( element.outerHeight() )
			.addClass( "ui-effects-placeholder" );

			element.data( dataSpace + "placeholder", placeholder );
		}

		element.css( {
			position: cssPosition,
			left: position.left,
			top: position.top
		} );

		return placeholder;
	},

	removePlaceholder: function( element ) {
		var dataKey = dataSpace + "placeholder",
				placeholder = element.data( dataKey );

		if ( placeholder ) {
			placeholder.remove();
			element.removeData( dataKey );
		}
	},

	// Removes a placeholder if it exists and restores
	// properties that were modified during placeholder creation
	cleanUp: function( element ) {
		$.effects.restoreStyle( element );
		$.effects.removePlaceholder( element );
	},

	setTransition: function( element, list, factor, value ) {
		value = value || {};
		$.each( list, function( i, x ) {
			var unit = element.cssUnit( x );
			if ( unit[ 0 ] > 0 ) {
				value[ x ] = unit[ 0 ] * factor + unit[ 1 ];
			}
		} );
		return value;
	}
} );

// Return an effect options object for the given parameters:
function _normalizeArguments( effect, options, speed, callback ) {

	// Allow passing all options as the first parameter
	if ( $.isPlainObject( effect ) ) {
		options = effect;
		effect = effect.effect;
	}

	// Convert to an object
	effect = { effect: effect };

	// Catch (effect, null, ...)
	if ( options == null ) {
		options = {};
	}

	// Catch (effect, callback)
	if ( $.isFunction( options ) ) {
		callback = options;
		speed = null;
		options = {};
	}

	// Catch (effect, speed, ?)
	if ( typeof options === "number" || $.fx.speeds[ options ] ) {
		callback = speed;
		speed = options;
		options = {};
	}

	// Catch (effect, options, callback)
	if ( $.isFunction( speed ) ) {
		callback = speed;
		speed = null;
	}

	// Add options to effect
	if ( options ) {
		$.extend( effect, options );
	}

	speed = speed || options.duration;
	effect.duration = $.fx.off ? 0 :
		typeof speed === "number" ? speed :
		speed in $.fx.speeds ? $.fx.speeds[ speed ] :
		$.fx.speeds._default;

	effect.complete = callback || options.complete;

	return effect;
}

function standardAnimationOption( option ) {

	// Valid standard speeds (nothing, number, named speed)
	if ( !option || typeof option === "number" || $.fx.speeds[ option ] ) {
		return true;
	}

	// Invalid strings - treat as "normal" speed
	if ( typeof option === "string" && !$.effects.effect[ option ] ) {
		return true;
	}

	// Complete callback
	if ( $.isFunction( option ) ) {
		return true;
	}

	// Options hash (but not naming an effect)
	if ( typeof option === "object" && !option.effect ) {
		return true;
	}

	// Didn't match any standard API
	return false;
}

$.fn.extend( {
	effect: function( /* effect, options, speed, callback */ ) {
		var args = _normalizeArguments.apply( this, arguments ),
			effectMethod = $.effects.effect[ args.effect ],
			defaultMode = effectMethod.mode,
			queue = args.queue,
			queueName = queue || "fx",
			complete = args.complete,
			mode = args.mode,
			modes = [],
			prefilter = function( next ) {
				var el = $( this ),
					normalizedMode = $.effects.mode( el, mode ) || defaultMode;

				// Sentinel for duck-punching the :animated psuedo-selector
				el.data( dataSpaceAnimated, true );

				// Save effect mode for later use,
				// we can't just call $.effects.mode again later,
				// as the .show() below destroys the initial state
				modes.push( normalizedMode );

				// See $.uiBackCompat inside of run() for removal of defaultMode in 1.13
				if ( defaultMode && ( normalizedMode === "show" ||
						( normalizedMode === defaultMode && normalizedMode === "hide" ) ) ) {
					el.show();
				}

				if ( !defaultMode || normalizedMode !== "none" ) {
					$.effects.saveStyle( el );
				}

				if ( $.isFunction( next ) ) {
					next();
				}
			};

		if ( $.fx.off || !effectMethod ) {

			// Delegate to the original method (e.g., .show()) if possible
			if ( mode ) {
				return this[ mode ]( args.duration, complete );
			} else {
				return this.each( function() {
					if ( complete ) {
						complete.call( this );
					}
				} );
			}
		}

		function run( next ) {
			var elem = $( this );

			function cleanup() {
				elem.removeData( dataSpaceAnimated );

				$.effects.cleanUp( elem );

				if ( args.mode === "hide" ) {
					elem.hide();
				}

				done();
			}

			function done() {
				if ( $.isFunction( complete ) ) {
					complete.call( elem[ 0 ] );
				}

				if ( $.isFunction( next ) ) {
					next();
				}
			}

			// Override mode option on a per element basis,
			// as toggle can be either show or hide depending on element state
			args.mode = modes.shift();

			if ( $.uiBackCompat !== false && !defaultMode ) {
				if ( elem.is( ":hidden" ) ? mode === "hide" : mode === "show" ) {

					// Call the core method to track "olddisplay" properly
					elem[ mode ]();
					done();
				} else {
					effectMethod.call( elem[ 0 ], args, done );
				}
			} else {
				if ( args.mode === "none" ) {

					// Call the core method to track "olddisplay" properly
					elem[ mode ]();
					done();
				} else {
					effectMethod.call( elem[ 0 ], args, cleanup );
				}
			}
		}

		// Run prefilter on all elements first to ensure that
		// any showing or hiding happens before placeholder creation,
		// which ensures that any layout changes are correctly captured.
		return queue === false ?
			this.each( prefilter ).each( run ) :
			this.queue( queueName, prefilter ).queue( queueName, run );
	},

	show: ( function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "show";
				return this.effect.call( this, args );
			}
		};
	} )( $.fn.show ),

	hide: ( function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "hide";
				return this.effect.call( this, args );
			}
		};
	} )( $.fn.hide ),

	toggle: ( function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) || typeof option === "boolean" ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "toggle";
				return this.effect.call( this, args );
			}
		};
	} )( $.fn.toggle ),

	cssUnit: function( key ) {
		var style = this.css( key ),
			val = [];

		$.each( [ "em", "px", "%", "pt" ], function( i, unit ) {
			if ( style.indexOf( unit ) > 0 ) {
				val = [ parseFloat( style ), unit ];
			}
		} );
		return val;
	},

	cssClip: function( clipObj ) {
		if ( clipObj ) {
			return this.css( "clip", "rect(" + clipObj.top + "px " + clipObj.right + "px " +
				clipObj.bottom + "px " + clipObj.left + "px)" );
		}
		return parseClip( this.css( "clip" ), this );
	},

	transfer: function( options, done ) {
		var element = $( this ),
			target = $( options.to ),
			targetFixed = target.css( "position" ) === "fixed",
			body = $( "body" ),
			fixTop = targetFixed ? body.scrollTop() : 0,
			fixLeft = targetFixed ? body.scrollLeft() : 0,
			endPosition = target.offset(),
			animation = {
				top: endPosition.top - fixTop,
				left: endPosition.left - fixLeft,
				height: target.innerHeight(),
				width: target.innerWidth()
			},
			startPosition = element.offset(),
			transfer = $( "<div class='ui-effects-transfer'></div>" )
				.appendTo( "body" )
				.addClass( options.className )
				.css( {
					top: startPosition.top - fixTop,
					left: startPosition.left - fixLeft,
					height: element.innerHeight(),
					width: element.innerWidth(),
					position: targetFixed ? "fixed" : "absolute"
				} )
				.animate( animation, options.duration, options.easing, function() {
					transfer.remove();
					if ( $.isFunction( done ) ) {
						done();
					}
				} );
	}
} );

function parseClip( str, element ) {
		var outerWidth = element.outerWidth(),
			outerHeight = element.outerHeight(),
			clipRegex = /^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,
			values = clipRegex.exec( str ) || [ "", 0, outerWidth, outerHeight, 0 ];

		return {
			top: parseFloat( values[ 1 ] ) || 0,
			right: values[ 2 ] === "auto" ? outerWidth : parseFloat( values[ 2 ] ),
			bottom: values[ 3 ] === "auto" ? outerHeight : parseFloat( values[ 3 ] ),
			left: parseFloat( values[ 4 ] ) || 0
		};
}

$.fx.step.clip = function( fx ) {
	if ( !fx.clipInit ) {
		fx.start = $( fx.elem ).cssClip();
		if ( typeof fx.end === "string" ) {
			fx.end = parseClip( fx.end, fx.elem );
		}
		fx.clipInit = true;
	}

	$( fx.elem ).cssClip( {
		top: fx.pos * ( fx.end.top - fx.start.top ) + fx.start.top,
		right: fx.pos * ( fx.end.right - fx.start.right ) + fx.start.right,
		bottom: fx.pos * ( fx.end.bottom - fx.start.bottom ) + fx.start.bottom,
		left: fx.pos * ( fx.end.left - fx.start.left ) + fx.start.left
	} );
};

} )();

/******************************************************************************/
/*********************************** EASING ***********************************/
/******************************************************************************/

( function() {

// Based on easing equations from Robert Penner (http://www.robertpenner.com/easing)

var baseEasings = {};

$.each( [ "Quad", "Cubic", "Quart", "Quint", "Expo" ], function( i, name ) {
	baseEasings[ name ] = function( p ) {
		return Math.pow( p, i + 2 );
	};
} );

$.extend( baseEasings, {
	Sine: function( p ) {
		return 1 - Math.cos( p * Math.PI / 2 );
	},
	Circ: function( p ) {
		return 1 - Math.sqrt( 1 - p * p );
	},
	Elastic: function( p ) {
		return p === 0 || p === 1 ? p :
			-Math.pow( 2, 8 * ( p - 1 ) ) * Math.sin( ( ( p - 1 ) * 80 - 7.5 ) * Math.PI / 15 );
	},
	Back: function( p ) {
		return p * p * ( 3 * p - 2 );
	},
	Bounce: function( p ) {
		var pow2,
			bounce = 4;

		while ( p < ( ( pow2 = Math.pow( 2, --bounce ) ) - 1 ) / 11 ) {}
		return 1 / Math.pow( 4, 3 - bounce ) - 7.5625 * Math.pow( ( pow2 * 3 - 2 ) / 22 - p, 2 );
	}
} );

$.each( baseEasings, function( name, easeIn ) {
	$.easing[ "easeIn" + name ] = easeIn;
	$.easing[ "easeOut" + name ] = function( p ) {
		return 1 - easeIn( 1 - p );
	};
	$.easing[ "easeInOut" + name ] = function( p ) {
		return p < 0.5 ?
			easeIn( p * 2 ) / 2 :
			1 - easeIn( p * -2 + 2 ) / 2;
	};
} );

} )();

return $.effects;

} ) );


/***/ }),

/***/ "./node_modules/jquery-ui/ui/effects/effect-slide.js":
/*!***********************************************************!*\
  !*** ./node_modules/jquery-ui/ui/effects/effect-slide.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jQuery UI Effects Slide 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Slide Effect
//>>group: Effects
//>>description: Slides an element in and out of the viewport.
//>>docs: http://api.jqueryui.com/slide-effect/
//>>demos: http://jqueryui.com/effect/

( function( factory ) {
	if ( true ) {

		// AMD. Register as an anonymous module.
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
			__webpack_require__(/*! jquery */ "jquery"),
			__webpack_require__(/*! ../version */ "./node_modules/jquery-ui/ui/version.js"),
			__webpack_require__(/*! ../effect */ "./node_modules/jquery-ui/ui/effect.js")
		], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}
}( function( $ ) {

return $.effects.define( "slide", "show", function( options, done ) {
	var startClip, startRef,
		element = $( this ),
		map = {
			up: [ "bottom", "top" ],
			down: [ "top", "bottom" ],
			left: [ "right", "left" ],
			right: [ "left", "right" ]
		},
		mode = options.mode,
		direction = options.direction || "left",
		ref = ( direction === "up" || direction === "down" ) ? "top" : "left",
		positiveMotion = ( direction === "up" || direction === "left" ),
		distance = options.distance ||
			element[ ref === "top" ? "outerHeight" : "outerWidth" ]( true ),
		animation = {};

	$.effects.createPlaceholder( element );

	startClip = element.cssClip();
	startRef = element.position()[ ref ];

	// Define hide animation
	animation[ ref ] = ( positiveMotion ? -1 : 1 ) * distance + startRef;
	animation.clip = element.cssClip();
	animation.clip[ map[ direction ][ 1 ] ] = animation.clip[ map[ direction ][ 0 ] ];

	// Reverse the animation if we're showing
	if ( mode === "show" ) {
		element.cssClip( animation.clip );
		element.css( ref, animation[ ref ] );
		animation.clip = startClip;
		animation[ ref ] = startRef;
	}

	// Actually animate
	element.animate( animation, {
		queue: false,
		duration: options.duration,
		easing: options.easing,
		complete: done
	} );
} );

} ) );


/***/ }),

/***/ "./node_modules/jquery-ui/ui/widgets/sortable.js":
/*!*******************************************************!*\
  !*** ./node_modules/jquery-ui/ui/widgets/sortable.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Sortable
//>>group: Interactions
//>>description: Enables items in a list to be sorted using the mouse.
//>>docs: http://api.jqueryui.com/sortable/
//>>demos: http://jqueryui.com/sortable/
//>>css.structure: ../../themes/base/sortable.css

( function( factory ) {
	if ( true ) {

		// AMD. Register as an anonymous module.
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
			__webpack_require__(/*! jquery */ "jquery"),
			__webpack_require__(/*! ./mouse */ "./node_modules/jquery-ui/ui/widgets/mouse.js"),
			__webpack_require__(/*! ../data */ "./node_modules/jquery-ui/ui/data.js"),
			__webpack_require__(/*! ../ie */ "./node_modules/jquery-ui/ui/ie.js"),
			__webpack_require__(/*! ../scroll-parent */ "./node_modules/jquery-ui/ui/scroll-parent.js"),
			__webpack_require__(/*! ../version */ "./node_modules/jquery-ui/ui/version.js"),
			__webpack_require__(/*! ../widget */ "./node_modules/jquery-ui/ui/widget.js")
		], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}
}( function( $ ) {

return $.widget( "ui.sortable", $.ui.mouse, {
	version: "1.12.1",
	widgetEventPrefix: "sort",
	ready: false,
	options: {
		appendTo: "parent",
		axis: false,
		connectWith: false,
		containment: false,
		cursor: "auto",
		cursorAt: false,
		dropOnEmpty: true,
		forcePlaceholderSize: false,
		forceHelperSize: false,
		grid: false,
		handle: false,
		helper: "original",
		items: "> *",
		opacity: false,
		placeholder: false,
		revert: false,
		scroll: true,
		scrollSensitivity: 20,
		scrollSpeed: 20,
		scope: "default",
		tolerance: "intersect",
		zIndex: 1000,

		// Callbacks
		activate: null,
		beforeStop: null,
		change: null,
		deactivate: null,
		out: null,
		over: null,
		receive: null,
		remove: null,
		sort: null,
		start: null,
		stop: null,
		update: null
	},

	_isOverAxis: function( x, reference, size ) {
		return ( x >= reference ) && ( x < ( reference + size ) );
	},

	_isFloating: function( item ) {
		return ( /left|right/ ).test( item.css( "float" ) ) ||
			( /inline|table-cell/ ).test( item.css( "display" ) );
	},

	_create: function() {
		this.containerCache = {};
		this._addClass( "ui-sortable" );

		//Get the items
		this.refresh();

		//Let's determine the parent's offset
		this.offset = this.element.offset();

		//Initialize mouse events for interaction
		this._mouseInit();

		this._setHandleClassName();

		//We're ready to go
		this.ready = true;

	},

	_setOption: function( key, value ) {
		this._super( key, value );

		if ( key === "handle" ) {
			this._setHandleClassName();
		}
	},

	_setHandleClassName: function() {
		var that = this;
		this._removeClass( this.element.find( ".ui-sortable-handle" ), "ui-sortable-handle" );
		$.each( this.items, function() {
			that._addClass(
				this.instance.options.handle ?
					this.item.find( this.instance.options.handle ) :
					this.item,
				"ui-sortable-handle"
			);
		} );
	},

	_destroy: function() {
		this._mouseDestroy();

		for ( var i = this.items.length - 1; i >= 0; i-- ) {
			this.items[ i ].item.removeData( this.widgetName + "-item" );
		}

		return this;
	},

	_mouseCapture: function( event, overrideHandle ) {
		var currentItem = null,
			validHandle = false,
			that = this;

		if ( this.reverting ) {
			return false;
		}

		if ( this.options.disabled || this.options.type === "static" ) {
			return false;
		}

		//We have to refresh the items data once first
		this._refreshItems( event );

		//Find out if the clicked node (or one of its parents) is a actual item in this.items
		$( event.target ).parents().each( function() {
			if ( $.data( this, that.widgetName + "-item" ) === that ) {
				currentItem = $( this );
				return false;
			}
		} );
		if ( $.data( event.target, that.widgetName + "-item" ) === that ) {
			currentItem = $( event.target );
		}

		if ( !currentItem ) {
			return false;
		}
		if ( this.options.handle && !overrideHandle ) {
			$( this.options.handle, currentItem ).find( "*" ).addBack().each( function() {
				if ( this === event.target ) {
					validHandle = true;
				}
			} );
			if ( !validHandle ) {
				return false;
			}
		}

		this.currentItem = currentItem;
		this._removeCurrentsFromItems();
		return true;

	},

	_mouseStart: function( event, overrideHandle, noActivation ) {

		var i, body,
			o = this.options;

		this.currentContainer = this;

		//We only need to call refreshPositions, because the refreshItems call has been moved to
		// mouseCapture
		this.refreshPositions();

		//Create and append the visible helper
		this.helper = this._createHelper( event );

		//Cache the helper size
		this._cacheHelperProportions();

		/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */

		//Cache the margins of the original element
		this._cacheMargins();

		//Get the next scrolling parent
		this.scrollParent = this.helper.scrollParent();

		//The element's absolute position on the page minus margins
		this.offset = this.currentItem.offset();
		this.offset = {
			top: this.offset.top - this.margins.top,
			left: this.offset.left - this.margins.left
		};

		$.extend( this.offset, {
			click: { //Where the click happened, relative to the element
				left: event.pageX - this.offset.left,
				top: event.pageY - this.offset.top
			},
			parent: this._getParentOffset(),

			// This is a relative to absolute position minus the actual position calculation -
			// only used for relative positioned helper
			relative: this._getRelativeOffset()
		} );

		// Only after we got the offset, we can change the helper's position to absolute
		// TODO: Still need to figure out a way to make relative sorting possible
		this.helper.css( "position", "absolute" );
		this.cssPosition = this.helper.css( "position" );

		//Generate the original position
		this.originalPosition = this._generatePosition( event );
		this.originalPageX = event.pageX;
		this.originalPageY = event.pageY;

		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
		( o.cursorAt && this._adjustOffsetFromHelper( o.cursorAt ) );

		//Cache the former DOM position
		this.domPosition = {
			prev: this.currentItem.prev()[ 0 ],
			parent: this.currentItem.parent()[ 0 ]
		};

		// If the helper is not the original, hide the original so it's not playing any role during
		// the drag, won't cause anything bad this way
		if ( this.helper[ 0 ] !== this.currentItem[ 0 ] ) {
			this.currentItem.hide();
		}

		//Create the placeholder
		this._createPlaceholder();

		//Set a containment if given in the options
		if ( o.containment ) {
			this._setContainment();
		}

		if ( o.cursor && o.cursor !== "auto" ) { // cursor option
			body = this.document.find( "body" );

			// Support: IE
			this.storedCursor = body.css( "cursor" );
			body.css( "cursor", o.cursor );

			this.storedStylesheet =
				$( "<style>*{ cursor: " + o.cursor + " !important; }</style>" ).appendTo( body );
		}

		if ( o.opacity ) { // opacity option
			if ( this.helper.css( "opacity" ) ) {
				this._storedOpacity = this.helper.css( "opacity" );
			}
			this.helper.css( "opacity", o.opacity );
		}

		if ( o.zIndex ) { // zIndex option
			if ( this.helper.css( "zIndex" ) ) {
				this._storedZIndex = this.helper.css( "zIndex" );
			}
			this.helper.css( "zIndex", o.zIndex );
		}

		//Prepare scrolling
		if ( this.scrollParent[ 0 ] !== this.document[ 0 ] &&
				this.scrollParent[ 0 ].tagName !== "HTML" ) {
			this.overflowOffset = this.scrollParent.offset();
		}

		//Call callbacks
		this._trigger( "start", event, this._uiHash() );

		//Recache the helper size
		if ( !this._preserveHelperProportions ) {
			this._cacheHelperProportions();
		}

		//Post "activate" events to possible containers
		if ( !noActivation ) {
			for ( i = this.containers.length - 1; i >= 0; i-- ) {
				this.containers[ i ]._trigger( "activate", event, this._uiHash( this ) );
			}
		}

		//Prepare possible droppables
		if ( $.ui.ddmanager ) {
			$.ui.ddmanager.current = this;
		}

		if ( $.ui.ddmanager && !o.dropBehaviour ) {
			$.ui.ddmanager.prepareOffsets( this, event );
		}

		this.dragging = true;

		this._addClass( this.helper, "ui-sortable-helper" );

		// Execute the drag once - this causes the helper not to be visiblebefore getting its
		// correct position
		this._mouseDrag( event );
		return true;

	},

	_mouseDrag: function( event ) {
		var i, item, itemElement, intersection,
			o = this.options,
			scrolled = false;

		//Compute the helpers position
		this.position = this._generatePosition( event );
		this.positionAbs = this._convertPositionTo( "absolute" );

		if ( !this.lastPositionAbs ) {
			this.lastPositionAbs = this.positionAbs;
		}

		//Do scrolling
		if ( this.options.scroll ) {
			if ( this.scrollParent[ 0 ] !== this.document[ 0 ] &&
					this.scrollParent[ 0 ].tagName !== "HTML" ) {

				if ( ( this.overflowOffset.top + this.scrollParent[ 0 ].offsetHeight ) -
						event.pageY < o.scrollSensitivity ) {
					this.scrollParent[ 0 ].scrollTop =
						scrolled = this.scrollParent[ 0 ].scrollTop + o.scrollSpeed;
				} else if ( event.pageY - this.overflowOffset.top < o.scrollSensitivity ) {
					this.scrollParent[ 0 ].scrollTop =
						scrolled = this.scrollParent[ 0 ].scrollTop - o.scrollSpeed;
				}

				if ( ( this.overflowOffset.left + this.scrollParent[ 0 ].offsetWidth ) -
						event.pageX < o.scrollSensitivity ) {
					this.scrollParent[ 0 ].scrollLeft = scrolled =
						this.scrollParent[ 0 ].scrollLeft + o.scrollSpeed;
				} else if ( event.pageX - this.overflowOffset.left < o.scrollSensitivity ) {
					this.scrollParent[ 0 ].scrollLeft = scrolled =
						this.scrollParent[ 0 ].scrollLeft - o.scrollSpeed;
				}

			} else {

				if ( event.pageY - this.document.scrollTop() < o.scrollSensitivity ) {
					scrolled = this.document.scrollTop( this.document.scrollTop() - o.scrollSpeed );
				} else if ( this.window.height() - ( event.pageY - this.document.scrollTop() ) <
						o.scrollSensitivity ) {
					scrolled = this.document.scrollTop( this.document.scrollTop() + o.scrollSpeed );
				}

				if ( event.pageX - this.document.scrollLeft() < o.scrollSensitivity ) {
					scrolled = this.document.scrollLeft(
						this.document.scrollLeft() - o.scrollSpeed
					);
				} else if ( this.window.width() - ( event.pageX - this.document.scrollLeft() ) <
						o.scrollSensitivity ) {
					scrolled = this.document.scrollLeft(
						this.document.scrollLeft() + o.scrollSpeed
					);
				}

			}

			if ( scrolled !== false && $.ui.ddmanager && !o.dropBehaviour ) {
				$.ui.ddmanager.prepareOffsets( this, event );
			}
		}

		//Regenerate the absolute position used for position checks
		this.positionAbs = this._convertPositionTo( "absolute" );

		//Set the helper position
		if ( !this.options.axis || this.options.axis !== "y" ) {
			this.helper[ 0 ].style.left = this.position.left + "px";
		}
		if ( !this.options.axis || this.options.axis !== "x" ) {
			this.helper[ 0 ].style.top = this.position.top + "px";
		}

		//Rearrange
		for ( i = this.items.length - 1; i >= 0; i-- ) {

			//Cache variables and intersection, continue if no intersection
			item = this.items[ i ];
			itemElement = item.item[ 0 ];
			intersection = this._intersectsWithPointer( item );
			if ( !intersection ) {
				continue;
			}

			// Only put the placeholder inside the current Container, skip all
			// items from other containers. This works because when moving
			// an item from one container to another the
			// currentContainer is switched before the placeholder is moved.
			//
			// Without this, moving items in "sub-sortables" can cause
			// the placeholder to jitter between the outer and inner container.
			if ( item.instance !== this.currentContainer ) {
				continue;
			}

			// Cannot intersect with itself
			// no useless actions that have been done before
			// no action if the item moved is the parent of the item checked
			if ( itemElement !== this.currentItem[ 0 ] &&
				this.placeholder[ intersection === 1 ? "next" : "prev" ]()[ 0 ] !== itemElement &&
				!$.contains( this.placeholder[ 0 ], itemElement ) &&
				( this.options.type === "semi-dynamic" ?
					!$.contains( this.element[ 0 ], itemElement ) :
					true
				)
			) {

				this.direction = intersection === 1 ? "down" : "up";

				if ( this.options.tolerance === "pointer" || this._intersectsWithSides( item ) ) {
					this._rearrange( event, item );
				} else {
					break;
				}

				this._trigger( "change", event, this._uiHash() );
				break;
			}
		}

		//Post events to containers
		this._contactContainers( event );

		//Interconnect with droppables
		if ( $.ui.ddmanager ) {
			$.ui.ddmanager.drag( this, event );
		}

		//Call callbacks
		this._trigger( "sort", event, this._uiHash() );

		this.lastPositionAbs = this.positionAbs;
		return false;

	},

	_mouseStop: function( event, noPropagation ) {

		if ( !event ) {
			return;
		}

		//If we are using droppables, inform the manager about the drop
		if ( $.ui.ddmanager && !this.options.dropBehaviour ) {
			$.ui.ddmanager.drop( this, event );
		}

		if ( this.options.revert ) {
			var that = this,
				cur = this.placeholder.offset(),
				axis = this.options.axis,
				animation = {};

			if ( !axis || axis === "x" ) {
				animation.left = cur.left - this.offset.parent.left - this.margins.left +
					( this.offsetParent[ 0 ] === this.document[ 0 ].body ?
						0 :
						this.offsetParent[ 0 ].scrollLeft
					);
			}
			if ( !axis || axis === "y" ) {
				animation.top = cur.top - this.offset.parent.top - this.margins.top +
					( this.offsetParent[ 0 ] === this.document[ 0 ].body ?
						0 :
						this.offsetParent[ 0 ].scrollTop
					);
			}
			this.reverting = true;
			$( this.helper ).animate(
				animation,
				parseInt( this.options.revert, 10 ) || 500,
				function() {
					that._clear( event );
				}
			);
		} else {
			this._clear( event, noPropagation );
		}

		return false;

	},

	cancel: function() {

		if ( this.dragging ) {

			this._mouseUp( new $.Event( "mouseup", { target: null } ) );

			if ( this.options.helper === "original" ) {
				this.currentItem.css( this._storedCSS );
				this._removeClass( this.currentItem, "ui-sortable-helper" );
			} else {
				this.currentItem.show();
			}

			//Post deactivating events to containers
			for ( var i = this.containers.length - 1; i >= 0; i-- ) {
				this.containers[ i ]._trigger( "deactivate", null, this._uiHash( this ) );
				if ( this.containers[ i ].containerCache.over ) {
					this.containers[ i ]._trigger( "out", null, this._uiHash( this ) );
					this.containers[ i ].containerCache.over = 0;
				}
			}

		}

		if ( this.placeholder ) {

			//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately,
			// it unbinds ALL events from the original node!
			if ( this.placeholder[ 0 ].parentNode ) {
				this.placeholder[ 0 ].parentNode.removeChild( this.placeholder[ 0 ] );
			}
			if ( this.options.helper !== "original" && this.helper &&
					this.helper[ 0 ].parentNode ) {
				this.helper.remove();
			}

			$.extend( this, {
				helper: null,
				dragging: false,
				reverting: false,
				_noFinalSort: null
			} );

			if ( this.domPosition.prev ) {
				$( this.domPosition.prev ).after( this.currentItem );
			} else {
				$( this.domPosition.parent ).prepend( this.currentItem );
			}
		}

		return this;

	},

	serialize: function( o ) {

		var items = this._getItemsAsjQuery( o && o.connected ),
			str = [];
		o = o || {};

		$( items ).each( function() {
			var res = ( $( o.item || this ).attr( o.attribute || "id" ) || "" )
				.match( o.expression || ( /(.+)[\-=_](.+)/ ) );
			if ( res ) {
				str.push(
					( o.key || res[ 1 ] + "[]" ) +
					"=" + ( o.key && o.expression ? res[ 1 ] : res[ 2 ] ) );
			}
		} );

		if ( !str.length && o.key ) {
			str.push( o.key + "=" );
		}

		return str.join( "&" );

	},

	toArray: function( o ) {

		var items = this._getItemsAsjQuery( o && o.connected ),
			ret = [];

		o = o || {};

		items.each( function() {
			ret.push( $( o.item || this ).attr( o.attribute || "id" ) || "" );
		} );
		return ret;

	},

	/* Be careful with the following core functions */
	_intersectsWith: function( item ) {

		var x1 = this.positionAbs.left,
			x2 = x1 + this.helperProportions.width,
			y1 = this.positionAbs.top,
			y2 = y1 + this.helperProportions.height,
			l = item.left,
			r = l + item.width,
			t = item.top,
			b = t + item.height,
			dyClick = this.offset.click.top,
			dxClick = this.offset.click.left,
			isOverElementHeight = ( this.options.axis === "x" ) || ( ( y1 + dyClick ) > t &&
				( y1 + dyClick ) < b ),
			isOverElementWidth = ( this.options.axis === "y" ) || ( ( x1 + dxClick ) > l &&
				( x1 + dxClick ) < r ),
			isOverElement = isOverElementHeight && isOverElementWidth;

		if ( this.options.tolerance === "pointer" ||
			this.options.forcePointerForContainers ||
			( this.options.tolerance !== "pointer" &&
				this.helperProportions[ this.floating ? "width" : "height" ] >
				item[ this.floating ? "width" : "height" ] )
		) {
			return isOverElement;
		} else {

			return ( l < x1 + ( this.helperProportions.width / 2 ) && // Right Half
				x2 - ( this.helperProportions.width / 2 ) < r && // Left Half
				t < y1 + ( this.helperProportions.height / 2 ) && // Bottom Half
				y2 - ( this.helperProportions.height / 2 ) < b ); // Top Half

		}
	},

	_intersectsWithPointer: function( item ) {
		var verticalDirection, horizontalDirection,
			isOverElementHeight = ( this.options.axis === "x" ) ||
				this._isOverAxis(
					this.positionAbs.top + this.offset.click.top, item.top, item.height ),
			isOverElementWidth = ( this.options.axis === "y" ) ||
				this._isOverAxis(
					this.positionAbs.left + this.offset.click.left, item.left, item.width ),
			isOverElement = isOverElementHeight && isOverElementWidth;

		if ( !isOverElement ) {
			return false;
		}

		verticalDirection = this._getDragVerticalDirection();
		horizontalDirection = this._getDragHorizontalDirection();

		return this.floating ?
			( ( horizontalDirection === "right" || verticalDirection === "down" ) ? 2 : 1 )
			: ( verticalDirection && ( verticalDirection === "down" ? 2 : 1 ) );

	},

	_intersectsWithSides: function( item ) {

		var isOverBottomHalf = this._isOverAxis( this.positionAbs.top +
				this.offset.click.top, item.top + ( item.height / 2 ), item.height ),
			isOverRightHalf = this._isOverAxis( this.positionAbs.left +
				this.offset.click.left, item.left + ( item.width / 2 ), item.width ),
			verticalDirection = this._getDragVerticalDirection(),
			horizontalDirection = this._getDragHorizontalDirection();

		if ( this.floating && horizontalDirection ) {
			return ( ( horizontalDirection === "right" && isOverRightHalf ) ||
				( horizontalDirection === "left" && !isOverRightHalf ) );
		} else {
			return verticalDirection && ( ( verticalDirection === "down" && isOverBottomHalf ) ||
				( verticalDirection === "up" && !isOverBottomHalf ) );
		}

	},

	_getDragVerticalDirection: function() {
		var delta = this.positionAbs.top - this.lastPositionAbs.top;
		return delta !== 0 && ( delta > 0 ? "down" : "up" );
	},

	_getDragHorizontalDirection: function() {
		var delta = this.positionAbs.left - this.lastPositionAbs.left;
		return delta !== 0 && ( delta > 0 ? "right" : "left" );
	},

	refresh: function( event ) {
		this._refreshItems( event );
		this._setHandleClassName();
		this.refreshPositions();
		return this;
	},

	_connectWith: function() {
		var options = this.options;
		return options.connectWith.constructor === String ?
			[ options.connectWith ] :
			options.connectWith;
	},

	_getItemsAsjQuery: function( connected ) {

		var i, j, cur, inst,
			items = [],
			queries = [],
			connectWith = this._connectWith();

		if ( connectWith && connected ) {
			for ( i = connectWith.length - 1; i >= 0; i-- ) {
				cur = $( connectWith[ i ], this.document[ 0 ] );
				for ( j = cur.length - 1; j >= 0; j-- ) {
					inst = $.data( cur[ j ], this.widgetFullName );
					if ( inst && inst !== this && !inst.options.disabled ) {
						queries.push( [ $.isFunction( inst.options.items ) ?
							inst.options.items.call( inst.element ) :
							$( inst.options.items, inst.element )
								.not( ".ui-sortable-helper" )
								.not( ".ui-sortable-placeholder" ), inst ] );
					}
				}
			}
		}

		queries.push( [ $.isFunction( this.options.items ) ?
			this.options.items
				.call( this.element, null, { options: this.options, item: this.currentItem } ) :
			$( this.options.items, this.element )
				.not( ".ui-sortable-helper" )
				.not( ".ui-sortable-placeholder" ), this ] );

		function addItems() {
			items.push( this );
		}
		for ( i = queries.length - 1; i >= 0; i-- ) {
			queries[ i ][ 0 ].each( addItems );
		}

		return $( items );

	},

	_removeCurrentsFromItems: function() {

		var list = this.currentItem.find( ":data(" + this.widgetName + "-item)" );

		this.items = $.grep( this.items, function( item ) {
			for ( var j = 0; j < list.length; j++ ) {
				if ( list[ j ] === item.item[ 0 ] ) {
					return false;
				}
			}
			return true;
		} );

	},

	_refreshItems: function( event ) {

		this.items = [];
		this.containers = [ this ];

		var i, j, cur, inst, targetData, _queries, item, queriesLength,
			items = this.items,
			queries = [ [ $.isFunction( this.options.items ) ?
				this.options.items.call( this.element[ 0 ], event, { item: this.currentItem } ) :
				$( this.options.items, this.element ), this ] ],
			connectWith = this._connectWith();

		//Shouldn't be run the first time through due to massive slow-down
		if ( connectWith && this.ready ) {
			for ( i = connectWith.length - 1; i >= 0; i-- ) {
				cur = $( connectWith[ i ], this.document[ 0 ] );
				for ( j = cur.length - 1; j >= 0; j-- ) {
					inst = $.data( cur[ j ], this.widgetFullName );
					if ( inst && inst !== this && !inst.options.disabled ) {
						queries.push( [ $.isFunction( inst.options.items ) ?
							inst.options.items
								.call( inst.element[ 0 ], event, { item: this.currentItem } ) :
							$( inst.options.items, inst.element ), inst ] );
						this.containers.push( inst );
					}
				}
			}
		}

		for ( i = queries.length - 1; i >= 0; i-- ) {
			targetData = queries[ i ][ 1 ];
			_queries = queries[ i ][ 0 ];

			for ( j = 0, queriesLength = _queries.length; j < queriesLength; j++ ) {
				item = $( _queries[ j ] );

				// Data for target checking (mouse manager)
				item.data( this.widgetName + "-item", targetData );

				items.push( {
					item: item,
					instance: targetData,
					width: 0, height: 0,
					left: 0, top: 0
				} );
			}
		}

	},

	refreshPositions: function( fast ) {

		// Determine whether items are being displayed horizontally
		this.floating = this.items.length ?
			this.options.axis === "x" || this._isFloating( this.items[ 0 ].item ) :
			false;

		//This has to be redone because due to the item being moved out/into the offsetParent,
		// the offsetParent's position will change
		if ( this.offsetParent && this.helper ) {
			this.offset.parent = this._getParentOffset();
		}

		var i, item, t, p;

		for ( i = this.items.length - 1; i >= 0; i-- ) {
			item = this.items[ i ];

			//We ignore calculating positions of all connected containers when we're not over them
			if ( item.instance !== this.currentContainer && this.currentContainer &&
					item.item[ 0 ] !== this.currentItem[ 0 ] ) {
				continue;
			}

			t = this.options.toleranceElement ?
				$( this.options.toleranceElement, item.item ) :
				item.item;

			if ( !fast ) {
				item.width = t.outerWidth();
				item.height = t.outerHeight();
			}

			p = t.offset();
			item.left = p.left;
			item.top = p.top;
		}

		if ( this.options.custom && this.options.custom.refreshContainers ) {
			this.options.custom.refreshContainers.call( this );
		} else {
			for ( i = this.containers.length - 1; i >= 0; i-- ) {
				p = this.containers[ i ].element.offset();
				this.containers[ i ].containerCache.left = p.left;
				this.containers[ i ].containerCache.top = p.top;
				this.containers[ i ].containerCache.width =
					this.containers[ i ].element.outerWidth();
				this.containers[ i ].containerCache.height =
					this.containers[ i ].element.outerHeight();
			}
		}

		return this;
	},

	_createPlaceholder: function( that ) {
		that = that || this;
		var className,
			o = that.options;

		if ( !o.placeholder || o.placeholder.constructor === String ) {
			className = o.placeholder;
			o.placeholder = {
				element: function() {

					var nodeName = that.currentItem[ 0 ].nodeName.toLowerCase(),
						element = $( "<" + nodeName + ">", that.document[ 0 ] );

						that._addClass( element, "ui-sortable-placeholder",
								className || that.currentItem[ 0 ].className )
							._removeClass( element, "ui-sortable-helper" );

					if ( nodeName === "tbody" ) {
						that._createTrPlaceholder(
							that.currentItem.find( "tr" ).eq( 0 ),
							$( "<tr>", that.document[ 0 ] ).appendTo( element )
						);
					} else if ( nodeName === "tr" ) {
						that._createTrPlaceholder( that.currentItem, element );
					} else if ( nodeName === "img" ) {
						element.attr( "src", that.currentItem.attr( "src" ) );
					}

					if ( !className ) {
						element.css( "visibility", "hidden" );
					}

					return element;
				},
				update: function( container, p ) {

					// 1. If a className is set as 'placeholder option, we don't force sizes -
					// the class is responsible for that
					// 2. The option 'forcePlaceholderSize can be enabled to force it even if a
					// class name is specified
					if ( className && !o.forcePlaceholderSize ) {
						return;
					}

					//If the element doesn't have a actual height by itself (without styles coming
					// from a stylesheet), it receives the inline height from the dragged item
					if ( !p.height() ) {
						p.height(
							that.currentItem.innerHeight() -
							parseInt( that.currentItem.css( "paddingTop" ) || 0, 10 ) -
							parseInt( that.currentItem.css( "paddingBottom" ) || 0, 10 ) );
					}
					if ( !p.width() ) {
						p.width(
							that.currentItem.innerWidth() -
							parseInt( that.currentItem.css( "paddingLeft" ) || 0, 10 ) -
							parseInt( that.currentItem.css( "paddingRight" ) || 0, 10 ) );
					}
				}
			};
		}

		//Create the placeholder
		that.placeholder = $( o.placeholder.element.call( that.element, that.currentItem ) );

		//Append it after the actual current item
		that.currentItem.after( that.placeholder );

		//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)
		o.placeholder.update( that, that.placeholder );

	},

	_createTrPlaceholder: function( sourceTr, targetTr ) {
		var that = this;

		sourceTr.children().each( function() {
			$( "<td>&#160;</td>", that.document[ 0 ] )
				.attr( "colspan", $( this ).attr( "colspan" ) || 1 )
				.appendTo( targetTr );
		} );
	},

	_contactContainers: function( event ) {
		var i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, cur, nearBottom,
			floating, axis,
			innermostContainer = null,
			innermostIndex = null;

		// Get innermost container that intersects with item
		for ( i = this.containers.length - 1; i >= 0; i-- ) {

			// Never consider a container that's located within the item itself
			if ( $.contains( this.currentItem[ 0 ], this.containers[ i ].element[ 0 ] ) ) {
				continue;
			}

			if ( this._intersectsWith( this.containers[ i ].containerCache ) ) {

				// If we've already found a container and it's more "inner" than this, then continue
				if ( innermostContainer &&
						$.contains(
							this.containers[ i ].element[ 0 ],
							innermostContainer.element[ 0 ] ) ) {
					continue;
				}

				innermostContainer = this.containers[ i ];
				innermostIndex = i;

			} else {

				// container doesn't intersect. trigger "out" event if necessary
				if ( this.containers[ i ].containerCache.over ) {
					this.containers[ i ]._trigger( "out", event, this._uiHash( this ) );
					this.containers[ i ].containerCache.over = 0;
				}
			}

		}

		// If no intersecting containers found, return
		if ( !innermostContainer ) {
			return;
		}

		// Move the item into the container if it's not there already
		if ( this.containers.length === 1 ) {
			if ( !this.containers[ innermostIndex ].containerCache.over ) {
				this.containers[ innermostIndex ]._trigger( "over", event, this._uiHash( this ) );
				this.containers[ innermostIndex ].containerCache.over = 1;
			}
		} else {

			// When entering a new container, we will find the item with the least distance and
			// append our item near it
			dist = 10000;
			itemWithLeastDistance = null;
			floating = innermostContainer.floating || this._isFloating( this.currentItem );
			posProperty = floating ? "left" : "top";
			sizeProperty = floating ? "width" : "height";
			axis = floating ? "pageX" : "pageY";

			for ( j = this.items.length - 1; j >= 0; j-- ) {
				if ( !$.contains(
						this.containers[ innermostIndex ].element[ 0 ], this.items[ j ].item[ 0 ] )
				) {
					continue;
				}
				if ( this.items[ j ].item[ 0 ] === this.currentItem[ 0 ] ) {
					continue;
				}

				cur = this.items[ j ].item.offset()[ posProperty ];
				nearBottom = false;
				if ( event[ axis ] - cur > this.items[ j ][ sizeProperty ] / 2 ) {
					nearBottom = true;
				}

				if ( Math.abs( event[ axis ] - cur ) < dist ) {
					dist = Math.abs( event[ axis ] - cur );
					itemWithLeastDistance = this.items[ j ];
					this.direction = nearBottom ? "up" : "down";
				}
			}

			//Check if dropOnEmpty is enabled
			if ( !itemWithLeastDistance && !this.options.dropOnEmpty ) {
				return;
			}

			if ( this.currentContainer === this.containers[ innermostIndex ] ) {
				if ( !this.currentContainer.containerCache.over ) {
					this.containers[ innermostIndex ]._trigger( "over", event, this._uiHash() );
					this.currentContainer.containerCache.over = 1;
				}
				return;
			}

			itemWithLeastDistance ?
				this._rearrange( event, itemWithLeastDistance, null, true ) :
				this._rearrange( event, null, this.containers[ innermostIndex ].element, true );
			this._trigger( "change", event, this._uiHash() );
			this.containers[ innermostIndex ]._trigger( "change", event, this._uiHash( this ) );
			this.currentContainer = this.containers[ innermostIndex ];

			//Update the placeholder
			this.options.placeholder.update( this.currentContainer, this.placeholder );

			this.containers[ innermostIndex ]._trigger( "over", event, this._uiHash( this ) );
			this.containers[ innermostIndex ].containerCache.over = 1;
		}

	},

	_createHelper: function( event ) {

		var o = this.options,
			helper = $.isFunction( o.helper ) ?
				$( o.helper.apply( this.element[ 0 ], [ event, this.currentItem ] ) ) :
				( o.helper === "clone" ? this.currentItem.clone() : this.currentItem );

		//Add the helper to the DOM if that didn't happen already
		if ( !helper.parents( "body" ).length ) {
			$( o.appendTo !== "parent" ?
				o.appendTo :
				this.currentItem[ 0 ].parentNode )[ 0 ].appendChild( helper[ 0 ] );
		}

		if ( helper[ 0 ] === this.currentItem[ 0 ] ) {
			this._storedCSS = {
				width: this.currentItem[ 0 ].style.width,
				height: this.currentItem[ 0 ].style.height,
				position: this.currentItem.css( "position" ),
				top: this.currentItem.css( "top" ),
				left: this.currentItem.css( "left" )
			};
		}

		if ( !helper[ 0 ].style.width || o.forceHelperSize ) {
			helper.width( this.currentItem.width() );
		}
		if ( !helper[ 0 ].style.height || o.forceHelperSize ) {
			helper.height( this.currentItem.height() );
		}

		return helper;

	},

	_adjustOffsetFromHelper: function( obj ) {
		if ( typeof obj === "string" ) {
			obj = obj.split( " " );
		}
		if ( $.isArray( obj ) ) {
			obj = { left: +obj[ 0 ], top: +obj[ 1 ] || 0 };
		}
		if ( "left" in obj ) {
			this.offset.click.left = obj.left + this.margins.left;
		}
		if ( "right" in obj ) {
			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
		}
		if ( "top" in obj ) {
			this.offset.click.top = obj.top + this.margins.top;
		}
		if ( "bottom" in obj ) {
			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
		}
	},

	_getParentOffset: function() {

		//Get the offsetParent and cache its position
		this.offsetParent = this.helper.offsetParent();
		var po = this.offsetParent.offset();

		// This is a special case where we need to modify a offset calculated on start, since the
		// following happened:
		// 1. The position of the helper is absolute, so it's position is calculated based on the
		// next positioned parent
		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't
		// the document, which means that the scroll is included in the initial calculation of the
		// offset of the parent, and never recalculated upon drag
		if ( this.cssPosition === "absolute" && this.scrollParent[ 0 ] !== this.document[ 0 ] &&
				$.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) {
			po.left += this.scrollParent.scrollLeft();
			po.top += this.scrollParent.scrollTop();
		}

		// This needs to be actually done for all browsers, since pageX/pageY includes this
		// information with an ugly IE fix
		if ( this.offsetParent[ 0 ] === this.document[ 0 ].body ||
				( this.offsetParent[ 0 ].tagName &&
				this.offsetParent[ 0 ].tagName.toLowerCase() === "html" && $.ui.ie ) ) {
			po = { top: 0, left: 0 };
		}

		return {
			top: po.top + ( parseInt( this.offsetParent.css( "borderTopWidth" ), 10 ) || 0 ),
			left: po.left + ( parseInt( this.offsetParent.css( "borderLeftWidth" ), 10 ) || 0 )
		};

	},

	_getRelativeOffset: function() {

		if ( this.cssPosition === "relative" ) {
			var p = this.currentItem.position();
			return {
				top: p.top - ( parseInt( this.helper.css( "top" ), 10 ) || 0 ) +
					this.scrollParent.scrollTop(),
				left: p.left - ( parseInt( this.helper.css( "left" ), 10 ) || 0 ) +
					this.scrollParent.scrollLeft()
			};
		} else {
			return { top: 0, left: 0 };
		}

	},

	_cacheMargins: function() {
		this.margins = {
			left: ( parseInt( this.currentItem.css( "marginLeft" ), 10 ) || 0 ),
			top: ( parseInt( this.currentItem.css( "marginTop" ), 10 ) || 0 )
		};
	},

	_cacheHelperProportions: function() {
		this.helperProportions = {
			width: this.helper.outerWidth(),
			height: this.helper.outerHeight()
		};
	},

	_setContainment: function() {

		var ce, co, over,
			o = this.options;
		if ( o.containment === "parent" ) {
			o.containment = this.helper[ 0 ].parentNode;
		}
		if ( o.containment === "document" || o.containment === "window" ) {
			this.containment = [
				0 - this.offset.relative.left - this.offset.parent.left,
				0 - this.offset.relative.top - this.offset.parent.top,
				o.containment === "document" ?
					this.document.width() :
					this.window.width() - this.helperProportions.width - this.margins.left,
				( o.containment === "document" ?
					( this.document.height() || document.body.parentNode.scrollHeight ) :
					this.window.height() || this.document[ 0 ].body.parentNode.scrollHeight
				) - this.helperProportions.height - this.margins.top
			];
		}

		if ( !( /^(document|window|parent)$/ ).test( o.containment ) ) {
			ce = $( o.containment )[ 0 ];
			co = $( o.containment ).offset();
			over = ( $( ce ).css( "overflow" ) !== "hidden" );

			this.containment = [
				co.left + ( parseInt( $( ce ).css( "borderLeftWidth" ), 10 ) || 0 ) +
					( parseInt( $( ce ).css( "paddingLeft" ), 10 ) || 0 ) - this.margins.left,
				co.top + ( parseInt( $( ce ).css( "borderTopWidth" ), 10 ) || 0 ) +
					( parseInt( $( ce ).css( "paddingTop" ), 10 ) || 0 ) - this.margins.top,
				co.left + ( over ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) -
					( parseInt( $( ce ).css( "borderLeftWidth" ), 10 ) || 0 ) -
					( parseInt( $( ce ).css( "paddingRight" ), 10 ) || 0 ) -
					this.helperProportions.width - this.margins.left,
				co.top + ( over ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) -
					( parseInt( $( ce ).css( "borderTopWidth" ), 10 ) || 0 ) -
					( parseInt( $( ce ).css( "paddingBottom" ), 10 ) || 0 ) -
					this.helperProportions.height - this.margins.top
			];
		}

	},

	_convertPositionTo: function( d, pos ) {

		if ( !pos ) {
			pos = this.position;
		}
		var mod = d === "absolute" ? 1 : -1,
			scroll = this.cssPosition === "absolute" &&
				!( this.scrollParent[ 0 ] !== this.document[ 0 ] &&
				$.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ?
					this.offsetParent :
					this.scrollParent,
			scrollIsRootNode = ( /(html|body)/i ).test( scroll[ 0 ].tagName );

		return {
			top: (

				// The absolute mouse position
				pos.top	+

				// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.relative.top * mod +

				// The offsetParent's offset without borders (offset + border)
				this.offset.parent.top * mod -
				( ( this.cssPosition === "fixed" ?
					-this.scrollParent.scrollTop() :
					( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod )
			),
			left: (

				// The absolute mouse position
				pos.left +

				// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.relative.left * mod +

				// The offsetParent's offset without borders (offset + border)
				this.offset.parent.left * mod	-
				( ( this.cssPosition === "fixed" ?
					-this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 :
					scroll.scrollLeft() ) * mod )
			)
		};

	},

	_generatePosition: function( event ) {

		var top, left,
			o = this.options,
			pageX = event.pageX,
			pageY = event.pageY,
			scroll = this.cssPosition === "absolute" &&
				!( this.scrollParent[ 0 ] !== this.document[ 0 ] &&
				$.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ?
					this.offsetParent :
					this.scrollParent,
				scrollIsRootNode = ( /(html|body)/i ).test( scroll[ 0 ].tagName );

		// This is another very weird special case that only happens for relative elements:
		// 1. If the css position is relative
		// 2. and the scroll parent is the document or similar to the offset parent
		// we have to refresh the relative offset during the scroll so there are no jumps
		if ( this.cssPosition === "relative" && !( this.scrollParent[ 0 ] !== this.document[ 0 ] &&
				this.scrollParent[ 0 ] !== this.offsetParent[ 0 ] ) ) {
			this.offset.relative = this._getRelativeOffset();
		}

		/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */

		if ( this.originalPosition ) { //If we are not dragging yet, we won't check for options

			if ( this.containment ) {
				if ( event.pageX - this.offset.click.left < this.containment[ 0 ] ) {
					pageX = this.containment[ 0 ] + this.offset.click.left;
				}
				if ( event.pageY - this.offset.click.top < this.containment[ 1 ] ) {
					pageY = this.containment[ 1 ] + this.offset.click.top;
				}
				if ( event.pageX - this.offset.click.left > this.containment[ 2 ] ) {
					pageX = this.containment[ 2 ] + this.offset.click.left;
				}
				if ( event.pageY - this.offset.click.top > this.containment[ 3 ] ) {
					pageY = this.containment[ 3 ] + this.offset.click.top;
				}
			}

			if ( o.grid ) {
				top = this.originalPageY + Math.round( ( pageY - this.originalPageY ) /
					o.grid[ 1 ] ) * o.grid[ 1 ];
				pageY = this.containment ?
					( ( top - this.offset.click.top >= this.containment[ 1 ] &&
						top - this.offset.click.top <= this.containment[ 3 ] ) ?
							top :
							( ( top - this.offset.click.top >= this.containment[ 1 ] ) ?
								top - o.grid[ 1 ] : top + o.grid[ 1 ] ) ) :
								top;

				left = this.originalPageX + Math.round( ( pageX - this.originalPageX ) /
					o.grid[ 0 ] ) * o.grid[ 0 ];
				pageX = this.containment ?
					( ( left - this.offset.click.left >= this.containment[ 0 ] &&
						left - this.offset.click.left <= this.containment[ 2 ] ) ?
							left :
							( ( left - this.offset.click.left >= this.containment[ 0 ] ) ?
								left - o.grid[ 0 ] : left + o.grid[ 0 ] ) ) :
								left;
			}

		}

		return {
			top: (

				// The absolute mouse position
				pageY -

				// Click offset (relative to the element)
				this.offset.click.top -

				// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.relative.top -

				// The offsetParent's offset without borders (offset + border)
				this.offset.parent.top +
				( ( this.cssPosition === "fixed" ?
					-this.scrollParent.scrollTop() :
					( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) )
			),
			left: (

				// The absolute mouse position
				pageX -

				// Click offset (relative to the element)
				this.offset.click.left -

				// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.relative.left -

				// The offsetParent's offset without borders (offset + border)
				this.offset.parent.left +
				( ( this.cssPosition === "fixed" ?
					-this.scrollParent.scrollLeft() :
					scrollIsRootNode ? 0 : scroll.scrollLeft() ) )
			)
		};

	},

	_rearrange: function( event, i, a, hardRefresh ) {

		a ? a[ 0 ].appendChild( this.placeholder[ 0 ] ) :
			i.item[ 0 ].parentNode.insertBefore( this.placeholder[ 0 ],
				( this.direction === "down" ? i.item[ 0 ] : i.item[ 0 ].nextSibling ) );

		//Various things done here to improve the performance:
		// 1. we create a setTimeout, that calls refreshPositions
		// 2. on the instance, we have a counter variable, that get's higher after every append
		// 3. on the local scope, we copy the counter variable, and check in the timeout,
		// if it's still the same
		// 4. this lets only the last addition to the timeout stack through
		this.counter = this.counter ? ++this.counter : 1;
		var counter = this.counter;

		this._delay( function() {
			if ( counter === this.counter ) {

				//Precompute after each DOM insertion, NOT on mousemove
				this.refreshPositions( !hardRefresh );
			}
		} );

	},

	_clear: function( event, noPropagation ) {

		this.reverting = false;

		// We delay all events that have to be triggered to after the point where the placeholder
		// has been removed and everything else normalized again
		var i,
			delayedTriggers = [];

		// We first have to update the dom position of the actual currentItem
		// Note: don't do it if the current item is already removed (by a user), or it gets
		// reappended (see #4088)
		if ( !this._noFinalSort && this.currentItem.parent().length ) {
			this.placeholder.before( this.currentItem );
		}
		this._noFinalSort = null;

		if ( this.helper[ 0 ] === this.currentItem[ 0 ] ) {
			for ( i in this._storedCSS ) {
				if ( this._storedCSS[ i ] === "auto" || this._storedCSS[ i ] === "static" ) {
					this._storedCSS[ i ] = "";
				}
			}
			this.currentItem.css( this._storedCSS );
			this._removeClass( this.currentItem, "ui-sortable-helper" );
		} else {
			this.currentItem.show();
		}

		if ( this.fromOutside && !noPropagation ) {
			delayedTriggers.push( function( event ) {
				this._trigger( "receive", event, this._uiHash( this.fromOutside ) );
			} );
		}
		if ( ( this.fromOutside ||
				this.domPosition.prev !==
				this.currentItem.prev().not( ".ui-sortable-helper" )[ 0 ] ||
				this.domPosition.parent !== this.currentItem.parent()[ 0 ] ) && !noPropagation ) {

			// Trigger update callback if the DOM position has changed
			delayedTriggers.push( function( event ) {
				this._trigger( "update", event, this._uiHash() );
			} );
		}

		// Check if the items Container has Changed and trigger appropriate
		// events.
		if ( this !== this.currentContainer ) {
			if ( !noPropagation ) {
				delayedTriggers.push( function( event ) {
					this._trigger( "remove", event, this._uiHash() );
				} );
				delayedTriggers.push( ( function( c ) {
					return function( event ) {
						c._trigger( "receive", event, this._uiHash( this ) );
					};
				} ).call( this, this.currentContainer ) );
				delayedTriggers.push( ( function( c ) {
					return function( event ) {
						c._trigger( "update", event, this._uiHash( this ) );
					};
				} ).call( this, this.currentContainer ) );
			}
		}

		//Post events to containers
		function delayEvent( type, instance, container ) {
			return function( event ) {
				container._trigger( type, event, instance._uiHash( instance ) );
			};
		}
		for ( i = this.containers.length - 1; i >= 0; i-- ) {
			if ( !noPropagation ) {
				delayedTriggers.push( delayEvent( "deactivate", this, this.containers[ i ] ) );
			}
			if ( this.containers[ i ].containerCache.over ) {
				delayedTriggers.push( delayEvent( "out", this, this.containers[ i ] ) );
				this.containers[ i ].containerCache.over = 0;
			}
		}

		//Do what was originally in plugins
		if ( this.storedCursor ) {
			this.document.find( "body" ).css( "cursor", this.storedCursor );
			this.storedStylesheet.remove();
		}
		if ( this._storedOpacity ) {
			this.helper.css( "opacity", this._storedOpacity );
		}
		if ( this._storedZIndex ) {
			this.helper.css( "zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex );
		}

		this.dragging = false;

		if ( !noPropagation ) {
			this._trigger( "beforeStop", event, this._uiHash() );
		}

		//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately,
		// it unbinds ALL events from the original node!
		this.placeholder[ 0 ].parentNode.removeChild( this.placeholder[ 0 ] );

		if ( !this.cancelHelperRemoval ) {
			if ( this.helper[ 0 ] !== this.currentItem[ 0 ] ) {
				this.helper.remove();
			}
			this.helper = null;
		}

		if ( !noPropagation ) {
			for ( i = 0; i < delayedTriggers.length; i++ ) {

				// Trigger all delayed events
				delayedTriggers[ i ].call( this, event );
			}
			this._trigger( "stop", event, this._uiHash() );
		}

		this.fromOutside = false;
		return !this.cancelHelperRemoval;

	},

	_trigger: function() {
		if ( $.Widget.prototype._trigger.apply( this, arguments ) === false ) {
			this.cancel();
		}
	},

	_uiHash: function( _inst ) {
		var inst = _inst || this;
		return {
			helper: inst.helper,
			placeholder: inst.placeholder || $( [] ),
			position: inst.position,
			originalPosition: inst.originalPosition,
			offset: inst.positionAbs,
			item: inst.currentItem,
			sender: _inst ? _inst.element : null
		};
	}

} );

} ) );


/***/ }),

/***/ "./node_modules/jquery-ui/ui/widgets/tabs.js":
/*!***************************************************!*\
  !*** ./node_modules/jquery-ui/ui/widgets/tabs.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jQuery UI Tabs 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Tabs
//>>group: Widgets
//>>description: Transforms a set of container elements into a tab structure.
//>>docs: http://api.jqueryui.com/tabs/
//>>demos: http://jqueryui.com/tabs/
//>>css.structure: ../../themes/base/core.css
//>>css.structure: ../../themes/base/tabs.css
//>>css.theme: ../../themes/base/theme.css

( function( factory ) {
	if ( true ) {

		// AMD. Register as an anonymous module.
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
			__webpack_require__(/*! jquery */ "jquery"),
			__webpack_require__(/*! ../escape-selector */ "./node_modules/jquery-ui/ui/escape-selector.js"),
			__webpack_require__(/*! ../keycode */ "./node_modules/jquery-ui/ui/keycode.js"),
			__webpack_require__(/*! ../safe-active-element */ "./node_modules/jquery-ui/ui/safe-active-element.js"),
			__webpack_require__(/*! ../unique-id */ "./node_modules/jquery-ui/ui/unique-id.js"),
			__webpack_require__(/*! ../version */ "./node_modules/jquery-ui/ui/version.js"),
			__webpack_require__(/*! ../widget */ "./node_modules/jquery-ui/ui/widget.js")
		], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}
}( function( $ ) {

$.widget( "ui.tabs", {
	version: "1.12.1",
	delay: 300,
	options: {
		active: null,
		classes: {
			"ui-tabs": "ui-corner-all",
			"ui-tabs-nav": "ui-corner-all",
			"ui-tabs-panel": "ui-corner-bottom",
			"ui-tabs-tab": "ui-corner-top"
		},
		collapsible: false,
		event: "click",
		heightStyle: "content",
		hide: null,
		show: null,

		// Callbacks
		activate: null,
		beforeActivate: null,
		beforeLoad: null,
		load: null
	},

	_isLocal: ( function() {
		var rhash = /#.*$/;

		return function( anchor ) {
			var anchorUrl, locationUrl;

			anchorUrl = anchor.href.replace( rhash, "" );
			locationUrl = location.href.replace( rhash, "" );

			// Decoding may throw an error if the URL isn't UTF-8 (#9518)
			try {
				anchorUrl = decodeURIComponent( anchorUrl );
			} catch ( error ) {}
			try {
				locationUrl = decodeURIComponent( locationUrl );
			} catch ( error ) {}

			return anchor.hash.length > 1 && anchorUrl === locationUrl;
		};
	} )(),

	_create: function() {
		var that = this,
			options = this.options;

		this.running = false;

		this._addClass( "ui-tabs", "ui-widget ui-widget-content" );
		this._toggleClass( "ui-tabs-collapsible", null, options.collapsible );

		this._processTabs();
		options.active = this._initialActive();

		// Take disabling tabs via class attribute from HTML
		// into account and update option properly.
		if ( $.isArray( options.disabled ) ) {
			options.disabled = $.unique( options.disabled.concat(
				$.map( this.tabs.filter( ".ui-state-disabled" ), function( li ) {
					return that.tabs.index( li );
				} )
			) ).sort();
		}

		// Check for length avoids error when initializing empty list
		if ( this.options.active !== false && this.anchors.length ) {
			this.active = this._findActive( options.active );
		} else {
			this.active = $();
		}

		this._refresh();

		if ( this.active.length ) {
			this.load( options.active );
		}
	},

	_initialActive: function() {
		var active = this.options.active,
			collapsible = this.options.collapsible,
			locationHash = location.hash.substring( 1 );

		if ( active === null ) {

			// check the fragment identifier in the URL
			if ( locationHash ) {
				this.tabs.each( function( i, tab ) {
					if ( $( tab ).attr( "aria-controls" ) === locationHash ) {
						active = i;
						return false;
					}
				} );
			}

			// Check for a tab marked active via a class
			if ( active === null ) {
				active = this.tabs.index( this.tabs.filter( ".ui-tabs-active" ) );
			}

			// No active tab, set to false
			if ( active === null || active === -1 ) {
				active = this.tabs.length ? 0 : false;
			}
		}

		// Handle numbers: negative, out of range
		if ( active !== false ) {
			active = this.tabs.index( this.tabs.eq( active ) );
			if ( active === -1 ) {
				active = collapsible ? false : 0;
			}
		}

		// Don't allow collapsible: false and active: false
		if ( !collapsible && active === false && this.anchors.length ) {
			active = 0;
		}

		return active;
	},

	_getCreateEventData: function() {
		return {
			tab: this.active,
			panel: !this.active.length ? $() : this._getPanelForTab( this.active )
		};
	},

	_tabKeydown: function( event ) {
		var focusedTab = $( $.ui.safeActiveElement( this.document[ 0 ] ) ).closest( "li" ),
			selectedIndex = this.tabs.index( focusedTab ),
			goingForward = true;

		if ( this._handlePageNav( event ) ) {
			return;
		}

		switch ( event.keyCode ) {
		case $.ui.keyCode.RIGHT:
		case $.ui.keyCode.DOWN:
			selectedIndex++;
			break;
		case $.ui.keyCode.UP:
		case $.ui.keyCode.LEFT:
			goingForward = false;
			selectedIndex--;
			break;
		case $.ui.keyCode.END:
			selectedIndex = this.anchors.length - 1;
			break;
		case $.ui.keyCode.HOME:
			selectedIndex = 0;
			break;
		case $.ui.keyCode.SPACE:

			// Activate only, no collapsing
			event.preventDefault();
			clearTimeout( this.activating );
			this._activate( selectedIndex );
			return;
		case $.ui.keyCode.ENTER:

			// Toggle (cancel delayed activation, allow collapsing)
			event.preventDefault();
			clearTimeout( this.activating );

			// Determine if we should collapse or activate
			this._activate( selectedIndex === this.options.active ? false : selectedIndex );
			return;
		default:
			return;
		}

		// Focus the appropriate tab, based on which key was pressed
		event.preventDefault();
		clearTimeout( this.activating );
		selectedIndex = this._focusNextTab( selectedIndex, goingForward );

		// Navigating with control/command key will prevent automatic activation
		if ( !event.ctrlKey && !event.metaKey ) {

			// Update aria-selected immediately so that AT think the tab is already selected.
			// Otherwise AT may confuse the user by stating that they need to activate the tab,
			// but the tab will already be activated by the time the announcement finishes.
			focusedTab.attr( "aria-selected", "false" );
			this.tabs.eq( selectedIndex ).attr( "aria-selected", "true" );

			this.activating = this._delay( function() {
				this.option( "active", selectedIndex );
			}, this.delay );
		}
	},

	_panelKeydown: function( event ) {
		if ( this._handlePageNav( event ) ) {
			return;
		}

		// Ctrl+up moves focus to the current tab
		if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {
			event.preventDefault();
			this.active.trigger( "focus" );
		}
	},

	// Alt+page up/down moves focus to the previous/next tab (and activates)
	_handlePageNav: function( event ) {
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {
			this._activate( this._focusNextTab( this.options.active - 1, false ) );
			return true;
		}
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {
			this._activate( this._focusNextTab( this.options.active + 1, true ) );
			return true;
		}
	},

	_findNextTab: function( index, goingForward ) {
		var lastTabIndex = this.tabs.length - 1;

		function constrain() {
			if ( index > lastTabIndex ) {
				index = 0;
			}
			if ( index < 0 ) {
				index = lastTabIndex;
			}
			return index;
		}

		while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {
			index = goingForward ? index + 1 : index - 1;
		}

		return index;
	},

	_focusNextTab: function( index, goingForward ) {
		index = this._findNextTab( index, goingForward );
		this.tabs.eq( index ).trigger( "focus" );
		return index;
	},

	_setOption: function( key, value ) {
		if ( key === "active" ) {

			// _activate() will handle invalid values and update this.options
			this._activate( value );
			return;
		}

		this._super( key, value );

		if ( key === "collapsible" ) {
			this._toggleClass( "ui-tabs-collapsible", null, value );

			// Setting collapsible: false while collapsed; open first panel
			if ( !value && this.options.active === false ) {
				this._activate( 0 );
			}
		}

		if ( key === "event" ) {
			this._setupEvents( value );
		}

		if ( key === "heightStyle" ) {
			this._setupHeightStyle( value );
		}
	},

	_sanitizeSelector: function( hash ) {
		return hash ? hash.replace( /[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&" ) : "";
	},

	refresh: function() {
		var options = this.options,
			lis = this.tablist.children( ":has(a[href])" );

		// Get disabled tabs from class attribute from HTML
		// this will get converted to a boolean if needed in _refresh()
		options.disabled = $.map( lis.filter( ".ui-state-disabled" ), function( tab ) {
			return lis.index( tab );
		} );

		this._processTabs();

		// Was collapsed or no tabs
		if ( options.active === false || !this.anchors.length ) {
			options.active = false;
			this.active = $();

		// was active, but active tab is gone
		} else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {

			// all remaining tabs are disabled
			if ( this.tabs.length === options.disabled.length ) {
				options.active = false;
				this.active = $();

			// activate previous tab
			} else {
				this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );
			}

		// was active, active tab still exists
		} else {

			// make sure active index is correct
			options.active = this.tabs.index( this.active );
		}

		this._refresh();
	},

	_refresh: function() {
		this._setOptionDisabled( this.options.disabled );
		this._setupEvents( this.options.event );
		this._setupHeightStyle( this.options.heightStyle );

		this.tabs.not( this.active ).attr( {
			"aria-selected": "false",
			"aria-expanded": "false",
			tabIndex: -1
		} );
		this.panels.not( this._getPanelForTab( this.active ) )
			.hide()
			.attr( {
				"aria-hidden": "true"
			} );

		// Make sure one tab is in the tab order
		if ( !this.active.length ) {
			this.tabs.eq( 0 ).attr( "tabIndex", 0 );
		} else {
			this.active
				.attr( {
					"aria-selected": "true",
					"aria-expanded": "true",
					tabIndex: 0
				} );
			this._addClass( this.active, "ui-tabs-active", "ui-state-active" );
			this._getPanelForTab( this.active )
				.show()
				.attr( {
					"aria-hidden": "false"
				} );
		}
	},

	_processTabs: function() {
		var that = this,
			prevTabs = this.tabs,
			prevAnchors = this.anchors,
			prevPanels = this.panels;

		this.tablist = this._getList().attr( "role", "tablist" );
		this._addClass( this.tablist, "ui-tabs-nav",
			"ui-helper-reset ui-helper-clearfix ui-widget-header" );

		// Prevent users from focusing disabled tabs via click
		this.tablist
			.on( "mousedown" + this.eventNamespace, "> li", function( event ) {
				if ( $( this ).is( ".ui-state-disabled" ) ) {
					event.preventDefault();
				}
			} )

			// Support: IE <9
			// Preventing the default action in mousedown doesn't prevent IE
			// from focusing the element, so if the anchor gets focused, blur.
			// We don't have to worry about focusing the previously focused
			// element since clicking on a non-focusable element should focus
			// the body anyway.
			.on( "focus" + this.eventNamespace, ".ui-tabs-anchor", function() {
				if ( $( this ).closest( "li" ).is( ".ui-state-disabled" ) ) {
					this.blur();
				}
			} );

		this.tabs = this.tablist.find( "> li:has(a[href])" )
			.attr( {
				role: "tab",
				tabIndex: -1
			} );
		this._addClass( this.tabs, "ui-tabs-tab", "ui-state-default" );

		this.anchors = this.tabs.map( function() {
			return $( "a", this )[ 0 ];
		} )
			.attr( {
				role: "presentation",
				tabIndex: -1
			} );
		this._addClass( this.anchors, "ui-tabs-anchor" );

		this.panels = $();

		this.anchors.each( function( i, anchor ) {
			var selector, panel, panelId,
				anchorId = $( anchor ).uniqueId().attr( "id" ),
				tab = $( anchor ).closest( "li" ),
				originalAriaControls = tab.attr( "aria-controls" );

			// Inline tab
			if ( that._isLocal( anchor ) ) {
				selector = anchor.hash;
				panelId = selector.substring( 1 );
				panel = that.element.find( that._sanitizeSelector( selector ) );

			// remote tab
			} else {

				// If the tab doesn't already have aria-controls,
				// generate an id by using a throw-away element
				panelId = tab.attr( "aria-controls" ) || $( {} ).uniqueId()[ 0 ].id;
				selector = "#" + panelId;
				panel = that.element.find( selector );
				if ( !panel.length ) {
					panel = that._createPanel( panelId );
					panel.insertAfter( that.panels[ i - 1 ] || that.tablist );
				}
				panel.attr( "aria-live", "polite" );
			}

			if ( panel.length ) {
				that.panels = that.panels.add( panel );
			}
			if ( originalAriaControls ) {
				tab.data( "ui-tabs-aria-controls", originalAriaControls );
			}
			tab.attr( {
				"aria-controls": panelId,
				"aria-labelledby": anchorId
			} );
			panel.attr( "aria-labelledby", anchorId );
		} );

		this.panels.attr( "role", "tabpanel" );
		this._addClass( this.panels, "ui-tabs-panel", "ui-widget-content" );

		// Avoid memory leaks (#10056)
		if ( prevTabs ) {
			this._off( prevTabs.not( this.tabs ) );
			this._off( prevAnchors.not( this.anchors ) );
			this._off( prevPanels.not( this.panels ) );
		}
	},

	// Allow overriding how to find the list for rare usage scenarios (#7715)
	_getList: function() {
		return this.tablist || this.element.find( "ol, ul" ).eq( 0 );
	},

	_createPanel: function( id ) {
		return $( "<div>" )
			.attr( "id", id )
			.data( "ui-tabs-destroy", true );
	},

	_setOptionDisabled: function( disabled ) {
		var currentItem, li, i;

		if ( $.isArray( disabled ) ) {
			if ( !disabled.length ) {
				disabled = false;
			} else if ( disabled.length === this.anchors.length ) {
				disabled = true;
			}
		}

		// Disable tabs
		for ( i = 0; ( li = this.tabs[ i ] ); i++ ) {
			currentItem = $( li );
			if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {
				currentItem.attr( "aria-disabled", "true" );
				this._addClass( currentItem, null, "ui-state-disabled" );
			} else {
				currentItem.removeAttr( "aria-disabled" );
				this._removeClass( currentItem, null, "ui-state-disabled" );
			}
		}

		this.options.disabled = disabled;

		this._toggleClass( this.widget(), this.widgetFullName + "-disabled", null,
			disabled === true );
	},

	_setupEvents: function( event ) {
		var events = {};
		if ( event ) {
			$.each( event.split( " " ), function( index, eventName ) {
				events[ eventName ] = "_eventHandler";
			} );
		}

		this._off( this.anchors.add( this.tabs ).add( this.panels ) );

		// Always prevent the default action, even when disabled
		this._on( true, this.anchors, {
			click: function( event ) {
				event.preventDefault();
			}
		} );
		this._on( this.anchors, events );
		this._on( this.tabs, { keydown: "_tabKeydown" } );
		this._on( this.panels, { keydown: "_panelKeydown" } );

		this._focusable( this.tabs );
		this._hoverable( this.tabs );
	},

	_setupHeightStyle: function( heightStyle ) {
		var maxHeight,
			parent = this.element.parent();

		if ( heightStyle === "fill" ) {
			maxHeight = parent.height();
			maxHeight -= this.element.outerHeight() - this.element.height();

			this.element.siblings( ":visible" ).each( function() {
				var elem = $( this ),
					position = elem.css( "position" );

				if ( position === "absolute" || position === "fixed" ) {
					return;
				}
				maxHeight -= elem.outerHeight( true );
			} );

			this.element.children().not( this.panels ).each( function() {
				maxHeight -= $( this ).outerHeight( true );
			} );

			this.panels.each( function() {
				$( this ).height( Math.max( 0, maxHeight -
					$( this ).innerHeight() + $( this ).height() ) );
			} )
				.css( "overflow", "auto" );
		} else if ( heightStyle === "auto" ) {
			maxHeight = 0;
			this.panels.each( function() {
				maxHeight = Math.max( maxHeight, $( this ).height( "" ).height() );
			} ).height( maxHeight );
		}
	},

	_eventHandler: function( event ) {
		var options = this.options,
			active = this.active,
			anchor = $( event.currentTarget ),
			tab = anchor.closest( "li" ),
			clickedIsActive = tab[ 0 ] === active[ 0 ],
			collapsing = clickedIsActive && options.collapsible,
			toShow = collapsing ? $() : this._getPanelForTab( tab ),
			toHide = !active.length ? $() : this._getPanelForTab( active ),
			eventData = {
				oldTab: active,
				oldPanel: toHide,
				newTab: collapsing ? $() : tab,
				newPanel: toShow
			};

		event.preventDefault();

		if ( tab.hasClass( "ui-state-disabled" ) ||

				// tab is already loading
				tab.hasClass( "ui-tabs-loading" ) ||

				// can't switch durning an animation
				this.running ||

				// click on active header, but not collapsible
				( clickedIsActive && !options.collapsible ) ||

				// allow canceling activation
				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
			return;
		}

		options.active = collapsing ? false : this.tabs.index( tab );

		this.active = clickedIsActive ? $() : tab;
		if ( this.xhr ) {
			this.xhr.abort();
		}

		if ( !toHide.length && !toShow.length ) {
			$.error( "jQuery UI Tabs: Mismatching fragment identifier." );
		}

		if ( toShow.length ) {
			this.load( this.tabs.index( tab ), event );
		}
		this._toggle( event, eventData );
	},

	// Handles show/hide for selecting tabs
	_toggle: function( event, eventData ) {
		var that = this,
			toShow = eventData.newPanel,
			toHide = eventData.oldPanel;

		this.running = true;

		function complete() {
			that.running = false;
			that._trigger( "activate", event, eventData );
		}

		function show() {
			that._addClass( eventData.newTab.closest( "li" ), "ui-tabs-active", "ui-state-active" );

			if ( toShow.length && that.options.show ) {
				that._show( toShow, that.options.show, complete );
			} else {
				toShow.show();
				complete();
			}
		}

		// Start out by hiding, then showing, then completing
		if ( toHide.length && this.options.hide ) {
			this._hide( toHide, this.options.hide, function() {
				that._removeClass( eventData.oldTab.closest( "li" ),
					"ui-tabs-active", "ui-state-active" );
				show();
			} );
		} else {
			this._removeClass( eventData.oldTab.closest( "li" ),
				"ui-tabs-active", "ui-state-active" );
			toHide.hide();
			show();
		}

		toHide.attr( "aria-hidden", "true" );
		eventData.oldTab.attr( {
			"aria-selected": "false",
			"aria-expanded": "false"
		} );

		// If we're switching tabs, remove the old tab from the tab order.
		// If we're opening from collapsed state, remove the previous tab from the tab order.
		// If we're collapsing, then keep the collapsing tab in the tab order.
		if ( toShow.length && toHide.length ) {
			eventData.oldTab.attr( "tabIndex", -1 );
		} else if ( toShow.length ) {
			this.tabs.filter( function() {
				return $( this ).attr( "tabIndex" ) === 0;
			} )
				.attr( "tabIndex", -1 );
		}

		toShow.attr( "aria-hidden", "false" );
		eventData.newTab.attr( {
			"aria-selected": "true",
			"aria-expanded": "true",
			tabIndex: 0
		} );
	},

	_activate: function( index ) {
		var anchor,
			active = this._findActive( index );

		// Trying to activate the already active panel
		if ( active[ 0 ] === this.active[ 0 ] ) {
			return;
		}

		// Trying to collapse, simulate a click on the current active header
		if ( !active.length ) {
			active = this.active;
		}

		anchor = active.find( ".ui-tabs-anchor" )[ 0 ];
		this._eventHandler( {
			target: anchor,
			currentTarget: anchor,
			preventDefault: $.noop
		} );
	},

	_findActive: function( index ) {
		return index === false ? $() : this.tabs.eq( index );
	},

	_getIndex: function( index ) {

		// meta-function to give users option to provide a href string instead of a numerical index.
		if ( typeof index === "string" ) {
			index = this.anchors.index( this.anchors.filter( "[href$='" +
				$.ui.escapeSelector( index ) + "']" ) );
		}

		return index;
	},

	_destroy: function() {
		if ( this.xhr ) {
			this.xhr.abort();
		}

		this.tablist
			.removeAttr( "role" )
			.off( this.eventNamespace );

		this.anchors
			.removeAttr( "role tabIndex" )
			.removeUniqueId();

		this.tabs.add( this.panels ).each( function() {
			if ( $.data( this, "ui-tabs-destroy" ) ) {
				$( this ).remove();
			} else {
				$( this ).removeAttr( "role tabIndex " +
					"aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded" );
			}
		} );

		this.tabs.each( function() {
			var li = $( this ),
				prev = li.data( "ui-tabs-aria-controls" );
			if ( prev ) {
				li
					.attr( "aria-controls", prev )
					.removeData( "ui-tabs-aria-controls" );
			} else {
				li.removeAttr( "aria-controls" );
			}
		} );

		this.panels.show();

		if ( this.options.heightStyle !== "content" ) {
			this.panels.css( "height", "" );
		}
	},

	enable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === false ) {
			return;
		}

		if ( index === undefined ) {
			disabled = false;
		} else {
			index = this._getIndex( index );
			if ( $.isArray( disabled ) ) {
				disabled = $.map( disabled, function( num ) {
					return num !== index ? num : null;
				} );
			} else {
				disabled = $.map( this.tabs, function( li, num ) {
					return num !== index ? num : null;
				} );
			}
		}
		this._setOptionDisabled( disabled );
	},

	disable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === true ) {
			return;
		}

		if ( index === undefined ) {
			disabled = true;
		} else {
			index = this._getIndex( index );
			if ( $.inArray( index, disabled ) !== -1 ) {
				return;
			}
			if ( $.isArray( disabled ) ) {
				disabled = $.merge( [ index ], disabled ).sort();
			} else {
				disabled = [ index ];
			}
		}
		this._setOptionDisabled( disabled );
	},

	load: function( index, event ) {
		index = this._getIndex( index );
		var that = this,
			tab = this.tabs.eq( index ),
			anchor = tab.find( ".ui-tabs-anchor" ),
			panel = this._getPanelForTab( tab ),
			eventData = {
				tab: tab,
				panel: panel
			},
			complete = function( jqXHR, status ) {
				if ( status === "abort" ) {
					that.panels.stop( false, true );
				}

				that._removeClass( tab, "ui-tabs-loading" );
				panel.removeAttr( "aria-busy" );

				if ( jqXHR === that.xhr ) {
					delete that.xhr;
				}
			};

		// Not remote
		if ( this._isLocal( anchor[ 0 ] ) ) {
			return;
		}

		this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );

		// Support: jQuery <1.8
		// jQuery <1.8 returns false if the request is canceled in beforeSend,
		// but as of 1.8, $.ajax() always returns a jqXHR object.
		if ( this.xhr && this.xhr.statusText !== "canceled" ) {
			this._addClass( tab, "ui-tabs-loading" );
			panel.attr( "aria-busy", "true" );

			this.xhr
				.done( function( response, status, jqXHR ) {

					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout( function() {
						panel.html( response );
						that._trigger( "load", event, eventData );

						complete( jqXHR, status );
					}, 1 );
				} )
				.fail( function( jqXHR, status ) {

					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout( function() {
						complete( jqXHR, status );
					}, 1 );
				} );
		}
	},

	_ajaxSettings: function( anchor, event, eventData ) {
		var that = this;
		return {

			// Support: IE <11 only
			// Strip any hash that exists to prevent errors with the Ajax request
			url: anchor.attr( "href" ).replace( /#.*$/, "" ),
			beforeSend: function( jqXHR, settings ) {
				return that._trigger( "beforeLoad", event,
					$.extend( { jqXHR: jqXHR, ajaxSettings: settings }, eventData ) );
			}
		};
	},

	_getPanelForTab: function( tab ) {
		var id = $( tab ).attr( "aria-controls" );
		return this.element.find( this._sanitizeSelector( "#" + id ) );
	}
} );

// DEPRECATED
// TODO: Switch return back to widget declaration at top of file when this is removed
if ( $.uiBackCompat !== false ) {

	// Backcompat for ui-tab class (now ui-tabs-tab)
	$.widget( "ui.tabs", $.ui.tabs, {
		_processTabs: function() {
			this._superApply( arguments );
			this._addClass( this.tabs, "ui-tab" );
		}
	} );
}

return $.ui.tabs;

} ) );


/***/ }),

/***/ "./node_modules/nestedSortable/jquery.mjs.nestedSortable.js":
/*!******************************************************************!*\
  !*** ./node_modules/nestedSortable/jquery.mjs.nestedSortable.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*
 * jQuery UI Nested Sortable
 * v 2.1a / 2016-02-04
 * https://github.com/ilikenwf/nestedSortable
 *
 * Depends on:
 *	 jquery.ui.sortable.js 1.10+
 *
 * Copyright (c) 2010-2016 Manuele J Sarfatti and contributors
 * Licensed under the MIT License
 * http://www.opensource.org/licenses/mit-license.php
 */
(function( factory ) {
	"use strict";

	if ( true ) {

		// AMD. Register as an anonymous module.
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
			__webpack_require__(/*! jquery */ "jquery"),
			__webpack_require__(/*! jquery-ui/sortable */ "./node_modules/jquery-ui/ui/widgets/sortable.js")
		], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}
}(function($) {
	"use strict";

	function isOverAxis( x, reference, size ) {
		return ( x > reference ) && ( x < ( reference + size ) );
	}

	$.widget("mjs.nestedSortable", $.extend({}, $.ui.sortable.prototype, {

		options: {
			disableParentChange: false,
			doNotClear: false,
			expandOnHover: 700,
			isAllowed: function() { return true; },
			isTree: false,
			listType: "ol",
			maxLevels: 0,
			protectRoot: false,
			rootID: null,
			rtl: false,
			startCollapsed: false,
			tabSize: 20,

			branchClass: "mjs-nestedSortable-branch",
			collapsedClass: "mjs-nestedSortable-collapsed",
			disableNestingClass: "mjs-nestedSortable-no-nesting",
			errorClass: "mjs-nestedSortable-error",
			expandedClass: "mjs-nestedSortable-expanded",
			hoveringClass: "mjs-nestedSortable-hovering",
			leafClass: "mjs-nestedSortable-leaf",
			disabledClass: "mjs-nestedSortable-disabled"
		},

		_create: function() {
			var self = this,
				err;

			this.element.data("ui-sortable", this.element.data("mjs-nestedSortable"));

			// mjs - prevent browser from freezing if the HTML is not correct
			if (!this.element.is(this.options.listType)) {
				err = "nestedSortable: " +
					"Please check that the listType option is set to your actual list type";

				throw new Error(err);
			}

			// if we have a tree with expanding/collapsing functionality,
			// force 'intersect' tolerance method
			if (this.options.isTree && this.options.expandOnHover) {
				this.options.tolerance = "intersect";
			}

			$.ui.sortable.prototype._create.apply(this, arguments);

			// prepare the tree by applying the right classes
			// (the CSS is responsible for actual hide/show functionality)
			if (this.options.isTree) {
				$(this.items).each(function() {
					var $li = this.item,
						hasCollapsedClass = $li.hasClass(self.options.collapsedClass),
						hasExpandedClass = $li.hasClass(self.options.expandedClass);

					if ($li.children(self.options.listType).length) {
						$li.addClass(self.options.branchClass);
						// expand/collapse class only if they have children

						if ( !hasCollapsedClass && !hasExpandedClass ) {
							if (self.options.startCollapsed) {
								$li.addClass(self.options.collapsedClass);
							} else {
								$li.addClass(self.options.expandedClass);
							}
						}
					} else {
						$li.addClass(self.options.leafClass);
					}
				});
			}
		},

		_destroy: function() {
			this.element
				.removeData("mjs-nestedSortable")
				.removeData("ui-sortable");
			return $.ui.sortable.prototype._destroy.apply(this, arguments);
		},

		_mouseDrag: function(event) {
			var i,
				item,
				itemElement,
				intersection,
				self = this,
				o = this.options,
				scrolled = false,
				$document = $(document),
				previousTopOffset,
				parentItem,
				level,
				childLevels,
				itemAfter,
				itemBefore,
				newList,
				method,
				a,
				previousItem,
				nextItem,
				helperIsNotSibling;

			//Compute the helpers position
			this.position = this._generatePosition(event);
			this.positionAbs = this._convertPositionTo("absolute");

			if (!this.lastPositionAbs) {
				this.lastPositionAbs = this.positionAbs;
			}

			//Do scrolling
			if (this.options.scroll) {
				if (this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {

					if (
						(
							this.overflowOffset.top +
							this.scrollParent[0].offsetHeight
						) -
						event.pageY <
						o.scrollSensitivity
					) {
						scrolled = this.scrollParent.scrollTop() + o.scrollSpeed;
						this.scrollParent.scrollTop(scrolled);
					} else if (
						event.pageY -
						this.overflowOffset.top <
						o.scrollSensitivity
					) {
						scrolled = this.scrollParent.scrollTop() - o.scrollSpeed;
						this.scrollParent.scrollTop(scrolled);
					}

					if (
						(
							this.overflowOffset.left +
							this.scrollParent[0].offsetWidth
						) -
						event.pageX <
						o.scrollSensitivity
					) {
						scrolled = this.scrollParent.scrollLeft() + o.scrollSpeed;
						this.scrollParent.scrollLeft(scrolled);
					} else if (
						event.pageX -
						this.overflowOffset.left <
						o.scrollSensitivity
					) {
						scrolled = this.scrollParent.scrollLeft() - o.scrollSpeed;
						this.scrollParent.scrollLeft(scrolled);
					}

				} else {

					if (
						event.pageY -
						$document.scrollTop() <
						o.scrollSensitivity
					) {
						scrolled = $document.scrollTop() - o.scrollSpeed;
						$document.scrollTop(scrolled);
					} else if (
						$(window).height() -
						(
							event.pageY -
							$document.scrollTop()
						) <
						o.scrollSensitivity
					) {
						scrolled = $document.scrollTop() + o.scrollSpeed;
						$document.scrollTop(scrolled);
					}

					if (
						event.pageX -
						$document.scrollLeft() <
						o.scrollSensitivity
					) {
						scrolled = $document.scrollLeft() - o.scrollSpeed;
						$document.scrollLeft(scrolled);
					} else if (
						$(window).width() -
						(
							event.pageX -
							$document.scrollLeft()
						) <
						o.scrollSensitivity
					) {
						scrolled = $document.scrollLeft() + o.scrollSpeed;
						$document.scrollLeft(scrolled);
					}

				}

				if (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
					$.ui.ddmanager.prepareOffsets(this, event);
				}
			}

			//Regenerate the absolute position used for position checks
			this.positionAbs = this._convertPositionTo("absolute");

			// mjs - find the top offset before rearrangement,
			previousTopOffset = this.placeholder.offset().top;

			//Set the helper position
			if (!this.options.axis || this.options.axis !== "y") {
				this.helper[0].style.left = this.position.left + "px";
			}
			if (!this.options.axis || this.options.axis !== "x") {
				this.helper[0].style.top = (this.position.top) + "px";
			}

			// mjs - check and reset hovering state at each cycle
			this.hovering = this.hovering ? this.hovering : null;
			this.mouseentered = this.mouseentered ? this.mouseentered : false;

			// mjs - let's start caching some variables
			(function() {
				var _parentItem = this.placeholder.parent().parent();
				if (_parentItem && _parentItem.closest(".ui-sortable").length) {
					parentItem = _parentItem;
				}
			}.call(this));

			level = this._getLevel(this.placeholder);
			childLevels = this._getChildLevels(this.helper);
			newList = document.createElement(o.listType);

			//Rearrange
			for (i = this.items.length - 1; i >= 0; i--) {

				//Cache variables and intersection, continue if no intersection
				item = this.items[i];
				itemElement = item.item[0];
				intersection = this._intersectsWithPointer(item);
				if (!intersection) {
					continue;
				}

				// Only put the placeholder inside the current Container, skip all
				// items form other containers. This works because when moving
				// an item from one container to another the
				// currentContainer is switched before the placeholder is moved.
				//
				// Without this moving items in "sub-sortables" can cause the placeholder to jitter
				// beetween the outer and inner container.
				if (item.instance !== this.currentContainer) {
					continue;
				}

				// No action if intersected item is disabled
				// and the element above or below in the direction we're going is also disabled
				if (itemElement.className.indexOf(o.disabledClass) !== -1) {
					// Note: intersection hardcoded direction values from
					// jquery.ui.sortable.js:_intersectsWithPointer
					if (intersection === 2) {
						// Going down
						itemAfter = this.items[i + 1];
						if (itemAfter && itemAfter.item.hasClass(o.disabledClass)) {
							continue;
						}

					} else if (intersection === 1) {
						// Going up
						itemBefore = this.items[i - 1];
						if (itemBefore && itemBefore.item.hasClass(o.disabledClass)) {
							continue;
						}
					}
				}

				method = intersection === 1 ? "next" : "prev";

				// cannot intersect with itself
				// no useless actions that have been done before
				// no action if the item moved is the parent of the item checked
				if (itemElement !== this.currentItem[0] &&
					this.placeholder[method]()[0] !== itemElement &&
					!$.contains(this.placeholder[0], itemElement) &&
					(
						this.options.type === "semi-dynamic" ?
							!$.contains(this.element[0], itemElement) :
							true
					)
				) {

					// mjs - we are intersecting an element:
					// trigger the mouseenter event and store this state
					if (!this.mouseentered) {
						$(itemElement).mouseenter();
						this.mouseentered = true;
					}

					// mjs - if the element has children and they are hidden,
					// show them after a delay (CSS responsible)
					if (o.isTree && $(itemElement).hasClass(o.collapsedClass) && o.expandOnHover) {
						if (!this.hovering) {
							$(itemElement).addClass(o.hoveringClass);
							this.hovering = window.setTimeout(function() {
								$(itemElement)
									.removeClass(o.collapsedClass)
									.addClass(o.expandedClass);

								self.refreshPositions();
								self._trigger("expand", event, self._uiHash());
							}, o.expandOnHover);
						}
					}

					this.direction = intersection === 1 ? "down" : "up";

					// mjs - rearrange the elements and reset timeouts and hovering state
					if (this.options.tolerance === "pointer" || this._intersectsWithSides(item)) {
						$(itemElement).mouseleave();
						this.mouseentered = false;
						$(itemElement).removeClass(o.hoveringClass);
						if (this.hovering) {
							window.clearTimeout(this.hovering);
						}
						this.hovering = null;

						// mjs - do not switch container if
						// it's a root item and 'protectRoot' is true
						// or if it's not a root item but we are trying to make it root
						if (o.protectRoot &&
							!(
								this.currentItem[0].parentNode === this.element[0] &&
								// it's a root item
								itemElement.parentNode !== this.element[0]
								// it's intersecting a non-root item
							)
						) {
							if (this.currentItem[0].parentNode !== this.element[0] &&
								itemElement.parentNode === this.element[0]
							) {

								if ( !$(itemElement).children(o.listType).length) {
									itemElement.appendChild(newList);
									if (o.isTree) {
										$(itemElement)
											.removeClass(o.leafClass)
											.addClass(o.branchClass + " " + o.expandedClass);
									}
								}

								if (this.direction === "down") {
									a = $(itemElement).prev().children(o.listType);
								} else {
									a = $(itemElement).children(o.listType);
								}

								if (a[0] !== undefined) {
									this._rearrange(event, null, a);
								}

							} else {
								this._rearrange(event, item);
							}
						} else if (!o.protectRoot) {
							this._rearrange(event, item);
						}
					} else {
						break;
					}

					// Clear emtpy ul's/ol's
					this._clearEmpty(itemElement);

					this._trigger("change", event, this._uiHash());
					break;
				}
			}

			// mjs - to find the previous sibling in the list,
			// keep backtracking until we hit a valid list item.
			(function() {
				var _previousItem = this.placeholder.prev();
				if (_previousItem.length) {
					previousItem = _previousItem;
				} else {
					previousItem = null;
				}
			}.call(this));

			if (previousItem != null) {
				while (
					previousItem[0].nodeName.toLowerCase() !== "li" ||
					previousItem[0].className.indexOf(o.disabledClass) !== -1 ||
					previousItem[0] === this.currentItem[0] ||
					previousItem[0] === this.helper[0]
				) {
					if (previousItem[0].previousSibling) {
						previousItem = $(previousItem[0].previousSibling);
					} else {
						previousItem = null;
						break;
					}
				}
			}

			// mjs - to find the next sibling in the list,
			// keep stepping forward until we hit a valid list item.
			(function() {
				var _nextItem = this.placeholder.next();
				if (_nextItem.length) {
					nextItem = _nextItem;
				} else {
					nextItem = null;
				}
			}.call(this));

			if (nextItem != null) {
				while (
					nextItem[0].nodeName.toLowerCase() !== "li" ||
					nextItem[0].className.indexOf(o.disabledClass) !== -1 ||
					nextItem[0] === this.currentItem[0] ||
					nextItem[0] === this.helper[0]
				) {
					if (nextItem[0].nextSibling) {
						nextItem = $(nextItem[0].nextSibling);
					} else {
						nextItem = null;
						break;
					}
				}
			}

			this.beyondMaxLevels = 0;

			// mjs - if the item is moved to the left, send it one level up
			// but only if it's at the bottom of the list
			if (parentItem != null &&
				nextItem == null &&
				!(o.protectRoot && parentItem[0].parentNode == this.element[0]) &&
				(
					o.rtl &&
					(
						this.positionAbs.left +
						this.helper.outerWidth() > parentItem.offset().left +
						parentItem.outerWidth()
					) ||
					!o.rtl && (this.positionAbs.left < parentItem.offset().left)
				)
			) {

				parentItem.after(this.placeholder[0]);
				helperIsNotSibling = !parentItem
											.children(o.listItem)
											.children("li:visible:not(.ui-sortable-helper)")
											.length;
				if (o.isTree && helperIsNotSibling) {
					parentItem
						.removeClass(this.options.branchClass + " " + this.options.expandedClass)
						.addClass(this.options.leafClass);
				}
                if(typeof parentItem !== 'undefined')
				    this._clearEmpty(parentItem[0]);
				this._trigger("change", event, this._uiHash());
				// mjs - if the item is below a sibling and is moved to the right,
				// make it a child of that sibling
			} else if (previousItem != null &&
				!previousItem.hasClass(o.disableNestingClass) &&
				(
					previousItem.children(o.listType).length &&
					previousItem.children(o.listType).is(":visible") ||
					!previousItem.children(o.listType).length
				) &&
				!(o.protectRoot && this.currentItem[0].parentNode === this.element[0]) &&
				(
					o.rtl &&
					(
						this.positionAbs.left +
						this.helper.outerWidth() <
						previousItem.offset().left +
						previousItem.outerWidth() -
						o.tabSize
					) ||
					!o.rtl &&
					(this.positionAbs.left > previousItem.offset().left + o.tabSize)
				)
			) {

				this._isAllowed(previousItem, level, level + childLevels + 1);

				if (!previousItem.children(o.listType).length) {
					previousItem[0].appendChild(newList);
					if (o.isTree) {
						previousItem
							.removeClass(o.leafClass)
							.addClass(o.branchClass + " " + o.expandedClass);
					}
				}

				// mjs - if this item is being moved from the top, add it to the top of the list.
				if (previousTopOffset && (previousTopOffset <= previousItem.offset().top)) {
					previousItem.children(o.listType).prepend(this.placeholder);
				} else {
					// mjs - otherwise, add it to the bottom of the list.
					previousItem.children(o.listType)[0].appendChild(this.placeholder[0]);
				}
                if(typeof parentItem !== 'undefined')
				    this._clearEmpty(parentItem[0]);
				this._trigger("change", event, this._uiHash());
			} else {
				this._isAllowed(parentItem, level, level + childLevels);
			}

			//Post events to containers
			this._contactContainers(event);

			//Interconnect with droppables
			if ($.ui.ddmanager) {
				$.ui.ddmanager.drag(this, event);
			}

			//Call callbacks
			this._trigger("sort", event, this._uiHash());

			this.lastPositionAbs = this.positionAbs;
			return false;

		},

		_mouseStop: function(event) {
			// mjs - if the item is in a position not allowed, send it back
			if (this.beyondMaxLevels) {

				this.placeholder.removeClass(this.options.errorClass);

				if (this.domPosition.prev) {
					$(this.domPosition.prev).after(this.placeholder);
				} else {
					$(this.domPosition.parent).prepend(this.placeholder);
				}

				this._trigger("revert", event, this._uiHash());

			}

			// mjs - clear the hovering timeout, just to be sure
			$("." + this.options.hoveringClass)
				.mouseleave()
				.removeClass(this.options.hoveringClass);

			this.mouseentered = false;
			if (this.hovering) {
				window.clearTimeout(this.hovering);
			}
			this.hovering = null;

			this._relocate_event = event;
			this._pid_current = $(this.domPosition.parent).parent().attr("id");
			this._sort_current = this.domPosition.prev ? $(this.domPosition.prev).next().index() : 0;
			$.ui.sortable.prototype._mouseStop.apply(this, arguments); //asybnchronous execution, @see _clear for the relocate event.
		},

		// mjs - this function is slightly modified
		// to make it easier to hover over a collapsed element and have it expand
		_intersectsWithSides: function(item) {

			var half = this.options.isTree ? .8 : .5,
				isOverBottomHalf = isOverAxis(
					this.positionAbs.top + this.offset.click.top,
					item.top + (item.height * half),
					item.height
				),
				isOverTopHalf = isOverAxis(
					this.positionAbs.top + this.offset.click.top,
					item.top - (item.height * half),
					item.height
				),
				isOverRightHalf = isOverAxis(
					this.positionAbs.left + this.offset.click.left,
					item.left + (item.width / 2),
					item.width
				),
				verticalDirection = this._getDragVerticalDirection(),
				horizontalDirection = this._getDragHorizontalDirection();

			if (this.floating && horizontalDirection) {
				return (
					(horizontalDirection === "right" && isOverRightHalf) ||
					(horizontalDirection === "left" && !isOverRightHalf)
				);
			} else {
				return verticalDirection && (
					(verticalDirection === "down" && isOverBottomHalf) ||
					(verticalDirection === "up" && isOverTopHalf)
				);
			}

		},

		_contactContainers: function() {

			if (this.options.protectRoot && this.currentItem[0].parentNode === this.element[0] ) {
				return;
			}

			$.ui.sortable.prototype._contactContainers.apply(this, arguments);

		},

		_clear: function() {
			var i,
				item;

			$.ui.sortable.prototype._clear.apply(this, arguments);

			//relocate event
			if (!(this._pid_current === this._uiHash().item.parent().parent().attr("id") &&
				this._sort_current === this._uiHash().item.index())) {
				this._trigger("relocate", this._relocate_event, this._uiHash());
			}

			// mjs - clean last empty ul/ol
			for (i = this.items.length - 1; i >= 0; i--) {
				item = this.items[i].item[0];
				this._clearEmpty(item);
			}

		},

		serialize: function(options) {

			var o = $.extend({}, this.options, options),
				items = this._getItemsAsjQuery(o && o.connected),
				str = [];

			$(items).each(function() {
				var res = ($(o.item || this).attr(o.attribute || "id") || "")
						.match(o.expression || (/(.+)[-=_](.+)/)),
					pid = ($(o.item || this).parent(o.listType)
						.parent(o.items)
						.attr(o.attribute || "id") || "")
						.match(o.expression || (/(.+)[-=_](.+)/));

				if (res) {
					str.push(
						(
							(o.key || res[1]) +
							"[" +
							(o.key && o.expression ? res[1] : res[2]) + "]"
						) +
						"=" +
						(pid ? (o.key && o.expression ? pid[1] : pid[2]) : o.rootID));
				}
			});

			if (!str.length && o.key) {
				str.push(o.key + "=");
			}

			return str.join("&");

		},

		toHierarchy: function(options) {

			var o = $.extend({}, this.options, options),
				ret = [];

			$(this.element).children(o.items).each(function() {
				var level = _recursiveItems(this);
				ret.push(level);
			});

			return ret;

			function _recursiveItems(item) {
				var id = ($(item).attr(o.attribute || "id") || "").match(o.expression || (/(.+)[-=_](.+)/)),
					currentItem;

				var data = $(item).data();
				if (data.nestedSortableItem) {
					delete data.nestedSortableItem; // Remove the nestedSortableItem object from the data
				}

				if (id) {
					currentItem = {
						"id": id[2]
					};

					currentItem = $.extend({}, currentItem, data); // Combine the two objects

					if ($(item).children(o.listType).children(o.items).length > 0) {
						currentItem.children = [];
						$(item).children(o.listType).children(o.items).each(function() {
							var level = _recursiveItems(this);
							currentItem.children.push(level);
						});
					}
					return currentItem;
				}
			}
		},

		toArray: function(options) {

			var o = $.extend({}, this.options, options),
				sDepth = o.startDepthCount || 0,
				ret = [],
				left = 1;

			if (!o.excludeRoot) {
				ret.push({
					"item_id": o.rootID,
					"parent_id": null,
					"depth": sDepth,
					"left": left,
					"right": ($(o.items, this.element).length + 1) * 2
				});
				left++;
			}

			$(this.element).children(o.items).each(function() {
				left = _recursiveArray(this, sDepth, left);
			});

			ret = ret.sort(function(a, b) { return (a.left - b.left); });

			return ret;

			function _recursiveArray(item, depth, _left) {

				var right = _left + 1,
					id,
					pid,
					parentItem;

				if ($(item).children(o.listType).children(o.items).length > 0) {
					depth++;
					$(item).children(o.listType).children(o.items).each(function() {
						right = _recursiveArray($(this), depth, right);
					});
					depth--;
				}

				id = ($(item).attr(o.attribute || "id")).match(o.expression || (/(.+)[-=_](.+)/));

				if (depth === sDepth) {
					pid = o.rootID;
				} else {
					parentItem = ($(item).parent(o.listType)
											.parent(o.items)
											.attr(o.attribute || "id"))
											.match(o.expression || (/(.+)[-=_](.+)/));
					pid = parentItem[2];
				}

				if (id) {
					        var name = $(item).data("name");
						ret.push({
							"id": id[2],
							"parent_id": pid,
							"depth": depth,
							"left": _left,
							"right": right,
							"name":name
						});
				}

				_left = right + 1;
				return _left;
			}

		},

		_clearEmpty: function (item) {
			function replaceClass(elem, search, replace, swap) {
				if (swap) {
					search = [replace, replace = search][0];
				}

				$(elem).removeClass(search).addClass(replace);
			}

			var o = this.options,
				childrenList = $(item).children(o.listType),
				hasChildren = childrenList.is(':not(:empty)');

			var doNotClear =
				o.doNotClear ||
				hasChildren ||
				o.protectRoot && $(item)[0] === this.element[0];

			if (o.isTree) {
				replaceClass(item, o.branchClass, o.leafClass, doNotClear);

				if (doNotClear && hasChildren) {
					replaceClass(item, o.collapsedClass, o.expandedClass);
				}
			}

			if (!doNotClear) {
				childrenList.remove();
			}
		},

		_getLevel: function(item) {

			var level = 1,
				list;

			if (this.options.listType) {
				list = item.closest(this.options.listType);
				while (list && list.length > 0 && !list.is(".ui-sortable")) {
					level++;
					list = list.parent().closest(this.options.listType);
				}
			}

			return level;
		},

		_getChildLevels: function(parent, depth) {
			var self = this,
				o = this.options,
				result = 0;
			depth = depth || 0;

			$(parent).children(o.listType).children(o.items).each(function(index, child) {
				result = Math.max(self._getChildLevels(child, depth + 1), result);
			});

			return depth ? result + 1 : result;
		},

		_isAllowed: function(parentItem, level, levels) {
			var o = this.options,
				// this takes into account the maxLevels set to the recipient list
				maxLevels = this
					.placeholder
					.closest(".ui-sortable")
					.nestedSortable("option", "maxLevels"),

				// Check if the parent has changed to prevent it, when o.disableParentChange is true
				oldParent = this.currentItem.parent().parent(),
				disabledByParentchange = o.disableParentChange && (
					//From somewhere to somewhere else, except the root
					typeof parentItem !== 'undefined' && !oldParent.is(parentItem) ||
					typeof parentItem === 'undefined' && oldParent.is("li")	//From somewhere to the root
				);
			// mjs - is the root protected?
			// mjs - are we nesting too deep?
			if (
				disabledByParentchange ||
				!o.isAllowed(this.placeholder, parentItem, this.currentItem)
			) {
				this.placeholder.addClass(o.errorClass);
				if (maxLevels < levels && maxLevels !== 0) {
					this.beyondMaxLevels = levels - maxLevels;
				} else {
					this.beyondMaxLevels = 1;
				}
			} else {
				if (maxLevels < levels && maxLevels !== 0) {
					this.placeholder.addClass(o.errorClass);
					this.beyondMaxLevels = levels - maxLevels;
				} else {
					this.placeholder.removeClass(o.errorClass);
					this.beyondMaxLevels = 0;
				}
			}
		}

	}));

	$.mjs.nestedSortable.prototype.options = $.extend(
		{},
		$.ui.sortable.prototype.options,
		$.mjs.nestedSortable.prototype.options
	);
}));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvbXBvbmVudHMvQnRuR3JwRHJvcC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvbXBvbmVudHMvSWNvbnMvcGlja2VyLmpzIiwid2VicGFjazovLy8uL2RldmVsb3AvY29tcG9uZW50cy9JY29ucy9waWNrZXIuc2NzcyIsIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvbXBvbmVudHMvT3V0c2lkZUNsaWNrL2luZGV4LmpzIiwid2VicGFjazovLy8uL2RldmVsb3AvY29tcG9uZW50cy9UcmVlL0FkZC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvbXBvbmVudHMvVHJlZS9CdWxrL2luZGV4LmpzIiwid2VicGFjazovLy8uL2RldmVsb3AvY29tcG9uZW50cy9UcmVlL0RlbGV0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvbXBvbmVudHMvVHJlZS9EZWxldGVTZWxlY3RlZC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvbXBvbmVudHMvVHJlZS9FZGl0L2luZGV4LmpzIiwid2VicGFjazovLy8uL2RldmVsb3AvY29tcG9uZW50cy9UcmVlL0l0ZW1zL2luZGV4LmpzIiwid2VicGFjazovLy8uL2RldmVsb3AvY29tcG9uZW50cy9UcmVlL1JlYnVpbGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vZGV2ZWxvcC9jb21wb25lbnRzL1RyZWUvU2F2ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvbXBvbmVudHMvVHJlZS9idWlsZGVyLmpzIiwid2VicGFjazovLy8uL2RldmVsb3AvY29tcG9uZW50cy9UcmVlL2J1aWxkZXIuc2NzcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanF1ZXJ5LWRlc2VyaWFsaXplL3NyYy9qcXVlcnkuZGVzZXJpYWxpemUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2pxdWVyeS11aS90aGVtZXMvYmFzZS90YWJzLmNzcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanF1ZXJ5LXVpL3VpL2VmZmVjdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanF1ZXJ5LXVpL3VpL2VmZmVjdHMvZWZmZWN0LXNsaWRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9qcXVlcnktdWkvdWkvd2lkZ2V0cy9zb3J0YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanF1ZXJ5LXVpL3VpL3dpZGdldHMvdGFicy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbmVzdGVkU29ydGFibGUvanF1ZXJ5Lm1qcy5uZXN0ZWRTb3J0YWJsZS5qcyJdLCJuYW1lcyI6WyJCdG5HcnBEcm9wIiwic2VsZWN0b3IiLCJkaXIiLCJvblNob3ciLCJ1bmRlZmluZWQiLCIkZHJvcEJ0biIsIkJ1dHRvbiIsInRleHQiLCJpY29ucyIsInByaW1hcnkiLCJlIiwicHJldmVudERlZmF1bHQiLCIkYnV0dG9uIiwiJCIsImN1cnJlbnRUYXJnZXQiLCJjbG9zZXN0IiwiZmluZCIsIm5vdCIsImZpbHRlciIsImVhY2giLCJpIiwiZWwiLCJyZW1vdmVDbGFzcyIsInBhcmVudCIsIm5leHQiLCJoaWRlIiwidG9nZ2xlQ2xhc3MiLCJibHVyIiwiJGRyb3Bkb3duIiwid2lkdGgiLCJoZWlnaHQiLCJwb3MiLCJvZmZzZXQiLCJ0b3AiLCJsZWZ0Iiwic2xpZGVUb2dnbGUiLCJoYXNDbGFzcyIsIiRkcm9wZG93bkRpdiIsImJ1dHRvbnNldCIsIk91dHNpZGVDbGljayIsInNsaWRlVXAiLCJwbHVnaW5OYW1lIiwiZGF0YVBsdWdpbiIsImRlZmF1bHRzIiwib25TZWxlY3QiLCJjdXJyZW50SXRlbSIsIlBsdWdpbiIsImNvbnN0cnVjdG9yIiwiJGVsZW1lbnQiLCJvcHRpb25zIiwiZXh0ZW5kIiwiJGNvbnRhaW5lciIsInByb3RvdHlwZSIsImluaXQiLCJzZWxlY3RlZEljb24iLCIkaWNvbnNEaXYiLCIkaWNvbnNTZWFyY2giLCIkZm9udExpc3QiLCIkaWNvbnMiLCIkY29sb3JCb3hlcyIsIiRjdXN0b21pemF0aW9uIiwiJHByZXZpZXciLCJvbiIsInN0b3BQcm9wYWdhdGlvbiIsImNvbnRleHQiLCJzaG93UGlja2VyIiwiJGljb25DYXRzIiwiZXEiLCJjYXRzQ2FjaGUiLCJtYXAiLCIkY2F0ZWdvcnkiLCJwb3NpdGlvbiIsImlkIiwiYXR0ciIsImJvdHRvbSIsImdldCIsImhpZGVQaWNrZXIiLCJjbGljayIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsInNlbGVjdEljb24iLCJrZXl1cCIsImtleXdvcmQiLCJ2YWwiLCJsZW5ndGgiLCJzaG93IiwiJGNhdGVnb3JpZXNMaXN0IiwiY2hhbmdlIiwic2Nyb2xsVG9JY29uIiwidGFyZ2V0IiwiY2F0ZWdvcnkiLCJjYXQiLCJpc0luVmlld3BvcnQiLCJpbnNlcnRJY29uIiwicHJldmlld0ljb24iLCJhZGRDbGFzcyIsInByb3AiLCJ0cmlnZ2VyIiwiJHRhYnMiLCJ0YWJzIiwidGFic0JvdHRvbVNlbGVjdG9yIiwiYXBwZW5kVG8iLCJiaW5kIiwidmlld3BvcnRUb3AiLCJzY3JvbGxUb3AiLCJ2aWV3cG9ydEJvdHRvbSIsImdldEljb25Qcm9wcyIsImljb25DbGFzcyIsImNsYXNzZXMiLCJwdXNoIiwic2VyaWFsaXplQXJyYXkiLCJmaWVsZCIsInZhbHVlIiwiam9pbiIsImljb24iLCJpc0VtcHR5T2JqZWN0IiwiaWNvbkh0bWwiLCJodG1sIiwiY2FsbCIsImNoaWxkcmVuIiwic2V0Q3VycmVudEljb24iLCIkY3Vyckljb24iLCIkc2V0dGluZ3MiLCJyZW1vdmVBdHRyIiwiaWNvbkluZm8iLCJ0cmltIiwic3BsaXQiLCJwcmVmaXgiLCJzaGlmdCIsIiRpY29uIiwiJHNlbGVjdHMiLCIkaW5wdXRzIiwiJGNvbG9yIiwicHJldiIsInNsaWRlRG93biIsImNlbnRlciIsImFkanVzdG1lbnQiLCJhbmltYXRlIiwiZGVzdHJveSIsImRhdGEiLCJmbiIsInBsdWdpbkluc3RhbmNlIiwiYXJnIiwiaW5zdGFuY2UiLCJlbGVtZW50IiwicmVzdCIsImVycm9yIiwiaGFuZGxlT3V0c2lkZUNsaWNrIiwiZG9jdW1lbnQiLCJib2R5IiwiaXMiLCJpbmRleE9mIiwiaW5uZXJIVE1MIiwid2luZG93IiwibGFuZyIsIkFkZEJ0biIsInRyZWUiLCIkZWRpdERpYWxvZyIsIiRhZGRCdG4iLCJhZGRCdG4iLCJkaWFsb2dFZGl0IiwiX3BvcHVsYXRlRm9ybSIsImRpYWxvZyIsImFkZE5vZGUiLCJhZGRJdGVtIiwiYWRkQnRuT2Zmc2V0IiwiQWRkQnVsa0J0biIsImdldE9wdGlvbnMiLCIkbGlzdCIsInBhZGRpbmciLCIkaXRlbSIsIl9nZXRJdGVtSWQiLCJ0aXRsZSIsIm9wdGlvbiIsImNvZGVNaXJyb3IiLCIkdGV4dGFyZWEiLCJhZGRCdWxrTGlzdCIsIiRhZGRCdWxrQnRuIiwiYWRkQnVsa0J0biIsInRoZW4iLCJDb2RlTWlycm9yIiwiZGVmYXVsdCIsImluaXRDb2RlTWlycm9yIiwiaW5zZXJ0VGV4dCIsImNtVGFicyIsImNtIiwiZG9jIiwiZ2V0RG9jIiwibGluZSIsImdldExpbmUiLCJnZXRDdXJzb3IiLCJtYXRjaGVzIiwibWF0Y2giLCJzcGFjZXMiLCJ0YWJTaXplIiwib3BlcmF0aW9uIiwiZnJvbSIsImVuZCIsImNoYW5nZUVuZCIsImluZGVudExpbmUiLCJpdGVtc1N0ciIsImxpc3QiLCIkdHlwZSIsIml0ZW1zIiwiaiIsIml0ZW0iLCJwYXJ0cyIsInJlcGxhY2UiLCJwYXJlbnRzIiwidG9nZ2xlIiwic2V0VmFsdWUiLCJjbGVhckhpc3RvcnkiLCJub25lIiwibmVzdGVkTGlzdCIsImFkZF9saXN0IiwiZ2V0VmFsdWUiLCIkZm9ybSIsImZpZWxkcyIsInBhcmVudElkIiwiX2FkZEJ1bGsiLCJwYXJhbSIsIkRlbGV0ZUl0ZW0iLCJpdGVtSUQiLCIkZGVsZXRlRGlhbG9nIiwiZGVmYXVsdEJ1dHRvbnMiLCJkZWxldGVDaGlsZE5vZGVzIiwiZGVsQ2hpbGROb2RlIiwiJG5vZGUiLCJfcmVtb3ZlTm9kZSIsIl9zYXZlVHJlZSIsImRlbGV0ZU5vZGUiLCJkZWxOb2RlIiwibGlzdFR5cGUiLCJjYW5jZWwiLCJjYW5jZWxCdG4iLCJkZWxldGVJdGVtQ2xhc3MiLCJidXR0b25zIiwiRGlhbG9nIiwiZGlhbG9nQ29uZmlybSIsIlNlbGVjdEFsbCIsInNlbGVjdEl0ZW1DbGFzcyIsIiRjb25maXJtIiwiY29uZmlybUJ0biIsIml0ZXJhdG9yIiwiJGRlbGV0ZVNlbEJ0biIsImRlbGV0ZVNlbEJ0biIsImRpc2FibGVkIiwiJHNlbGVjdEFsbCIsInNlbGVjdEFsbCIsImNoZWNrZWQiLCJidXR0b24iLCIkY2hlY2tib3hlcyIsIm51bVNlbGVjdGVkIiwiRWRpdEl0ZW0iLCJjaGVja1JlcXVpcmVkIiwicmVtb3ZlIiwidmFsaWQiLCJpdGVyIiwicmVxdWlyZWQiLCJpbnNlcnRBZnRlciIsInN1Ym1pdEZvcm0iLCJhY3Rpb24iLCJfc2F2ZUl0ZW0iLCJlZGl0Rm9ybSIsImhhbmRsZVRpdGxlVXBkYXRlIiwicHJvY2Vzc2luZyIsIklubGluZUVkaXRvciIsImVkaXRJdGVtQ2xhc3MiLCJlZGl0Tm9kZSIsInNhdmVOb2RlIiwiZWRpdEJ0biIsIlRyZWVJdGVtcyIsIm5vTmVzdGluZyIsImFqYXhNZXNzYWdlIiwibmVzdGVkU29ydGFibGUiLCJkaXNhYmxlTmVzdGluZyIsImZvcmNlUGxhY2Vob2xkZXJTaXplIiwiaGFuZGxlIiwiaGVscGVyIiwib3BhY2l0eSIsInBsYWNlaG9sZGVyIiwidG9sZXJhbmNlIiwidG9sZXJhbmNlRWxlbWVudCIsImV4Y2x1ZGVSb290Iiwicm9vdElEIiwiZXJyb3JDbGFzcyIsInVwZGF0ZSIsIml0ZW1zQ2hhbmdlZCIsIl90cmlnZ2VyIiwiJHNhdmVCdG4iLCJSZWJ1aWxkQnRuIiwicmVidWlsZEJ0biIsIlNhdmVCdG4iLCJvbmJlZm9yZXVubG9hZCIsImV2ZW50IiwicmV0dXJuVmFsdWUiLCJ1bnNhdmVkQ2hhbmdlcyIsInNhdmVCdG4iLCJ3aWRnZXQiLCJhamF4VXJsIiwibG9hZFNwZWVkIiwiaXRlbUlkIiwiaXRlbUljb24iLCJpdGVtVGl0bGUiLCJub0l0ZW1zIiwibG9hZGluZyIsIml0ZW1UZW1wbGF0ZSIsImljb25TZWxlY3RDbGFzcyIsImxvYWRlZCIsInVwZGF0ZWQiLCJfY3JlYXRlIiwibXNnT2JqIiwiUHJvbWlzZSIsImFsbCIsIlR3aWciLCJleHRlbmRGdW5jdGlvbiIsInRlbXBsYXRlIiwidHdpZyIsImljb25QaWNrZXIiLCJ1cGRhdGVJdGVtIiwiRGVsZXRlU2VsZWN0ZWQiLCIkcmVidWlsZEJ0biIsImdldEl0ZW1zIiwiZ2V0SlNPTiIsImRvbmUiLCJlbXB0eSIsIl9yZXNldEFjdGlvbnMiLCJfc2hvd0FjdGlvbnMiLCJfYWRkVG9UcmVlIiwiZ2V0Q29kZU1pcnJvckluc3RhbmNlIiwiaXNVbnNhdmVkIiwic2hvd01lc3NhZ2UiLCJtZXNzYWdlIiwiZmFkZUluIiwiZGVsYXkiLCJmYWRlT3V0IiwicG9zdCIsInJlc3AiLCJjYWxsYmFjayIsIiRodG1sIiwiY2hhbmdlTWUiLCIkcGFyZW50SXRlbSIsIiRjaGlsZEl0ZW1zIiwiX3JlbmRlckl0ZW0iLCJlZmZlY3QiLCJkaXJlY3Rpb24iLCJtb2RlIiwiYXBwbHkiLCJzdWJzdHJpbmciLCJjYWxsQmFjayIsImRlc2VyaWFsaXplIiwicmVzZXQiLCJpdGVtc0NvdW50IiwiZGlzcGxheSIsImNzcyIsIl9zY3JvbGxUbyIsIl9yZWZyZXNoSXRlbSIsInJlZHVjZSIsImFjY3VtdWxhdG9yIiwicm93IiwiZnJvbUhlaWdodCIsIm9mZnNldFRvcCIsIiRwYXJlbnROb2RlIiwic2libGluZ3MiLCJpdGVtX2ljb24iLCJyZW5kZXIiLCJyZXBsYWNlbWVudCIsInJlcGxhY2VXaXRoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRWUsU0FBU0EsVUFBVCxDQUFvQkMsUUFBcEIsRUFBZ0U7QUFBQSxNQUFsQ0MsR0FBa0MsdUVBQTVCLE1BQTRCO0FBQUEsTUFBcEJDLE1BQW9CLHVF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QUNIO0FBQ0EsYUFBYSxvQ0FBYTtBQUMxQjtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBLHFEQUFxRDtBQUNyRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7Ozs7Ozs7OztBQ25SRCx1Qzs7Ozs7Ozs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTSxJQUEwQzs7QUFFaEQ7QUFDQSxFQUFFLGlDQUFRLEVBQUUsMkNBQVEsRUFBRSw4RUFBVyxFQUFFLG9DQUFFLE9BQU87QUFBQTtBQUFBO0FBQUEsb0dBQUU7QUFDOUMsRUFBRSxNQUFNLEVBSU47QUFDRixDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQkFBc0IsSUFBSSxZQUFZLElBQUksWUFBWSxJQUFJO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLG1CQUFtQixFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsNkJBQTZCOztBQUU3QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGNBQWM7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQyxRQUFROztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQSwyQ0FBMkMsZUFBZTs7QUFFMUQ7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSw0Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDs7QUFFckQ7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9DQUFvQyxRQUFRO0FBQzVDO0FBQ0EsNkJBQTZCLFFBQVE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0NBQWdDLGdEQUFnRDtBQUNoRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFFBQVE7QUFDdkM7QUFDQTs7QUFFQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBOztBQUVBO0FBQ0EsbUJBQW1CLGlCQUFpQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELHlCQUF5QjtBQUNqRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQ0FBb0MsUUFBUTtBQUM1QztBQUNBLDZCQUE2QixRQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHlCQUF5QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLFFBQVE7QUFDdkM7QUFDQTs7QUFFQSxnREFBZ0QsbUJBQW1CO0FBQ25FOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxrQ0FBa0MsUUFBUTtBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNILHdDQUF3QyxRQUFRO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVDQUF1QyxRQUFROztBQUUvQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxXQUFXO0FBQ1g7O0FBRUEsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQ0FBZ0M7O0FBRWhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFFBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxvQ0FBb0M7QUFDcEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLDRCQUE0Qjs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVELENBQUM7Ozs7Ozs7Ozs7OztBQ2poREQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTSxJQUEwQzs7QUFFaEQ7QUFDQSxFQUFFLGlDQUFRO0FBQ1YsR0FBRywyQ0FBUTtBQUNYLEdBQUcsK0ZBQW9CO0FBQ3ZCLEdBQUcsK0VBQVk7QUFDZixHQUFHLHVHQUF3QjtBQUMzQixHQUFHLG1GQUFjO0FBQ2pCLEdBQUcsK0VBQVk7QUFDZixHQUFHLDZFQUFXO0FBQ2QsR0FBRyxvQ0FBRSxPQUFPO0FBQUE7QUFBQTtBQUFBLG9HQUFFO0FBQ2QsRUFBRSxNQUFNLEVBSU47QUFDRixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxnREFBZ0QsYUFBYSxFQUFFO0FBQy9ELEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYyx5QkFBeUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esd0JBQXdCLHlCQUF5QjtBQUNqRCwwQkFBMEIsMkJBQTJCOztBQUVyRDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1Q0FBdUM7QUFDdkQ7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7O0FBRUEsQ0FBQzs7Ozs7Ozs7Ozs7O0FDMzVCRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU0sSUFBMEM7O0FBRWhEO0FBQ0EsRUFBRSxpQ0FBTztBQUNULEdBQUcsMkNBQVE7QUFDWCxHQUFHLGdHQUFvQjtBQUN2QixHQUFHLG9DQUFFLE9BQU87QUFBQTtBQUFBO0FBQUEsb0dBQUU7QUFDZCxFQUFFLE1BQU0sRUFJTjtBQUNGLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMkNBQTJDOztBQUUzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixhQUFhLEVBQUU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQ0FBa0MsUUFBUTs7QUFFMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0QsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0NBQWtDLFFBQVE7QUFDMUM7QUFDQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUEsc0JBQXNCO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBLHNCQUFzQjtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhCQUE4QixxQkFBcUI7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSixrQ0FBa0MsMEJBQTBCLEVBQUU7O0FBRTlEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwiZmlsZSI6InRyZWUvYnVpbGRlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQnV0dG9uIGZyb20gJy4uL0J1dHRvbi9idXR0b24nO1xuaW1wb3J0IE91dHNpZGVDbGljayBmcm9tICcuLi9PdXRzaWRlQ2xpY2snO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBCdG5HcnBEcm9wKHNlbGVjdG9yLCBkaXIgPSAnZG93bicsIG9uU2hvdyA9IHVuZGVmaW5lZCkge1xuXHRjb25zdCAkZHJvcEJ0biA9IEJ1dHRvbihcblx0XHRzZWxlY3Rvcixcblx0XHR7XG5cdFx0XHR0ZXh0OiBmYWxzZSxcblx0XHRcdGljb25zOiB7XG5cdFx0XHRcdHByaW1hcnk6ICd1aS1pY29uLXRyaWFuZ2xlLTEtcycsXG5cdFx0XHR9LFxuXHRcdH0sXG5cdFx0ZSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdGNvbnN0ICRidXR0b24gPSAkKGUuY3VycmVudFRhcmdldCk7XG5cblx0XHRcdCRidXR0b25cblx0XHRcdFx0LmNsb3Nlc3QoJy5idWxrLWRyb3Bkb3duJylcblx0XHRcdFx0LmZpbmQoc2VsZWN0b3IpXG5cdFx0XHRcdC5ub3QoJGJ1dHRvbilcblx0XHRcdFx0LmZpbHRlcignLmRyb3BwZWQnKVxuXHRcdFx0XHQuZWFjaCgoaSwgZWwpID0+IHtcblx0XHRcdFx0XHQkKGVsKVxuXHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCdkcm9wcGVkJylcblx0XHRcdFx0XHRcdC5wYXJlbnQoKVxuXHRcdFx0XHRcdFx0Lm5leHQoKVxuXHRcdFx0XHRcdFx0LmhpZGUoKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdCRidXR0b24udG9nZ2xlQ2xhc3MoJ2Ryb3BwZWQnKS5ibHVyKCk7XG5cdFx0XHRjb25zdCAkZHJvcGRvd24gPSAkYnV0dG9uLnBhcmVudCgpLm5leHQoKTtcblxuXHRcdFx0Y29uc3Qgd2lkdGggPSAkZHJvcGRvd24ud2lkdGgoKTtcblx0XHRcdGNvbnN0IGhlaWdodCA9ICRkcm9wZG93bi5oZWlnaHQoKTtcblx0XHRcdGNvbnN0IHBvcyA9ICRidXR0b24ub2Zmc2V0KCk7XG5cblx0XHRcdGxldCBvZmZzZXQ7XG5cdFx0XHRpZiAoZGlyID09PSAnZG93bicpIHtcblx0XHRcdFx0b2Zmc2V0ID0ge1xuXHRcdFx0XHRcdHRvcDogcG9zLnRvcCArICRidXR0b24uaGVpZ2h0KCkgKyAxMCxcblx0XHRcdFx0XHRsZWZ0OiBwb3MubGVmdCAtIHdpZHRoIC8gMiArICRidXR0b24ud2lkdGgoKSxcblx0XHRcdFx0fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9mZnNldCA9IHtcblx0XHRcdFx0XHR0b3A6IHBvcy50b3AgLSBoZWlnaHQsXG5cdFx0XHRcdFx0bGVmdDogcG9zLmxlZnQgLSB3aWR0aCAvIDIgLSAkYnV0dG9uLndpZHRoKCksXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdCRkcm9wZG93bi5zbGlkZVRvZ2dsZSgpLm9mZnNldChvZmZzZXQpO1xuXG5cdFx0XHRpZiAodHlwZW9mIG9uU2hvdyA9PT0gJ2Z1bmN0aW9uJyAmJiAkYnV0dG9uLmhhc0NsYXNzKCdkcm9wcGVkJykpIHtcblx0XHRcdFx0b25TaG93KCk7XG5cdFx0XHR9XG5cdFx0fSxcblx0KTtcblxuXHRjb25zdCAkZHJvcGRvd25EaXYgPSAkZHJvcEJ0blxuXHRcdC5wYXJlbnQoKVxuXHRcdC5idXR0b25zZXQoKVxuXHRcdC5uZXh0KCk7XG5cblx0T3V0c2lkZUNsaWNrKCRkcm9wZG93bkRpdiwgKCkgPT4ge1xuXHRcdCRkcm9wQnRuLnJlbW92ZUNsYXNzKCdkcm9wcGVkJyk7XG5cdFx0JGRyb3Bkb3duRGl2LnNsaWRlVXAoKTtcblx0fSk7XG5cblx0cmV0dXJuICRkcm9wQnRuO1xufVxuIiwiLyohXG4gKiBTaXRlbWFrZXIgaWNvblBpY2tlclxuICogQXV0aG9yOiBAYmxpdHplXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgR1BMIGxpY2Vuc2VcbiAqL1xuaW1wb3J0ICdqcXVlcnktdWkvdWkvd2lkZ2V0cy90YWJzJztcbmltcG9ydCAnanF1ZXJ5LXVpL3RoZW1lcy9iYXNlL2NvcmUuY3NzJztcbmltcG9ydCAnanF1ZXJ5LXVpL3RoZW1lcy9iYXNlL3RoZW1lLmNzcyc7XG5pbXBvcnQgJ2pxdWVyeS11aS90aGVtZXMvYmFzZS90YWJzLmNzcyc7XG5cbmltcG9ydCBPdXRzaWRlQ2xpY2sgZnJvbSAnLi4vT3V0c2lkZUNsaWNrJztcblxuaW1wb3J0ICcuL3BpY2tlci5zY3NzJztcblxuY29uc3QgcGx1Z2luTmFtZSA9ICdpY29uUGlja2VyJztcbmNvbnN0IGRhdGFQbHVnaW4gPSBgcGx1Z2luXyR7cGx1Z2luTmFtZX1gO1xuY29uc3QgZGVmYXVsdHMgPSB7XG5cdHNlbGVjdG9yOiAnJyxcblx0d2lkdGg6ICczNTBweCcsXG5cdG9uU2VsZWN0OiAoKSA9PiB7fSxcbn07XG5sZXQgY3VycmVudEl0ZW0gPSB7fTtcblxuLy8gVGhlIGFjdHVhbCBwbHVnaW4gY29uc3RydWN0b3JcbmNvbnN0IFBsdWdpbiA9IGZ1bmN0aW9uIGNvbnN0cnVjdG9yKCRlbGVtZW50KSB7XG5cdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cyk7XG5cdHRoaXMuJGNvbnRhaW5lciA9ICRlbGVtZW50O1xufTtcblxuUGx1Z2luLnByb3RvdHlwZSA9IHtcblx0aW5pdDogZnVuY3Rpb24gaW5pdChvcHRpb25zKSB7XG5cdFx0dGhpcy5zZWxlY3RlZEljb24gPSAnJztcblx0XHR0aGlzLiRpY29uc0RpdiA9ICQoJyNpY29uLXBpY2tlcicpO1xuXHRcdHRoaXMuJGljb25zU2VhcmNoID0gdGhpcy4kaWNvbnNEaXYuZmluZCgnI2ljb25zLXNlYXJjaCcpO1xuXHRcdHRoaXMuJGZvbnRMaXN0ID0gdGhpcy4kaWNvbnNEaXYuZmluZCgnI2ljb25zLWZvbnQtbGlzdCcpO1xuXHRcdHRoaXMuJGljb25zID0gdGhpcy4kZm9udExpc3QuZmluZCgnLmZpbHRlci1pY29uJyk7XG5cdFx0dGhpcy4kY29sb3JCb3hlcyA9IHRoaXMuJGljb25zRGl2LmZpbmQoJy5pY29ucy1jb2xvci1jb250YWluZXInKTtcblx0XHR0aGlzLiRjdXN0b21pemF0aW9uID0gdGhpcy4kaWNvbnNEaXYuZmluZCgnI2ljb24tY3VzdG9taXphdGlvbicpO1xuXHRcdHRoaXMuJHByZXZpZXcgPSB0aGlzLiRpY29uc0Rpdi5maW5kKCcjaWNvbi1waWNrZXItcHJldmlldycpO1xuXG5cdFx0JC5leHRlbmQodGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuXHRcdHRoaXMuJGNvbnRhaW5lci5vbignY2xpY2snLCB0aGlzLm9wdGlvbnMuc2VsZWN0b3IsIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0XHRjb25zdCAkZWxlbWVudCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcblxuXHRcdFx0aWYgKCF0aGlzLiRlbGVtZW50IHx8IHRoaXMuJGVsZW1lbnQuY29udGV4dCAhPT0gJGVsZW1lbnQuY29udGV4dCkge1xuXHRcdFx0XHR0aGlzLnNob3dQaWNrZXIoJGVsZW1lbnQpO1xuXHRcdFx0XHRjb25zdCAkaWNvbkNhdHMgPSB0aGlzLiRmb250TGlzdC5maW5kKCcuaWNvbi1jYXQnKTtcblx0XHRcdFx0Y29uc3QgaGVpZ2h0ID0gJGljb25DYXRzLmVxKDApLmhlaWdodCgpO1xuXG5cdFx0XHRcdC8vIGNyZWF0ZSBjYWNoZSBvZiBpY29uIGNhdHMgYW5kIHRoZWlyIGhlaWdodHMgcmVsYXRpdmUgdG8gdGhlIHRvcCBvZiB0aGUgaWNvbnMgbGlzdCBjb250YWluZXJcblx0XHRcdFx0Ly8gd2Ugb25seSBkbyB0aGlzIG9uY2Vcblx0XHRcdFx0dGhpcy5jYXRzQ2FjaGUgPVxuXHRcdFx0XHRcdHRoaXMuY2F0c0NhY2hlIHx8XG5cdFx0XHRcdFx0JGljb25DYXRzXG5cdFx0XHRcdFx0XHQubWFwKChpLCBlbCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCAkY2F0ZWdvcnkgPSAkKGVsKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgeyB0b3AgfSA9ICRjYXRlZ29yeS5wb3NpdGlvbigpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdGlkOiAkY2F0ZWdvcnkuYXR0cignaWQnKSxcblx0XHRcdFx0XHRcdFx0XHR0b3AsXG5cdFx0XHRcdFx0XHRcdFx0Ym90dG9tOiB0b3AgKyBoZWlnaHQsXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LmdldCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5oaWRlUGlja2VyKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLiRpY29ucy5maW5kKCdpJykuY2xpY2soKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHR0aGlzLnNlbGVjdEljb24oJChlLmN1cnJlbnRUYXJnZXQpKTtcblx0XHR9KTtcblxuXHRcdHRoaXMuJGljb25zU2VhcmNoLmtleXVwKChlKSA9PiB7XG5cdFx0XHRjb25zdCBrZXl3b3JkID0gJChlLmN1cnJlbnRUYXJnZXQpLnZhbCgpO1xuXHRcdFx0aWYgKGtleXdvcmQubGVuZ3RoKSB7XG5cdFx0XHRcdHRoaXMuJGljb25zXG5cdFx0XHRcdFx0LmhpZGUoKVxuXHRcdFx0XHRcdC5maWx0ZXIoYGRpdltkYXRhLWZpbHRlcio9XCIke2tleXdvcmR9XCJdYClcblx0XHRcdFx0XHQuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy4kaWNvbnMuc2hvdygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgJGNhdGVnb3JpZXNMaXN0ID0gdGhpcy4kaWNvbnNEaXZcblx0XHRcdC53aWR0aCh0aGlzLm9wdGlvbnMud2lkdGgpXG5cdFx0XHQuZmluZCgnI2ljb25zLWZvbnQtY2F0LWxpc3QnKVxuXHRcdFx0LmNoYW5nZSgoZSkgPT4ge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHRoaXMuJGljb25zU2VhcmNoLnZhbCgnJyk7XG5cdFx0XHRcdHRoaXMuJGljb25zLnNob3coKTtcblx0XHRcdFx0dGhpcy5zY3JvbGxUb0ljb24oJCgkKGUudGFyZ2V0KS5maW5kKCc6c2VsZWN0ZWQnKS52YWwoKSkpO1xuXHRcdFx0fSk7XG5cblx0XHR0aGlzLiRmb250TGlzdC5vbignc2Nyb2xsJywgKCkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLiRpY29uc1NlYXJjaC52YWwoKS5sZW5ndGgpIHtcblx0XHRcdFx0Ly8gZmluZCBpY29uIGNhdCB0aGF0IGlzIGluIHZpZXdwb3J0XG5cdFx0XHRcdGNvbnN0IGNhdGVnb3J5ID0gdGhpcy5jYXRzQ2FjaGUuZmluZCgoY2F0KSA9PlxuXHRcdFx0XHRcdHRoaXMuaXNJblZpZXdwb3J0KGNhdCksXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKGNhdGVnb3J5KSB7XG5cdFx0XHRcdFx0JGNhdGVnb3JpZXNMaXN0LnZhbChgIyR7Y2F0ZWdvcnkuaWR9YCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuJGljb25zRGl2LmZpbmQoJyNpY29uLXBpY2tlci1pbnNlcnQnKS5jbGljaygoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdHRoaXMuaW5zZXJ0SWNvbih0aGlzLnNlbGVjdGVkSWNvbik7XG5cdFx0fSk7XG5cblx0XHR0aGlzLiRpY29uc0Rpdi5maW5kKCcjaWNvbi1waWNrZXItbm9uZScpLmNsaWNrKChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0dGhpcy5pbnNlcnRJY29uKCcnKTtcblx0XHR9KTtcblxuXHRcdHRoaXMuJGN1c3RvbWl6YXRpb24uZmluZCgnLmljb25zLWN1c3RvbWl6ZScpLmNoYW5nZSgoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy5wcmV2aWV3SWNvbigpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy4kY29sb3JCb3hlcy5jbGljaygoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy4kY29sb3JCb3hlcy5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcblx0XHRcdCQoZS5jdXJyZW50VGFyZ2V0KVxuXHRcdFx0XHQuYWRkQ2xhc3MoJ3NlbGVjdGVkJylcblx0XHRcdFx0Lm5leHQoKVxuXHRcdFx0XHQucHJvcCgnY2hlY2tlZCcsICdjaGVja2VkJylcblx0XHRcdFx0LnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHR0aGlzLnByZXZpZXdJY29uKCk7XG5cdFx0fSk7XG5cblx0XHRjb25zdCAkdGFicyA9ICQoJyNpY29ucy10YWInKS50YWJzKCkucGFyZW50KCk7XG5cblx0XHQvLyBmaXggdGhlIGNsYXNzZXNcblx0XHRjb25zdCB0YWJzQm90dG9tU2VsZWN0b3IgPVxuXHRcdFx0Jy5pY29ucy1ib3R0b20tdGFicyAudWktdGFicy1uYXYsIC5pY29ucy1ib3R0b20tdGFicyAudWktdGFicy1uYXYgPiAqJztcblx0XHQkdGFic1xuXHRcdFx0LmZpbmQodGFic0JvdHRvbVNlbGVjdG9yKVxuXHRcdFx0LnJlbW92ZUNsYXNzKCd1aS1jb3JuZXItYWxsIHVpLWNvcm5lci10b3AnKVxuXHRcdFx0LmFkZENsYXNzKCd1aS1jb3JuZXItYm90dG9tJyk7XG5cblx0XHQvLyBtb3ZlIHRoZSBuYXYgdG8gdGhlIGJvdHRvbVxuXHRcdCR0YWJzXG5cdFx0XHQuZmluZCgnLmljb25zLWJvdHRvbS10YWJzIC51aS10YWJzLW5hdicpXG5cdFx0XHQuYXBwZW5kVG8oJy5pY29ucy1ib3R0b20tdGFicycpO1xuXG5cdFx0dGhpcy5oaWRlUGlja2VyID0gdGhpcy5oaWRlUGlja2VyLmJpbmQodGhpcyk7XG5cdFx0T3V0c2lkZUNsaWNrKHRoaXMuJGljb25zRGl2LCB0aGlzLmhpZGVQaWNrZXIpO1xuXHR9LFxuXG5cdGlzSW5WaWV3cG9ydChjYXQpIHtcblx0XHRjb25zdCB2aWV3cG9ydFRvcCA9IHRoaXMuJGZvbnRMaXN0LnNjcm9sbFRvcCgpO1xuXHRcdGNvbnN0IHZpZXdwb3J0Qm90dG9tID0gdmlld3BvcnRUb3AgKyB0aGlzLiRmb250TGlzdC5oZWlnaHQoKSAvIDI7XG5cblx0XHRyZXR1cm4gY2F0LmJvdHRvbSA+IHZpZXdwb3J0VG9wICYmIGNhdC50b3AgPCB2aWV3cG9ydEJvdHRvbTtcblx0fSxcblxuXHRnZXRJY29uUHJvcHMoaWNvbkNsYXNzKSB7XG5cdFx0Y29uc3QgY2xhc3NlcyA9IFtdO1xuXHRcdGlmIChpY29uQ2xhc3MpIHtcblx0XHRcdGNsYXNzZXMucHVzaChpY29uQ2xhc3MpO1xuXHRcdFx0JC5lYWNoKHRoaXMuJGN1c3RvbWl6YXRpb24uc2VyaWFsaXplQXJyYXkoKSwgKGksIGZpZWxkKSA9PiB7XG5cdFx0XHRcdGlmIChmaWVsZC52YWx1ZSkge1xuXHRcdFx0XHRcdGNsYXNzZXMucHVzaChmaWVsZC52YWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fSxcblxuXHRpbnNlcnRJY29uKGljb24pIHtcblx0XHRpZiAoJC5pc0VtcHR5T2JqZWN0KGN1cnJlbnRJdGVtKSAhPT0gdHJ1ZSkge1xuXHRcdFx0Y29uc3QgaWNvbkNsYXNzID0gdGhpcy5nZXRJY29uUHJvcHMoaWNvbik7XG5cdFx0XHRjb25zdCBpY29uSHRtbCA9IGljb25DbGFzc1xuXHRcdFx0XHQ/IGA8aSBjbGFzcz1cIiR7aWNvbkNsYXNzfVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5gXG5cdFx0XHRcdDogJyc7XG5cblx0XHRcdGN1cnJlbnRJdGVtLmh0bWwoaWNvbkh0bWwpO1xuXHRcdFx0dGhpcy5vcHRpb25zLm9uU2VsZWN0LmNhbGwodGhpcywgY3VycmVudEl0ZW0sIGljb25DbGFzcywgaWNvbkh0bWwpO1xuXHRcdH1cblxuXHRcdHRoaXMuaGlkZVBpY2tlcigpO1xuXHR9LFxuXG5cdHByZXZpZXdJY29uKCkge1xuXHRcdHRoaXMuJHByZXZpZXdcblx0XHRcdC5jaGlsZHJlbignaScpXG5cdFx0XHQuYXR0cignY2xhc3MnLCB0aGlzLmdldEljb25Qcm9wcyh0aGlzLnNlbGVjdGVkSWNvbikpO1xuXHR9LFxuXG5cdHNlbGVjdEljb24oJGVsZW1lbnQpIHtcblx0XHR0aGlzLiRmb250TGlzdC5maW5kKCdhJykucmVtb3ZlQ2xhc3MoJ2ljb24tc2VsZWN0ZWQnKTtcblx0XHR0aGlzLnNlbGVjdGVkSWNvbiA9ICRlbGVtZW50LmF0dHIoJ2NsYXNzJyk7XG5cdFx0dGhpcy5wcmV2aWV3SWNvbih0aGlzLnNlbGVjdGVkSWNvbik7XG5cdFx0JGVsZW1lbnQucGFyZW50KCkuYWRkQ2xhc3MoJ2ljb24tc2VsZWN0ZWQnKTtcblx0fSxcblxuXHRzZXRDdXJyZW50SWNvbigkZWxlbWVudCkge1xuXHRcdGNvbnN0ICRjdXJySWNvbiA9ICRlbGVtZW50LmZpbmQoJ2knKTtcblx0XHRjb25zdCAkc2V0dGluZ3MgPSB0aGlzLiRjdXN0b21pemF0aW9uXG5cdFx0XHQuZmluZCgnOmlucHV0Jylcblx0XHRcdC5yZW1vdmVBdHRyKCdjaGVja2VkJylcblx0XHRcdC5yZW1vdmVBdHRyKCdzZWxlY3RlZCcpO1xuXG5cdFx0dGhpcy4kY29sb3JCb3hlcy5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcblx0XHR0aGlzLiRmb250TGlzdC5maW5kKCdhJykucmVtb3ZlQ2xhc3MoJ2ljb24tc2VsZWN0ZWQnKTtcblx0XHR0aGlzLnNlbGVjdGVkSWNvbiA9ICcnO1xuXG5cdFx0aWYgKCRjdXJySWNvbi5sZW5ndGgpIHtcblx0XHRcdGNvbnN0IGljb25JbmZvID0gJGN1cnJJY29uLmF0dHIoJ2NsYXNzJykudHJpbSgpLnNwbGl0KCcgJyk7XG5cdFx0XHRjb25zdCBwcmVmaXggPSBpY29uSW5mby5zaGlmdCgpO1xuXG5cdFx0XHRjb25zdCBpY29uQ2xhc3MgPSBpY29uSW5mby5zaGlmdCgpO1xuXHRcdFx0Y29uc3QgJGljb24gPSB0aGlzLiRmb250TGlzdC5maW5kKGAuJHtpY29uQ2xhc3N9YCkuZXEoMCk7XG5cblx0XHRcdGlmICgkaWNvbi5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdCRpY29uLnBhcmVudCgpLmFkZENsYXNzKCdpY29uLXNlbGVjdGVkJyk7XG5cblx0XHRcdFx0dGhpcy5zZWxlY3RlZEljb24gPSBgJHtwcmVmaXh9ICR7aWNvbkNsYXNzfWA7XG5cdFx0XHRcdHRoaXMuc2Nyb2xsVG9JY29uKCRpY29uLCB0cnVlKTtcblxuXHRcdFx0XHRjb25zdCAkc2VsZWN0cyA9ICRzZXR0aW5ncy5maWx0ZXIoJ3NlbGVjdCcpLmNoaWxkcmVuKCk7XG5cdFx0XHRcdGNvbnN0ICRpbnB1dHMgPSAkc2V0dGluZ3Mubm90KCdzZWxlY3QnKTtcblxuXHRcdFx0XHQkLmVhY2goaWNvbkluZm8sIChpLCB2YWwpID0+IHtcblx0XHRcdFx0XHQkaW5wdXRzLmZpbHRlcihgW3ZhbHVlPSR7dmFsfV1gKS5hdHRyKCdjaGVja2VkJywgdHJ1ZSk7XG5cdFx0XHRcdFx0JHNlbGVjdHMuZmlsdGVyKGBbdmFsdWU9JHt2YWx9XWApLnBhcmVudCgpLnZhbCh2YWwpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRjb25zdCAkY29sb3IgPSB0aGlzLiRjdXN0b21pemF0aW9uLmZpbmQoXG5cdFx0XHRcdFx0J2lucHV0W25hbWU9Y29sb3JdOmNoZWNrZWQnLFxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGlmICgkY29sb3IubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdCRjb2xvci5wcmV2KCkuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLnByZXZpZXdJY29uKCk7XG5cdH0sXG5cblx0c2hvd1BpY2tlcigkZWxlbWVudCkge1xuXHRcdGNvbnN0IHBvcyA9ICRlbGVtZW50Lm9mZnNldCgpO1xuXHRcdGNvbnN0IGhlaWdodCA9ICRlbGVtZW50LmhlaWdodCgpO1xuXG5cdFx0JGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ljb25zLWRyb3AnKTtcblx0XHR0aGlzLiRpY29uc0Rpdi5zbGlkZURvd24oKS5vZmZzZXQoe1xuXHRcdFx0dG9wOiBwb3MudG9wICsgaGVpZ2h0LFxuXHRcdFx0bGVmdDogcG9zLmxlZnQgLSAxNSxcblx0XHR9KTtcblx0XHR0aGlzLnNldEN1cnJlbnRJY29uKCRlbGVtZW50KTtcblx0XHR0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG5cdFx0Y3VycmVudEl0ZW0gPSAkZWxlbWVudC5hZGRDbGFzcygnaWNvbnMtZHJvcCcpO1xuXHR9LFxuXG5cdGhpZGVQaWNrZXIoKSB7XG5cdFx0aWYgKHRoaXMuJGVsZW1lbnQpIHtcblx0XHRcdHRoaXMuJGljb25zRGl2LnNsaWRlVXAoKTtcblx0XHRcdHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ljb25zLWRyb3AnKTtcblx0XHRcdHRoaXMuJGVsZW1lbnQgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9LFxuXG5cdHNjcm9sbFRvSWNvbjogZnVuY3Rpb24gc2Nyb2xsVG9JY29uKCRlbGVtZW50LCBjZW50ZXIpIHtcblx0XHRsZXQgYWRqdXN0bWVudCA9IDA7XG5cdFx0aWYgKGNlbnRlcikge1xuXHRcdFx0YWRqdXN0bWVudCA9IC0odGhpcy4kZm9udExpc3QuaGVpZ2h0KCkgLyAyKTtcblx0XHR9XG5cdFx0dGhpcy4kZm9udExpc3QuYW5pbWF0ZShcblx0XHRcdHtcblx0XHRcdFx0c2Nyb2xsVG9wOlxuXHRcdFx0XHRcdHRoaXMuJGZvbnRMaXN0LnNjcm9sbFRvcCgpICtcblx0XHRcdFx0XHQkZWxlbWVudC5wb3NpdGlvbigpLnRvcCArXG5cdFx0XHRcdFx0YWRqdXN0bWVudCxcblx0XHRcdH0sXG5cdFx0XHQxMDAwLFxuXHRcdCk7XG5cdH0sXG5cblx0ZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHR0aGlzLiRlbGVtZW50LmRhdGEoZGF0YVBsdWdpbiwgbnVsbCk7XG5cdH0sXG59O1xuXG4kLmZuW3BsdWdpbk5hbWVdID0gZnVuY3Rpb24gcGx1Z2luSW5zdGFuY2UoYXJnLCAuLi5yZXN0KSB7XG5cdGlmICghKHRoaXMuZGF0YShkYXRhUGx1Z2luKSBpbnN0YW5jZW9mIFBsdWdpbikpIHtcblx0XHR0aGlzLmRhdGEoZGF0YVBsdWdpbiwgbmV3IFBsdWdpbih0aGlzKSk7XG5cdH1cblxuXHRjb25zdCBpbnN0YW5jZSA9IHRoaXMuZGF0YShkYXRhUGx1Z2luKTtcblx0aWYgKGluc3RhbmNlICE9PSB1bmRlZmluZWQpIHtcblx0XHRpbnN0YW5jZS5lbGVtZW50ID0gdGhpcztcblxuXHRcdGlmICh0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgYXJnID09PSAnb2JqZWN0Jykge1xuXHRcdFx0aWYgKHR5cGVvZiBpbnN0YW5jZS5pbml0ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGluc3RhbmNlLmluaXQoYXJnKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0dHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgJiZcblx0XHRcdHR5cGVvZiBpbnN0YW5jZVthcmddID09PSAnZnVuY3Rpb24nXG5cdFx0KSB7XG5cdFx0XHRyZXR1cm4gaW5zdGFuY2VbYXJnXShhcmcsIC4uLnJlc3QpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkLmVycm9yKGBNZXRob2QgJHthcmd9IGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS4ke3BsdWdpbk5hbWV9YCk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB0aGlzO1xufTtcbiIsIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE91dHNpZGVDbGljaygkZWxlbWVudCwgaGFuZGxlT3V0c2lkZUNsaWNrKSB7XG5cdCQoZG9jdW1lbnQuYm9keSkuY2xpY2soZSA9PiB7XG5cdFx0aWYgKFxuXHRcdFx0JGVsZW1lbnQuaXMoJzp2aXNpYmxlJykgJiZcblx0XHRcdCRlbGVtZW50Lmh0bWwoKS5pbmRleE9mKGUudGFyZ2V0LmlubmVySFRNTCkgPCAwXG5cdFx0KSB7XG5cdFx0XHRoYW5kbGVPdXRzaWRlQ2xpY2soKTtcblx0XHR9XG5cdH0pO1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi9cbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vLi4vQnV0dG9uL2J1dHRvbic7XG5cbmNvbnN0IHsgbGFuZyB9ID0gd2luZG93O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBZGRCdG4odHJlZSwgJGVkaXREaWFsb2cpIHtcblx0Y29uc3QgJGFkZEJ0biA9IEJ1dHRvbihcblx0XHR0cmVlLm9wdGlvbnMuYWRkQnRuLFxuXHRcdHtcblx0XHRcdGljb25zOiB7XG5cdFx0XHRcdHByaW1hcnk6ICd1aS1pY29uLXBsdXMnLFxuXHRcdFx0fSxcblx0XHR9LFxuXHRcdCgpID0+IHtcblx0XHRcdGlmICh0cmVlLm9wdGlvbnMuZGlhbG9nRWRpdC5sZW5ndGgpIHtcblx0XHRcdFx0dHJlZS5fcG9wdWxhdGVGb3JtKCk7XG5cdFx0XHRcdCRlZGl0RGlhbG9nXG5cdFx0XHRcdFx0LmRpYWxvZygnb3B0aW9uJywgJ3RpdGxlJywgbGFuZy5hZGROb2RlKVxuXHRcdFx0XHRcdC5kaWFsb2coJ29wZW4nKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRyZWUuYWRkSXRlbSgpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdCk7XG5cblx0dHJlZS5hZGRCdG5PZmZzZXQgPSAkYWRkQnRuLm9mZnNldCgpO1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi9cblxuaW1wb3J0IEJ1dHRvbiBmcm9tICcuLi8uLi9CdXR0b24vYnV0dG9uJztcbmltcG9ydCBCdG5HcnBEcm9wIGZyb20gJy4uLy4uL0J0bkdycERyb3AnO1xuXG5jb25zdCB7IGxhbmcgfSA9IHdpbmRvdztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQWRkQnVsa0J0bih0cmVlKSB7XG5cdGZ1bmN0aW9uIGdldE9wdGlvbnMoJGxpc3QsIHBhZGRpbmcsIG9wdGlvbnMpIHtcblx0XHQkbGlzdC5jaGlsZHJlbignbGknKS5lYWNoKChpLCBlbGVtZW50KSA9PiB7XG5cdFx0XHRjb25zdCAkaXRlbSA9ICQoZWxlbWVudCk7XG5cdFx0XHRjb25zdCBpZCA9IHRyZWUuX2dldEl0ZW1JZCgkaXRlbSk7XG5cdFx0XHRjb25zdCB0aXRsZSA9IGAke3BhZGRpbmd9JiN4MjUxYzsmI3gyNTAwOyAkeyRpdGVtXG5cdFx0XHRcdC5maW5kKCcuZWRpdGFibGU6Zmlyc3QnKVxuXHRcdFx0XHQudGV4dCgpfWA7XG5cdFx0XHRjb25zdCBvcHRpb24gPSBgPG9wdGlvbiB2YWx1ZT1cIiR7aWR9XCI+JHt0aXRsZX08L29wdGlvbj5gO1xuXG5cdFx0XHRvcHRpb25zICs9IGdldE9wdGlvbnMoXG5cdFx0XHRcdCRpdGVtLmNoaWxkcmVuKCdvbCcpLFxuXHRcdFx0XHRgJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7JHtwYWRkaW5nfWAsXG5cdFx0XHRcdG9wdGlvbixcblx0XHRcdCk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gb3B0aW9ucztcblx0fVxuXG5cdGxldCBjb2RlTWlycm9yO1xuXHRjb25zdCAkdGV4dGFyZWEgPSAkKHRyZWUub3B0aW9ucy5hZGRCdWxrTGlzdCk7XG5cblx0Y29uc3QgJGFkZEJ1bGtCdG4gPSBCdG5HcnBEcm9wKHRyZWUub3B0aW9ucy5hZGRCdWxrQnRuLCAnZG93bicsICgpID0+IHtcblx0XHRpbXBvcnQoXG5cdFx0XHQvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImNvZGVtaXJyb3IvY29kZW1pcnJvclwiICovICcuLi8uLi9Db2RlTWlycm9yJ1xuXHRcdCkudGhlbigoeyBkZWZhdWx0OiBDb2RlTWlycm9yLCBpbml0Q29kZU1pcnJvciwgaW5zZXJ0VGV4dCB9KSA9PiB7XG5cdFx0XHRpZiAoISR0ZXh0YXJlYS5uZXh0KCkuaGFzQ2xhc3MoJ0NvZGVNaXJyb3InKSkge1xuXHRcdFx0XHRjb2RlTWlycm9yID0gaW5pdENvZGVNaXJyb3IodHJlZS5vcHRpb25zLmFkZEJ1bGtMaXN0KTtcblxuXHRcdFx0XHRsZXQgY21UYWJzID0gMDtcblx0XHRcdFx0Y29kZU1pcnJvci5vbigna2V5dXAnLCAoY20pID0+IHtcblx0XHRcdFx0XHRjb25zdCBkb2MgPSBjbS5nZXREb2MoKTtcblx0XHRcdFx0XHRjb25zdCBsaW5lID0gZG9jLmdldExpbmUoY20uZ2V0Q3Vyc29yKCkubGluZSk7XG5cdFx0XHRcdFx0Y29uc3QgbWF0Y2hlcyA9IGxpbmUubWF0Y2goL1xccy9naW0pO1xuXHRcdFx0XHRcdGNtVGFicyA9IG1hdGNoZXMgPyBtYXRjaGVzLmxlbmd0aCA6IDA7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGNvZGVNaXJyb3Iub24oJ2NoYW5nZScsIChjbSwgY2hhbmdlKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3Qgc3BhY2VzID0gY21UYWJzICogY20ub3B0aW9ucy50YWJTaXplO1xuXHRcdFx0XHRcdGNtLm9wZXJhdGlvbigoKSA9PiB7XG5cdFx0XHRcdFx0XHRmb3IgKFxuXHRcdFx0XHRcdFx0XHRsZXQgbGluZSA9IGNoYW5nZS5mcm9tLmxpbmUgKyAxLFxuXHRcdFx0XHRcdFx0XHRcdGVuZCA9IENvZGVNaXJyb3IuY2hhbmdlRW5kKGNoYW5nZSkubGluZTtcblx0XHRcdFx0XHRcdFx0bGluZSA8PSBlbmQ7XG5cdFx0XHRcdFx0XHRcdGxpbmUgKz0gMVxuXHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdGNtLmluZGVudExpbmUobGluZSwgc3BhY2VzKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0QnV0dG9uKCcuYnVsay10eXBlJywge30sIChlKSA9PiB7XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdGNvbnN0IGl0ZW1zU3RyID0gJChlLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2l0ZW1zJykudHJpbSgpO1xuXHRcdFx0XHRcdGluc2VydFRleHQoY29kZU1pcnJvciwgaXRlbXNTdHIsIHRydWUpO1xuXHRcdFx0XHR9KS5lYWNoKChpLCBlbGVtZW50KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgbGlzdCA9IFtdO1xuXHRcdFx0XHRcdGNvbnN0ICR0eXBlID0gJChlbGVtZW50KTtcblx0XHRcdFx0XHRjb25zdCBpdGVtcyA9ICR0eXBlLmRhdGEoJ2l0ZW1zJykudHJpbSgpLnNwbGl0KCdcXG4nKTtcblx0XHRcdFx0XHQkLmVhY2goaXRlbXMsIChqLCBpdGVtKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IGl0ZW0uc3BsaXQoJ3wnKTtcblx0XHRcdFx0XHRcdGNvbnN0IHRpdGxlID0gcGFydHNbMF0ucmVwbGFjZSgvXFx0L2csICcmbmJzcDsgJm5ic3A7Jyk7XG5cdFx0XHRcdFx0XHRsaXN0LnB1c2goXG5cdFx0XHRcdFx0XHRcdGA8YSBocmVmPVwiI1wiIGRhdGEtaXRlbT1cIiR7aXRlbX1cIj4ke3RpdGxlfTwvYT5gLFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQkdHlwZVxuXHRcdFx0XHRcdFx0LnBhcmVudCgpXG5cdFx0XHRcdFx0XHQubmV4dCgnLmJ1bGstZHJvcGRvd24nKVxuXHRcdFx0XHRcdFx0LmNoaWxkcmVuKCcuaW5uZXInKVxuXHRcdFx0XHRcdFx0Lmh0bWwobGlzdC5qb2luKCdcXG4nKSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdEJ0bkdycERyb3AoJy5idWxrLXR5cGUtbGlzdCcsICd1cCcpO1xuXG5cdFx0XHRcdCQoJy5idWxrLXR5cGUtaXRlbXMnKS5vbignY2xpY2snLCAnYScsIChlKSA9PiB7XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdFx0Y29uc3QgJGl0ZW0gPSAkKGUuY3VycmVudFRhcmdldCk7XG5cblx0XHRcdFx0XHRpbnNlcnRUZXh0KGNvZGVNaXJyb3IsICRpdGVtLmRhdGEoJ2l0ZW0nKS50cmltKCksIHRydWUpO1xuXHRcdFx0XHRcdCRpdGVtLnBhcmVudHMoJy5idWxrLXR5cGUtaXRlbXMnKS50b2dnbGUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyByZXNldCBjb2RlbWlycm9yXG5cdFx0XHRcdGNvZGVNaXJyb3Iuc2V0VmFsdWUoJycpO1xuXHRcdFx0XHRjb2RlTWlycm9yLmNsZWFySGlzdG9yeSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Y29uc3Qgb3B0aW9ucyA9IGA8b3B0aW9uIHZhbHVlPVwiMFwiPiR7bGFuZy5ub25lfTwvb3B0aW9uPmA7XG5cdFx0JGFkZEJ1bGtCdG5cblx0XHRcdC5wYXJlbnQoKVxuXHRcdFx0Lm5leHQoKVxuXHRcdFx0LmZpbmQoJ3NlbGVjdCcpXG5cdFx0XHQuaHRtbChnZXRPcHRpb25zKHRyZWUubmVzdGVkTGlzdCwgJycsIG9wdGlvbnMpKVxuXHRcdFx0Lm5leHQoKVxuXHRcdFx0LnZhbCgpO1xuXHR9KTtcblxuXHQkKCcudG9nZ2xlLXZpZXcnKS5jbGljaygoZSkgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHQkKCQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdocmVmJykpLnNsaWRlVG9nZ2xlKCk7XG5cdH0pO1xuXG5cdCRhZGRCdWxrQnRuXG5cdFx0LnBhcmVudCgpXG5cdFx0LnNob3coKVxuXHRcdC5uZXh0KClcblx0XHQuZmluZCgnI2NhbmNlbCcpXG5cdFx0LmNsaWNrKCgpID0+ICRhZGRCdWxrQnRuLnRyaWdnZXIoJ2NsaWNrJykpXG5cdFx0Lm5leHQoKVxuXHRcdC5jbGljaygoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Y29uc3QgZGF0YSA9IHtcblx0XHRcdFx0YWRkX2xpc3Q6IGNvZGVNaXJyb3IuZ2V0VmFsdWUoKSxcblx0XHRcdH07XG5cblx0XHRcdGNvbnN0ICRmb3JtID0gJChlLnRhcmdldCkuY2xvc2VzdCgnZm9ybScpO1xuXG5cdFx0XHRkYXRhW3RyZWUub3B0aW9ucy5maWVsZHMucGFyZW50SWRdID0gJGZvcm0uZmluZCgnI3BhcmVudF9pZCcpLnZhbCgpO1xuXG5cdFx0XHR0cmVlLl9hZGRCdWxrKCQucGFyYW0oZGF0YSkpO1xuXHRcdFx0JGFkZEJ1bGtCdG4udHJpZ2dlcignY2xpY2snKTtcblx0XHR9KTtcbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVyc2NvcmUtZGFuZ2xlICovXG5pbXBvcnQgRGlhbG9nIGZyb20gJy4uLy4uL0RpYWxvZyc7XG5cbmNvbnN0IHsgbGFuZyB9ID0gd2luZG93O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEZWxldGVJdGVtKHRyZWUpIHtcblx0bGV0IGl0ZW1JRDtcblx0bGV0ICRkZWxldGVEaWFsb2c7XG5cblx0Y29uc3QgZGVmYXVsdEJ1dHRvbnMgPSB7XG5cdFx0W2xhbmcuZGVsZXRlQ2hpbGROb2Rlc106IGZ1bmN0aW9uIGRlbENoaWxkTm9kZSgpIHtcblx0XHRcdGNvbnN0ICRub2RlID0gJChgbGkjaXRlbS0ke2l0ZW1JRH1gKTtcblx0XHRcdHRyZWUuX3JlbW92ZU5vZGUoJG5vZGUpO1xuXHRcdFx0JCh0aGlzKS5kaWFsb2coJ2Nsb3NlJyk7XG5cdFx0XHR0cmVlLl9zYXZlVHJlZSgpO1xuXHRcdH0sXG5cblx0XHRbbGFuZy5kZWxldGVOb2RlXTogZnVuY3Rpb24gZGVsTm9kZSgpIHtcblx0XHRcdGNvbnN0ICRub2RlID0gJChgbGkjaXRlbS0ke2l0ZW1JRH1gKTtcblx0XHRcdGlmICgkbm9kZS5jaGlsZHJlbih0cmVlLm9wdGlvbnMubGlzdFR5cGUpLmxlbmd0aCkge1xuXHRcdFx0XHQkbm9kZVxuXHRcdFx0XHRcdC5jaGlsZHJlbih0cmVlLm9wdGlvbnMubGlzdFR5cGUpXG5cdFx0XHRcdFx0LmNoaWxkcmVuKCdsaScpXG5cdFx0XHRcdFx0LmFwcGVuZFRvKCRub2RlLnBhcmVudCh0cmVlLm9wdGlvbnMubGlzdFR5cGUpKTtcblx0XHRcdH1cblx0XHRcdHRyZWUuX3JlbW92ZU5vZGUoJG5vZGUpO1xuXHRcdFx0JCh0aGlzKS5kaWFsb2coJ2Nsb3NlJyk7XG5cdFx0XHR0cmVlLl9zYXZlVHJlZSgpO1xuXHRcdH0sXG5cblx0XHRbbGFuZy5jYW5jZWxdOiBmdW5jdGlvbiBjYW5jZWxCdG4oKSB7XG5cdFx0XHQkKHRoaXMpLmRpYWxvZygnY2xvc2UnKTtcblx0XHR9LFxuXHR9O1xuXG5cdHRyZWUubmVzdGVkTGlzdC5vbignY2xpY2snLCB0cmVlLm9wdGlvbnMuZGVsZXRlSXRlbUNsYXNzLCBlID0+IHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRpdGVtSUQgPSB0cmVlLl9nZXRJdGVtSWQoJChlLmN1cnJlbnRUYXJnZXQpKTtcblx0XHRjb25zdCBidXR0b25zID0geyAuLi5kZWZhdWx0QnV0dG9ucyB9O1xuXG5cdFx0aWYgKFxuXHRcdFx0JChgI2l0ZW0tJHtpdGVtSUR9YClcblx0XHRcdFx0LmNoaWxkcmVuKHRyZWUub3B0aW9ucy5saXN0VHlwZSlcblx0XHRcdFx0LmNoaWxkcmVuKCdsaScpLmxlbmd0aCA8IDFcblx0XHQpIHtcblx0XHRcdGRlbGV0ZSBidXR0b25zW2xhbmcuZGVsZXRlQ2hpbGROb2Rlc107XG5cdFx0fVxuXG5cdFx0JGRlbGV0ZURpYWxvZy5kaWFsb2coeyBidXR0b25zIH0pLmRpYWxvZygnb3BlbicpO1xuXHR9KTtcblxuXHQkZGVsZXRlRGlhbG9nID0gbmV3IERpYWxvZyh0cmVlLm9wdGlvbnMuZGlhbG9nQ29uZmlybSk7XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlcnNjb3JlLWRhbmdsZSAqL1xuaW1wb3J0IEJ1dHRvbiBmcm9tICcuLi8uLi9CdXR0b24vYnV0dG9uJztcbmltcG9ydCBEaWFsb2cgZnJvbSAnLi4vLi4vRGlhbG9nJztcblxuY29uc3QgeyBsYW5nIH0gPSB3aW5kb3c7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNlbGVjdEFsbCh0cmVlKSB7XG5cdGNvbnN0IHsgc2VsZWN0SXRlbUNsYXNzIH0gPSB0cmVlLm9wdGlvbnM7XG5cdGNvbnN0ICRjb25maXJtID0gbmV3IERpYWxvZyh0cmVlLm9wdGlvbnMuZGlhbG9nQ29uZmlybSwge1xuXHRcdGJ1dHRvbnM6IHtcblx0XHRcdFtsYW5nLmRlbGV0ZU5vZGVdOiBmdW5jdGlvbiBjb25maXJtQnRuKCkge1xuXHRcdFx0XHR0cmVlLm5lc3RlZExpc3Rcblx0XHRcdFx0XHQuZmluZChgJHtzZWxlY3RJdGVtQ2xhc3N9OmNoZWNrZWRgKVxuXHRcdFx0XHRcdC5jbG9zZXN0KCdsaScpXG5cdFx0XHRcdFx0LmVhY2goZnVuY3Rpb24gaXRlcmF0b3IoKSB7XG5cdFx0XHRcdFx0XHR0cmVlLl9yZW1vdmVOb2RlKCQodGhpcykpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR0cmVlLl9zYXZlVHJlZSgpO1xuXHRcdFx0XHQkKHRoaXMpLmRpYWxvZygnY2xvc2UnKTtcblx0XHRcdH0sXG5cblx0XHRcdFtsYW5nLmNhbmNlbF06IGZ1bmN0aW9uIGNhbmNlbEJ0bigpIHtcblx0XHRcdFx0JCh0aGlzKS5kaWFsb2coJ2Nsb3NlJyk7XG5cdFx0XHR9LFxuXHRcdH0sXG5cdH0pO1xuXG5cdGNvbnN0ICRkZWxldGVTZWxCdG4gPSBCdXR0b24oXG5cdFx0dHJlZS5vcHRpb25zLmRlbGV0ZVNlbEJ0bixcblx0XHR7XG5cdFx0XHRkaXNhYmxlZDogdHJ1ZSxcblx0XHRcdGljb25zOiB7XG5cdFx0XHRcdHByaW1hcnk6ICd1aS1pY29uLXRyYXNoJyxcblx0XHRcdH0sXG5cdFx0fSxcblx0XHRlID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdCRjb25maXJtLmRpYWxvZygnb3BlbicpO1xuXHRcdH0sXG5cdCk7XG5cblx0dHJlZS4kc2VsZWN0QWxsID0gJCh0cmVlLm9wdGlvbnMuc2VsZWN0QWxsKS5jbGljayhlID0+IHtcblx0XHR0cmVlLm5lc3RlZExpc3Rcblx0XHRcdC5maW5kKHNlbGVjdEl0ZW1DbGFzcylcblx0XHRcdC5wcm9wKCdjaGVja2VkJywgZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQpO1xuXHRcdGlmIChlLmN1cnJlbnRUYXJnZXQuY2hlY2tlZCkge1xuXHRcdFx0JGRlbGV0ZVNlbEJ0bi5idXR0b24oJ2VuYWJsZScpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkZGVsZXRlU2VsQnRuLmJ1dHRvbignZGlzYWJsZScpO1xuXHRcdH1cblx0fSk7XG5cblx0dHJlZS5uZXN0ZWRMaXN0Lm9uKCdjbGljaycsIHRyZWUub3B0aW9ucy5zZWxlY3RJdGVtQ2xhc3MsICgpID0+IHtcblx0XHRjb25zdCAkY2hlY2tib3hlcyA9IHRyZWUubmVzdGVkTGlzdC5maW5kKGAke3NlbGVjdEl0ZW1DbGFzc31gKTtcblx0XHRjb25zdCBudW1TZWxlY3RlZCA9ICRjaGVja2JveGVzLmZpbHRlcignOmNoZWNrZWQnKS5sZW5ndGg7XG5cblx0XHRpZiAobnVtU2VsZWN0ZWQgPiAwKSB7XG5cdFx0XHQkZGVsZXRlU2VsQnRuLmJ1dHRvbignZW5hYmxlJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRkZWxldGVTZWxCdG4uYnV0dG9uKCdkaXNhYmxlJyk7XG5cdFx0fVxuXG5cdFx0aWYgKG51bVNlbGVjdGVkID09PSAkY2hlY2tib3hlcy5sZW5ndGgpIHtcblx0XHRcdHRyZWUuJHNlbGVjdEFsbC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRyZWUuJHNlbGVjdEFsbC5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuICRkZWxldGVTZWxCdG47XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlcnNjb3JlLWRhbmdsZSAqL1xuaW1wb3J0IERpYWxvZyBmcm9tICcuLi8uLi9EaWFsb2cnO1xuaW1wb3J0IElubGluZUVkaXRvciBmcm9tICcuLi8uLi9JbmxpbmVFZGl0b3InO1xuXG5jb25zdCB7IGxhbmcgfSA9IHdpbmRvdztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRWRpdEl0ZW0odHJlZSkge1xuXHRsZXQgaXRlbUlEO1xuXHRsZXQgJGVkaXREaWFsb2c7XG5cdGNvbnN0IHsgZGlhbG9nRWRpdCB9ID0gdHJlZS5vcHRpb25zO1xuXG5cdGZ1bmN0aW9uIGNoZWNrUmVxdWlyZWQoKSB7XG5cdFx0JChgJHtkaWFsb2dFZGl0fSAuZXJyb3JgKS5yZW1vdmUoKTtcblxuXHRcdGxldCB2YWxpZCA9IHRydWU7XG5cblx0XHQkKGAke2RpYWxvZ0VkaXR9IC5yZXF1aXJlZGApLmVhY2goZnVuY3Rpb24gaXRlcigpIHtcblx0XHRcdGlmICghJCh0aGlzKS52YWwoKSkge1xuXHRcdFx0XHRjb25zdCBodG1sID0gYDxkaXYgY2xhc3M9XCJlcnJvclwiPiR7bGFuZy5yZXF1aXJlZH08L2Rpdj5gO1xuXHRcdFx0XHQkKGh0bWwpLmluc2VydEFmdGVyKHRoaXMpO1xuXHRcdFx0XHR2YWxpZCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHZhbGlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHtcblx0XHRjb25zdCBhY3Rpb24gPSBpdGVtSUQgPyAnc2F2ZV9pdGVtJyA6ICdhZGRfaXRlbSc7XG5cdFx0dHJlZS5fc2F2ZUl0ZW0oYWN0aW9uLCB0cmVlLmVkaXRGb3JtLnNlcmlhbGl6ZUFycmF5KCksIGl0ZW1JRCk7XG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVUaXRsZVVwZGF0ZShlKSB7XG5cdFx0Y29uc3QgJGVsZW1lbnQgPSAkKGUuY3VycmVudFRhcmdldCk7XG5cdFx0Y29uc3QgaWQgPSB0cmVlLl9nZXRJdGVtSWQoJGVsZW1lbnQuY2xvc2VzdCgnbGknKSk7XG5cdFx0Y29uc3QgdGl0bGUgPSBlLmN1cnJlbnRUYXJnZXQudmFsdWU7XG5cdFx0Y29uc3QgZmllbGQgPSAkZWxlbWVudC5jbG9zZXN0KCdzcGFuJykuZGF0YSgnZmllbGQnKTtcblxuXHRcdGlmIChpZCAmJiBmaWVsZCAmJiB0aXRsZSkge1xuXHRcdFx0Y29uc3QgZGF0YSA9IHtcblx0XHRcdFx0W2ZpZWxkXTogdGl0bGUsXG5cdFx0XHRcdGZpZWxkLFxuXHRcdFx0fTtcblxuXHRcdFx0dHJlZS5fc2F2ZUl0ZW0oJ3VwZGF0ZV9pdGVtJywgZGF0YSwgaWQpO1xuXHRcdH1cblxuXHRcdHJldHVybiBsYW5nLnByb2Nlc3Npbmc7XG5cdH1cblxuXHRJbmxpbmVFZGl0b3IoJy5lZGl0YWJsZScsIGhhbmRsZVRpdGxlVXBkYXRlKTtcblxuXHR0cmVlLm5lc3RlZExpc3Qub24oJ2NsaWNrJywgdHJlZS5vcHRpb25zLmVkaXRJdGVtQ2xhc3MsIGUgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGl0ZW1JRCA9IHRyZWUuX2dldEl0ZW1JZCgkKGUuY3VycmVudFRhcmdldCkpO1xuXHRcdHRyZWUuX3BvcHVsYXRlRm9ybShpdGVtSUQsICgpID0+IHtcblx0XHRcdGNvbnN0IHRpdGxlID0gaXRlbUlEID8gbGFuZy5lZGl0Tm9kZSA6IGxhbmcuYWRkTm9kZTtcblx0XHRcdCRlZGl0RGlhbG9nLmRpYWxvZygnb3B0aW9uJywgJ3RpdGxlJywgdGl0bGUpLmRpYWxvZygnb3BlbicpO1xuXHRcdH0pO1xuXHR9KTtcblxuXHQkZWRpdERpYWxvZyA9IG5ldyBEaWFsb2coZGlhbG9nRWRpdCwge1xuXHRcdGJ1dHRvbnM6IHtcblx0XHRcdFtsYW5nLnNhdmVOb2RlXTogZnVuY3Rpb24gZWRpdEJ0bigpIHtcblx0XHRcdFx0aWYgKGNoZWNrUmVxdWlyZWQoKSkge1xuXHRcdFx0XHRcdHN1Ym1pdEZvcm0oKTtcblx0XHRcdFx0XHRpdGVtSUQgPSAwO1xuXHRcdFx0XHRcdCQodGhpcykuZGlhbG9nKCdjbG9zZScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRbbGFuZy5jYW5jZWxdOiBmdW5jdGlvbiBjYW5jZWxCdG4oKSB7XG5cdFx0XHRcdGl0ZW1JRCA9IDA7XG5cdFx0XHRcdCQodGhpcykuZGlhbG9nKCdjbG9zZScpO1xuXHRcdFx0fSxcblx0XHR9LFxuXHR9KTtcblxuXHRyZXR1cm4gJGVkaXREaWFsb2c7XG59XG4iLCJpbXBvcnQgJ25lc3RlZFNvcnRhYmxlL2pxdWVyeS5tanMubmVzdGVkU29ydGFibGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUcmVlSXRlbXModHJlZSkge1xuXHRjb25zdCB7IG5lc3RlZExpc3QsIG5vTmVzdGluZywgbGlzdFR5cGUsIGFqYXhNZXNzYWdlIH0gPSB0cmVlLm9wdGlvbnM7XG5cblx0cmV0dXJuIHRyZWUuZWxlbWVudFxuXHRcdC5hZGRDbGFzcygndHJlZS1idWlsZGVyJylcblx0XHQuZmluZChuZXN0ZWRMaXN0KVxuXHRcdC5uZXN0ZWRTb3J0YWJsZSh7XG5cdFx0XHRkaXNhYmxlTmVzdGluZzogbm9OZXN0aW5nLFxuXHRcdFx0Zm9yY2VQbGFjZWhvbGRlclNpemU6IHRydWUsXG5cdFx0XHRsaXN0VHlwZSxcblx0XHRcdGhhbmRsZTogJ2RpdicsXG5cdFx0XHRoZWxwZXI6ICdjbG9uZScsXG5cdFx0XHRpdGVtczogJ2xpJyxcblx0XHRcdG9wYWNpdHk6IDAuNixcblx0XHRcdHBsYWNlaG9sZGVyOiAncGxhY2Vob2xkZXInLFxuXHRcdFx0dGFiU2l6ZTogMjUsXG5cdFx0XHR0b2xlcmFuY2U6ICdwb2ludGVyJyxcblx0XHRcdHRvbGVyYW5jZUVsZW1lbnQ6ICc+IGRpdicsXG5cdFx0XHRleGNsdWRlUm9vdDogdHJ1ZSxcblx0XHRcdHJvb3RJRDogMCxcblx0XHRcdGVycm9yQ2xhc3M6IGFqYXhNZXNzYWdlLFxuXHRcdFx0dXBkYXRlOiAoKSA9PiB7XG5cdFx0XHRcdHRyZWUuaXRlbXNDaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdFx0dHJlZS5fdHJpZ2dlcigndXBkYXRlZCcpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVyc2NvcmUtZGFuZ2xlXG5cdFx0XHRcdGlmICh0cmVlLiRzYXZlQnRuLmJ1dHRvbignb3B0aW9uJywgJ2Rpc2FibGVkJykpIHtcblx0XHRcdFx0XHR0cmVlLiRzYXZlQnRuLmJ1dHRvbignb3B0aW9uJywgJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi9cbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vLi4vQnV0dG9uL2J1dHRvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlYnVpbGRCdG4odHJlZSkge1xuXHRyZXR1cm4gQnV0dG9uKFxuXHRcdHRyZWUub3B0aW9ucy5yZWJ1aWxkQnRuLFxuXHRcdHtcblx0XHRcdGRpc2FibGVkOiB0cnVlLFxuXHRcdFx0aWNvbnM6IHtcblx0XHRcdFx0cHJpbWFyeTogJ3VpLWljb24tcmVmcmVzaCcsXG5cdFx0XHR9LFxuXHRcdH0sXG5cdFx0ZSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0cmVlLl9zYXZlVHJlZSgpO1xuXHRcdH0sXG5cdCk7XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlcnNjb3JlLWRhbmdsZSAqL1xuaW1wb3J0IEJ1dHRvbiBmcm9tICcuLi8uLi9CdXR0b24vYnV0dG9uJztcblxuY29uc3QgeyBsYW5nIH0gPSB3aW5kb3c7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNhdmVCdG4odHJlZSkge1xuXHQvKiBlc2xpbnQtZGlzYWJsZSBjb25zaXN0ZW50LXJldHVybiAqL1xuXHR3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBlID0+IHtcblx0XHRpZiAodHJlZS5pdGVtc0NoYW5nZWQpIHtcblx0XHRcdGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcblx0XHRcdC8vIEZvciBJRSBhbmQgRmlyZWZveFxuXHRcdFx0aWYgKGUpIHtcblx0XHRcdFx0ZS5yZXR1cm5WYWx1ZSA9IGxhbmcudW5zYXZlZENoYW5nZXM7XG5cdFx0XHR9XG5cdFx0XHQvLyBGb3IgU2FmYXJpXG5cdFx0XHRyZXR1cm4gbGFuZy51bnNhdmVkQ2hhbmdlcztcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIEJ1dHRvbihcblx0XHR0cmVlLm9wdGlvbnMuc2F2ZUJ0bixcblx0XHR7XG5cdFx0XHRkaXNhYmxlZDogdHJ1ZSxcblx0XHRcdGljb25zOiB7XG5cdFx0XHRcdHByaW1hcnk6ICd1aS1pY29uLWNoZWNrJyxcblx0XHRcdH0sXG5cdFx0fSxcblx0XHRlID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGlmICh0cmVlLml0ZW1zQ2hhbmdlZCkge1xuXHRcdFx0XHR0cmVlLl9zYXZlVHJlZSgpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdCk7XG59XG4iLCIvKiFcbiAqIFNpdGVtYWtlciB0cmVlQnVpbGRlclxuICogQXV0aG9yOiBAYmxpdHplXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgR1BMIGxpY2Vuc2VcbiAqL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlcnNjb3JlLWRhbmdsZSAqL1xuXG5pbXBvcnQgJ2pxdWVyeS11aS91aS93aWRnZXQnO1xuaW1wb3J0ICdqcXVlcnktdWkvdWkvd2lkZ2V0cy9zb3J0YWJsZSc7XG5pbXBvcnQgJ2pxdWVyeS11aS91aS9lZmZlY3RzL2VmZmVjdC1zbGlkZSc7XG5pbXBvcnQgJ2pxdWVyeS1kZXNlcmlhbGl6ZSc7XG5cbmltcG9ydCBBZGRCdG4gZnJvbSAnLi9BZGQnO1xuaW1wb3J0IEFkZEJ1bGtCdG4gZnJvbSAnLi9CdWxrJztcbmltcG9ydCBFZGl0SXRlbSBmcm9tICcuL0VkaXQnO1xuaW1wb3J0IERlbGV0ZUl0ZW0gZnJvbSAnLi9EZWxldGUnO1xuaW1wb3J0IFRyZWVJdGVtcyBmcm9tICcuL0l0ZW1zJztcbmltcG9ydCBSZWJ1aWxkQnRuIGZyb20gJy4vUmVidWlsZCc7XG5pbXBvcnQgU2F2ZUJ0biBmcm9tICcuL1NhdmUnO1xuaW1wb3J0IERlbGV0ZVNlbGVjdGVkIGZyb20gJy4vRGVsZXRlU2VsZWN0ZWQnO1xuaW1wb3J0ICcuLi9JY29ucy9waWNrZXInO1xuXG5pbXBvcnQgJy4vYnVpbGRlci5zY3NzJztcblxuY29uc3QgeyBsYW5nIH0gPSB3aW5kb3c7XG5cbiQud2lkZ2V0KCdzaXRlbWFrZXIudHJlZUJ1aWxkZXInLCB7XG5cdG9wdGlvbnM6IHtcblx0XHRhamF4VXJsOiAnJyxcblx0XHRsb2FkU3BlZWQ6IDEwLFxuXG5cdFx0ZmllbGRzOiB7XG5cdFx0XHRpdGVtSWQ6ICdpdGVtX2lkJyxcblx0XHRcdGl0ZW1JY29uOiAnaXRlbV9pY29uJyxcblx0XHRcdGl0ZW1UaXRsZTogJ2l0ZW1fdGl0bGUnLFxuXHRcdFx0cGFyZW50SWQ6ICdwYXJlbnRfaWQnLFxuXHRcdH0sXG5cblx0XHRsaXN0VHlwZTogJ29sJyxcblx0XHRub05lc3Rpbmc6ICcubm8tbmVzdCcsXG5cdFx0bmVzdGVkTGlzdDogJyNzb3J0YWJsZScsXG5cdFx0ZWRpdEZvcm06ICcjZWRpdC1mb3JtJyxcblx0XHRub0l0ZW1zOiAnI25vLWl0ZW1zJyxcblxuXHRcdGFkZEJ0bjogJyNhZGQtbmV3Jyxcblx0XHRhZGRCdWxrQnRuOiAnI2FkZC1idWxrJyxcblx0XHRhZGRCdWxrTGlzdDogJyNhZGRfbGlzdCcsXG5cdFx0c2F2ZUJ0bjogJyNzYXZlJyxcblx0XHRkZWxldGVTZWxCdG46ICcjZGVsZXRlLXNlbGVjdGVkJyxcblx0XHRyZWJ1aWxkQnRuOiAnI3JlYnVpbGQtdHJlZScsXG5cblx0XHRzZWxlY3RBbGw6ICcjc2VsZWN0LWFsbCcsXG5cdFx0bG9hZGluZzogJyNsb2FkaW5nJyxcblx0XHRhamF4TWVzc2FnZTogJyNhamF4LW1lc3NhZ2UnLFxuXHRcdGl0ZW1UZW1wbGF0ZTogJyNpdGVtLXRlbXBsYXRlJyxcblx0XHRlZGl0SXRlbUNsYXNzOiAnLml0ZW0tZWRpdCcsXG5cdFx0ZGVsZXRlSXRlbUNsYXNzOiAnLml0ZW0tZGVsZXRlJyxcblx0XHRzZWxlY3RJdGVtQ2xhc3M6ICcuc2VsZWN0LWl0ZW0nLFxuXHRcdGljb25TZWxlY3RDbGFzczogJy5pY29uLXNlbGVjdCcsXG5cblx0XHRkaWFsb2dFZGl0OiAnJyxcblx0XHRkaWFsb2dDb25maXJtOiAnI2RpYWxvZy1jb25maXJtJyxcblxuXHRcdGluaXQ6ICgpID0+IHt9LFxuXHRcdGxvYWRlZDogKCkgPT4ge30sXG5cdFx0dXBkYXRlZDogKCkgPT4ge30sXG5cdH0sXG5cblx0X2NyZWF0ZSgpIHtcblx0XHR0aGlzLm5lc3RlZExpc3QgPSBUcmVlSXRlbXModGhpcyk7XG5cdFx0dGhpcy5ub0l0ZW1zID0gdGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLm5vSXRlbXMpO1xuXHRcdHRoaXMubXNnT2JqID0gdGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLmFqYXhNZXNzYWdlKTtcblx0XHR0aGlzLmVkaXRGb3JtID0gJCh0aGlzLm9wdGlvbnMuZWRpdEZvcm0pO1xuXG5cdFx0UHJvbWlzZS5hbGwoW1xuXHRcdFx0aW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwidHdpZy90d2lnXCIgKi8gJ3R3aWcnKSxcblx0XHRcdGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImljb24vcGlja2VyXCIgKi8gJy4uL0ljb25zL3BpY2tlcicpLFxuXHRcdF0pLnRoZW4oKFt7IGRlZmF1bHQ6IFR3aWcgfV0pID0+IHtcblx0XHRcdFR3aWcuZXh0ZW5kRnVuY3Rpb24oJ2xhbmcnLCB2YWx1ZSA9PlxuXHRcdFx0XHR0eXBlb2YgbGFuZ1t2YWx1ZV0gIT09ICd1bmRlZmluZWQnID8gbGFuZ1t2YWx1ZV0gOiB2YWx1ZSxcblx0XHRcdCk7XG5cblx0XHRcdHRoaXMudGVtcGxhdGUgPSBUd2lnLnR3aWcoe1xuXHRcdFx0XHRkYXRhOiAkKHRoaXMub3B0aW9ucy5pdGVtVGVtcGxhdGUpLmh0bWwoKSxcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLm5lc3RlZExpc3QuaWNvblBpY2tlcih7XG5cdFx0XHRcdHNlbGVjdG9yOiB0aGlzLm9wdGlvbnMuaWNvblNlbGVjdENsYXNzLFxuXHRcdFx0XHRvblNlbGVjdDogKCRpdGVtLCBpY29uQ2xhc3MpID0+IHtcblx0XHRcdFx0XHRjb25zdCBpdGVtSUQgPSB0aGlzLl9nZXRJdGVtSWQoJGl0ZW0uY2xvc2VzdCgnbGknKSk7XG5cdFx0XHRcdFx0dGhpcy51cGRhdGVJdGVtKFxuXHRcdFx0XHRcdFx0eyBbdGhpcy5vcHRpb25zLmZpZWxkcy5pdGVtSWNvbl06IGljb25DbGFzcyB9LFxuXHRcdFx0XHRcdFx0aXRlbUlELFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgJGVkaXREaWFsb2cgPSBFZGl0SXRlbSh0aGlzKTtcblxuXHRcdFx0QWRkQnRuKHRoaXMsICRlZGl0RGlhbG9nKTtcblx0XHRcdEFkZEJ1bGtCdG4odGhpcyk7XG5cdFx0XHREZWxldGVJdGVtKHRoaXMpO1xuXG5cdFx0XHR0aGlzLiRkZWxldGVTZWxCdG4gPSBEZWxldGVTZWxlY3RlZCh0aGlzKTtcblx0XHRcdHRoaXMuJHJlYnVpbGRCdG4gPSBSZWJ1aWxkQnRuKHRoaXMpO1xuXHRcdFx0dGhpcy4kc2F2ZUJ0biA9IFNhdmVCdG4odGhpcyk7XG5cblx0XHRcdHRoaXMuX3RyaWdnZXIoJ2luaXQnKTtcblx0XHR9KTtcblx0fSxcblxuXHRhZGRJdGVtKCkge1xuXHRcdHRoaXMuX3NhdmVJdGVtKCdhZGRfaXRlbScsIHt9KTtcblx0fSxcblxuXHR1cGRhdGVJdGVtKGRhdGEsIGlkKSB7XG5cdFx0dGhpcy5fc2F2ZUl0ZW0oJ3VwZGF0ZV9pdGVtJywgZGF0YSwgaWQpO1xuXHR9LFxuXG5cdGdldEl0ZW1zKCkge1xuXHRcdCQuZ2V0SlNPTihgJHt0aGlzLm9wdGlvbnMuYWpheFVybH1sb2FkX2l0ZW1zYCkuZG9uZShkYXRhID0+IHtcblx0XHRcdHRoaXMubmVzdGVkTGlzdC5lbXB0eSgpO1xuXHRcdFx0dGhpcy5fcmVzZXRBY3Rpb25zKCk7XG5cdFx0XHRpZiAoZGF0YS5pdGVtcyAmJiBkYXRhLml0ZW1zLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dGhpcy5fc2hvd0FjdGlvbnMoKTtcblx0XHRcdFx0dGhpcy5fYWRkVG9UcmVlKGRhdGEuaXRlbXMpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl90cmlnZ2VyKCdsb2FkZWQnLCBudWxsLCB7IGl0ZW1zOiBkYXRhLml0ZW1zIH0pO1xuXHRcdH0pO1xuXHR9LFxuXG5cdGdldENvZGVNaXJyb3JJbnN0YW5jZSgpIHtcblx0XHRyZXR1cm4gdGhpcy5jb2RlTWlycm9yO1xuXHR9LFxuXG5cdGlzVW5zYXZlZCgpIHtcblx0XHRyZXR1cm4gISF0aGlzLml0ZW1zQ2hhbmdlZDtcblx0fSxcblxuXHRzaG93TWVzc2FnZShtZXNzYWdlKSB7XG5cdFx0aWYgKG1lc3NhZ2UpIHtcblx0XHRcdHRoaXMubXNnT2JqLnRleHQobWVzc2FnZSk7XG5cdFx0XHR0aGlzLm1zZ09ialxuXHRcdFx0XHQuZmFkZUluKClcblx0XHRcdFx0LmRlbGF5KDMwMDApXG5cdFx0XHRcdC5mYWRlT3V0KCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9hZGRCdWxrKGRhdGEpIHtcblx0XHQkLnBvc3QoYCR7dGhpcy5vcHRpb25zLmFqYXhVcmx9YWRkX2J1bGtgLCBkYXRhKS5kb25lKHJlc3AgPT4ge1xuXHRcdFx0aWYgKCFyZXNwLmVycm9yKSB7XG5cdFx0XHRcdHRoaXMuX3Nob3dBY3Rpb25zKCk7XG5cdFx0XHRcdHRoaXMuX2FkZFRvVHJlZShyZXNwLml0ZW1zKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRfYWRkVG9UcmVlKGl0ZW1zLCBjYWxsYmFjaykge1xuXHRcdGlmIChpdGVtcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRsZXQgJGh0bWwgPSB7fTtcblx0XHRcdGNvbnN0IGl0ZW0gPSBpdGVtcy5zaGlmdCgpO1xuXHRcdFx0Y29uc3QgeyBsaXN0VHlwZSB9ID0gdGhpcy5vcHRpb25zO1xuXHRcdFx0Y29uc3QgeyBpdGVtVGl0bGUsIHBhcmVudElkIH0gPSB0aGlzLm9wdGlvbnMuZmllbGRzO1xuXG5cdFx0XHRpdGVtW2l0ZW1UaXRsZV0gPSBpdGVtW2l0ZW1UaXRsZV0gfHwgbGFuZy5jaGFuZ2VNZTtcblxuXHRcdFx0aWYgKGl0ZW1bcGFyZW50SWRdID4gMCkge1xuXHRcdFx0XHRjb25zdCAkcGFyZW50SXRlbSA9ICQoYCNpdGVtLSR7aXRlbVtwYXJlbnRJZF19YCk7XG5cdFx0XHRcdGNvbnN0ICRjaGlsZEl0ZW1zID0gJHBhcmVudEl0ZW0uY2hpbGRyZW4obGlzdFR5cGUpO1xuXG5cdFx0XHRcdGlmICghJGNoaWxkSXRlbXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JGh0bWwgPSAkKFxuXHRcdFx0XHRcdFx0YDwke2xpc3RUeXBlfT5cblx0XHRcdFx0XHRcdFx0JHt0aGlzLl9yZW5kZXJJdGVtKGl0ZW0pfVxuXHRcdFx0XHRcdFx0PC8ke2xpc3RUeXBlfT5gLFxuXHRcdFx0XHRcdCkuaGlkZSgpO1xuXHRcdFx0XHRcdCRodG1sLmFwcGVuZFRvKCRwYXJlbnRJdGVtKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkaHRtbCA9ICQodGhpcy5fcmVuZGVySXRlbShpdGVtKSkuaGlkZSgpO1xuXHRcdFx0XHRcdCRodG1sLmFwcGVuZFRvKCRwYXJlbnRJdGVtLmNoaWxkcmVuKGxpc3RUeXBlKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCRodG1sID0gJCh0aGlzLl9yZW5kZXJJdGVtKGl0ZW0pKS5oaWRlKCk7XG5cdFx0XHRcdCRodG1sLmFwcGVuZFRvKHRoaXMubmVzdGVkTGlzdCk7XG5cdFx0XHR9XG5cblx0XHRcdCRodG1sLmVmZmVjdChcblx0XHRcdFx0J3NsaWRlJyxcblx0XHRcdFx0eyBkaXJlY3Rpb246ICdyaWdodCcsIG1vZGU6ICdzaG93JyB9LFxuXHRcdFx0XHR0aGlzLm9wdGlvbnMubG9hZFNwZWVkLFxuXHRcdFx0XHQoKSA9PiB0aGlzLl9hZGRUb1RyZWUoaXRlbXMsIGNhbGxiYWNrKSxcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGNhbGxiYWNrLmFwcGx5KHRoaXMsIFtpdGVtc10pO1xuXHRcdH1cblx0XHR0aGlzLl90cmlnZ2VyKCdsb2FkZWQnLCBudWxsLCB7IGl0ZW1zIH0pO1xuXHR9LFxuXG5cdF9nZXRJdGVtSWQoJGVsZW1lbnQpIHtcblx0XHRyZXR1cm4gJGVsZW1lbnQuYXR0cignaWQnKS5zdWJzdHJpbmcoNSk7XG5cdH0sXG5cblx0X3BvcHVsYXRlRm9ybShpZCwgY2FsbEJhY2spIHtcblx0XHRpZiAoaWQpIHtcblx0XHRcdGNvbnN0IHsgYWpheFVybCB9ID0gdGhpcy5vcHRpb25zO1xuXHRcdFx0Y29uc3QgeyBpdGVtSWQgfSA9IHRoaXMub3B0aW9ucy5maWVsZHM7XG5cblx0XHRcdCQuZ2V0KGAke2FqYXhVcmx9bG9hZF9pdGVtPyR7aXRlbUlkfT0ke2lkfWApLmRvbmUoZGF0YSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd01lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcblx0XHRcdFx0dGhpcy5lZGl0Rm9ybS5kZXNlcmlhbGl6ZShkYXRhKTtcblx0XHRcdFx0Y2FsbEJhY2soKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmVkaXRGb3JtWzBdLnJlc2V0KCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9yZXNldEFjdGlvbnMoaXRlbXNDb3VudCkge1xuXHRcdGxldCBkaXNwbGF5ID0gJ2luaXRpYWwnO1xuXG5cdFx0aWYgKCFpdGVtc0NvdW50KSB7XG5cdFx0XHR0aGlzLm5vSXRlbXMuc2hvdygpO1xuXHRcdFx0ZGlzcGxheSA9ICdub25lJztcblx0XHR9XG5cblx0XHR0aGlzLml0ZW1zQ2hhbmdlZCA9IGZhbHNlO1xuXHRcdHRoaXMuJHNlbGVjdEFsbFxuXHRcdFx0LnByb3AoJ2NoZWNrZWQnLCBmYWxzZSlcblx0XHRcdC5wYXJlbnQoKVxuXHRcdFx0LmNzcygnZGlzcGxheScsIGRpc3BsYXkpO1xuXHRcdHRoaXMuJGRlbGV0ZVNlbEJ0bi5idXR0b24oJ2Rpc2FibGUnKS5jc3MoJ2Rpc3BsYXknLCBkaXNwbGF5KTtcblx0XHR0aGlzLiRzYXZlQnRuLmJ1dHRvbignZGlzYWJsZScpLmNzcygnZGlzcGxheScsIGRpc3BsYXkpO1xuXHRcdHRoaXMuJHJlYnVpbGRCdG4uY3NzKCdkaXNwbGF5JywgZGlzcGxheSk7XG5cdH0sXG5cblx0X3NhdmVJdGVtKG1vZGUsIGRhdGEsIGlkKSB7XG5cdFx0Y29uc3QgeyBhamF4VXJsIH0gPSB0aGlzLm9wdGlvbnM7XG5cdFx0Y29uc3QgeyBpdGVtSWQgfSA9IHRoaXMub3B0aW9ucy5maWVsZHM7XG5cblx0XHQkLnBvc3QoYCR7YWpheFVybH0ke21vZGV9JHtpZCA/IGA/JHtpdGVtSWR9PSR7aWR9YCA6ICcnfWAsIGRhdGEpLmRvbmUoXG5cdFx0XHRyZXNwID0+IHtcblx0XHRcdFx0aWYgKCFyZXNwLmVycm9yKSB7XG5cdFx0XHRcdFx0aWYgKG1vZGUgPT09ICdhZGRfaXRlbScpIHtcblx0XHRcdFx0XHRcdHRoaXMuX2FkZFRvVHJlZShbcmVzcF0sICgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgJGVsZW1lbnQgPSAkKFxuXHRcdFx0XHRcdFx0XHRcdGAjaXRlbS0ke3Jlc3BbdGhpcy5vcHRpb25zLmZpZWxkcy5pdGVtSWRdfWAsXG5cdFx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdFx0dGhpcy5fc2hvd0FjdGlvbnMoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5fc2Nyb2xsVG8oXG5cdFx0XHRcdFx0XHRcdFx0JGVsZW1lbnQsXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hZGRCdG5PZmZzZXQudG9wLFxuXHRcdFx0XHRcdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghdGhpcy5vcHRpb25zLmRpYWxvZ0VkaXQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0JGVsZW1lbnRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQuZmluZCgnLmVkaXRhYmxlJylcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChtb2RlID09PSAndXBkYXRlX2l0ZW0nKSB7XG5cdFx0XHRcdFx0XHR0aGlzLl9yZWZyZXNoSXRlbShyZXNwKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vZGUgPT09ICdzYXZlX2l0ZW0nKSB7XG5cdFx0XHRcdFx0XHRjb25zdCAkZWxlbWVudCA9IHRoaXMuX3JlZnJlc2hJdGVtKHJlc3ApO1xuXHRcdFx0XHRcdFx0dGhpcy5fdHJpZ2dlcigndXBkYXRlZCcsIG51bGwsICRlbGVtZW50KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0KTtcblx0fSxcblxuXHRfc2F2ZVRyZWUoKSB7XG5cdFx0Y29uc3QgdHJlZSA9IHRoaXMubmVzdGVkTGlzdFxuXHRcdFx0Lm5lc3RlZFNvcnRhYmxlKCd0b0FycmF5Jylcblx0XHRcdC5yZWR1Y2UoKGFjY3VtdWxhdG9yLCByb3cpID0+IHtcblx0XHRcdFx0Y29uc3QgeyBpZCwgLi4ucmVzdCB9ID0gcm93O1xuXHRcdFx0XHRhY2N1bXVsYXRvci5wdXNoKHtcblx0XHRcdFx0XHRbdGhpcy5vcHRpb25zLmZpZWxkcy5pdGVtSWRdOiBpZCxcblx0XHRcdFx0XHQuLi5yZXN0LFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIGFjY3VtdWxhdG9yO1xuXHRcdFx0fSwgW10pO1xuXG5cdFx0dGhpcy5fc2F2ZUl0ZW0oJ3NhdmVfdHJlZScsIHsgdHJlZSB9KTtcblx0XHR0aGlzLl9yZXNldEFjdGlvbnModHJlZS5sZW5ndGgpO1xuXHR9LFxuXG5cdF9zY3JvbGxUbygkZWxlbWVudCwgZnJvbUhlaWdodCwgY2FsbGJhY2spIHtcblx0XHRjb25zdCBvZmZzZXQgPSAkZWxlbWVudC5vZmZzZXQoKTtcblx0XHRjb25zdCBvZmZzZXRUb3AgPSBvZmZzZXQudG9wO1xuXHRcdGNvbnN0IHNjcm9sbFRvcCA9IG9mZnNldFRvcCAtIGZyb21IZWlnaHQ7XG5cblx0XHR0aGlzLm5lc3RlZExpc3QuYW5pbWF0ZSh7IHNjcm9sbFRvcCB9LCAxMDAwLCBjYWxsYmFjayk7XG5cdH0sXG5cblx0X3Nob3dBY3Rpb25zKCkge1xuXHRcdHRoaXMubm9JdGVtcy5oaWRlKCk7XG5cdFx0dGhpcy5uZXN0ZWRMaXN0LnNob3coKTtcblx0XHR0aGlzLiRzZWxlY3RBbGwucGFyZW50KCkuc2hvdygpO1xuXHRcdHRoaXMuJGRlbGV0ZVNlbEJ0bi5zaG93KCk7XG5cdFx0dGhpcy4kc2F2ZUJ0bi5zaG93KCk7XG5cdFx0dGhpcy4kcmVidWlsZEJ0bi5idXR0b24oJ2VuYWJsZScpLnNob3coKTtcblx0fSxcblxuXHRfcmVtb3ZlTm9kZSgkbm9kZSkge1xuXHRcdGNvbnN0ICRwYXJlbnROb2RlID0gJG5vZGVcblx0XHRcdC5wYXJlbnQodGhpcy5vcHRpb25zLmxpc3RUeXBlKVxuXHRcdFx0Lm5vdCh0aGlzLm9wdGlvbnMubmVzdGVkTGlzdCk7XG5cblx0XHQvLyBpZiBub2RlIGhhcyBzaWJibGluZ3MsIG9yIGl0J3MgcGFyZW50IGlzIHRoZSByb290IG9sL3VsLCByZW1vdmUgbm9kZSBhbmQgbGVhdmUgcGFyZW50XG5cdFx0aWYgKCRub2RlLnNpYmxpbmdzKCkubGVuZ3RoIHx8ICEkcGFyZW50Tm9kZS5sZW5ndGgpIHtcblx0XHRcdCRub2RlLnJlbW92ZSgpO1xuXHRcdFx0Ly8gaWYgbm9kZSBkb2VzIG5vdCBoYXZlIHNpYmJsaW5ncywgcmVtb3ZlIHBhcmVudCBvbC91bFxuXHRcdH0gZWxzZSB7XG5cdFx0XHQkcGFyZW50Tm9kZS5yZW1vdmUoKTtcblx0XHR9XG5cdH0sXG5cblx0X3JlbmRlckl0ZW0oZGF0YSkge1xuXHRcdGRhdGEuaXRlbV9pY29uID0gZGF0YVt0aGlzLm9wdGlvbnMuZmllbGRzLml0ZW1JY29uXTtcblx0XHRyZXR1cm4gdGhpcy50ZW1wbGF0ZS5yZW5kZXIoZGF0YSk7XG5cdH0sXG5cblx0X3JlZnJlc2hJdGVtKGRhdGEpIHtcblx0XHRjb25zdCByZXBsYWNlbWVudCA9ICQodGhpcy5fcmVuZGVySXRlbShkYXRhKSkuY2hpbGRyZW4oKTtcblx0XHRyZXR1cm4gJChgI2l0ZW0tJHtkYXRhW3RoaXMub3B0aW9ucy5maWVsZHMuaXRlbUlkXX1gKVxuXHRcdFx0LmNoaWxkcmVuKCc6Zmlyc3QnKVxuXHRcdFx0LnJlcGxhY2VXaXRoKHJlcGxhY2VtZW50KTtcblx0fSxcbn0pO1xuIiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIiwiLyoqXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgS3lsZSBGbG9yZW5jZVxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3JcbiAqIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMlxuICogb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmVcbiAqIEZvdW5kYXRpb24sIEluYy4sIDUxIEZyYW5rbGluIFN0cmVldCwgRmlmdGggRmxvb3IsIEJvc3RvbiwgTUEgIDAyMTEwLTEzMDEsIFVTQS5cbiAqXG4gKiBAd2Vic2l0ZSBodHRwczovL2dpdGh1Yi5jb20va2Zsb3JlbmNlL2pxdWVyeS1kZXNlcmlhbGl6ZS9cbiAqIEB2ZXJzaW9uIDIuMC4wLXJjMVxuICpcbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMdjIgbGljZW5zZXMuXG4gKi9cbihmdW5jdGlvbiggZmFjdG9yeSApIHtcbiAgaWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgIC8vIE5vZGUvQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoIFwianF1ZXJ5XCIgKSApO1xuXG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgZmFjdG9yeSggd2luZG93LmpRdWVyeSApO1xuICB9XG59KGZ1bmN0aW9uKCAkICkge1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGEga2V5L3ZhbHVlQXJyYXkgd2l0aCB0aGUgZ2l2ZW4gcHJvcGVydHkgYW5kIHZhbHVlLiBWYWx1ZXMgd2lsbCBhbHdheXMgYmUgc3RvcmVkIGFzIGFycmF5cy5cbiAgICpcbiAgICogQHBhcmFtIHByb3AgVGhlIHByb3BlcnR5IHRvIGFkZCB0aGUgdmFsdWUgdG8uXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gYWRkLlxuICAgKiBAcGFyYW0gb2JqIFRoZSBvYmplY3QgdG8gdXBkYXRlLlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBVcGRhdGVkIG9iamVjdC5cbiAgICovXG4gIGZ1bmN0aW9uIHVwZGF0ZUtleVZhbHVlQXJyYXkoIHByb3AsIHZhbHVlLCBvYmogKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBvYmpbIHByb3AgXTtcblxuICAgIGlmICggY3VycmVudCA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgb2JqWyBwcm9wIF0gPSBbIHZhbHVlIF07XG5cbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudC5wdXNoKCB2YWx1ZSApO1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBvZiB0aGUgZmllbGRzIGNvbnRhaW5lZCB3aXRoaW4gdGhlIGdpdmVuIGVsZW1lbnRzIGJ5IG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSAkZWxlbWVudHMgalF1ZXJ5IG9iamVjdCBvZiBlbGVtZW50cy5cbiAgICogQHBhcmFtIGZpbHRlciBDdXN0b20gZmlsdGVyIHRvIGFwcGx5IHRvIHRoZSBsaXN0IG9mIGZpZWxkcy5cbiAgICogQHJldHVybnMge29iamVjdH0gQWxsIG9mIHRoZSBmaWVsZHMgY29udGFpbmVkIHdpdGhpbiB0aGUgZ2l2ZW4gZWxlbWVudHMsIGtleWVkIGJ5IG5hbWUuXG4gICAqL1xuICBmdW5jdGlvbiBnZXRGaWVsZHNCeU5hbWUoICRlbGVtZW50cywgZmlsdGVyICkge1xuICAgIHZhciBlbGVtZW50c0J5TmFtZSA9IHt9O1xuXG4gICAgLy8gRXh0cmFjdCBmaWVsZHMgZnJvbSBlbGVtZW50c1xuICAgIHZhciBmaWVsZHMgPSAkZWxlbWVudHNcbiAgICAgIC5tYXAoZnVuY3Rpb24gY29udmVydEZvcm1Ub0VsZW1lbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50cyA/ICQubWFrZUFycmF5KCB0aGlzLmVsZW1lbnRzICkgOiB0aGlzO1xuICAgICAgfSlcbiAgICAgIC5maWx0ZXIoIGZpbHRlciB8fCBcIjppbnB1dDpub3QoOmRpc2FibGVkKVwiIClcbiAgICAgIC5nZXQoKTtcblxuICAgICQuZWFjaCggZmllbGRzLCBmdW5jdGlvbiggaW5kZXgsIGZpZWxkICkge1xuICAgICAgdXBkYXRlS2V5VmFsdWVBcnJheSggZmllbGQubmFtZSwgZmllbGQsIGVsZW1lbnRzQnlOYW1lICk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZWxlbWVudHNCeU5hbWU7XG4gIH1cblxuICAvKipcbiAgICogRmlndXJlIG91dCB0aGUgdHlwZSBvZiBhbiBlbGVtZW50LiBJbnB1dCB0eXBlIHdpbGwgYmUgdXNlZCBmaXJzdCwgZmFsbGluZyBiYWNrIHRvIG5vZGVOYW1lLlxuICAgKlxuICAgKiBAcGFyYW0gZWxlbWVudCBET00gZWxlbWVudCB0byBjaGVjayB0eXBlIG9mLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZWxlbWVudCdzIHR5cGUuXG4gICAqL1xuICBmdW5jdGlvbiBnZXRFbGVtZW50VHlwZSggZWxlbWVudCApIHtcbiAgICByZXR1cm4gKCBlbGVtZW50LnR5cGUgfHwgZWxlbWVudC5ub2RlTmFtZSApLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICAvKipcbiAgICogTm9ybWFsaXplIHRoZSBwcm92aWRlZCBkYXRhIGludG8gYSBrZXkvdmFsdWVBcnJheSBzdG9yZS5cbiAgICpcbiAgICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgcHJvdmlkZWQgYnkgdGhlIHVzZXIgdG8gdGhlIHBsdWdpbi5cbiAgICogQHJldHVybnMge29iamVjdH0gVGhlIGRhdGEgbm9ybWFsaXplZCBpbnRvIGEga2V5L3ZhbHVlQXJyYXkgc3RvcmUuXG4gICAqL1xuICBmdW5jdGlvbiBub3JtYWxpemVEYXRhKCBkYXRhICkge1xuICAgIHZhciBub3JtYWxpemVkID0ge307XG4gICAgdmFyIHJQbHVzID0gL1xcKy9nO1xuXG4gICAgLy8gQ29udmVydCBkYXRhIGZyb20gLnNlcmlhbGl6ZU9iamVjdCgpIG5vdGF0aW9uXG4gICAgaWYgKCAkLmlzUGxhaW5PYmplY3QoIGRhdGEgKSApIHtcbiAgICAgICQuZXh0ZW5kKCBub3JtYWxpemVkLCBkYXRhICk7XG5cbiAgICAgIC8vIENvbnZlcnQgbm9uLWFycmF5IHZhbHVlcyBpbnRvIGFuIGFycmF5XG4gICAgICAkLmVhY2goIG5vcm1hbGl6ZWQsIGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcbiAgICAgICAgaWYgKCAhJC5pc0FycmF5KCB2YWx1ZSApICkge1xuICAgICAgICAgIG5vcm1hbGl6ZWRbIG5hbWUgXSA9IFsgdmFsdWUgXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAvLyBDb252ZXJ0IGRhdGEgZnJvbSAuc2VyaWFsaXplQXJyYXkoKSBub3RhdGlvblxuICAgIH0gZWxzZSBpZiAoICQuaXNBcnJheSggZGF0YSApICkge1xuICAgICAgJC5lYWNoKCBkYXRhLCBmdW5jdGlvbiggaW5kZXgsIGZpZWxkICkge1xuICAgICAgICB1cGRhdGVLZXlWYWx1ZUFycmF5KCBmaWVsZC5uYW1lLCBmaWVsZC52YWx1ZSwgbm9ybWFsaXplZCApO1xuICAgICAgfSk7XG5cbiAgICAvLyBDb252ZXJ0IGRhdGEgZnJvbSAuc2VyaWFsaXplKCkgbm90YXRpb25cbiAgICB9IGVsc2UgaWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICQuZWFjaCggZGF0YS5zcGxpdCggXCImXCIgKSwgZnVuY3Rpb24oIGluZGV4LCBmaWVsZCApIHtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBmaWVsZC5zcGxpdCggXCI9XCIgKTtcbiAgICAgICAgdmFyIG5hbWUgPSBkZWNvZGVVUklDb21wb25lbnQoIGN1cnJlbnRbIDAgXS5yZXBsYWNlKCByUGx1cywgXCIlMjBcIiApICk7XG4gICAgICAgIHZhciB2YWx1ZSA9IGRlY29kZVVSSUNvbXBvbmVudCggY3VycmVudFsgMSBdLnJlcGxhY2UoIHJQbHVzLCBcIiUyMFwiICkgKTtcbiAgICAgICAgdXBkYXRlS2V5VmFsdWVBcnJheSggbmFtZSwgdmFsdWUsIG5vcm1hbGl6ZWQgKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBub3JtYWxpemVkO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcCBvZiBwcm9wZXJ0eSBuYW1lIC0+IGVsZW1lbnQgdHlwZXMuXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqL1xuICB2YXIgdXBkYXRlVHlwZXMgPSB7XG4gICAgY2hlY2tlZDogW1xuICAgICAgXCJyYWRpb1wiLFxuICAgICAgXCJjaGVja2JveFwiXG4gICAgXSxcbiAgICBzZWxlY3RlZDogW1xuICAgICAgXCJvcHRpb25cIixcbiAgICAgIFwic2VsZWN0LW9uZVwiLFxuICAgICAgXCJzZWxlY3QtbXVsdGlwbGVcIlxuICAgIF0sXG4gICAgdmFsdWU6IFtcbiAgICAgIFwiYnV0dG9uXCIsXG4gICAgICBcImNvbG9yXCIsXG4gICAgICBcImRhdGVcIixcbiAgICAgIFwiZGF0ZXRpbWVcIixcbiAgICAgIFwiZGF0ZXRpbWUtbG9jYWxcIixcbiAgICAgIFwiZW1haWxcIixcbiAgICAgIFwiaGlkZGVuXCIsXG4gICAgICBcIm1vbnRoXCIsXG4gICAgICBcIm51bWJlclwiLFxuICAgICAgXCJwYXNzd29yZFwiLFxuICAgICAgXCJyYW5nZVwiLFxuICAgICAgXCJyZXNldFwiLFxuICAgICAgXCJzZWFyY2hcIixcbiAgICAgIFwic3VibWl0XCIsXG4gICAgICBcInRlbFwiLFxuICAgICAgXCJ0ZXh0XCIsXG4gICAgICBcInRleHRhcmVhXCIsXG4gICAgICBcInRpbWVcIixcbiAgICAgIFwidXJsXCIsXG4gICAgICBcIndlZWtcIlxuICAgIF1cbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBwcm9wZXJ0eSB0byB1cGRhdGUgb24gYW4gZWxlbWVudCBiZWluZyB1cGRhdGVkLlxuICAgKlxuICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgRE9NIGVsZW1lbnQgdG8gZ2V0IHRoZSBwcm9wZXJ0eSBmb3IuXG4gICAqIEByZXR1cm5zIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB1cGRhdGUgaWYgZWxlbWVudCBpcyBzdXBwb3J0ZWQsIG90aGVyd2lzZSBgdW5kZWZpbmVkYC5cbiAgICovXG4gIGZ1bmN0aW9uIGdldFByb3BlcnR5VG9VcGRhdGUoIGVsZW1lbnQgKSB7XG4gICAgdmFyIHR5cGUgPSBnZXRFbGVtZW50VHlwZSggZWxlbWVudCApO1xuICAgIHZhciBlbGVtZW50UHJvcGVydHkgPSB1bmRlZmluZWQ7XG5cbiAgICAkLmVhY2goIHVwZGF0ZVR5cGVzLCBmdW5jdGlvbiggcHJvcGVydHksIHR5cGVzICkge1xuICAgICAgaWYgKCAkLmluQXJyYXkoIHR5cGUsIHR5cGVzICkgPiAtMSApIHtcbiAgICAgICAgZWxlbWVudFByb3BlcnR5ID0gcHJvcGVydHk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBlbGVtZW50UHJvcGVydHk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBlbGVtZW50IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgRE9NIGVsZW1lbnQgdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0gZWxlbWVudEluZGV4IFRoZSBpbmRleCBvZiB0aGlzIGVsZW1lbnQgaW4gdGhlIGxpc3Qgb2YgZWxlbWVudHMgd2l0aCB0aGUgc2FtZSBuYW1lLlxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIHNlcmlhbGl6ZWQgZWxlbWVudCB2YWx1ZS5cbiAgICogQHBhcmFtIHZhbHVlSW5kZXggVGhlIGluZGV4IG9mIHRoZSB2YWx1ZSBpbiB0aGUgbGlzdCBvZiB2YWx1ZXMgZm9yIGVsZW1lbnRzIHdpdGggdGhlIHNhbWUgbmFtZS5cbiAgICogQHBhcmFtIGNhbGxiYWNrIEEgZnVuY3Rpb24gdG8gY2FsbCBpZiB0aGUgdmFsdWUgb2YgYW4gZWxlbWVudCB3YXMgdXBkYXRlZC5cbiAgICovXG4gIGZ1bmN0aW9uIHVwZGF0ZSggZWxlbWVudCwgZWxlbWVudEluZGV4LCB2YWx1ZSwgdmFsdWVJbmRleCwgY2FsbGJhY2sgKSB7XG4gICAgdmFyIHByb3BlcnR5ID0gZ2V0UHJvcGVydHlUb1VwZGF0ZSggZWxlbWVudCApO1xuXG4gICAgLy8gSGFuZGxlIHZhbHVlIGlucHV0c1xuICAgIC8vIElmIHRoZXJlIGFyZSBtdWx0aXBsZSB2YWx1ZSBpbnB1dHMgd2l0aCB0aGUgc2FtZSBuYW1lLCB0aGV5IHdpbGwgYmUgcG9wdWxhdGVkIGJ5IG1hdGNoaW5nIGluZGV4ZXMuXG4gICAgaWYgKCBwcm9wZXJ0eSA9PSBcInZhbHVlXCIgJiYgZWxlbWVudEluZGV4ID09IHZhbHVlSW5kZXggKSB7XG4gICAgICBlbGVtZW50LnZhbHVlID0gdmFsdWU7XG4gICAgICBjYWxsYmFjay5jYWxsKCBlbGVtZW50LCB2YWx1ZSApO1xuXG4gICAgLy8gSGFuZGxlIHNlbGVjdCBtZW51cywgY2hlY2tib3hlcyBhbmQgcmFkaW8gYnV0dG9uc1xuICAgIH0gZWxzZSBpZiAoIHByb3BlcnR5ID09IFwiY2hlY2tlZFwiIHx8IHByb3BlcnR5ID09IFwic2VsZWN0ZWRcIiApIHtcbiAgICAgIHZhciBmaWVsZHMgPSBbXTtcblxuICAgICAgLy8gRXh0cmFjdCBvcHRpb24gZmllbGRzIGZyb20gc2VsZWN0IG1lbnVzXG4gICAgICBpZiAoIGVsZW1lbnQub3B0aW9ucyApIHtcbiAgICAgICAgJC5lYWNoKCBlbGVtZW50Lm9wdGlvbnMsIGZ1bmN0aW9uKCBpbmRleCwgb3B0aW9uICkge1xuICAgICAgICAgIGZpZWxkcy5wdXNoKCBvcHRpb24gKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpZWxkcy5wdXNoKCBlbGVtZW50ICk7XG4gICAgICB9XG5cbiAgICAgIC8vICMzNzogUmVtb3ZlIHNlbGVjdGlvbiBmcm9tIG11bHRpcGxlIHNlbGVjdCBtZW51cyBiZWZvcmUgZGVzZXJpYWxpemF0aW9uXG4gICAgICBpZiAoIGVsZW1lbnQubXVsdGlwbGUgJiYgdmFsdWVJbmRleCA9PSAwICkge1xuICAgICAgICBlbGVtZW50LnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgIH1cblxuICAgICAgJC5lYWNoKCBmaWVsZHMsIGZ1bmN0aW9uKCBpbmRleCwgZmllbGQgKSB7XG4gICAgICAgIGlmICggZmllbGQudmFsdWUgPT0gdmFsdWUgKSB7XG4gICAgICAgICAgZmllbGRbIHByb3BlcnR5IF0gPSB0cnVlO1xuICAgICAgICAgIGNhbGxiYWNrLmNhbGwoIGZpZWxkLCB2YWx1ZSApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVmYXVsdCBwbHVnaW4gb3B0aW9ucy5cbiAgICpcbiAgICogQHR5cGUge29iamVjdH1cbiAgICovXG4gIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBjaGFuZ2U6ICQubm9vcCxcbiAgICBjb21wbGV0ZTogJC5ub29wXG4gIH07XG5cbiAgLyoqXG4gICAqIFRoZSAkLmRlc2VyaWFsaXplIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBkZXNlcmlhbGl6ZS5cbiAgICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBvcHRpb25zLlxuICAgKiBAcmV0dXJucyB7alF1ZXJ5fSBUaGUgalF1ZXJ5IG9iamVjdCB0aGF0IHdhcyBwcm92aWRlZCB0byB0aGUgcGx1Z2luLlxuICAgKi9cbiAgJC5mbi5kZXNlcmlhbGl6ZSA9IGZ1bmN0aW9uKCBkYXRhLCBvcHRpb25zICkge1xuXG4gICAgLy8gQmFja3dhcmRzIGNvbXBhdGlibGUgd2l0aCBvbGQgYXJndW1lbnRzOiBkYXRhLCBjYWxsYmFja1xuICAgIGlmICggJC5pc0Z1bmN0aW9uKCBvcHRpb25zICkgKSB7XG4gICAgICBvcHRpb25zID0geyBjb21wbGV0ZTogb3B0aW9ucyB9O1xuICAgIH1cblxuICAgIG9wdGlvbnMgPSAkLmV4dGVuZCggZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMgfHwge30gKTtcbiAgICBkYXRhID0gbm9ybWFsaXplRGF0YSggZGF0YSApO1xuXG4gICAgdmFyIGVsZW1lbnRzQnlOYW1lID0gZ2V0RmllbGRzQnlOYW1lKCB0aGlzLCBvcHRpb25zLmZpbHRlciApO1xuXG4gICAgJC5lYWNoKCBkYXRhLCBmdW5jdGlvbiggbmFtZSwgdmFsdWVzICkge1xuICAgICAgJC5lYWNoKCBlbGVtZW50c0J5TmFtZVsgbmFtZSBdLCBmdW5jdGlvbiggZWxlbWVudEluZGV4LCBlbGVtZW50ICkge1xuICAgICAgICAkLmVhY2goIHZhbHVlcywgZnVuY3Rpb24oIHZhbHVlSW5kZXgsIHZhbHVlICkge1xuICAgICAgICAgIHVwZGF0ZSggZWxlbWVudCwgZWxlbWVudEluZGV4LCB2YWx1ZSwgdmFsdWVJbmRleCwgb3B0aW9ucy5jaGFuZ2UgKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIG9wdGlvbnMuY29tcGxldGUuY2FsbCggdGhpcyApO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG59KSk7XG4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iLCIvKiFcbiAqIGpRdWVyeSBVSSBFZmZlY3RzIDEuMTIuMVxuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKi9cblxuLy8+PmxhYmVsOiBFZmZlY3RzIENvcmVcbi8vPj5ncm91cDogRWZmZWN0c1xuLy8ganNjczpkaXNhYmxlIG1heGltdW1MaW5lTGVuZ3RoXG4vLz4+ZGVzY3JpcHRpb246IEV4dGVuZHMgdGhlIGludGVybmFsIGpRdWVyeSBlZmZlY3RzLiBJbmNsdWRlcyBtb3JwaGluZyBhbmQgZWFzaW5nLiBSZXF1aXJlZCBieSBhbGwgb3RoZXIgZWZmZWN0cy5cbi8vIGpzY3M6ZW5hYmxlIG1heGltdW1MaW5lTGVuZ3RoXG4vLz4+ZG9jczogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2F0ZWdvcnkvZWZmZWN0cy1jb3JlL1xuLy8+PmRlbW9zOiBodHRwOi8vanF1ZXJ5dWkuY29tL2VmZmVjdC9cblxuKCBmdW5jdGlvbiggZmFjdG9yeSApIHtcblx0aWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblxuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cblx0XHRkZWZpbmUoIFsgXCJqcXVlcnlcIiwgXCIuL3ZlcnNpb25cIiBdLCBmYWN0b3J5ICk7XG5cdH0gZWxzZSB7XG5cblx0XHQvLyBCcm93c2VyIGdsb2JhbHNcblx0XHRmYWN0b3J5KCBqUXVlcnkgKTtcblx0fVxufSggZnVuY3Rpb24oICQgKSB7XG5cbnZhciBkYXRhU3BhY2UgPSBcInVpLWVmZmVjdHMtXCIsXG5cdGRhdGFTcGFjZVN0eWxlID0gXCJ1aS1lZmZlY3RzLXN0eWxlXCIsXG5cdGRhdGFTcGFjZUFuaW1hdGVkID0gXCJ1aS1lZmZlY3RzLWFuaW1hdGVkXCIsXG5cblx0Ly8gQ3JlYXRlIGEgbG9jYWwgalF1ZXJ5IGJlY2F1c2UgalF1ZXJ5IENvbG9yIHJlbGllcyBvbiBpdCBhbmQgdGhlXG5cdC8vIGdsb2JhbCBtYXkgbm90IGV4aXN0IHdpdGggQU1EIGFuZCBhIGN1c3RvbSBidWlsZCAoIzEwMTk5KVxuXHRqUXVlcnkgPSAkO1xuXG4kLmVmZmVjdHMgPSB7XG5cdGVmZmVjdDoge31cbn07XG5cbi8qIVxuICogalF1ZXJ5IENvbG9yIEFuaW1hdGlvbnMgdjIuMS4yXG4gKiBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1jb2xvclxuICpcbiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBEYXRlOiBXZWQgSmFuIDE2IDA4OjQ3OjA5IDIwMTMgLTA2MDBcbiAqL1xuKCBmdW5jdGlvbiggalF1ZXJ5LCB1bmRlZmluZWQgKSB7XG5cblx0dmFyIHN0ZXBIb29rcyA9IFwiYmFja2dyb3VuZENvbG9yIGJvcmRlckJvdHRvbUNvbG9yIGJvcmRlckxlZnRDb2xvciBib3JkZXJSaWdodENvbG9yIFwiICtcblx0XHRcImJvcmRlclRvcENvbG9yIGNvbG9yIGNvbHVtblJ1bGVDb2xvciBvdXRsaW5lQ29sb3IgdGV4dERlY29yYXRpb25Db2xvciB0ZXh0RW1waGFzaXNDb2xvclwiLFxuXG5cdC8vIFBsdXNlcXVhbHMgdGVzdCBmb3IgKz0gMTAwIC09IDEwMFxuXHRycGx1c2VxdWFscyA9IC9eKFtcXC0rXSk9XFxzKihcXGQrXFwuP1xcZCopLyxcblxuXHQvLyBBIHNldCBvZiBSRSdzIHRoYXQgY2FuIG1hdGNoIHN0cmluZ3MgYW5kIGdlbmVyYXRlIGNvbG9yIHR1cGxlcy5cblx0c3RyaW5nUGFyc2VycyA9IFsge1xuXHRcdFx0cmU6IC9yZ2JhP1xcKFxccyooXFxkezEsM30pXFxzKixcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqKD86LFxccyooXFxkPyg/OlxcLlxcZCspPylcXHMqKT9cXCkvLFxuXHRcdFx0cGFyc2U6IGZ1bmN0aW9uKCBleGVjUmVzdWx0ICkge1xuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdGV4ZWNSZXN1bHRbIDEgXSxcblx0XHRcdFx0XHRleGVjUmVzdWx0WyAyIF0sXG5cdFx0XHRcdFx0ZXhlY1Jlc3VsdFsgMyBdLFxuXHRcdFx0XHRcdGV4ZWNSZXN1bHRbIDQgXVxuXHRcdFx0XHRdO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdHJlOiAvcmdiYT9cXChcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFwlXFxzKixcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFwlXFxzKixcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFwlXFxzKig/OixcXHMqKFxcZD8oPzpcXC5cXGQrKT8pXFxzKik/XFwpLyxcblx0XHRcdHBhcnNlOiBmdW5jdGlvbiggZXhlY1Jlc3VsdCApIHtcblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHRleGVjUmVzdWx0WyAxIF0gKiAyLjU1LFxuXHRcdFx0XHRcdGV4ZWNSZXN1bHRbIDIgXSAqIDIuNTUsXG5cdFx0XHRcdFx0ZXhlY1Jlc3VsdFsgMyBdICogMi41NSxcblx0XHRcdFx0XHRleGVjUmVzdWx0WyA0IF1cblx0XHRcdFx0XTtcblx0XHRcdH1cblx0XHR9LCB7XG5cblx0XHRcdC8vIFRoaXMgcmVnZXggaWdub3JlcyBBLUYgYmVjYXVzZSBpdCdzIGNvbXBhcmVkIGFnYWluc3QgYW4gYWxyZWFkeSBsb3dlcmNhc2VkIHN0cmluZ1xuXHRcdFx0cmU6IC8jKFthLWYwLTldezJ9KShbYS1mMC05XXsyfSkoW2EtZjAtOV17Mn0pLyxcblx0XHRcdHBhcnNlOiBmdW5jdGlvbiggZXhlY1Jlc3VsdCApIHtcblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHRwYXJzZUludCggZXhlY1Jlc3VsdFsgMSBdLCAxNiApLFxuXHRcdFx0XHRcdHBhcnNlSW50KCBleGVjUmVzdWx0WyAyIF0sIDE2ICksXG5cdFx0XHRcdFx0cGFyc2VJbnQoIGV4ZWNSZXN1bHRbIDMgXSwgMTYgKVxuXHRcdFx0XHRdO1xuXHRcdFx0fVxuXHRcdH0sIHtcblxuXHRcdFx0Ly8gVGhpcyByZWdleCBpZ25vcmVzIEEtRiBiZWNhdXNlIGl0J3MgY29tcGFyZWQgYWdhaW5zdCBhbiBhbHJlYWR5IGxvd2VyY2FzZWQgc3RyaW5nXG5cdFx0XHRyZTogLyMoW2EtZjAtOV0pKFthLWYwLTldKShbYS1mMC05XSkvLFxuXHRcdFx0cGFyc2U6IGZ1bmN0aW9uKCBleGVjUmVzdWx0ICkge1xuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdHBhcnNlSW50KCBleGVjUmVzdWx0WyAxIF0gKyBleGVjUmVzdWx0WyAxIF0sIDE2ICksXG5cdFx0XHRcdFx0cGFyc2VJbnQoIGV4ZWNSZXN1bHRbIDIgXSArIGV4ZWNSZXN1bHRbIDIgXSwgMTYgKSxcblx0XHRcdFx0XHRwYXJzZUludCggZXhlY1Jlc3VsdFsgMyBdICsgZXhlY1Jlc3VsdFsgMyBdLCAxNiApXG5cdFx0XHRcdF07XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0cmU6IC9oc2xhP1xcKFxccyooXFxkKyg/OlxcLlxcZCspPylcXHMqLFxccyooXFxkKyg/OlxcLlxcZCspPylcXCVcXHMqLFxccyooXFxkKyg/OlxcLlxcZCspPylcXCVcXHMqKD86LFxccyooXFxkPyg/OlxcLlxcZCspPylcXHMqKT9cXCkvLFxuXHRcdFx0c3BhY2U6IFwiaHNsYVwiLFxuXHRcdFx0cGFyc2U6IGZ1bmN0aW9uKCBleGVjUmVzdWx0ICkge1xuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdGV4ZWNSZXN1bHRbIDEgXSxcblx0XHRcdFx0XHRleGVjUmVzdWx0WyAyIF0gLyAxMDAsXG5cdFx0XHRcdFx0ZXhlY1Jlc3VsdFsgMyBdIC8gMTAwLFxuXHRcdFx0XHRcdGV4ZWNSZXN1bHRbIDQgXVxuXHRcdFx0XHRdO1xuXHRcdFx0fVxuXHRcdH0gXSxcblxuXHQvLyBKUXVlcnkuQ29sb3IoIClcblx0Y29sb3IgPSBqUXVlcnkuQ29sb3IgPSBmdW5jdGlvbiggY29sb3IsIGdyZWVuLCBibHVlLCBhbHBoYSApIHtcblx0XHRyZXR1cm4gbmV3IGpRdWVyeS5Db2xvci5mbi5wYXJzZSggY29sb3IsIGdyZWVuLCBibHVlLCBhbHBoYSApO1xuXHR9LFxuXHRzcGFjZXMgPSB7XG5cdFx0cmdiYToge1xuXHRcdFx0cHJvcHM6IHtcblx0XHRcdFx0cmVkOiB7XG5cdFx0XHRcdFx0aWR4OiAwLFxuXHRcdFx0XHRcdHR5cGU6IFwiYnl0ZVwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGdyZWVuOiB7XG5cdFx0XHRcdFx0aWR4OiAxLFxuXHRcdFx0XHRcdHR5cGU6IFwiYnl0ZVwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJsdWU6IHtcblx0XHRcdFx0XHRpZHg6IDIsXG5cdFx0XHRcdFx0dHlwZTogXCJieXRlXCJcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRoc2xhOiB7XG5cdFx0XHRwcm9wczoge1xuXHRcdFx0XHRodWU6IHtcblx0XHRcdFx0XHRpZHg6IDAsXG5cdFx0XHRcdFx0dHlwZTogXCJkZWdyZWVzXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0c2F0dXJhdGlvbjoge1xuXHRcdFx0XHRcdGlkeDogMSxcblx0XHRcdFx0XHR0eXBlOiBcInBlcmNlbnRcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRsaWdodG5lc3M6IHtcblx0XHRcdFx0XHRpZHg6IDIsXG5cdFx0XHRcdFx0dHlwZTogXCJwZXJjZW50XCJcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0cHJvcFR5cGVzID0ge1xuXHRcdFwiYnl0ZVwiOiB7XG5cdFx0XHRmbG9vcjogdHJ1ZSxcblx0XHRcdG1heDogMjU1XG5cdFx0fSxcblx0XHRcInBlcmNlbnRcIjoge1xuXHRcdFx0bWF4OiAxXG5cdFx0fSxcblx0XHRcImRlZ3JlZXNcIjoge1xuXHRcdFx0bW9kOiAzNjAsXG5cdFx0XHRmbG9vcjogdHJ1ZVxuXHRcdH1cblx0fSxcblx0c3VwcG9ydCA9IGNvbG9yLnN1cHBvcnQgPSB7fSxcblxuXHQvLyBFbGVtZW50IGZvciBzdXBwb3J0IHRlc3RzXG5cdHN1cHBvcnRFbGVtID0galF1ZXJ5KCBcIjxwPlwiIClbIDAgXSxcblxuXHQvLyBDb2xvcnMgPSBqUXVlcnkuQ29sb3IubmFtZXNcblx0Y29sb3JzLFxuXG5cdC8vIExvY2FsIGFsaWFzZXMgb2YgZnVuY3Rpb25zIGNhbGxlZCBvZnRlblxuXHRlYWNoID0galF1ZXJ5LmVhY2g7XG5cbi8vIERldGVybWluZSByZ2JhIHN1cHBvcnQgaW1tZWRpYXRlbHlcbnN1cHBvcnRFbGVtLnN0eWxlLmNzc1RleHQgPSBcImJhY2tncm91bmQtY29sb3I6cmdiYSgxLDEsMSwuNSlcIjtcbnN1cHBvcnQucmdiYSA9IHN1cHBvcnRFbGVtLnN0eWxlLmJhY2tncm91bmRDb2xvci5pbmRleE9mKCBcInJnYmFcIiApID4gLTE7XG5cbi8vIERlZmluZSBjYWNoZSBuYW1lIGFuZCBhbHBoYSBwcm9wZXJ0aWVzXG4vLyBmb3IgcmdiYSBhbmQgaHNsYSBzcGFjZXNcbmVhY2goIHNwYWNlcywgZnVuY3Rpb24oIHNwYWNlTmFtZSwgc3BhY2UgKSB7XG5cdHNwYWNlLmNhY2hlID0gXCJfXCIgKyBzcGFjZU5hbWU7XG5cdHNwYWNlLnByb3BzLmFscGhhID0ge1xuXHRcdGlkeDogMyxcblx0XHR0eXBlOiBcInBlcmNlbnRcIixcblx0XHRkZWY6IDFcblx0fTtcbn0gKTtcblxuZnVuY3Rpb24gY2xhbXAoIHZhbHVlLCBwcm9wLCBhbGxvd0VtcHR5ICkge1xuXHR2YXIgdHlwZSA9IHByb3BUeXBlc1sgcHJvcC50eXBlIF0gfHwge307XG5cblx0aWYgKCB2YWx1ZSA9PSBudWxsICkge1xuXHRcdHJldHVybiAoIGFsbG93RW1wdHkgfHwgIXByb3AuZGVmICkgPyBudWxsIDogcHJvcC5kZWY7XG5cdH1cblxuXHQvLyB+fiBpcyBhbiBzaG9ydCB3YXkgb2YgZG9pbmcgZmxvb3IgZm9yIHBvc2l0aXZlIG51bWJlcnNcblx0dmFsdWUgPSB0eXBlLmZsb29yID8gfn52YWx1ZSA6IHBhcnNlRmxvYXQoIHZhbHVlICk7XG5cblx0Ly8gSUUgd2lsbCBwYXNzIGluIGVtcHR5IHN0cmluZ3MgYXMgdmFsdWUgZm9yIGFscGhhLFxuXHQvLyB3aGljaCB3aWxsIGhpdCB0aGlzIGNhc2Vcblx0aWYgKCBpc05hTiggdmFsdWUgKSApIHtcblx0XHRyZXR1cm4gcHJvcC5kZWY7XG5cdH1cblxuXHRpZiAoIHR5cGUubW9kICkge1xuXG5cdFx0Ly8gV2UgYWRkIG1vZCBiZWZvcmUgbW9kZGluZyB0byBtYWtlIHN1cmUgdGhhdCBuZWdhdGl2ZXMgdmFsdWVzXG5cdFx0Ly8gZ2V0IGNvbnZlcnRlZCBwcm9wZXJseTogLTEwIC0+IDM1MFxuXHRcdHJldHVybiAoIHZhbHVlICsgdHlwZS5tb2QgKSAlIHR5cGUubW9kO1xuXHR9XG5cblx0Ly8gRm9yIG5vdyBhbGwgcHJvcGVydHkgdHlwZXMgd2l0aG91dCBtb2QgaGF2ZSBtaW4gYW5kIG1heFxuXHRyZXR1cm4gMCA+IHZhbHVlID8gMCA6IHR5cGUubWF4IDwgdmFsdWUgPyB0eXBlLm1heCA6IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdQYXJzZSggc3RyaW5nICkge1xuXHR2YXIgaW5zdCA9IGNvbG9yKCksXG5cdFx0cmdiYSA9IGluc3QuX3JnYmEgPSBbXTtcblxuXHRzdHJpbmcgPSBzdHJpbmcudG9Mb3dlckNhc2UoKTtcblxuXHRlYWNoKCBzdHJpbmdQYXJzZXJzLCBmdW5jdGlvbiggaSwgcGFyc2VyICkge1xuXHRcdHZhciBwYXJzZWQsXG5cdFx0XHRtYXRjaCA9IHBhcnNlci5yZS5leGVjKCBzdHJpbmcgKSxcblx0XHRcdHZhbHVlcyA9IG1hdGNoICYmIHBhcnNlci5wYXJzZSggbWF0Y2ggKSxcblx0XHRcdHNwYWNlTmFtZSA9IHBhcnNlci5zcGFjZSB8fCBcInJnYmFcIjtcblxuXHRcdGlmICggdmFsdWVzICkge1xuXHRcdFx0cGFyc2VkID0gaW5zdFsgc3BhY2VOYW1lIF0oIHZhbHVlcyApO1xuXG5cdFx0XHQvLyBJZiB0aGlzIHdhcyBhbiByZ2JhIHBhcnNlIHRoZSBhc3NpZ25tZW50IG1pZ2h0IGhhcHBlbiB0d2ljZVxuXHRcdFx0Ly8gb2ggd2VsbC4uLi5cblx0XHRcdGluc3RbIHNwYWNlc1sgc3BhY2VOYW1lIF0uY2FjaGUgXSA9IHBhcnNlZFsgc3BhY2VzWyBzcGFjZU5hbWUgXS5jYWNoZSBdO1xuXHRcdFx0cmdiYSA9IGluc3QuX3JnYmEgPSBwYXJzZWQuX3JnYmE7XG5cblx0XHRcdC8vIEV4aXQgZWFjaCggc3RyaW5nUGFyc2VycyApIGhlcmUgYmVjYXVzZSB3ZSBtYXRjaGVkXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9ICk7XG5cblx0Ly8gRm91bmQgYSBzdHJpbmdQYXJzZXIgdGhhdCBoYW5kbGVkIGl0XG5cdGlmICggcmdiYS5sZW5ndGggKSB7XG5cblx0XHQvLyBJZiB0aGlzIGNhbWUgZnJvbSBhIHBhcnNlZCBzdHJpbmcsIGZvcmNlIFwidHJhbnNwYXJlbnRcIiB3aGVuIGFscGhhIGlzIDBcblx0XHQvLyBjaHJvbWUsIChhbmQgbWF5YmUgb3RoZXJzKSByZXR1cm4gXCJ0cmFuc3BhcmVudFwiIGFzIHJnYmEoMCwwLDAsMClcblx0XHRpZiAoIHJnYmEuam9pbigpID09PSBcIjAsMCwwLDBcIiApIHtcblx0XHRcdGpRdWVyeS5leHRlbmQoIHJnYmEsIGNvbG9ycy50cmFuc3BhcmVudCApO1xuXHRcdH1cblx0XHRyZXR1cm4gaW5zdDtcblx0fVxuXG5cdC8vIE5hbWVkIGNvbG9yc1xuXHRyZXR1cm4gY29sb3JzWyBzdHJpbmcgXTtcbn1cblxuY29sb3IuZm4gPSBqUXVlcnkuZXh0ZW5kKCBjb2xvci5wcm90b3R5cGUsIHtcblx0cGFyc2U6IGZ1bmN0aW9uKCByZWQsIGdyZWVuLCBibHVlLCBhbHBoYSApIHtcblx0XHRpZiAoIHJlZCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dGhpcy5fcmdiYSA9IFsgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCBdO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggcmVkLmpxdWVyeSB8fCByZWQubm9kZVR5cGUgKSB7XG5cdFx0XHRyZWQgPSBqUXVlcnkoIHJlZCApLmNzcyggZ3JlZW4gKTtcblx0XHRcdGdyZWVuID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdHZhciBpbnN0ID0gdGhpcyxcblx0XHRcdHR5cGUgPSBqUXVlcnkudHlwZSggcmVkICksXG5cdFx0XHRyZ2JhID0gdGhpcy5fcmdiYSA9IFtdO1xuXG5cdFx0Ly8gTW9yZSB0aGFuIDEgYXJndW1lbnQgc3BlY2lmaWVkIC0gYXNzdW1lICggcmVkLCBncmVlbiwgYmx1ZSwgYWxwaGEgKVxuXHRcdGlmICggZ3JlZW4gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJlZCA9IFsgcmVkLCBncmVlbiwgYmx1ZSwgYWxwaGEgXTtcblx0XHRcdHR5cGUgPSBcImFycmF5XCI7XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucGFyc2UoIHN0cmluZ1BhcnNlKCByZWQgKSB8fCBjb2xvcnMuX2RlZmF1bHQgKTtcblx0XHR9XG5cblx0XHRpZiAoIHR5cGUgPT09IFwiYXJyYXlcIiApIHtcblx0XHRcdGVhY2goIHNwYWNlcy5yZ2JhLnByb3BzLCBmdW5jdGlvbigga2V5LCBwcm9wICkge1xuXHRcdFx0XHRyZ2JhWyBwcm9wLmlkeCBdID0gY2xhbXAoIHJlZFsgcHJvcC5pZHggXSwgcHJvcCApO1xuXHRcdFx0fSApO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0aWYgKCByZWQgaW5zdGFuY2VvZiBjb2xvciApIHtcblx0XHRcdFx0ZWFjaCggc3BhY2VzLCBmdW5jdGlvbiggc3BhY2VOYW1lLCBzcGFjZSApIHtcblx0XHRcdFx0XHRpZiAoIHJlZFsgc3BhY2UuY2FjaGUgXSApIHtcblx0XHRcdFx0XHRcdGluc3RbIHNwYWNlLmNhY2hlIF0gPSByZWRbIHNwYWNlLmNhY2hlIF0uc2xpY2UoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVhY2goIHNwYWNlcywgZnVuY3Rpb24oIHNwYWNlTmFtZSwgc3BhY2UgKSB7XG5cdFx0XHRcdFx0dmFyIGNhY2hlID0gc3BhY2UuY2FjaGU7XG5cdFx0XHRcdFx0ZWFjaCggc3BhY2UucHJvcHMsIGZ1bmN0aW9uKCBrZXksIHByb3AgKSB7XG5cblx0XHRcdFx0XHRcdC8vIElmIHRoZSBjYWNoZSBkb2Vzbid0IGV4aXN0LCBhbmQgd2Uga25vdyBob3cgdG8gY29udmVydFxuXHRcdFx0XHRcdFx0aWYgKCAhaW5zdFsgY2FjaGUgXSAmJiBzcGFjZS50byApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBJZiB0aGUgdmFsdWUgd2FzIG51bGwsIHdlIGRvbid0IG5lZWQgdG8gY29weSBpdFxuXHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUga2V5IHdhcyBhbHBoYSwgd2UgZG9uJ3QgbmVlZCB0byBjb3B5IGl0IGVpdGhlclxuXHRcdFx0XHRcdFx0XHRpZiAoIGtleSA9PT0gXCJhbHBoYVwiIHx8IHJlZFsga2V5IF0gPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aW5zdFsgY2FjaGUgXSA9IHNwYWNlLnRvKCBpbnN0Ll9yZ2JhICk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIFRoaXMgaXMgdGhlIG9ubHkgY2FzZSB3aGVyZSB3ZSBhbGxvdyBudWxscyBmb3IgQUxMIHByb3BlcnRpZXMuXG5cdFx0XHRcdFx0XHQvLyBjYWxsIGNsYW1wIHdpdGggYWx3YXlzQWxsb3dFbXB0eVxuXHRcdFx0XHRcdFx0aW5zdFsgY2FjaGUgXVsgcHJvcC5pZHggXSA9IGNsYW1wKCByZWRbIGtleSBdLCBwcm9wLCB0cnVlICk7XG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0Ly8gRXZlcnl0aGluZyBkZWZpbmVkIGJ1dCBhbHBoYT9cblx0XHRcdFx0XHRpZiAoIGluc3RbIGNhY2hlIF0gJiZcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmluQXJyYXkoIG51bGwsIGluc3RbIGNhY2hlIF0uc2xpY2UoIDAsIDMgKSApIDwgMCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBkZWZhdWx0IG9mIDFcblx0XHRcdFx0XHRcdGluc3RbIGNhY2hlIF1bIDMgXSA9IDE7XG5cdFx0XHRcdFx0XHRpZiAoIHNwYWNlLmZyb20gKSB7XG5cdFx0XHRcdFx0XHRcdGluc3QuX3JnYmEgPSBzcGFjZS5mcm9tKCBpbnN0WyBjYWNoZSBdICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdH0sXG5cdGlzOiBmdW5jdGlvbiggY29tcGFyZSApIHtcblx0XHR2YXIgaXMgPSBjb2xvciggY29tcGFyZSApLFxuXHRcdFx0c2FtZSA9IHRydWUsXG5cdFx0XHRpbnN0ID0gdGhpcztcblxuXHRcdGVhY2goIHNwYWNlcywgZnVuY3Rpb24oIF8sIHNwYWNlICkge1xuXHRcdFx0dmFyIGxvY2FsQ2FjaGUsXG5cdFx0XHRcdGlzQ2FjaGUgPSBpc1sgc3BhY2UuY2FjaGUgXTtcblx0XHRcdGlmICggaXNDYWNoZSApIHtcblx0XHRcdFx0bG9jYWxDYWNoZSA9IGluc3RbIHNwYWNlLmNhY2hlIF0gfHwgc3BhY2UudG8gJiYgc3BhY2UudG8oIGluc3QuX3JnYmEgKSB8fCBbXTtcblx0XHRcdFx0ZWFjaCggc3BhY2UucHJvcHMsIGZ1bmN0aW9uKCBfLCBwcm9wICkge1xuXHRcdFx0XHRcdGlmICggaXNDYWNoZVsgcHJvcC5pZHggXSAhPSBudWxsICkge1xuXHRcdFx0XHRcdFx0c2FtZSA9ICggaXNDYWNoZVsgcHJvcC5pZHggXSA9PT0gbG9jYWxDYWNoZVsgcHJvcC5pZHggXSApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHNhbWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gc2FtZTtcblx0XHR9ICk7XG5cdFx0cmV0dXJuIHNhbWU7XG5cdH0sXG5cdF9zcGFjZTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHVzZWQgPSBbXSxcblx0XHRcdGluc3QgPSB0aGlzO1xuXHRcdGVhY2goIHNwYWNlcywgZnVuY3Rpb24oIHNwYWNlTmFtZSwgc3BhY2UgKSB7XG5cdFx0XHRpZiAoIGluc3RbIHNwYWNlLmNhY2hlIF0gKSB7XG5cdFx0XHRcdHVzZWQucHVzaCggc3BhY2VOYW1lICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHRcdHJldHVybiB1c2VkLnBvcCgpO1xuXHR9LFxuXHR0cmFuc2l0aW9uOiBmdW5jdGlvbiggb3RoZXIsIGRpc3RhbmNlICkge1xuXHRcdHZhciBlbmQgPSBjb2xvciggb3RoZXIgKSxcblx0XHRcdHNwYWNlTmFtZSA9IGVuZC5fc3BhY2UoKSxcblx0XHRcdHNwYWNlID0gc3BhY2VzWyBzcGFjZU5hbWUgXSxcblx0XHRcdHN0YXJ0Q29sb3IgPSB0aGlzLmFscGhhKCkgPT09IDAgPyBjb2xvciggXCJ0cmFuc3BhcmVudFwiICkgOiB0aGlzLFxuXHRcdFx0c3RhcnQgPSBzdGFydENvbG9yWyBzcGFjZS5jYWNoZSBdIHx8IHNwYWNlLnRvKCBzdGFydENvbG9yLl9yZ2JhICksXG5cdFx0XHRyZXN1bHQgPSBzdGFydC5zbGljZSgpO1xuXG5cdFx0ZW5kID0gZW5kWyBzcGFjZS5jYWNoZSBdO1xuXHRcdGVhY2goIHNwYWNlLnByb3BzLCBmdW5jdGlvbigga2V5LCBwcm9wICkge1xuXHRcdFx0dmFyIGluZGV4ID0gcHJvcC5pZHgsXG5cdFx0XHRcdHN0YXJ0VmFsdWUgPSBzdGFydFsgaW5kZXggXSxcblx0XHRcdFx0ZW5kVmFsdWUgPSBlbmRbIGluZGV4IF0sXG5cdFx0XHRcdHR5cGUgPSBwcm9wVHlwZXNbIHByb3AudHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBJZiBudWxsLCBkb24ndCBvdmVycmlkZSBzdGFydCB2YWx1ZVxuXHRcdFx0aWYgKCBlbmRWYWx1ZSA9PT0gbnVsbCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBudWxsIC0gdXNlIGVuZFxuXHRcdFx0aWYgKCBzdGFydFZhbHVlID09PSBudWxsICkge1xuXHRcdFx0XHRyZXN1bHRbIGluZGV4IF0gPSBlbmRWYWx1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICggdHlwZS5tb2QgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbmRWYWx1ZSAtIHN0YXJ0VmFsdWUgPiB0eXBlLm1vZCAvIDIgKSB7XG5cdFx0XHRcdFx0XHRzdGFydFZhbHVlICs9IHR5cGUubW9kO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIHN0YXJ0VmFsdWUgLSBlbmRWYWx1ZSA+IHR5cGUubW9kIC8gMiApIHtcblx0XHRcdFx0XHRcdHN0YXJ0VmFsdWUgLT0gdHlwZS5tb2Q7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJlc3VsdFsgaW5kZXggXSA9IGNsYW1wKCAoIGVuZFZhbHVlIC0gc3RhcnRWYWx1ZSApICogZGlzdGFuY2UgKyBzdGFydFZhbHVlLCBwcm9wICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHRcdHJldHVybiB0aGlzWyBzcGFjZU5hbWUgXSggcmVzdWx0ICk7XG5cdH0sXG5cdGJsZW5kOiBmdW5jdGlvbiggb3BhcXVlICkge1xuXG5cdFx0Ly8gSWYgd2UgYXJlIGFscmVhZHkgb3BhcXVlIC0gcmV0dXJuIG91cnNlbGZcblx0XHRpZiAoIHRoaXMuX3JnYmFbIDMgXSA9PT0gMSApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdHZhciByZ2IgPSB0aGlzLl9yZ2JhLnNsaWNlKCksXG5cdFx0XHRhID0gcmdiLnBvcCgpLFxuXHRcdFx0YmxlbmQgPSBjb2xvciggb3BhcXVlICkuX3JnYmE7XG5cblx0XHRyZXR1cm4gY29sb3IoIGpRdWVyeS5tYXAoIHJnYiwgZnVuY3Rpb24oIHYsIGkgKSB7XG5cdFx0XHRyZXR1cm4gKCAxIC0gYSApICogYmxlbmRbIGkgXSArIGEgKiB2O1xuXHRcdH0gKSApO1xuXHR9LFxuXHR0b1JnYmFTdHJpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBwcmVmaXggPSBcInJnYmEoXCIsXG5cdFx0XHRyZ2JhID0galF1ZXJ5Lm1hcCggdGhpcy5fcmdiYSwgZnVuY3Rpb24oIHYsIGkgKSB7XG5cdFx0XHRcdHJldHVybiB2ID09IG51bGwgPyAoIGkgPiAyID8gMSA6IDAgKSA6IHY7XG5cdFx0XHR9ICk7XG5cblx0XHRpZiAoIHJnYmFbIDMgXSA9PT0gMSApIHtcblx0XHRcdHJnYmEucG9wKCk7XG5cdFx0XHRwcmVmaXggPSBcInJnYihcIjtcblx0XHR9XG5cblx0XHRyZXR1cm4gcHJlZml4ICsgcmdiYS5qb2luKCkgKyBcIilcIjtcblx0fSxcblx0dG9Ic2xhU3RyaW5nOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgcHJlZml4ID0gXCJoc2xhKFwiLFxuXHRcdFx0aHNsYSA9IGpRdWVyeS5tYXAoIHRoaXMuaHNsYSgpLCBmdW5jdGlvbiggdiwgaSApIHtcblx0XHRcdFx0aWYgKCB2ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0diA9IGkgPiAyID8gMSA6IDA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDYXRjaCAxIGFuZCAyXG5cdFx0XHRcdGlmICggaSAmJiBpIDwgMyApIHtcblx0XHRcdFx0XHR2ID0gTWF0aC5yb3VuZCggdiAqIDEwMCApICsgXCIlXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHY7XG5cdFx0XHR9ICk7XG5cblx0XHRpZiAoIGhzbGFbIDMgXSA9PT0gMSApIHtcblx0XHRcdGhzbGEucG9wKCk7XG5cdFx0XHRwcmVmaXggPSBcImhzbChcIjtcblx0XHR9XG5cdFx0cmV0dXJuIHByZWZpeCArIGhzbGEuam9pbigpICsgXCIpXCI7XG5cdH0sXG5cdHRvSGV4U3RyaW5nOiBmdW5jdGlvbiggaW5jbHVkZUFscGhhICkge1xuXHRcdHZhciByZ2JhID0gdGhpcy5fcmdiYS5zbGljZSgpLFxuXHRcdFx0YWxwaGEgPSByZ2JhLnBvcCgpO1xuXG5cdFx0aWYgKCBpbmNsdWRlQWxwaGEgKSB7XG5cdFx0XHRyZ2JhLnB1c2goIH5+KCBhbHBoYSAqIDI1NSApICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIFwiI1wiICsgalF1ZXJ5Lm1hcCggcmdiYSwgZnVuY3Rpb24oIHYgKSB7XG5cblx0XHRcdC8vIERlZmF1bHQgdG8gMCB3aGVuIG51bGxzIGV4aXN0XG5cdFx0XHR2ID0gKCB2IHx8IDAgKS50b1N0cmluZyggMTYgKTtcblx0XHRcdHJldHVybiB2Lmxlbmd0aCA9PT0gMSA/IFwiMFwiICsgdiA6IHY7XG5cdFx0fSApLmpvaW4oIFwiXCIgKTtcblx0fSxcblx0dG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLl9yZ2JhWyAzIF0gPT09IDAgPyBcInRyYW5zcGFyZW50XCIgOiB0aGlzLnRvUmdiYVN0cmluZygpO1xuXHR9XG59ICk7XG5jb2xvci5mbi5wYXJzZS5wcm90b3R5cGUgPSBjb2xvci5mbjtcblxuLy8gSHNsYSBjb252ZXJzaW9ucyBhZGFwdGVkIGZyb206XG4vLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL21hYXNoYWFjay9zb3VyY2UvYnJvd3NlL3BhY2thZ2VzL2dyYXBoaWNzL3RydW5rL3NyYy9ncmFwaGljcy9jb2xvcnMvSFVFMlJHQi5hcz9yPTUwMjFcblxuZnVuY3Rpb24gaHVlMnJnYiggcCwgcSwgaCApIHtcblx0aCA9ICggaCArIDEgKSAlIDE7XG5cdGlmICggaCAqIDYgPCAxICkge1xuXHRcdHJldHVybiBwICsgKCBxIC0gcCApICogaCAqIDY7XG5cdH1cblx0aWYgKCBoICogMiA8IDEgKSB7XG5cdFx0cmV0dXJuIHE7XG5cdH1cblx0aWYgKCBoICogMyA8IDIgKSB7XG5cdFx0cmV0dXJuIHAgKyAoIHEgLSBwICkgKiAoICggMiAvIDMgKSAtIGggKSAqIDY7XG5cdH1cblx0cmV0dXJuIHA7XG59XG5cbnNwYWNlcy5oc2xhLnRvID0gZnVuY3Rpb24oIHJnYmEgKSB7XG5cdGlmICggcmdiYVsgMCBdID09IG51bGwgfHwgcmdiYVsgMSBdID09IG51bGwgfHwgcmdiYVsgMiBdID09IG51bGwgKSB7XG5cdFx0cmV0dXJuIFsgbnVsbCwgbnVsbCwgbnVsbCwgcmdiYVsgMyBdIF07XG5cdH1cblx0dmFyIHIgPSByZ2JhWyAwIF0gLyAyNTUsXG5cdFx0ZyA9IHJnYmFbIDEgXSAvIDI1NSxcblx0XHRiID0gcmdiYVsgMiBdIC8gMjU1LFxuXHRcdGEgPSByZ2JhWyAzIF0sXG5cdFx0bWF4ID0gTWF0aC5tYXgoIHIsIGcsIGIgKSxcblx0XHRtaW4gPSBNYXRoLm1pbiggciwgZywgYiApLFxuXHRcdGRpZmYgPSBtYXggLSBtaW4sXG5cdFx0YWRkID0gbWF4ICsgbWluLFxuXHRcdGwgPSBhZGQgKiAwLjUsXG5cdFx0aCwgcztcblxuXHRpZiAoIG1pbiA9PT0gbWF4ICkge1xuXHRcdGggPSAwO1xuXHR9IGVsc2UgaWYgKCByID09PSBtYXggKSB7XG5cdFx0aCA9ICggNjAgKiAoIGcgLSBiICkgLyBkaWZmICkgKyAzNjA7XG5cdH0gZWxzZSBpZiAoIGcgPT09IG1heCApIHtcblx0XHRoID0gKCA2MCAqICggYiAtIHIgKSAvIGRpZmYgKSArIDEyMDtcblx0fSBlbHNlIHtcblx0XHRoID0gKCA2MCAqICggciAtIGcgKSAvIGRpZmYgKSArIDI0MDtcblx0fVxuXG5cdC8vIENocm9tYSAoZGlmZikgPT0gMCBtZWFucyBncmV5c2NhbGUgd2hpY2gsIGJ5IGRlZmluaXRpb24sIHNhdHVyYXRpb24gPSAwJVxuXHQvLyBvdGhlcndpc2UsIHNhdHVyYXRpb24gaXMgYmFzZWQgb24gdGhlIHJhdGlvIG9mIGNocm9tYSAoZGlmZikgdG8gbGlnaHRuZXNzIChhZGQpXG5cdGlmICggZGlmZiA9PT0gMCApIHtcblx0XHRzID0gMDtcblx0fSBlbHNlIGlmICggbCA8PSAwLjUgKSB7XG5cdFx0cyA9IGRpZmYgLyBhZGQ7XG5cdH0gZWxzZSB7XG5cdFx0cyA9IGRpZmYgLyAoIDIgLSBhZGQgKTtcblx0fVxuXHRyZXR1cm4gWyBNYXRoLnJvdW5kKCBoICkgJSAzNjAsIHMsIGwsIGEgPT0gbnVsbCA/IDEgOiBhIF07XG59O1xuXG5zcGFjZXMuaHNsYS5mcm9tID0gZnVuY3Rpb24oIGhzbGEgKSB7XG5cdGlmICggaHNsYVsgMCBdID09IG51bGwgfHwgaHNsYVsgMSBdID09IG51bGwgfHwgaHNsYVsgMiBdID09IG51bGwgKSB7XG5cdFx0cmV0dXJuIFsgbnVsbCwgbnVsbCwgbnVsbCwgaHNsYVsgMyBdIF07XG5cdH1cblx0dmFyIGggPSBoc2xhWyAwIF0gLyAzNjAsXG5cdFx0cyA9IGhzbGFbIDEgXSxcblx0XHRsID0gaHNsYVsgMiBdLFxuXHRcdGEgPSBoc2xhWyAzIF0sXG5cdFx0cSA9IGwgPD0gMC41ID8gbCAqICggMSArIHMgKSA6IGwgKyBzIC0gbCAqIHMsXG5cdFx0cCA9IDIgKiBsIC0gcTtcblxuXHRyZXR1cm4gW1xuXHRcdE1hdGgucm91bmQoIGh1ZTJyZ2IoIHAsIHEsIGggKyAoIDEgLyAzICkgKSAqIDI1NSApLFxuXHRcdE1hdGgucm91bmQoIGh1ZTJyZ2IoIHAsIHEsIGggKSAqIDI1NSApLFxuXHRcdE1hdGgucm91bmQoIGh1ZTJyZ2IoIHAsIHEsIGggLSAoIDEgLyAzICkgKSAqIDI1NSApLFxuXHRcdGFcblx0XTtcbn07XG5cbmVhY2goIHNwYWNlcywgZnVuY3Rpb24oIHNwYWNlTmFtZSwgc3BhY2UgKSB7XG5cdHZhciBwcm9wcyA9IHNwYWNlLnByb3BzLFxuXHRcdGNhY2hlID0gc3BhY2UuY2FjaGUsXG5cdFx0dG8gPSBzcGFjZS50byxcblx0XHRmcm9tID0gc3BhY2UuZnJvbTtcblxuXHQvLyBNYWtlcyByZ2JhKCkgYW5kIGhzbGEoKVxuXHRjb2xvci5mblsgc3BhY2VOYW1lIF0gPSBmdW5jdGlvbiggdmFsdWUgKSB7XG5cblx0XHQvLyBHZW5lcmF0ZSBhIGNhY2hlIGZvciB0aGlzIHNwYWNlIGlmIGl0IGRvZXNuJ3QgZXhpc3Rcblx0XHRpZiAoIHRvICYmICF0aGlzWyBjYWNoZSBdICkge1xuXHRcdFx0dGhpc1sgY2FjaGUgXSA9IHRvKCB0aGlzLl9yZ2JhICk7XG5cdFx0fVxuXHRcdGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybiB0aGlzWyBjYWNoZSBdLnNsaWNlKCk7XG5cdFx0fVxuXG5cdFx0dmFyIHJldCxcblx0XHRcdHR5cGUgPSBqUXVlcnkudHlwZSggdmFsdWUgKSxcblx0XHRcdGFyciA9ICggdHlwZSA9PT0gXCJhcnJheVwiIHx8IHR5cGUgPT09IFwib2JqZWN0XCIgKSA/IHZhbHVlIDogYXJndW1lbnRzLFxuXHRcdFx0bG9jYWwgPSB0aGlzWyBjYWNoZSBdLnNsaWNlKCk7XG5cblx0XHRlYWNoKCBwcm9wcywgZnVuY3Rpb24oIGtleSwgcHJvcCApIHtcblx0XHRcdHZhciB2YWwgPSBhcnJbIHR5cGUgPT09IFwib2JqZWN0XCIgPyBrZXkgOiBwcm9wLmlkeCBdO1xuXHRcdFx0aWYgKCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdFx0dmFsID0gbG9jYWxbIHByb3AuaWR4IF07XG5cdFx0XHR9XG5cdFx0XHRsb2NhbFsgcHJvcC5pZHggXSA9IGNsYW1wKCB2YWwsIHByb3AgKTtcblx0XHR9ICk7XG5cblx0XHRpZiAoIGZyb20gKSB7XG5cdFx0XHRyZXQgPSBjb2xvciggZnJvbSggbG9jYWwgKSApO1xuXHRcdFx0cmV0WyBjYWNoZSBdID0gbG9jYWw7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gY29sb3IoIGxvY2FsICk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIE1ha2VzIHJlZCgpIGdyZWVuKCkgYmx1ZSgpIGFscGhhKCkgaHVlKCkgc2F0dXJhdGlvbigpIGxpZ2h0bmVzcygpXG5cdGVhY2goIHByb3BzLCBmdW5jdGlvbigga2V5LCBwcm9wICkge1xuXG5cdFx0Ly8gQWxwaGEgaXMgaW5jbHVkZWQgaW4gbW9yZSB0aGFuIG9uZSBzcGFjZVxuXHRcdGlmICggY29sb3IuZm5bIGtleSBdICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb2xvci5mblsga2V5IF0gPSBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgdnR5cGUgPSBqUXVlcnkudHlwZSggdmFsdWUgKSxcblx0XHRcdFx0Zm4gPSAoIGtleSA9PT0gXCJhbHBoYVwiID8gKCB0aGlzLl9oc2xhID8gXCJoc2xhXCIgOiBcInJnYmFcIiApIDogc3BhY2VOYW1lICksXG5cdFx0XHRcdGxvY2FsID0gdGhpc1sgZm4gXSgpLFxuXHRcdFx0XHRjdXIgPSBsb2NhbFsgcHJvcC5pZHggXSxcblx0XHRcdFx0bWF0Y2g7XG5cblx0XHRcdGlmICggdnR5cGUgPT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0XHRcdHJldHVybiBjdXI7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggdnR5cGUgPT09IFwiZnVuY3Rpb25cIiApIHtcblx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5jYWxsKCB0aGlzLCBjdXIgKTtcblx0XHRcdFx0dnR5cGUgPSBqUXVlcnkudHlwZSggdmFsdWUgKTtcblx0XHRcdH1cblx0XHRcdGlmICggdmFsdWUgPT0gbnVsbCAmJiBwcm9wLmVtcHR5ICkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHRcdGlmICggdnR5cGUgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdG1hdGNoID0gcnBsdXNlcXVhbHMuZXhlYyggdmFsdWUgKTtcblx0XHRcdFx0aWYgKCBtYXRjaCApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGN1ciArIHBhcnNlRmxvYXQoIG1hdGNoWyAyIF0gKSAqICggbWF0Y2hbIDEgXSA9PT0gXCIrXCIgPyAxIDogLTEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bG9jYWxbIHByb3AuaWR4IF0gPSB2YWx1ZTtcblx0XHRcdHJldHVybiB0aGlzWyBmbiBdKCBsb2NhbCApO1xuXHRcdH07XG5cdH0gKTtcbn0gKTtcblxuLy8gQWRkIGNzc0hvb2sgYW5kIC5meC5zdGVwIGZ1bmN0aW9uIGZvciBlYWNoIG5hbWVkIGhvb2suXG4vLyBhY2NlcHQgYSBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIHByb3BlcnRpZXNcbmNvbG9yLmhvb2sgPSBmdW5jdGlvbiggaG9vayApIHtcblx0dmFyIGhvb2tzID0gaG9vay5zcGxpdCggXCIgXCIgKTtcblx0ZWFjaCggaG9va3MsIGZ1bmN0aW9uKCBpLCBob29rICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgaG9vayBdID0ge1xuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBwYXJzZWQsIGN1ckVsZW0sXG5cdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yID0gXCJcIjtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9PSBcInRyYW5zcGFyZW50XCIgJiYgKCBqUXVlcnkudHlwZSggdmFsdWUgKSAhPT0gXCJzdHJpbmdcIiB8fFxuXHRcdFx0XHRcdFx0KCBwYXJzZWQgPSBzdHJpbmdQYXJzZSggdmFsdWUgKSApICkgKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjb2xvciggcGFyc2VkIHx8IHZhbHVlICk7XG5cdFx0XHRcdFx0aWYgKCAhc3VwcG9ydC5yZ2JhICYmIHZhbHVlLl9yZ2JhWyAzIF0gIT09IDEgKSB7XG5cdFx0XHRcdFx0XHRjdXJFbGVtID0gaG9vayA9PT0gXCJiYWNrZ3JvdW5kQ29sb3JcIiA/IGVsZW0ucGFyZW50Tm9kZSA6IGVsZW07XG5cdFx0XHRcdFx0XHR3aGlsZSAoXG5cdFx0XHRcdFx0XHRcdCggYmFja2dyb3VuZENvbG9yID09PSBcIlwiIHx8IGJhY2tncm91bmRDb2xvciA9PT0gXCJ0cmFuc3BhcmVudFwiICkgJiZcblx0XHRcdFx0XHRcdFx0Y3VyRWxlbSAmJiBjdXJFbGVtLnN0eWxlXG5cdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRiYWNrZ3JvdW5kQ29sb3IgPSBqUXVlcnkuY3NzKCBjdXJFbGVtLCBcImJhY2tncm91bmRDb2xvclwiICk7XG5cdFx0XHRcdFx0XHRcdFx0Y3VyRWxlbSA9IGN1ckVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5ibGVuZCggYmFja2dyb3VuZENvbG9yICYmIGJhY2tncm91bmRDb2xvciAhPT0gXCJ0cmFuc3BhcmVudFwiID9cblx0XHRcdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yIDpcblx0XHRcdFx0XHRcdFx0XCJfZGVmYXVsdFwiICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS50b1JnYmFTdHJpbmcoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGVsZW0uc3R5bGVbIGhvb2sgXSA9IHZhbHVlO1xuXHRcdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHRcdC8vIFdyYXBwZWQgdG8gcHJldmVudCBJRSBmcm9tIHRocm93aW5nIGVycm9ycyBvbiBcImludmFsaWRcIiB2YWx1ZXMgbGlrZVxuXHRcdFx0XHRcdC8vICdhdXRvJyBvciAnaW5oZXJpdCdcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0alF1ZXJ5LmZ4LnN0ZXBbIGhvb2sgXSA9IGZ1bmN0aW9uKCBmeCApIHtcblx0XHRcdGlmICggIWZ4LmNvbG9ySW5pdCApIHtcblx0XHRcdFx0Znguc3RhcnQgPSBjb2xvciggZnguZWxlbSwgaG9vayApO1xuXHRcdFx0XHRmeC5lbmQgPSBjb2xvciggZnguZW5kICk7XG5cdFx0XHRcdGZ4LmNvbG9ySW5pdCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRqUXVlcnkuY3NzSG9va3NbIGhvb2sgXS5zZXQoIGZ4LmVsZW0sIGZ4LnN0YXJ0LnRyYW5zaXRpb24oIGZ4LmVuZCwgZngucG9zICkgKTtcblx0XHR9O1xuXHR9ICk7XG5cbn07XG5cbmNvbG9yLmhvb2soIHN0ZXBIb29rcyApO1xuXG5qUXVlcnkuY3NzSG9va3MuYm9yZGVyQ29sb3IgPSB7XG5cdGV4cGFuZDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBleHBhbmRlZCA9IHt9O1xuXG5cdFx0ZWFjaCggWyBcIlRvcFwiLCBcIlJpZ2h0XCIsIFwiQm90dG9tXCIsIFwiTGVmdFwiIF0sIGZ1bmN0aW9uKCBpLCBwYXJ0ICkge1xuXHRcdFx0ZXhwYW5kZWRbIFwiYm9yZGVyXCIgKyBwYXJ0ICsgXCJDb2xvclwiIF0gPSB2YWx1ZTtcblx0XHR9ICk7XG5cdFx0cmV0dXJuIGV4cGFuZGVkO1xuXHR9XG59O1xuXG4vLyBCYXNpYyBjb2xvciBuYW1lcyBvbmx5LlxuLy8gVXNhZ2Ugb2YgYW55IG9mIHRoZSBvdGhlciBjb2xvciBuYW1lcyByZXF1aXJlcyBhZGRpbmcgeW91cnNlbGYgb3IgaW5jbHVkaW5nXG4vLyBqcXVlcnkuY29sb3Iuc3ZnLW5hbWVzLmpzLlxuY29sb3JzID0galF1ZXJ5LkNvbG9yLm5hbWVzID0ge1xuXG5cdC8vIDQuMS4gQmFzaWMgY29sb3Iga2V5d29yZHNcblx0YXF1YTogXCIjMDBmZmZmXCIsXG5cdGJsYWNrOiBcIiMwMDAwMDBcIixcblx0Ymx1ZTogXCIjMDAwMGZmXCIsXG5cdGZ1Y2hzaWE6IFwiI2ZmMDBmZlwiLFxuXHRncmF5OiBcIiM4MDgwODBcIixcblx0Z3JlZW46IFwiIzAwODAwMFwiLFxuXHRsaW1lOiBcIiMwMGZmMDBcIixcblx0bWFyb29uOiBcIiM4MDAwMDBcIixcblx0bmF2eTogXCIjMDAwMDgwXCIsXG5cdG9saXZlOiBcIiM4MDgwMDBcIixcblx0cHVycGxlOiBcIiM4MDAwODBcIixcblx0cmVkOiBcIiNmZjAwMDBcIixcblx0c2lsdmVyOiBcIiNjMGMwYzBcIixcblx0dGVhbDogXCIjMDA4MDgwXCIsXG5cdHdoaXRlOiBcIiNmZmZmZmZcIixcblx0eWVsbG93OiBcIiNmZmZmMDBcIixcblxuXHQvLyA0LjIuMy4gXCJ0cmFuc3BhcmVudFwiIGNvbG9yIGtleXdvcmRcblx0dHJhbnNwYXJlbnQ6IFsgbnVsbCwgbnVsbCwgbnVsbCwgMCBdLFxuXG5cdF9kZWZhdWx0OiBcIiNmZmZmZmZcIlxufTtcblxufSApKCBqUXVlcnkgKTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQ0xBU1MgQU5JTUFUSU9OUyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuKCBmdW5jdGlvbigpIHtcblxudmFyIGNsYXNzQW5pbWF0aW9uQWN0aW9ucyA9IFsgXCJhZGRcIiwgXCJyZW1vdmVcIiwgXCJ0b2dnbGVcIiBdLFxuXHRzaG9ydGhhbmRTdHlsZXMgPSB7XG5cdFx0Ym9yZGVyOiAxLFxuXHRcdGJvcmRlckJvdHRvbTogMSxcblx0XHRib3JkZXJDb2xvcjogMSxcblx0XHRib3JkZXJMZWZ0OiAxLFxuXHRcdGJvcmRlclJpZ2h0OiAxLFxuXHRcdGJvcmRlclRvcDogMSxcblx0XHRib3JkZXJXaWR0aDogMSxcblx0XHRtYXJnaW46IDEsXG5cdFx0cGFkZGluZzogMVxuXHR9O1xuXG4kLmVhY2goXG5cdFsgXCJib3JkZXJMZWZ0U3R5bGVcIiwgXCJib3JkZXJSaWdodFN0eWxlXCIsIFwiYm9yZGVyQm90dG9tU3R5bGVcIiwgXCJib3JkZXJUb3BTdHlsZVwiIF0sXG5cdGZ1bmN0aW9uKCBfLCBwcm9wICkge1xuXHRcdCQuZnguc3RlcFsgcHJvcCBdID0gZnVuY3Rpb24oIGZ4ICkge1xuXHRcdFx0aWYgKCBmeC5lbmQgIT09IFwibm9uZVwiICYmICFmeC5zZXRBdHRyIHx8IGZ4LnBvcyA9PT0gMSAmJiAhZnguc2V0QXR0ciApIHtcblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBmeC5lbGVtLCBwcm9wLCBmeC5lbmQgKTtcblx0XHRcdFx0Znguc2V0QXR0ciA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuKTtcblxuZnVuY3Rpb24gZ2V0RWxlbWVudFN0eWxlcyggZWxlbSApIHtcblx0dmFyIGtleSwgbGVuLFxuXHRcdHN0eWxlID0gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3ID9cblx0XHRcdGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtLCBudWxsICkgOlxuXHRcdFx0ZWxlbS5jdXJyZW50U3R5bGUsXG5cdFx0c3R5bGVzID0ge307XG5cblx0aWYgKCBzdHlsZSAmJiBzdHlsZS5sZW5ndGggJiYgc3R5bGVbIDAgXSAmJiBzdHlsZVsgc3R5bGVbIDAgXSBdICkge1xuXHRcdGxlbiA9IHN0eWxlLmxlbmd0aDtcblx0XHR3aGlsZSAoIGxlbi0tICkge1xuXHRcdFx0a2V5ID0gc3R5bGVbIGxlbiBdO1xuXHRcdFx0aWYgKCB0eXBlb2Ygc3R5bGVbIGtleSBdID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRzdHlsZXNbICQuY2FtZWxDYXNlKCBrZXkgKSBdID0gc3R5bGVbIGtleSBdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHQvLyBTdXBwb3J0OiBPcGVyYSwgSUUgPDlcblx0fSBlbHNlIHtcblx0XHRmb3IgKCBrZXkgaW4gc3R5bGUgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBzdHlsZVsga2V5IF0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdHN0eWxlc1sga2V5IF0gPSBzdHlsZVsga2V5IF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gc3R5bGVEaWZmZXJlbmNlKCBvbGRTdHlsZSwgbmV3U3R5bGUgKSB7XG5cdHZhciBkaWZmID0ge30sXG5cdFx0bmFtZSwgdmFsdWU7XG5cblx0Zm9yICggbmFtZSBpbiBuZXdTdHlsZSApIHtcblx0XHR2YWx1ZSA9IG5ld1N0eWxlWyBuYW1lIF07XG5cdFx0aWYgKCBvbGRTdHlsZVsgbmFtZSBdICE9PSB2YWx1ZSApIHtcblx0XHRcdGlmICggIXNob3J0aGFuZFN0eWxlc1sgbmFtZSBdICkge1xuXHRcdFx0XHRpZiAoICQuZnguc3RlcFsgbmFtZSBdIHx8ICFpc05hTiggcGFyc2VGbG9hdCggdmFsdWUgKSApICkge1xuXHRcdFx0XHRcdGRpZmZbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGRpZmY7XG59XG5cbi8vIFN1cHBvcnQ6IGpRdWVyeSA8MS44XG5pZiAoICEkLmZuLmFkZEJhY2sgKSB7XG5cdCQuZm4uYWRkQmFjayA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuXHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlciggc2VsZWN0b3IgKVxuXHRcdCk7XG5cdH07XG59XG5cbiQuZWZmZWN0cy5hbmltYXRlQ2xhc3MgPSBmdW5jdGlvbiggdmFsdWUsIGR1cmF0aW9uLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHR2YXIgbyA9ICQuc3BlZWQoIGR1cmF0aW9uLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cblx0cmV0dXJuIHRoaXMucXVldWUoIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBhbmltYXRlZCA9ICQoIHRoaXMgKSxcblx0XHRcdGJhc2VDbGFzcyA9IGFuaW1hdGVkLmF0dHIoIFwiY2xhc3NcIiApIHx8IFwiXCIsXG5cdFx0XHRhcHBseUNsYXNzQ2hhbmdlLFxuXHRcdFx0YWxsQW5pbWF0aW9ucyA9IG8uY2hpbGRyZW4gPyBhbmltYXRlZC5maW5kKCBcIipcIiApLmFkZEJhY2soKSA6IGFuaW1hdGVkO1xuXG5cdFx0Ly8gTWFwIHRoZSBhbmltYXRlZCBvYmplY3RzIHRvIHN0b3JlIHRoZSBvcmlnaW5hbCBzdHlsZXMuXG5cdFx0YWxsQW5pbWF0aW9ucyA9IGFsbEFuaW1hdGlvbnMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBlbCA9ICQoIHRoaXMgKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGVsOiBlbCxcblx0XHRcdFx0c3RhcnQ6IGdldEVsZW1lbnRTdHlsZXMoIHRoaXMgKVxuXHRcdFx0fTtcblx0XHR9ICk7XG5cblx0XHQvLyBBcHBseSBjbGFzcyBjaGFuZ2Vcblx0XHRhcHBseUNsYXNzQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkLmVhY2goIGNsYXNzQW5pbWF0aW9uQWN0aW9ucywgZnVuY3Rpb24oIGksIGFjdGlvbiApIHtcblx0XHRcdFx0aWYgKCB2YWx1ZVsgYWN0aW9uIF0gKSB7XG5cdFx0XHRcdFx0YW5pbWF0ZWRbIGFjdGlvbiArIFwiQ2xhc3NcIiBdKCB2YWx1ZVsgYWN0aW9uIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH07XG5cdFx0YXBwbHlDbGFzc0NoYW5nZSgpO1xuXG5cdFx0Ly8gTWFwIGFsbCBhbmltYXRlZCBvYmplY3RzIGFnYWluIC0gY2FsY3VsYXRlIG5ldyBzdHlsZXMgYW5kIGRpZmZcblx0XHRhbGxBbmltYXRpb25zID0gYWxsQW5pbWF0aW9ucy5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5lbmQgPSBnZXRFbGVtZW50U3R5bGVzKCB0aGlzLmVsWyAwIF0gKTtcblx0XHRcdHRoaXMuZGlmZiA9IHN0eWxlRGlmZmVyZW5jZSggdGhpcy5zdGFydCwgdGhpcy5lbmQgKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0gKTtcblxuXHRcdC8vIEFwcGx5IG9yaWdpbmFsIGNsYXNzXG5cdFx0YW5pbWF0ZWQuYXR0ciggXCJjbGFzc1wiLCBiYXNlQ2xhc3MgKTtcblxuXHRcdC8vIE1hcCBhbGwgYW5pbWF0ZWQgb2JqZWN0cyBhZ2FpbiAtIHRoaXMgdGltZSBjb2xsZWN0aW5nIGEgcHJvbWlzZVxuXHRcdGFsbEFuaW1hdGlvbnMgPSBhbGxBbmltYXRpb25zLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc3R5bGVJbmZvID0gdGhpcyxcblx0XHRcdFx0ZGZkID0gJC5EZWZlcnJlZCgpLFxuXHRcdFx0XHRvcHRzID0gJC5leHRlbmQoIHt9LCBvLCB7XG5cdFx0XHRcdFx0cXVldWU6IGZhbHNlLFxuXHRcdFx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGRmZC5yZXNvbHZlKCBzdHlsZUluZm8gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0dGhpcy5lbC5hbmltYXRlKCB0aGlzLmRpZmYsIG9wdHMgKTtcblx0XHRcdHJldHVybiBkZmQucHJvbWlzZSgpO1xuXHRcdH0gKTtcblxuXHRcdC8vIE9uY2UgYWxsIGFuaW1hdGlvbnMgaGF2ZSBjb21wbGV0ZWQ6XG5cdFx0JC53aGVuLmFwcGx5KCAkLCBhbGxBbmltYXRpb25zLmdldCgpICkuZG9uZSggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIFNldCB0aGUgZmluYWwgY2xhc3Ncblx0XHRcdGFwcGx5Q2xhc3NDaGFuZ2UoKTtcblxuXHRcdFx0Ly8gRm9yIGVhY2ggYW5pbWF0ZWQgZWxlbWVudCxcblx0XHRcdC8vIGNsZWFyIGFsbCBjc3MgcHJvcGVydGllcyB0aGF0IHdlcmUgYW5pbWF0ZWRcblx0XHRcdCQuZWFjaCggYXJndW1lbnRzLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGVsID0gdGhpcy5lbDtcblx0XHRcdFx0JC5lYWNoKCB0aGlzLmRpZmYsIGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0XHRcdFx0ZWwuY3NzKCBrZXksIFwiXCIgKTtcblx0XHRcdFx0fSApO1xuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBUaGlzIGlzIGd1YXJudGVlZCB0byBiZSB0aGVyZSBpZiB5b3UgdXNlIGpRdWVyeS5zcGVlZCgpXG5cdFx0XHQvLyBpdCBhbHNvIGhhbmRsZXMgZGVxdWV1aW5nIHRoZSBuZXh0IGFuaW0uLi5cblx0XHRcdG8uY29tcGxldGUuY2FsbCggYW5pbWF0ZWRbIDAgXSApO1xuXHRcdH0gKTtcblx0fSApO1xufTtcblxuJC5mbi5leHRlbmQoIHtcblx0YWRkQ2xhc3M6ICggZnVuY3Rpb24oIG9yaWcgKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBjbGFzc05hbWVzLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRcdHJldHVybiBzcGVlZCA/XG5cdFx0XHRcdCQuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCggdGhpcyxcblx0XHRcdFx0XHR7IGFkZDogY2xhc3NOYW1lcyB9LCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIDpcblx0XHRcdFx0b3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0fTtcblx0fSApKCAkLmZuLmFkZENsYXNzICksXG5cblx0cmVtb3ZlQ2xhc3M6ICggZnVuY3Rpb24oIG9yaWcgKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBjbGFzc05hbWVzLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMSA/XG5cdFx0XHRcdCQuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCggdGhpcyxcblx0XHRcdFx0XHR7IHJlbW92ZTogY2xhc3NOYW1lcyB9LCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIDpcblx0XHRcdFx0b3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0fTtcblx0fSApKCAkLmZuLnJlbW92ZUNsYXNzICksXG5cblx0dG9nZ2xlQ2xhc3M6ICggZnVuY3Rpb24oIG9yaWcgKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBjbGFzc05hbWVzLCBmb3JjZSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBmb3JjZSA9PT0gXCJib29sZWFuXCIgfHwgZm9yY2UgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0aWYgKCAhc3BlZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBXaXRob3V0IHNwZWVkIHBhcmFtZXRlclxuXHRcdFx0XHRcdHJldHVybiBvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gJC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKCB0aGlzLFxuXHRcdFx0XHRcdFx0KCBmb3JjZSA/IHsgYWRkOiBjbGFzc05hbWVzIH0gOiB7IHJlbW92ZTogY2xhc3NOYW1lcyB9ICksXG5cdFx0XHRcdFx0XHRzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIFdpdGhvdXQgZm9yY2UgcGFyYW1ldGVyXG5cdFx0XHRcdHJldHVybiAkLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwoIHRoaXMsXG5cdFx0XHRcdFx0eyB0b2dnbGU6IGNsYXNzTmFtZXMgfSwgZm9yY2UsIHNwZWVkLCBlYXNpbmcgKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9ICkoICQuZm4udG9nZ2xlQ2xhc3MgKSxcblxuXHRzd2l0Y2hDbGFzczogZnVuY3Rpb24oIHJlbW92ZSwgYWRkLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gJC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKCB0aGlzLCB7XG5cdFx0XHRhZGQ6IGFkZCxcblx0XHRcdHJlbW92ZTogcmVtb3ZlXG5cdFx0fSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fVxufSApO1xuXG59ICkoKTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFRkZFQ1RTICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4oIGZ1bmN0aW9uKCkge1xuXG5pZiAoICQuZXhwciAmJiAkLmV4cHIuZmlsdGVycyAmJiAkLmV4cHIuZmlsdGVycy5hbmltYXRlZCApIHtcblx0JC5leHByLmZpbHRlcnMuYW5pbWF0ZWQgPSAoIGZ1bmN0aW9uKCBvcmlnICkge1xuXHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAhISQoIGVsZW0gKS5kYXRhKCBkYXRhU3BhY2VBbmltYXRlZCApIHx8IG9yaWcoIGVsZW0gKTtcblx0XHR9O1xuXHR9ICkoICQuZXhwci5maWx0ZXJzLmFuaW1hdGVkICk7XG59XG5cbmlmICggJC51aUJhY2tDb21wYXQgIT09IGZhbHNlICkge1xuXHQkLmV4dGVuZCggJC5lZmZlY3RzLCB7XG5cblx0XHQvLyBTYXZlcyBhIHNldCBvZiBwcm9wZXJ0aWVzIGluIGEgZGF0YSBzdG9yYWdlXG5cdFx0c2F2ZTogZnVuY3Rpb24oIGVsZW1lbnQsIHNldCApIHtcblx0XHRcdHZhciBpID0gMCwgbGVuZ3RoID0gc2V0Lmxlbmd0aDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIHNldFsgaSBdICE9PSBudWxsICkge1xuXHRcdFx0XHRcdGVsZW1lbnQuZGF0YSggZGF0YVNwYWNlICsgc2V0WyBpIF0sIGVsZW1lbnRbIDAgXS5zdHlsZVsgc2V0WyBpIF0gXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8vIFJlc3RvcmVzIGEgc2V0IG9mIHByZXZpb3VzbHkgc2F2ZWQgcHJvcGVydGllcyBmcm9tIGEgZGF0YSBzdG9yYWdlXG5cdFx0cmVzdG9yZTogZnVuY3Rpb24oIGVsZW1lbnQsIHNldCApIHtcblx0XHRcdHZhciB2YWwsIGkgPSAwLCBsZW5ndGggPSBzZXQubGVuZ3RoO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdGlmICggc2V0WyBpIF0gIT09IG51bGwgKSB7XG5cdFx0XHRcdFx0dmFsID0gZWxlbWVudC5kYXRhKCBkYXRhU3BhY2UgKyBzZXRbIGkgXSApO1xuXHRcdFx0XHRcdGVsZW1lbnQuY3NzKCBzZXRbIGkgXSwgdmFsICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0c2V0TW9kZTogZnVuY3Rpb24oIGVsLCBtb2RlICkge1xuXHRcdFx0aWYgKCBtb2RlID09PSBcInRvZ2dsZVwiICkge1xuXHRcdFx0XHRtb2RlID0gZWwuaXMoIFwiOmhpZGRlblwiICkgPyBcInNob3dcIiA6IFwiaGlkZVwiO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1vZGU7XG5cdFx0fSxcblxuXHRcdC8vIFdyYXBzIHRoZSBlbGVtZW50IGFyb3VuZCBhIHdyYXBwZXIgdGhhdCBjb3BpZXMgcG9zaXRpb24gcHJvcGVydGllc1xuXHRcdGNyZWF0ZVdyYXBwZXI6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xuXG5cdFx0XHQvLyBJZiB0aGUgZWxlbWVudCBpcyBhbHJlYWR5IHdyYXBwZWQsIHJldHVybiBpdFxuXHRcdFx0aWYgKCBlbGVtZW50LnBhcmVudCgpLmlzKCBcIi51aS1lZmZlY3RzLXdyYXBwZXJcIiApICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbWVudC5wYXJlbnQoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV3JhcCB0aGUgZWxlbWVudFxuXHRcdFx0dmFyIHByb3BzID0ge1xuXHRcdFx0XHRcdHdpZHRoOiBlbGVtZW50Lm91dGVyV2lkdGgoIHRydWUgKSxcblx0XHRcdFx0XHRoZWlnaHQ6IGVsZW1lbnQub3V0ZXJIZWlnaHQoIHRydWUgKSxcblx0XHRcdFx0XHRcImZsb2F0XCI6IGVsZW1lbnQuY3NzKCBcImZsb2F0XCIgKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR3cmFwcGVyID0gJCggXCI8ZGl2PjwvZGl2PlwiIClcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktZWZmZWN0cy13cmFwcGVyXCIgKVxuXHRcdFx0XHRcdC5jc3MoIHtcblx0XHRcdFx0XHRcdGZvbnRTaXplOiBcIjEwMCVcIixcblx0XHRcdFx0XHRcdGJhY2tncm91bmQ6IFwidHJhbnNwYXJlbnRcIixcblx0XHRcdFx0XHRcdGJvcmRlcjogXCJub25lXCIsXG5cdFx0XHRcdFx0XHRtYXJnaW46IDAsXG5cdFx0XHRcdFx0XHRwYWRkaW5nOiAwXG5cdFx0XHRcdFx0fSApLFxuXG5cdFx0XHRcdC8vIFN0b3JlIHRoZSBzaXplIGluIGNhc2Ugd2lkdGgvaGVpZ2h0IGFyZSBkZWZpbmVkIGluICUgLSBGaXhlcyAjNTI0NVxuXHRcdFx0XHRzaXplID0ge1xuXHRcdFx0XHRcdHdpZHRoOiBlbGVtZW50LndpZHRoKCksXG5cdFx0XHRcdFx0aGVpZ2h0OiBlbGVtZW50LmhlaWdodCgpXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFjdGl2ZSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3hcblx0XHRcdC8vIEZpcmVmb3ggaW5jb3JyZWN0bHkgZXhwb3NlcyBhbm9ueW1vdXMgY29udGVudFxuXHRcdFx0Ly8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NTYxNjY0XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhY3RpdmUuaWQ7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0YWN0aXZlID0gZG9jdW1lbnQuYm9keTtcblx0XHRcdH1cblxuXHRcdFx0ZWxlbWVudC53cmFwKCB3cmFwcGVyICk7XG5cblx0XHRcdC8vIEZpeGVzICM3NTk1IC0gRWxlbWVudHMgbG9zZSBmb2N1cyB3aGVuIHdyYXBwZWQuXG5cdFx0XHRpZiAoIGVsZW1lbnRbIDAgXSA9PT0gYWN0aXZlIHx8ICQuY29udGFpbnMoIGVsZW1lbnRbIDAgXSwgYWN0aXZlICkgKSB7XG5cdFx0XHRcdCQoIGFjdGl2ZSApLnRyaWdnZXIoIFwiZm9jdXNcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBIb3RmaXggZm9yIGpRdWVyeSAxLjQgc2luY2Ugc29tZSBjaGFuZ2UgaW4gd3JhcCgpIHNlZW1zIHRvIGFjdHVhbGx5XG5cdFx0XHQvLyBsb3NlIHRoZSByZWZlcmVuY2UgdG8gdGhlIHdyYXBwZWQgZWxlbWVudFxuXHRcdFx0d3JhcHBlciA9IGVsZW1lbnQucGFyZW50KCk7XG5cblx0XHRcdC8vIFRyYW5zZmVyIHBvc2l0aW9uaW5nIHByb3BlcnRpZXMgdG8gdGhlIHdyYXBwZXJcblx0XHRcdGlmICggZWxlbWVudC5jc3MoIFwicG9zaXRpb25cIiApID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0XHR3cmFwcGVyLmNzcyggeyBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiIH0gKTtcblx0XHRcdFx0ZWxlbWVudC5jc3MoIHsgcG9zaXRpb246IFwicmVsYXRpdmVcIiB9ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkLmV4dGVuZCggcHJvcHMsIHtcblx0XHRcdFx0XHRwb3NpdGlvbjogZWxlbWVudC5jc3MoIFwicG9zaXRpb25cIiApLFxuXHRcdFx0XHRcdHpJbmRleDogZWxlbWVudC5jc3MoIFwiei1pbmRleFwiIClcblx0XHRcdFx0fSApO1xuXHRcdFx0XHQkLmVhY2goIFsgXCJ0b3BcIiwgXCJsZWZ0XCIsIFwiYm90dG9tXCIsIFwicmlnaHRcIiBdLCBmdW5jdGlvbiggaSwgcG9zICkge1xuXHRcdFx0XHRcdHByb3BzWyBwb3MgXSA9IGVsZW1lbnQuY3NzKCBwb3MgKTtcblx0XHRcdFx0XHRpZiAoIGlzTmFOKCBwYXJzZUludCggcHJvcHNbIHBvcyBdLCAxMCApICkgKSB7XG5cdFx0XHRcdFx0XHRwcm9wc1sgcG9zIF0gPSBcImF1dG9cIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblx0XHRcdFx0ZWxlbWVudC5jc3MoIHtcblx0XHRcdFx0XHRwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuXHRcdFx0XHRcdHRvcDogMCxcblx0XHRcdFx0XHRsZWZ0OiAwLFxuXHRcdFx0XHRcdHJpZ2h0OiBcImF1dG9cIixcblx0XHRcdFx0XHRib3R0b206IFwiYXV0b1wiXG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XHRcdGVsZW1lbnQuY3NzKCBzaXplICk7XG5cblx0XHRcdHJldHVybiB3cmFwcGVyLmNzcyggcHJvcHMgKS5zaG93KCk7XG5cdFx0fSxcblxuXHRcdHJlbW92ZVdyYXBwZXI6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xuXHRcdFx0dmFyIGFjdGl2ZSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cblx0XHRcdGlmICggZWxlbWVudC5wYXJlbnQoKS5pcyggXCIudWktZWZmZWN0cy13cmFwcGVyXCIgKSApIHtcblx0XHRcdFx0ZWxlbWVudC5wYXJlbnQoKS5yZXBsYWNlV2l0aCggZWxlbWVudCApO1xuXG5cdFx0XHRcdC8vIEZpeGVzICM3NTk1IC0gRWxlbWVudHMgbG9zZSBmb2N1cyB3aGVuIHdyYXBwZWQuXG5cdFx0XHRcdGlmICggZWxlbWVudFsgMCBdID09PSBhY3RpdmUgfHwgJC5jb250YWlucyggZWxlbWVudFsgMCBdLCBhY3RpdmUgKSApIHtcblx0XHRcdFx0XHQkKCBhY3RpdmUgKS50cmlnZ2VyKCBcImZvY3VzXCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZWxlbWVudDtcblx0XHR9XG5cdH0gKTtcbn1cblxuJC5leHRlbmQoICQuZWZmZWN0cywge1xuXHR2ZXJzaW9uOiBcIjEuMTIuMVwiLFxuXG5cdGRlZmluZTogZnVuY3Rpb24oIG5hbWUsIG1vZGUsIGVmZmVjdCApIHtcblx0XHRpZiAoICFlZmZlY3QgKSB7XG5cdFx0XHRlZmZlY3QgPSBtb2RlO1xuXHRcdFx0bW9kZSA9IFwiZWZmZWN0XCI7XG5cdFx0fVxuXG5cdFx0JC5lZmZlY3RzLmVmZmVjdFsgbmFtZSBdID0gZWZmZWN0O1xuXHRcdCQuZWZmZWN0cy5lZmZlY3RbIG5hbWUgXS5tb2RlID0gbW9kZTtcblxuXHRcdHJldHVybiBlZmZlY3Q7XG5cdH0sXG5cblx0c2NhbGVkRGltZW5zaW9uczogZnVuY3Rpb24oIGVsZW1lbnQsIHBlcmNlbnQsIGRpcmVjdGlvbiApIHtcblx0XHRpZiAoIHBlcmNlbnQgPT09IDAgKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRoZWlnaHQ6IDAsXG5cdFx0XHRcdHdpZHRoOiAwLFxuXHRcdFx0XHRvdXRlckhlaWdodDogMCxcblx0XHRcdFx0b3V0ZXJXaWR0aDogMFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHR2YXIgeCA9IGRpcmVjdGlvbiAhPT0gXCJob3Jpem9udGFsXCIgPyAoICggcGVyY2VudCB8fCAxMDAgKSAvIDEwMCApIDogMSxcblx0XHRcdHkgPSBkaXJlY3Rpb24gIT09IFwidmVydGljYWxcIiA/ICggKCBwZXJjZW50IHx8IDEwMCApIC8gMTAwICkgOiAxO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGhlaWdodDogZWxlbWVudC5oZWlnaHQoKSAqIHksXG5cdFx0XHR3aWR0aDogZWxlbWVudC53aWR0aCgpICogeCxcblx0XHRcdG91dGVySGVpZ2h0OiBlbGVtZW50Lm91dGVySGVpZ2h0KCkgKiB5LFxuXHRcdFx0b3V0ZXJXaWR0aDogZWxlbWVudC5vdXRlcldpZHRoKCkgKiB4XG5cdFx0fTtcblxuXHR9LFxuXG5cdGNsaXBUb0JveDogZnVuY3Rpb24oIGFuaW1hdGlvbiApIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0d2lkdGg6IGFuaW1hdGlvbi5jbGlwLnJpZ2h0IC0gYW5pbWF0aW9uLmNsaXAubGVmdCxcblx0XHRcdGhlaWdodDogYW5pbWF0aW9uLmNsaXAuYm90dG9tIC0gYW5pbWF0aW9uLmNsaXAudG9wLFxuXHRcdFx0bGVmdDogYW5pbWF0aW9uLmNsaXAubGVmdCxcblx0XHRcdHRvcDogYW5pbWF0aW9uLmNsaXAudG9wXG5cdFx0fTtcblx0fSxcblxuXHQvLyBJbmplY3RzIHJlY2VudGx5IHF1ZXVlZCBmdW5jdGlvbnMgdG8gYmUgZmlyc3QgaW4gbGluZSAoYWZ0ZXIgXCJpbnByb2dyZXNzXCIpXG5cdHVuc2hpZnQ6IGZ1bmN0aW9uKCBlbGVtZW50LCBxdWV1ZUxlbmd0aCwgY291bnQgKSB7XG5cdFx0dmFyIHF1ZXVlID0gZWxlbWVudC5xdWV1ZSgpO1xuXG5cdFx0aWYgKCBxdWV1ZUxlbmd0aCA+IDEgKSB7XG5cdFx0XHRxdWV1ZS5zcGxpY2UuYXBwbHkoIHF1ZXVlLFxuXHRcdFx0XHRbIDEsIDAgXS5jb25jYXQoIHF1ZXVlLnNwbGljZSggcXVldWVMZW5ndGgsIGNvdW50ICkgKSApO1xuXHRcdH1cblx0XHRlbGVtZW50LmRlcXVldWUoKTtcblx0fSxcblxuXHRzYXZlU3R5bGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xuXHRcdGVsZW1lbnQuZGF0YSggZGF0YVNwYWNlU3R5bGUsIGVsZW1lbnRbIDAgXS5zdHlsZS5jc3NUZXh0ICk7XG5cdH0sXG5cblx0cmVzdG9yZVN0eWxlOiBmdW5jdGlvbiggZWxlbWVudCApIHtcblx0XHRlbGVtZW50WyAwIF0uc3R5bGUuY3NzVGV4dCA9IGVsZW1lbnQuZGF0YSggZGF0YVNwYWNlU3R5bGUgKSB8fCBcIlwiO1xuXHRcdGVsZW1lbnQucmVtb3ZlRGF0YSggZGF0YVNwYWNlU3R5bGUgKTtcblx0fSxcblxuXHRtb2RlOiBmdW5jdGlvbiggZWxlbWVudCwgbW9kZSApIHtcblx0XHR2YXIgaGlkZGVuID0gZWxlbWVudC5pcyggXCI6aGlkZGVuXCIgKTtcblxuXHRcdGlmICggbW9kZSA9PT0gXCJ0b2dnbGVcIiApIHtcblx0XHRcdG1vZGUgPSBoaWRkZW4gPyBcInNob3dcIiA6IFwiaGlkZVwiO1xuXHRcdH1cblx0XHRpZiAoIGhpZGRlbiA/IG1vZGUgPT09IFwiaGlkZVwiIDogbW9kZSA9PT0gXCJzaG93XCIgKSB7XG5cdFx0XHRtb2RlID0gXCJub25lXCI7XG5cdFx0fVxuXHRcdHJldHVybiBtb2RlO1xuXHR9LFxuXG5cdC8vIFRyYW5zbGF0ZXMgYSBbdG9wLGxlZnRdIGFycmF5IGludG8gYSBiYXNlbGluZSB2YWx1ZVxuXHRnZXRCYXNlbGluZTogZnVuY3Rpb24oIG9yaWdpbiwgb3JpZ2luYWwgKSB7XG5cdFx0dmFyIHksIHg7XG5cblx0XHRzd2l0Y2ggKCBvcmlnaW5bIDAgXSApIHtcblx0XHRjYXNlIFwidG9wXCI6XG5cdFx0XHR5ID0gMDtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJtaWRkbGVcIjpcblx0XHRcdHkgPSAwLjU7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiYm90dG9tXCI6XG5cdFx0XHR5ID0gMTtcblx0XHRcdGJyZWFrO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHR5ID0gb3JpZ2luWyAwIF0gLyBvcmlnaW5hbC5oZWlnaHQ7XG5cdFx0fVxuXG5cdFx0c3dpdGNoICggb3JpZ2luWyAxIF0gKSB7XG5cdFx0Y2FzZSBcImxlZnRcIjpcblx0XHRcdHggPSAwO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcImNlbnRlclwiOlxuXHRcdFx0eCA9IDAuNTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJyaWdodFwiOlxuXHRcdFx0eCA9IDE7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0eCA9IG9yaWdpblsgMSBdIC8gb3JpZ2luYWwud2lkdGg7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHg6IHgsXG5cdFx0XHR5OiB5XG5cdFx0fTtcblx0fSxcblxuXHQvLyBDcmVhdGVzIGEgcGxhY2Vob2xkZXIgZWxlbWVudCBzbyB0aGF0IHRoZSBvcmlnaW5hbCBlbGVtZW50IGNhbiBiZSBtYWRlIGFic29sdXRlXG5cdGNyZWF0ZVBsYWNlaG9sZGVyOiBmdW5jdGlvbiggZWxlbWVudCApIHtcblx0XHR2YXIgcGxhY2Vob2xkZXIsXG5cdFx0XHRjc3NQb3NpdGlvbiA9IGVsZW1lbnQuY3NzKCBcInBvc2l0aW9uXCIgKSxcblx0XHRcdHBvc2l0aW9uID0gZWxlbWVudC5wb3NpdGlvbigpO1xuXG5cdFx0Ly8gTG9jayBpbiBtYXJnaW5zIGZpcnN0IHRvIGFjY291bnQgZm9yIGZvcm0gZWxlbWVudHMsIHdoaWNoXG5cdFx0Ly8gd2lsbCBjaGFuZ2UgbWFyZ2luIGlmIHlvdSBleHBsaWNpdGx5IHNldCBoZWlnaHRcblx0XHQvLyBzZWU6IGh0dHA6Ly9qc2ZpZGRsZS5uZXQvSlpTTXQvMy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEwNzM4MFxuXHRcdC8vIFN1cHBvcnQ6IFNhZmFyaVxuXHRcdGVsZW1lbnQuY3NzKCB7XG5cdFx0XHRtYXJnaW5Ub3A6IGVsZW1lbnQuY3NzKCBcIm1hcmdpblRvcFwiICksXG5cdFx0XHRtYXJnaW5Cb3R0b206IGVsZW1lbnQuY3NzKCBcIm1hcmdpbkJvdHRvbVwiICksXG5cdFx0XHRtYXJnaW5MZWZ0OiBlbGVtZW50LmNzcyggXCJtYXJnaW5MZWZ0XCIgKSxcblx0XHRcdG1hcmdpblJpZ2h0OiBlbGVtZW50LmNzcyggXCJtYXJnaW5SaWdodFwiIClcblx0XHR9IClcblx0XHQub3V0ZXJXaWR0aCggZWxlbWVudC5vdXRlcldpZHRoKCkgKVxuXHRcdC5vdXRlckhlaWdodCggZWxlbWVudC5vdXRlckhlaWdodCgpICk7XG5cblx0XHRpZiAoIC9eKHN0YXRpY3xyZWxhdGl2ZSkvLnRlc3QoIGNzc1Bvc2l0aW9uICkgKSB7XG5cdFx0XHRjc3NQb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblxuXHRcdFx0cGxhY2Vob2xkZXIgPSAkKCBcIjxcIiArIGVsZW1lbnRbIDAgXS5ub2RlTmFtZSArIFwiPlwiICkuaW5zZXJ0QWZ0ZXIoIGVsZW1lbnQgKS5jc3MoIHtcblxuXHRcdFx0XHQvLyBDb252ZXJ0IGlubGluZSB0byBpbmxpbmUgYmxvY2sgdG8gYWNjb3VudCBmb3IgaW5saW5lIGVsZW1lbnRzXG5cdFx0XHRcdC8vIHRoYXQgdHVybiB0byBpbmxpbmUgYmxvY2sgYmFzZWQgb24gY29udGVudCAobGlrZSBpbWcpXG5cdFx0XHRcdGRpc3BsYXk6IC9eKGlubGluZXxydWJ5KS8udGVzdCggZWxlbWVudC5jc3MoIFwiZGlzcGxheVwiICkgKSA/XG5cdFx0XHRcdFx0XCJpbmxpbmUtYmxvY2tcIiA6XG5cdFx0XHRcdFx0XCJibG9ja1wiLFxuXHRcdFx0XHR2aXNpYmlsaXR5OiBcImhpZGRlblwiLFxuXG5cdFx0XHRcdC8vIE1hcmdpbnMgbmVlZCB0byBiZSBzZXQgdG8gYWNjb3VudCBmb3IgbWFyZ2luIGNvbGxhcHNlXG5cdFx0XHRcdG1hcmdpblRvcDogZWxlbWVudC5jc3MoIFwibWFyZ2luVG9wXCIgKSxcblx0XHRcdFx0bWFyZ2luQm90dG9tOiBlbGVtZW50LmNzcyggXCJtYXJnaW5Cb3R0b21cIiApLFxuXHRcdFx0XHRtYXJnaW5MZWZ0OiBlbGVtZW50LmNzcyggXCJtYXJnaW5MZWZ0XCIgKSxcblx0XHRcdFx0bWFyZ2luUmlnaHQ6IGVsZW1lbnQuY3NzKCBcIm1hcmdpblJpZ2h0XCIgKSxcblx0XHRcdFx0XCJmbG9hdFwiOiBlbGVtZW50LmNzcyggXCJmbG9hdFwiIClcblx0XHRcdH0gKVxuXHRcdFx0Lm91dGVyV2lkdGgoIGVsZW1lbnQub3V0ZXJXaWR0aCgpIClcblx0XHRcdC5vdXRlckhlaWdodCggZWxlbWVudC5vdXRlckhlaWdodCgpIClcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1lZmZlY3RzLXBsYWNlaG9sZGVyXCIgKTtcblxuXHRcdFx0ZWxlbWVudC5kYXRhKCBkYXRhU3BhY2UgKyBcInBsYWNlaG9sZGVyXCIsIHBsYWNlaG9sZGVyICk7XG5cdFx0fVxuXG5cdFx0ZWxlbWVudC5jc3MoIHtcblx0XHRcdHBvc2l0aW9uOiBjc3NQb3NpdGlvbixcblx0XHRcdGxlZnQ6IHBvc2l0aW9uLmxlZnQsXG5cdFx0XHR0b3A6IHBvc2l0aW9uLnRvcFxuXHRcdH0gKTtcblxuXHRcdHJldHVybiBwbGFjZWhvbGRlcjtcblx0fSxcblxuXHRyZW1vdmVQbGFjZWhvbGRlcjogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG5cdFx0dmFyIGRhdGFLZXkgPSBkYXRhU3BhY2UgKyBcInBsYWNlaG9sZGVyXCIsXG5cdFx0XHRcdHBsYWNlaG9sZGVyID0gZWxlbWVudC5kYXRhKCBkYXRhS2V5ICk7XG5cblx0XHRpZiAoIHBsYWNlaG9sZGVyICkge1xuXHRcdFx0cGxhY2Vob2xkZXIucmVtb3ZlKCk7XG5cdFx0XHRlbGVtZW50LnJlbW92ZURhdGEoIGRhdGFLZXkgKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gUmVtb3ZlcyBhIHBsYWNlaG9sZGVyIGlmIGl0IGV4aXN0cyBhbmQgcmVzdG9yZXNcblx0Ly8gcHJvcGVydGllcyB0aGF0IHdlcmUgbW9kaWZpZWQgZHVyaW5nIHBsYWNlaG9sZGVyIGNyZWF0aW9uXG5cdGNsZWFuVXA6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xuXHRcdCQuZWZmZWN0cy5yZXN0b3JlU3R5bGUoIGVsZW1lbnQgKTtcblx0XHQkLmVmZmVjdHMucmVtb3ZlUGxhY2Vob2xkZXIoIGVsZW1lbnQgKTtcblx0fSxcblxuXHRzZXRUcmFuc2l0aW9uOiBmdW5jdGlvbiggZWxlbWVudCwgbGlzdCwgZmFjdG9yLCB2YWx1ZSApIHtcblx0XHR2YWx1ZSA9IHZhbHVlIHx8IHt9O1xuXHRcdCQuZWFjaCggbGlzdCwgZnVuY3Rpb24oIGksIHggKSB7XG5cdFx0XHR2YXIgdW5pdCA9IGVsZW1lbnQuY3NzVW5pdCggeCApO1xuXHRcdFx0aWYgKCB1bml0WyAwIF0gPiAwICkge1xuXHRcdFx0XHR2YWx1ZVsgeCBdID0gdW5pdFsgMCBdICogZmFjdG9yICsgdW5pdFsgMSBdO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cbn0gKTtcblxuLy8gUmV0dXJuIGFuIGVmZmVjdCBvcHRpb25zIG9iamVjdCBmb3IgdGhlIGdpdmVuIHBhcmFtZXRlcnM6XG5mdW5jdGlvbiBfbm9ybWFsaXplQXJndW1lbnRzKCBlZmZlY3QsIG9wdGlvbnMsIHNwZWVkLCBjYWxsYmFjayApIHtcblxuXHQvLyBBbGxvdyBwYXNzaW5nIGFsbCBvcHRpb25zIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXJcblx0aWYgKCAkLmlzUGxhaW5PYmplY3QoIGVmZmVjdCApICkge1xuXHRcdG9wdGlvbnMgPSBlZmZlY3Q7XG5cdFx0ZWZmZWN0ID0gZWZmZWN0LmVmZmVjdDtcblx0fVxuXG5cdC8vIENvbnZlcnQgdG8gYW4gb2JqZWN0XG5cdGVmZmVjdCA9IHsgZWZmZWN0OiBlZmZlY3QgfTtcblxuXHQvLyBDYXRjaCAoZWZmZWN0LCBudWxsLCAuLi4pXG5cdGlmICggb3B0aW9ucyA9PSBudWxsICkge1xuXHRcdG9wdGlvbnMgPSB7fTtcblx0fVxuXG5cdC8vIENhdGNoIChlZmZlY3QsIGNhbGxiYWNrKVxuXHRpZiAoICQuaXNGdW5jdGlvbiggb3B0aW9ucyApICkge1xuXHRcdGNhbGxiYWNrID0gb3B0aW9ucztcblx0XHRzcGVlZCA9IG51bGw7XG5cdFx0b3B0aW9ucyA9IHt9O1xuXHR9XG5cblx0Ly8gQ2F0Y2ggKGVmZmVjdCwgc3BlZWQsID8pXG5cdGlmICggdHlwZW9mIG9wdGlvbnMgPT09IFwibnVtYmVyXCIgfHwgJC5meC5zcGVlZHNbIG9wdGlvbnMgXSApIHtcblx0XHRjYWxsYmFjayA9IHNwZWVkO1xuXHRcdHNwZWVkID0gb3B0aW9ucztcblx0XHRvcHRpb25zID0ge307XG5cdH1cblxuXHQvLyBDYXRjaCAoZWZmZWN0LCBvcHRpb25zLCBjYWxsYmFjaylcblx0aWYgKCAkLmlzRnVuY3Rpb24oIHNwZWVkICkgKSB7XG5cdFx0Y2FsbGJhY2sgPSBzcGVlZDtcblx0XHRzcGVlZCA9IG51bGw7XG5cdH1cblxuXHQvLyBBZGQgb3B0aW9ucyB0byBlZmZlY3Rcblx0aWYgKCBvcHRpb25zICkge1xuXHRcdCQuZXh0ZW5kKCBlZmZlY3QsIG9wdGlvbnMgKTtcblx0fVxuXG5cdHNwZWVkID0gc3BlZWQgfHwgb3B0aW9ucy5kdXJhdGlvbjtcblx0ZWZmZWN0LmR1cmF0aW9uID0gJC5meC5vZmYgPyAwIDpcblx0XHR0eXBlb2Ygc3BlZWQgPT09IFwibnVtYmVyXCIgPyBzcGVlZCA6XG5cdFx0c3BlZWQgaW4gJC5meC5zcGVlZHMgPyAkLmZ4LnNwZWVkc1sgc3BlZWQgXSA6XG5cdFx0JC5meC5zcGVlZHMuX2RlZmF1bHQ7XG5cblx0ZWZmZWN0LmNvbXBsZXRlID0gY2FsbGJhY2sgfHwgb3B0aW9ucy5jb21wbGV0ZTtcblxuXHRyZXR1cm4gZWZmZWN0O1xufVxuXG5mdW5jdGlvbiBzdGFuZGFyZEFuaW1hdGlvbk9wdGlvbiggb3B0aW9uICkge1xuXG5cdC8vIFZhbGlkIHN0YW5kYXJkIHNwZWVkcyAobm90aGluZywgbnVtYmVyLCBuYW1lZCBzcGVlZClcblx0aWYgKCAhb3B0aW9uIHx8IHR5cGVvZiBvcHRpb24gPT09IFwibnVtYmVyXCIgfHwgJC5meC5zcGVlZHNbIG9wdGlvbiBdICkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gSW52YWxpZCBzdHJpbmdzIC0gdHJlYXQgYXMgXCJub3JtYWxcIiBzcGVlZFxuXHRpZiAoIHR5cGVvZiBvcHRpb24gPT09IFwic3RyaW5nXCIgJiYgISQuZWZmZWN0cy5lZmZlY3RbIG9wdGlvbiBdICkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gQ29tcGxldGUgY2FsbGJhY2tcblx0aWYgKCAkLmlzRnVuY3Rpb24oIG9wdGlvbiApICkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gT3B0aW9ucyBoYXNoIChidXQgbm90IG5hbWluZyBhbiBlZmZlY3QpXG5cdGlmICggdHlwZW9mIG9wdGlvbiA9PT0gXCJvYmplY3RcIiAmJiAhb3B0aW9uLmVmZmVjdCApIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIERpZG4ndCBtYXRjaCBhbnkgc3RhbmRhcmQgQVBJXG5cdHJldHVybiBmYWxzZTtcbn1cblxuJC5mbi5leHRlbmQoIHtcblx0ZWZmZWN0OiBmdW5jdGlvbiggLyogZWZmZWN0LCBvcHRpb25zLCBzcGVlZCwgY2FsbGJhY2sgKi8gKSB7XG5cdFx0dmFyIGFyZ3MgPSBfbm9ybWFsaXplQXJndW1lbnRzLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSxcblx0XHRcdGVmZmVjdE1ldGhvZCA9ICQuZWZmZWN0cy5lZmZlY3RbIGFyZ3MuZWZmZWN0IF0sXG5cdFx0XHRkZWZhdWx0TW9kZSA9IGVmZmVjdE1ldGhvZC5tb2RlLFxuXHRcdFx0cXVldWUgPSBhcmdzLnF1ZXVlLFxuXHRcdFx0cXVldWVOYW1lID0gcXVldWUgfHwgXCJmeFwiLFxuXHRcdFx0Y29tcGxldGUgPSBhcmdzLmNvbXBsZXRlLFxuXHRcdFx0bW9kZSA9IGFyZ3MubW9kZSxcblx0XHRcdG1vZGVzID0gW10sXG5cdFx0XHRwcmVmaWx0ZXIgPSBmdW5jdGlvbiggbmV4dCApIHtcblx0XHRcdFx0dmFyIGVsID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdG5vcm1hbGl6ZWRNb2RlID0gJC5lZmZlY3RzLm1vZGUoIGVsLCBtb2RlICkgfHwgZGVmYXVsdE1vZGU7XG5cblx0XHRcdFx0Ly8gU2VudGluZWwgZm9yIGR1Y2stcHVuY2hpbmcgdGhlIDphbmltYXRlZCBwc3VlZG8tc2VsZWN0b3Jcblx0XHRcdFx0ZWwuZGF0YSggZGF0YVNwYWNlQW5pbWF0ZWQsIHRydWUgKTtcblxuXHRcdFx0XHQvLyBTYXZlIGVmZmVjdCBtb2RlIGZvciBsYXRlciB1c2UsXG5cdFx0XHRcdC8vIHdlIGNhbid0IGp1c3QgY2FsbCAkLmVmZmVjdHMubW9kZSBhZ2FpbiBsYXRlcixcblx0XHRcdFx0Ly8gYXMgdGhlIC5zaG93KCkgYmVsb3cgZGVzdHJveXMgdGhlIGluaXRpYWwgc3RhdGVcblx0XHRcdFx0bW9kZXMucHVzaCggbm9ybWFsaXplZE1vZGUgKTtcblxuXHRcdFx0XHQvLyBTZWUgJC51aUJhY2tDb21wYXQgaW5zaWRlIG9mIHJ1bigpIGZvciByZW1vdmFsIG9mIGRlZmF1bHRNb2RlIGluIDEuMTNcblx0XHRcdFx0aWYgKCBkZWZhdWx0TW9kZSAmJiAoIG5vcm1hbGl6ZWRNb2RlID09PSBcInNob3dcIiB8fFxuXHRcdFx0XHRcdFx0KCBub3JtYWxpemVkTW9kZSA9PT0gZGVmYXVsdE1vZGUgJiYgbm9ybWFsaXplZE1vZGUgPT09IFwiaGlkZVwiICkgKSApIHtcblx0XHRcdFx0XHRlbC5zaG93KCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICFkZWZhdWx0TW9kZSB8fCBub3JtYWxpemVkTW9kZSAhPT0gXCJub25lXCIgKSB7XG5cdFx0XHRcdFx0JC5lZmZlY3RzLnNhdmVTdHlsZSggZWwgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggJC5pc0Z1bmN0aW9uKCBuZXh0ICkgKSB7XG5cdFx0XHRcdFx0bmV4dCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0aWYgKCAkLmZ4Lm9mZiB8fCAhZWZmZWN0TWV0aG9kICkge1xuXG5cdFx0XHQvLyBEZWxlZ2F0ZSB0byB0aGUgb3JpZ2luYWwgbWV0aG9kIChlLmcuLCAuc2hvdygpKSBpZiBwb3NzaWJsZVxuXHRcdFx0aWYgKCBtb2RlICkge1xuXHRcdFx0XHRyZXR1cm4gdGhpc1sgbW9kZSBdKCBhcmdzLmR1cmF0aW9uLCBjb21wbGV0ZSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCBjb21wbGV0ZSApIHtcblx0XHRcdFx0XHRcdGNvbXBsZXRlLmNhbGwoIHRoaXMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBydW4oIG5leHQgKSB7XG5cdFx0XHR2YXIgZWxlbSA9ICQoIHRoaXMgKTtcblxuXHRcdFx0ZnVuY3Rpb24gY2xlYW51cCgpIHtcblx0XHRcdFx0ZWxlbS5yZW1vdmVEYXRhKCBkYXRhU3BhY2VBbmltYXRlZCApO1xuXG5cdFx0XHRcdCQuZWZmZWN0cy5jbGVhblVwKCBlbGVtICk7XG5cblx0XHRcdFx0aWYgKCBhcmdzLm1vZGUgPT09IFwiaGlkZVwiICkge1xuXHRcdFx0XHRcdGVsZW0uaGlkZSgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZG9uZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBkb25lKCkge1xuXHRcdFx0XHRpZiAoICQuaXNGdW5jdGlvbiggY29tcGxldGUgKSApIHtcblx0XHRcdFx0XHRjb21wbGV0ZS5jYWxsKCBlbGVtWyAwIF0gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggJC5pc0Z1bmN0aW9uKCBuZXh0ICkgKSB7XG5cdFx0XHRcdFx0bmV4dCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE92ZXJyaWRlIG1vZGUgb3B0aW9uIG9uIGEgcGVyIGVsZW1lbnQgYmFzaXMsXG5cdFx0XHQvLyBhcyB0b2dnbGUgY2FuIGJlIGVpdGhlciBzaG93IG9yIGhpZGUgZGVwZW5kaW5nIG9uIGVsZW1lbnQgc3RhdGVcblx0XHRcdGFyZ3MubW9kZSA9IG1vZGVzLnNoaWZ0KCk7XG5cblx0XHRcdGlmICggJC51aUJhY2tDb21wYXQgIT09IGZhbHNlICYmICFkZWZhdWx0TW9kZSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLmlzKCBcIjpoaWRkZW5cIiApID8gbW9kZSA9PT0gXCJoaWRlXCIgOiBtb2RlID09PSBcInNob3dcIiApIHtcblxuXHRcdFx0XHRcdC8vIENhbGwgdGhlIGNvcmUgbWV0aG9kIHRvIHRyYWNrIFwib2xkZGlzcGxheVwiIHByb3Blcmx5XG5cdFx0XHRcdFx0ZWxlbVsgbW9kZSBdKCk7XG5cdFx0XHRcdFx0ZG9uZSgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVmZmVjdE1ldGhvZC5jYWxsKCBlbGVtWyAwIF0sIGFyZ3MsIGRvbmUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKCBhcmdzLm1vZGUgPT09IFwibm9uZVwiICkge1xuXG5cdFx0XHRcdFx0Ly8gQ2FsbCB0aGUgY29yZSBtZXRob2QgdG8gdHJhY2sgXCJvbGRkaXNwbGF5XCIgcHJvcGVybHlcblx0XHRcdFx0XHRlbGVtWyBtb2RlIF0oKTtcblx0XHRcdFx0XHRkb25lKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZWZmZWN0TWV0aG9kLmNhbGwoIGVsZW1bIDAgXSwgYXJncywgY2xlYW51cCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUnVuIHByZWZpbHRlciBvbiBhbGwgZWxlbWVudHMgZmlyc3QgdG8gZW5zdXJlIHRoYXRcblx0XHQvLyBhbnkgc2hvd2luZyBvciBoaWRpbmcgaGFwcGVucyBiZWZvcmUgcGxhY2Vob2xkZXIgY3JlYXRpb24sXG5cdFx0Ly8gd2hpY2ggZW5zdXJlcyB0aGF0IGFueSBsYXlvdXQgY2hhbmdlcyBhcmUgY29ycmVjdGx5IGNhcHR1cmVkLlxuXHRcdHJldHVybiBxdWV1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0dGhpcy5lYWNoKCBwcmVmaWx0ZXIgKS5lYWNoKCBydW4gKSA6XG5cdFx0XHR0aGlzLnF1ZXVlKCBxdWV1ZU5hbWUsIHByZWZpbHRlciApLnF1ZXVlKCBxdWV1ZU5hbWUsIHJ1biApO1xuXHR9LFxuXG5cdHNob3c6ICggZnVuY3Rpb24oIG9yaWcgKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBvcHRpb24gKSB7XG5cdFx0XHRpZiAoIHN0YW5kYXJkQW5pbWF0aW9uT3B0aW9uKCBvcHRpb24gKSApIHtcblx0XHRcdFx0cmV0dXJuIG9yaWcuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIGFyZ3MgPSBfbm9ybWFsaXplQXJndW1lbnRzLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0YXJncy5tb2RlID0gXCJzaG93XCI7XG5cdFx0XHRcdHJldHVybiB0aGlzLmVmZmVjdC5jYWxsKCB0aGlzLCBhcmdzICk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fSApKCAkLmZuLnNob3cgKSxcblxuXHRoaWRlOiAoIGZ1bmN0aW9uKCBvcmlnICkge1xuXHRcdHJldHVybiBmdW5jdGlvbiggb3B0aW9uICkge1xuXHRcdFx0aWYgKCBzdGFuZGFyZEFuaW1hdGlvbk9wdGlvbiggb3B0aW9uICkgKSB7XG5cdFx0XHRcdHJldHVybiBvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBhcmdzID0gX25vcm1hbGl6ZUFyZ3VtZW50cy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdGFyZ3MubW9kZSA9IFwiaGlkZVwiO1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5lZmZlY3QuY2FsbCggdGhpcywgYXJncyApO1xuXHRcdFx0fVxuXHRcdH07XG5cdH0gKSggJC5mbi5oaWRlICksXG5cblx0dG9nZ2xlOiAoIGZ1bmN0aW9uKCBvcmlnICkge1xuXHRcdHJldHVybiBmdW5jdGlvbiggb3B0aW9uICkge1xuXHRcdFx0aWYgKCBzdGFuZGFyZEFuaW1hdGlvbk9wdGlvbiggb3B0aW9uICkgfHwgdHlwZW9mIG9wdGlvbiA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHRcdHJldHVybiBvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBhcmdzID0gX25vcm1hbGl6ZUFyZ3VtZW50cy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdGFyZ3MubW9kZSA9IFwidG9nZ2xlXCI7XG5cdFx0XHRcdHJldHVybiB0aGlzLmVmZmVjdC5jYWxsKCB0aGlzLCBhcmdzICk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fSApKCAkLmZuLnRvZ2dsZSApLFxuXG5cdGNzc1VuaXQ6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0dmFyIHN0eWxlID0gdGhpcy5jc3MoIGtleSApLFxuXHRcdFx0dmFsID0gW107XG5cblx0XHQkLmVhY2goIFsgXCJlbVwiLCBcInB4XCIsIFwiJVwiLCBcInB0XCIgXSwgZnVuY3Rpb24oIGksIHVuaXQgKSB7XG5cdFx0XHRpZiAoIHN0eWxlLmluZGV4T2YoIHVuaXQgKSA+IDAgKSB7XG5cdFx0XHRcdHZhbCA9IFsgcGFyc2VGbG9hdCggc3R5bGUgKSwgdW5pdCBdO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0XHRyZXR1cm4gdmFsO1xuXHR9LFxuXG5cdGNzc0NsaXA6IGZ1bmN0aW9uKCBjbGlwT2JqICkge1xuXHRcdGlmICggY2xpcE9iaiApIHtcblx0XHRcdHJldHVybiB0aGlzLmNzcyggXCJjbGlwXCIsIFwicmVjdChcIiArIGNsaXBPYmoudG9wICsgXCJweCBcIiArIGNsaXBPYmoucmlnaHQgKyBcInB4IFwiICtcblx0XHRcdFx0Y2xpcE9iai5ib3R0b20gKyBcInB4IFwiICsgY2xpcE9iai5sZWZ0ICsgXCJweClcIiApO1xuXHRcdH1cblx0XHRyZXR1cm4gcGFyc2VDbGlwKCB0aGlzLmNzcyggXCJjbGlwXCIgKSwgdGhpcyApO1xuXHR9LFxuXG5cdHRyYW5zZmVyOiBmdW5jdGlvbiggb3B0aW9ucywgZG9uZSApIHtcblx0XHR2YXIgZWxlbWVudCA9ICQoIHRoaXMgKSxcblx0XHRcdHRhcmdldCA9ICQoIG9wdGlvbnMudG8gKSxcblx0XHRcdHRhcmdldEZpeGVkID0gdGFyZ2V0LmNzcyggXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIixcblx0XHRcdGJvZHkgPSAkKCBcImJvZHlcIiApLFxuXHRcdFx0Zml4VG9wID0gdGFyZ2V0Rml4ZWQgPyBib2R5LnNjcm9sbFRvcCgpIDogMCxcblx0XHRcdGZpeExlZnQgPSB0YXJnZXRGaXhlZCA/IGJvZHkuc2Nyb2xsTGVmdCgpIDogMCxcblx0XHRcdGVuZFBvc2l0aW9uID0gdGFyZ2V0Lm9mZnNldCgpLFxuXHRcdFx0YW5pbWF0aW9uID0ge1xuXHRcdFx0XHR0b3A6IGVuZFBvc2l0aW9uLnRvcCAtIGZpeFRvcCxcblx0XHRcdFx0bGVmdDogZW5kUG9zaXRpb24ubGVmdCAtIGZpeExlZnQsXG5cdFx0XHRcdGhlaWdodDogdGFyZ2V0LmlubmVySGVpZ2h0KCksXG5cdFx0XHRcdHdpZHRoOiB0YXJnZXQuaW5uZXJXaWR0aCgpXG5cdFx0XHR9LFxuXHRcdFx0c3RhcnRQb3NpdGlvbiA9IGVsZW1lbnQub2Zmc2V0KCksXG5cdFx0XHR0cmFuc2ZlciA9ICQoIFwiPGRpdiBjbGFzcz0ndWktZWZmZWN0cy10cmFuc2Zlcic+PC9kaXY+XCIgKVxuXHRcdFx0XHQuYXBwZW5kVG8oIFwiYm9keVwiIClcblx0XHRcdFx0LmFkZENsYXNzKCBvcHRpb25zLmNsYXNzTmFtZSApXG5cdFx0XHRcdC5jc3MoIHtcblx0XHRcdFx0XHR0b3A6IHN0YXJ0UG9zaXRpb24udG9wIC0gZml4VG9wLFxuXHRcdFx0XHRcdGxlZnQ6IHN0YXJ0UG9zaXRpb24ubGVmdCAtIGZpeExlZnQsXG5cdFx0XHRcdFx0aGVpZ2h0OiBlbGVtZW50LmlubmVySGVpZ2h0KCksXG5cdFx0XHRcdFx0d2lkdGg6IGVsZW1lbnQuaW5uZXJXaWR0aCgpLFxuXHRcdFx0XHRcdHBvc2l0aW9uOiB0YXJnZXRGaXhlZCA/IFwiZml4ZWRcIiA6IFwiYWJzb2x1dGVcIlxuXHRcdFx0XHR9IClcblx0XHRcdFx0LmFuaW1hdGUoIGFuaW1hdGlvbiwgb3B0aW9ucy5kdXJhdGlvbiwgb3B0aW9ucy5lYXNpbmcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHRyYW5zZmVyLnJlbW92ZSgpO1xuXHRcdFx0XHRcdGlmICggJC5pc0Z1bmN0aW9uKCBkb25lICkgKSB7XG5cdFx0XHRcdFx0XHRkb25lKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdH1cbn0gKTtcblxuZnVuY3Rpb24gcGFyc2VDbGlwKCBzdHIsIGVsZW1lbnQgKSB7XG5cdFx0dmFyIG91dGVyV2lkdGggPSBlbGVtZW50Lm91dGVyV2lkdGgoKSxcblx0XHRcdG91dGVySGVpZ2h0ID0gZWxlbWVudC5vdXRlckhlaWdodCgpLFxuXHRcdFx0Y2xpcFJlZ2V4ID0gL15yZWN0XFwoKC0/XFxkKlxcLj9cXGQqcHh8LT9cXGQrJXxhdXRvKSw/XFxzKigtP1xcZCpcXC4/XFxkKnB4fC0/XFxkKyV8YXV0byksP1xccyooLT9cXGQqXFwuP1xcZCpweHwtP1xcZCslfGF1dG8pLD9cXHMqKC0/XFxkKlxcLj9cXGQqcHh8LT9cXGQrJXxhdXRvKVxcKSQvLFxuXHRcdFx0dmFsdWVzID0gY2xpcFJlZ2V4LmV4ZWMoIHN0ciApIHx8IFsgXCJcIiwgMCwgb3V0ZXJXaWR0aCwgb3V0ZXJIZWlnaHQsIDAgXTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IHBhcnNlRmxvYXQoIHZhbHVlc1sgMSBdICkgfHwgMCxcblx0XHRcdHJpZ2h0OiB2YWx1ZXNbIDIgXSA9PT0gXCJhdXRvXCIgPyBvdXRlcldpZHRoIDogcGFyc2VGbG9hdCggdmFsdWVzWyAyIF0gKSxcblx0XHRcdGJvdHRvbTogdmFsdWVzWyAzIF0gPT09IFwiYXV0b1wiID8gb3V0ZXJIZWlnaHQgOiBwYXJzZUZsb2F0KCB2YWx1ZXNbIDMgXSApLFxuXHRcdFx0bGVmdDogcGFyc2VGbG9hdCggdmFsdWVzWyA0IF0gKSB8fCAwXG5cdFx0fTtcbn1cblxuJC5meC5zdGVwLmNsaXAgPSBmdW5jdGlvbiggZnggKSB7XG5cdGlmICggIWZ4LmNsaXBJbml0ICkge1xuXHRcdGZ4LnN0YXJ0ID0gJCggZnguZWxlbSApLmNzc0NsaXAoKTtcblx0XHRpZiAoIHR5cGVvZiBmeC5lbmQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRmeC5lbmQgPSBwYXJzZUNsaXAoIGZ4LmVuZCwgZnguZWxlbSApO1xuXHRcdH1cblx0XHRmeC5jbGlwSW5pdCA9IHRydWU7XG5cdH1cblxuXHQkKCBmeC5lbGVtICkuY3NzQ2xpcCgge1xuXHRcdHRvcDogZngucG9zICogKCBmeC5lbmQudG9wIC0gZnguc3RhcnQudG9wICkgKyBmeC5zdGFydC50b3AsXG5cdFx0cmlnaHQ6IGZ4LnBvcyAqICggZnguZW5kLnJpZ2h0IC0gZnguc3RhcnQucmlnaHQgKSArIGZ4LnN0YXJ0LnJpZ2h0LFxuXHRcdGJvdHRvbTogZngucG9zICogKCBmeC5lbmQuYm90dG9tIC0gZnguc3RhcnQuYm90dG9tICkgKyBmeC5zdGFydC5ib3R0b20sXG5cdFx0bGVmdDogZngucG9zICogKCBmeC5lbmQubGVmdCAtIGZ4LnN0YXJ0LmxlZnQgKSArIGZ4LnN0YXJ0LmxlZnRcblx0fSApO1xufTtcblxufSApKCk7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRUFTSU5HICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuKCBmdW5jdGlvbigpIHtcblxuLy8gQmFzZWQgb24gZWFzaW5nIGVxdWF0aW9ucyBmcm9tIFJvYmVydCBQZW5uZXIgKGh0dHA6Ly93d3cucm9iZXJ0cGVubmVyLmNvbS9lYXNpbmcpXG5cbnZhciBiYXNlRWFzaW5ncyA9IHt9O1xuXG4kLmVhY2goIFsgXCJRdWFkXCIsIFwiQ3ViaWNcIiwgXCJRdWFydFwiLCBcIlF1aW50XCIsIFwiRXhwb1wiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRiYXNlRWFzaW5nc1sgbmFtZSBdID0gZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIE1hdGgucG93KCBwLCBpICsgMiApO1xuXHR9O1xufSApO1xuXG4kLmV4dGVuZCggYmFzZUVhc2luZ3MsIHtcblx0U2luZTogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIDEgLSBNYXRoLmNvcyggcCAqIE1hdGguUEkgLyAyICk7XG5cdH0sXG5cdENpcmM6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiAxIC0gTWF0aC5zcXJ0KCAxIC0gcCAqIHAgKTtcblx0fSxcblx0RWxhc3RpYzogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIHAgPT09IDAgfHwgcCA9PT0gMSA/IHAgOlxuXHRcdFx0LU1hdGgucG93KCAyLCA4ICogKCBwIC0gMSApICkgKiBNYXRoLnNpbiggKCAoIHAgLSAxICkgKiA4MCAtIDcuNSApICogTWF0aC5QSSAvIDE1ICk7XG5cdH0sXG5cdEJhY2s6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiBwICogcCAqICggMyAqIHAgLSAyICk7XG5cdH0sXG5cdEJvdW5jZTogZnVuY3Rpb24oIHAgKSB7XG5cdFx0dmFyIHBvdzIsXG5cdFx0XHRib3VuY2UgPSA0O1xuXG5cdFx0d2hpbGUgKCBwIDwgKCAoIHBvdzIgPSBNYXRoLnBvdyggMiwgLS1ib3VuY2UgKSApIC0gMSApIC8gMTEgKSB7fVxuXHRcdHJldHVybiAxIC8gTWF0aC5wb3coIDQsIDMgLSBib3VuY2UgKSAtIDcuNTYyNSAqIE1hdGgucG93KCAoIHBvdzIgKiAzIC0gMiApIC8gMjIgLSBwLCAyICk7XG5cdH1cbn0gKTtcblxuJC5lYWNoKCBiYXNlRWFzaW5ncywgZnVuY3Rpb24oIG5hbWUsIGVhc2VJbiApIHtcblx0JC5lYXNpbmdbIFwiZWFzZUluXCIgKyBuYW1lIF0gPSBlYXNlSW47XG5cdCQuZWFzaW5nWyBcImVhc2VPdXRcIiArIG5hbWUgXSA9IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiAxIC0gZWFzZUluKCAxIC0gcCApO1xuXHR9O1xuXHQkLmVhc2luZ1sgXCJlYXNlSW5PdXRcIiArIG5hbWUgXSA9IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiBwIDwgMC41ID9cblx0XHRcdGVhc2VJbiggcCAqIDIgKSAvIDIgOlxuXHRcdFx0MSAtIGVhc2VJbiggcCAqIC0yICsgMiApIC8gMjtcblx0fTtcbn0gKTtcblxufSApKCk7XG5cbnJldHVybiAkLmVmZmVjdHM7XG5cbn0gKSApO1xuIiwiLyohXG4gKiBqUXVlcnkgVUkgRWZmZWN0cyBTbGlkZSAxLjEyLjFcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICovXG5cbi8vPj5sYWJlbDogU2xpZGUgRWZmZWN0XG4vLz4+Z3JvdXA6IEVmZmVjdHNcbi8vPj5kZXNjcmlwdGlvbjogU2xpZGVzIGFuIGVsZW1lbnQgaW4gYW5kIG91dCBvZiB0aGUgdmlld3BvcnQuXG4vLz4+ZG9jczogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vc2xpZGUtZWZmZWN0L1xuLy8+PmRlbW9zOiBodHRwOi8vanF1ZXJ5dWkuY29tL2VmZmVjdC9cblxuKCBmdW5jdGlvbiggZmFjdG9yeSApIHtcblx0aWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblxuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cblx0XHRkZWZpbmUoIFtcblx0XHRcdFwianF1ZXJ5XCIsXG5cdFx0XHRcIi4uL3ZlcnNpb25cIixcblx0XHRcdFwiLi4vZWZmZWN0XCJcblx0XHRdLCBmYWN0b3J5ICk7XG5cdH0gZWxzZSB7XG5cblx0XHQvLyBCcm93c2VyIGdsb2JhbHNcblx0XHRmYWN0b3J5KCBqUXVlcnkgKTtcblx0fVxufSggZnVuY3Rpb24oICQgKSB7XG5cbnJldHVybiAkLmVmZmVjdHMuZGVmaW5lKCBcInNsaWRlXCIsIFwic2hvd1wiLCBmdW5jdGlvbiggb3B0aW9ucywgZG9uZSApIHtcblx0dmFyIHN0YXJ0Q2xpcCwgc3RhcnRSZWYsXG5cdFx0ZWxlbWVudCA9ICQoIHRoaXMgKSxcblx0XHRtYXAgPSB7XG5cdFx0XHR1cDogWyBcImJvdHRvbVwiLCBcInRvcFwiIF0sXG5cdFx0XHRkb3duOiBbIFwidG9wXCIsIFwiYm90dG9tXCIgXSxcblx0XHRcdGxlZnQ6IFsgXCJyaWdodFwiLCBcImxlZnRcIiBdLFxuXHRcdFx0cmlnaHQ6IFsgXCJsZWZ0XCIsIFwicmlnaHRcIiBdXG5cdFx0fSxcblx0XHRtb2RlID0gb3B0aW9ucy5tb2RlLFxuXHRcdGRpcmVjdGlvbiA9IG9wdGlvbnMuZGlyZWN0aW9uIHx8IFwibGVmdFwiLFxuXHRcdHJlZiA9ICggZGlyZWN0aW9uID09PSBcInVwXCIgfHwgZGlyZWN0aW9uID09PSBcImRvd25cIiApID8gXCJ0b3BcIiA6IFwibGVmdFwiLFxuXHRcdHBvc2l0aXZlTW90aW9uID0gKCBkaXJlY3Rpb24gPT09IFwidXBcIiB8fCBkaXJlY3Rpb24gPT09IFwibGVmdFwiICksXG5cdFx0ZGlzdGFuY2UgPSBvcHRpb25zLmRpc3RhbmNlIHx8XG5cdFx0XHRlbGVtZW50WyByZWYgPT09IFwidG9wXCIgPyBcIm91dGVySGVpZ2h0XCIgOiBcIm91dGVyV2lkdGhcIiBdKCB0cnVlICksXG5cdFx0YW5pbWF0aW9uID0ge307XG5cblx0JC5lZmZlY3RzLmNyZWF0ZVBsYWNlaG9sZGVyKCBlbGVtZW50ICk7XG5cblx0c3RhcnRDbGlwID0gZWxlbWVudC5jc3NDbGlwKCk7XG5cdHN0YXJ0UmVmID0gZWxlbWVudC5wb3NpdGlvbigpWyByZWYgXTtcblxuXHQvLyBEZWZpbmUgaGlkZSBhbmltYXRpb25cblx0YW5pbWF0aW9uWyByZWYgXSA9ICggcG9zaXRpdmVNb3Rpb24gPyAtMSA6IDEgKSAqIGRpc3RhbmNlICsgc3RhcnRSZWY7XG5cdGFuaW1hdGlvbi5jbGlwID0gZWxlbWVudC5jc3NDbGlwKCk7XG5cdGFuaW1hdGlvbi5jbGlwWyBtYXBbIGRpcmVjdGlvbiBdWyAxIF0gXSA9IGFuaW1hdGlvbi5jbGlwWyBtYXBbIGRpcmVjdGlvbiBdWyAwIF0gXTtcblxuXHQvLyBSZXZlcnNlIHRoZSBhbmltYXRpb24gaWYgd2UncmUgc2hvd2luZ1xuXHRpZiAoIG1vZGUgPT09IFwic2hvd1wiICkge1xuXHRcdGVsZW1lbnQuY3NzQ2xpcCggYW5pbWF0aW9uLmNsaXAgKTtcblx0XHRlbGVtZW50LmNzcyggcmVmLCBhbmltYXRpb25bIHJlZiBdICk7XG5cdFx0YW5pbWF0aW9uLmNsaXAgPSBzdGFydENsaXA7XG5cdFx0YW5pbWF0aW9uWyByZWYgXSA9IHN0YXJ0UmVmO1xuXHR9XG5cblx0Ly8gQWN0dWFsbHkgYW5pbWF0ZVxuXHRlbGVtZW50LmFuaW1hdGUoIGFuaW1hdGlvbiwge1xuXHRcdHF1ZXVlOiBmYWxzZSxcblx0XHRkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcblx0XHRlYXNpbmc6IG9wdGlvbnMuZWFzaW5nLFxuXHRcdGNvbXBsZXRlOiBkb25lXG5cdH0gKTtcbn0gKTtcblxufSApICk7XG4iLCIvKiFcbiAqIGpRdWVyeSBVSSBTb3J0YWJsZSAxLjEyLjFcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICovXG5cbi8vPj5sYWJlbDogU29ydGFibGVcbi8vPj5ncm91cDogSW50ZXJhY3Rpb25zXG4vLz4+ZGVzY3JpcHRpb246IEVuYWJsZXMgaXRlbXMgaW4gYSBsaXN0IHRvIGJlIHNvcnRlZCB1c2luZyB0aGUgbW91c2UuXG4vLz4+ZG9jczogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vc29ydGFibGUvXG4vLz4+ZGVtb3M6IGh0dHA6Ly9qcXVlcnl1aS5jb20vc29ydGFibGUvXG4vLz4+Y3NzLnN0cnVjdHVyZTogLi4vLi4vdGhlbWVzL2Jhc2Uvc29ydGFibGUuY3NzXG5cbiggZnVuY3Rpb24oIGZhY3RvcnkgKSB7XG5cdGlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG5cblx0XHQvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG5cdFx0ZGVmaW5lKCBbXG5cdFx0XHRcImpxdWVyeVwiLFxuXHRcdFx0XCIuL21vdXNlXCIsXG5cdFx0XHRcIi4uL2RhdGFcIixcblx0XHRcdFwiLi4vaWVcIixcblx0XHRcdFwiLi4vc2Nyb2xsLXBhcmVudFwiLFxuXHRcdFx0XCIuLi92ZXJzaW9uXCIsXG5cdFx0XHRcIi4uL3dpZGdldFwiXG5cdFx0XSwgZmFjdG9yeSApO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXG5cdFx0ZmFjdG9yeSggalF1ZXJ5ICk7XG5cdH1cbn0oIGZ1bmN0aW9uKCAkICkge1xuXG5yZXR1cm4gJC53aWRnZXQoIFwidWkuc29ydGFibGVcIiwgJC51aS5tb3VzZSwge1xuXHR2ZXJzaW9uOiBcIjEuMTIuMVwiLFxuXHR3aWRnZXRFdmVudFByZWZpeDogXCJzb3J0XCIsXG5cdHJlYWR5OiBmYWxzZSxcblx0b3B0aW9uczoge1xuXHRcdGFwcGVuZFRvOiBcInBhcmVudFwiLFxuXHRcdGF4aXM6IGZhbHNlLFxuXHRcdGNvbm5lY3RXaXRoOiBmYWxzZSxcblx0XHRjb250YWlubWVudDogZmFsc2UsXG5cdFx0Y3Vyc29yOiBcImF1dG9cIixcblx0XHRjdXJzb3JBdDogZmFsc2UsXG5cdFx0ZHJvcE9uRW1wdHk6IHRydWUsXG5cdFx0Zm9yY2VQbGFjZWhvbGRlclNpemU6IGZhbHNlLFxuXHRcdGZvcmNlSGVscGVyU2l6ZTogZmFsc2UsXG5cdFx0Z3JpZDogZmFsc2UsXG5cdFx0aGFuZGxlOiBmYWxzZSxcblx0XHRoZWxwZXI6IFwib3JpZ2luYWxcIixcblx0XHRpdGVtczogXCI+ICpcIixcblx0XHRvcGFjaXR5OiBmYWxzZSxcblx0XHRwbGFjZWhvbGRlcjogZmFsc2UsXG5cdFx0cmV2ZXJ0OiBmYWxzZSxcblx0XHRzY3JvbGw6IHRydWUsXG5cdFx0c2Nyb2xsU2Vuc2l0aXZpdHk6IDIwLFxuXHRcdHNjcm9sbFNwZWVkOiAyMCxcblx0XHRzY29wZTogXCJkZWZhdWx0XCIsXG5cdFx0dG9sZXJhbmNlOiBcImludGVyc2VjdFwiLFxuXHRcdHpJbmRleDogMTAwMCxcblxuXHRcdC8vIENhbGxiYWNrc1xuXHRcdGFjdGl2YXRlOiBudWxsLFxuXHRcdGJlZm9yZVN0b3A6IG51bGwsXG5cdFx0Y2hhbmdlOiBudWxsLFxuXHRcdGRlYWN0aXZhdGU6IG51bGwsXG5cdFx0b3V0OiBudWxsLFxuXHRcdG92ZXI6IG51bGwsXG5cdFx0cmVjZWl2ZTogbnVsbCxcblx0XHRyZW1vdmU6IG51bGwsXG5cdFx0c29ydDogbnVsbCxcblx0XHRzdGFydDogbnVsbCxcblx0XHRzdG9wOiBudWxsLFxuXHRcdHVwZGF0ZTogbnVsbFxuXHR9LFxuXG5cdF9pc092ZXJBeGlzOiBmdW5jdGlvbiggeCwgcmVmZXJlbmNlLCBzaXplICkge1xuXHRcdHJldHVybiAoIHggPj0gcmVmZXJlbmNlICkgJiYgKCB4IDwgKCByZWZlcmVuY2UgKyBzaXplICkgKTtcblx0fSxcblxuXHRfaXNGbG9hdGluZzogZnVuY3Rpb24oIGl0ZW0gKSB7XG5cdFx0cmV0dXJuICggL2xlZnR8cmlnaHQvICkudGVzdCggaXRlbS5jc3MoIFwiZmxvYXRcIiApICkgfHxcblx0XHRcdCggL2lubGluZXx0YWJsZS1jZWxsLyApLnRlc3QoIGl0ZW0uY3NzKCBcImRpc3BsYXlcIiApICk7XG5cdH0sXG5cblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5jb250YWluZXJDYWNoZSA9IHt9O1xuXHRcdHRoaXMuX2FkZENsYXNzKCBcInVpLXNvcnRhYmxlXCIgKTtcblxuXHRcdC8vR2V0IHRoZSBpdGVtc1xuXHRcdHRoaXMucmVmcmVzaCgpO1xuXG5cdFx0Ly9MZXQncyBkZXRlcm1pbmUgdGhlIHBhcmVudCdzIG9mZnNldFxuXHRcdHRoaXMub2Zmc2V0ID0gdGhpcy5lbGVtZW50Lm9mZnNldCgpO1xuXG5cdFx0Ly9Jbml0aWFsaXplIG1vdXNlIGV2ZW50cyBmb3IgaW50ZXJhY3Rpb25cblx0XHR0aGlzLl9tb3VzZUluaXQoKTtcblxuXHRcdHRoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpO1xuXG5cdFx0Ly9XZSdyZSByZWFkeSB0byBnb1xuXHRcdHRoaXMucmVhZHkgPSB0cnVlO1xuXG5cdH0sXG5cblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0dGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTtcblxuXHRcdGlmICgga2V5ID09PSBcImhhbmRsZVwiICkge1xuXHRcdFx0dGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9zZXRIYW5kbGVDbGFzc05hbWU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0aGF0ID0gdGhpcztcblx0XHR0aGlzLl9yZW1vdmVDbGFzcyggdGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLXNvcnRhYmxlLWhhbmRsZVwiICksIFwidWktc29ydGFibGUtaGFuZGxlXCIgKTtcblx0XHQkLmVhY2goIHRoaXMuaXRlbXMsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhhdC5fYWRkQ2xhc3MoXG5cdFx0XHRcdHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oYW5kbGUgP1xuXHRcdFx0XHRcdHRoaXMuaXRlbS5maW5kKCB0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGFuZGxlICkgOlxuXHRcdFx0XHRcdHRoaXMuaXRlbSxcblx0XHRcdFx0XCJ1aS1zb3J0YWJsZS1oYW5kbGVcIlxuXHRcdFx0KTtcblx0XHR9ICk7XG5cdH0sXG5cblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuX21vdXNlRGVzdHJveSgpO1xuXG5cdFx0Zm9yICggdmFyIGkgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tICkge1xuXHRcdFx0dGhpcy5pdGVtc1sgaSBdLml0ZW0ucmVtb3ZlRGF0YSggdGhpcy53aWRnZXROYW1lICsgXCItaXRlbVwiICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0X21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oIGV2ZW50LCBvdmVycmlkZUhhbmRsZSApIHtcblx0XHR2YXIgY3VycmVudEl0ZW0gPSBudWxsLFxuXHRcdFx0dmFsaWRIYW5kbGUgPSBmYWxzZSxcblx0XHRcdHRoYXQgPSB0aGlzO1xuXG5cdFx0aWYgKCB0aGlzLnJldmVydGluZyApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCB0aGlzLm9wdGlvbnMudHlwZSA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvL1dlIGhhdmUgdG8gcmVmcmVzaCB0aGUgaXRlbXMgZGF0YSBvbmNlIGZpcnN0XG5cdFx0dGhpcy5fcmVmcmVzaEl0ZW1zKCBldmVudCApO1xuXG5cdFx0Ly9GaW5kIG91dCBpZiB0aGUgY2xpY2tlZCBub2RlIChvciBvbmUgb2YgaXRzIHBhcmVudHMpIGlzIGEgYWN0dWFsIGl0ZW0gaW4gdGhpcy5pdGVtc1xuXHRcdCQoIGV2ZW50LnRhcmdldCApLnBhcmVudHMoKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggJC5kYXRhKCB0aGlzLCB0aGF0LndpZGdldE5hbWUgKyBcIi1pdGVtXCIgKSA9PT0gdGhhdCApIHtcblx0XHRcdFx0Y3VycmVudEl0ZW0gPSAkKCB0aGlzICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdFx0aWYgKCAkLmRhdGEoIGV2ZW50LnRhcmdldCwgdGhhdC53aWRnZXROYW1lICsgXCItaXRlbVwiICkgPT09IHRoYXQgKSB7XG5cdFx0XHRjdXJyZW50SXRlbSA9ICQoIGV2ZW50LnRhcmdldCApO1xuXHRcdH1cblxuXHRcdGlmICggIWN1cnJlbnRJdGVtICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oYW5kbGUgJiYgIW92ZXJyaWRlSGFuZGxlICkge1xuXHRcdFx0JCggdGhpcy5vcHRpb25zLmhhbmRsZSwgY3VycmVudEl0ZW0gKS5maW5kKCBcIipcIiApLmFkZEJhY2soKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzID09PSBldmVudC50YXJnZXQgKSB7XG5cdFx0XHRcdFx0dmFsaWRIYW5kbGUgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0XHRpZiAoICF2YWxpZEhhbmRsZSApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMuY3VycmVudEl0ZW0gPSBjdXJyZW50SXRlbTtcblx0XHR0aGlzLl9yZW1vdmVDdXJyZW50c0Zyb21JdGVtcygpO1xuXHRcdHJldHVybiB0cnVlO1xuXG5cdH0sXG5cblx0X21vdXNlU3RhcnQ6IGZ1bmN0aW9uKCBldmVudCwgb3ZlcnJpZGVIYW5kbGUsIG5vQWN0aXZhdGlvbiApIHtcblxuXHRcdHZhciBpLCBib2R5LFxuXHRcdFx0byA9IHRoaXMub3B0aW9ucztcblxuXHRcdHRoaXMuY3VycmVudENvbnRhaW5lciA9IHRoaXM7XG5cblx0XHQvL1dlIG9ubHkgbmVlZCB0byBjYWxsIHJlZnJlc2hQb3NpdGlvbnMsIGJlY2F1c2UgdGhlIHJlZnJlc2hJdGVtcyBjYWxsIGhhcyBiZWVuIG1vdmVkIHRvXG5cdFx0Ly8gbW91c2VDYXB0dXJlXG5cdFx0dGhpcy5yZWZyZXNoUG9zaXRpb25zKCk7XG5cblx0XHQvL0NyZWF0ZSBhbmQgYXBwZW5kIHRoZSB2aXNpYmxlIGhlbHBlclxuXHRcdHRoaXMuaGVscGVyID0gdGhpcy5fY3JlYXRlSGVscGVyKCBldmVudCApO1xuXG5cdFx0Ly9DYWNoZSB0aGUgaGVscGVyIHNpemVcblx0XHR0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7XG5cblx0XHQvKlxuXHRcdCAqIC0gUG9zaXRpb24gZ2VuZXJhdGlvbiAtXG5cdFx0ICogVGhpcyBibG9jayBnZW5lcmF0ZXMgZXZlcnl0aGluZyBwb3NpdGlvbiByZWxhdGVkIC0gaXQncyB0aGUgY29yZSBvZiBkcmFnZ2FibGVzLlxuXHRcdCAqL1xuXG5cdFx0Ly9DYWNoZSB0aGUgbWFyZ2lucyBvZiB0aGUgb3JpZ2luYWwgZWxlbWVudFxuXHRcdHRoaXMuX2NhY2hlTWFyZ2lucygpO1xuXG5cdFx0Ly9HZXQgdGhlIG5leHQgc2Nyb2xsaW5nIHBhcmVudFxuXHRcdHRoaXMuc2Nyb2xsUGFyZW50ID0gdGhpcy5oZWxwZXIuc2Nyb2xsUGFyZW50KCk7XG5cblx0XHQvL1RoZSBlbGVtZW50J3MgYWJzb2x1dGUgcG9zaXRpb24gb24gdGhlIHBhZ2UgbWludXMgbWFyZ2luc1xuXHRcdHRoaXMub2Zmc2V0ID0gdGhpcy5jdXJyZW50SXRlbS5vZmZzZXQoKTtcblx0XHR0aGlzLm9mZnNldCA9IHtcblx0XHRcdHRvcDogdGhpcy5vZmZzZXQudG9wIC0gdGhpcy5tYXJnaW5zLnRvcCxcblx0XHRcdGxlZnQ6IHRoaXMub2Zmc2V0LmxlZnQgLSB0aGlzLm1hcmdpbnMubGVmdFxuXHRcdH07XG5cblx0XHQkLmV4dGVuZCggdGhpcy5vZmZzZXQsIHtcblx0XHRcdGNsaWNrOiB7IC8vV2hlcmUgdGhlIGNsaWNrIGhhcHBlbmVkLCByZWxhdGl2ZSB0byB0aGUgZWxlbWVudFxuXHRcdFx0XHRsZWZ0OiBldmVudC5wYWdlWCAtIHRoaXMub2Zmc2V0LmxlZnQsXG5cdFx0XHRcdHRvcDogZXZlbnQucGFnZVkgLSB0aGlzLm9mZnNldC50b3Bcblx0XHRcdH0sXG5cdFx0XHRwYXJlbnQ6IHRoaXMuX2dldFBhcmVudE9mZnNldCgpLFxuXG5cdFx0XHQvLyBUaGlzIGlzIGEgcmVsYXRpdmUgdG8gYWJzb2x1dGUgcG9zaXRpb24gbWludXMgdGhlIGFjdHVhbCBwb3NpdGlvbiBjYWxjdWxhdGlvbiAtXG5cdFx0XHQvLyBvbmx5IHVzZWQgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgaGVscGVyXG5cdFx0XHRyZWxhdGl2ZTogdGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKVxuXHRcdH0gKTtcblxuXHRcdC8vIE9ubHkgYWZ0ZXIgd2UgZ290IHRoZSBvZmZzZXQsIHdlIGNhbiBjaGFuZ2UgdGhlIGhlbHBlcidzIHBvc2l0aW9uIHRvIGFic29sdXRlXG5cdFx0Ly8gVE9ETzogU3RpbGwgbmVlZCB0byBmaWd1cmUgb3V0IGEgd2F5IHRvIG1ha2UgcmVsYXRpdmUgc29ydGluZyBwb3NzaWJsZVxuXHRcdHRoaXMuaGVscGVyLmNzcyggXCJwb3NpdGlvblwiLCBcImFic29sdXRlXCIgKTtcblx0XHR0aGlzLmNzc1Bvc2l0aW9uID0gdGhpcy5oZWxwZXIuY3NzKCBcInBvc2l0aW9uXCIgKTtcblxuXHRcdC8vR2VuZXJhdGUgdGhlIG9yaWdpbmFsIHBvc2l0aW9uXG5cdFx0dGhpcy5vcmlnaW5hbFBvc2l0aW9uID0gdGhpcy5fZ2VuZXJhdGVQb3NpdGlvbiggZXZlbnQgKTtcblx0XHR0aGlzLm9yaWdpbmFsUGFnZVggPSBldmVudC5wYWdlWDtcblx0XHR0aGlzLm9yaWdpbmFsUGFnZVkgPSBldmVudC5wYWdlWTtcblxuXHRcdC8vQWRqdXN0IHRoZSBtb3VzZSBvZmZzZXQgcmVsYXRpdmUgdG8gdGhlIGhlbHBlciBpZiBcImN1cnNvckF0XCIgaXMgc3VwcGxpZWRcblx0XHQoIG8uY3Vyc29yQXQgJiYgdGhpcy5fYWRqdXN0T2Zmc2V0RnJvbUhlbHBlciggby5jdXJzb3JBdCApICk7XG5cblx0XHQvL0NhY2hlIHRoZSBmb3JtZXIgRE9NIHBvc2l0aW9uXG5cdFx0dGhpcy5kb21Qb3NpdGlvbiA9IHtcblx0XHRcdHByZXY6IHRoaXMuY3VycmVudEl0ZW0ucHJldigpWyAwIF0sXG5cdFx0XHRwYXJlbnQ6IHRoaXMuY3VycmVudEl0ZW0ucGFyZW50KClbIDAgXVxuXHRcdH07XG5cblx0XHQvLyBJZiB0aGUgaGVscGVyIGlzIG5vdCB0aGUgb3JpZ2luYWwsIGhpZGUgdGhlIG9yaWdpbmFsIHNvIGl0J3Mgbm90IHBsYXlpbmcgYW55IHJvbGUgZHVyaW5nXG5cdFx0Ly8gdGhlIGRyYWcsIHdvbid0IGNhdXNlIGFueXRoaW5nIGJhZCB0aGlzIHdheVxuXHRcdGlmICggdGhpcy5oZWxwZXJbIDAgXSAhPT0gdGhpcy5jdXJyZW50SXRlbVsgMCBdICkge1xuXHRcdFx0dGhpcy5jdXJyZW50SXRlbS5oaWRlKCk7XG5cdFx0fVxuXG5cdFx0Ly9DcmVhdGUgdGhlIHBsYWNlaG9sZGVyXG5cdFx0dGhpcy5fY3JlYXRlUGxhY2Vob2xkZXIoKTtcblxuXHRcdC8vU2V0IGEgY29udGFpbm1lbnQgaWYgZ2l2ZW4gaW4gdGhlIG9wdGlvbnNcblx0XHRpZiAoIG8uY29udGFpbm1lbnQgKSB7XG5cdFx0XHR0aGlzLl9zZXRDb250YWlubWVudCgpO1xuXHRcdH1cblxuXHRcdGlmICggby5jdXJzb3IgJiYgby5jdXJzb3IgIT09IFwiYXV0b1wiICkgeyAvLyBjdXJzb3Igb3B0aW9uXG5cdFx0XHRib2R5ID0gdGhpcy5kb2N1bWVudC5maW5kKCBcImJvZHlcIiApO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRVxuXHRcdFx0dGhpcy5zdG9yZWRDdXJzb3IgPSBib2R5LmNzcyggXCJjdXJzb3JcIiApO1xuXHRcdFx0Ym9keS5jc3MoIFwiY3Vyc29yXCIsIG8uY3Vyc29yICk7XG5cblx0XHRcdHRoaXMuc3RvcmVkU3R5bGVzaGVldCA9XG5cdFx0XHRcdCQoIFwiPHN0eWxlPip7IGN1cnNvcjogXCIgKyBvLmN1cnNvciArIFwiICFpbXBvcnRhbnQ7IH08L3N0eWxlPlwiICkuYXBwZW5kVG8oIGJvZHkgKTtcblx0XHR9XG5cblx0XHRpZiAoIG8ub3BhY2l0eSApIHsgLy8gb3BhY2l0eSBvcHRpb25cblx0XHRcdGlmICggdGhpcy5oZWxwZXIuY3NzKCBcIm9wYWNpdHlcIiApICkge1xuXHRcdFx0XHR0aGlzLl9zdG9yZWRPcGFjaXR5ID0gdGhpcy5oZWxwZXIuY3NzKCBcIm9wYWNpdHlcIiApO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5oZWxwZXIuY3NzKCBcIm9wYWNpdHlcIiwgby5vcGFjaXR5ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvLnpJbmRleCApIHsgLy8gekluZGV4IG9wdGlvblxuXHRcdFx0aWYgKCB0aGlzLmhlbHBlci5jc3MoIFwiekluZGV4XCIgKSApIHtcblx0XHRcdFx0dGhpcy5fc3RvcmVkWkluZGV4ID0gdGhpcy5oZWxwZXIuY3NzKCBcInpJbmRleFwiICk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmhlbHBlci5jc3MoIFwiekluZGV4XCIsIG8uekluZGV4ICk7XG5cdFx0fVxuXG5cdFx0Ly9QcmVwYXJlIHNjcm9sbGluZ1xuXHRcdGlmICggdGhpcy5zY3JvbGxQYXJlbnRbIDAgXSAhPT0gdGhpcy5kb2N1bWVudFsgMCBdICYmXG5cdFx0XHRcdHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0udGFnTmFtZSAhPT0gXCJIVE1MXCIgKSB7XG5cdFx0XHR0aGlzLm92ZXJmbG93T2Zmc2V0ID0gdGhpcy5zY3JvbGxQYXJlbnQub2Zmc2V0KCk7XG5cdFx0fVxuXG5cdFx0Ly9DYWxsIGNhbGxiYWNrc1xuXHRcdHRoaXMuX3RyaWdnZXIoIFwic3RhcnRcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpICk7XG5cblx0XHQvL1JlY2FjaGUgdGhlIGhlbHBlciBzaXplXG5cdFx0aWYgKCAhdGhpcy5fcHJlc2VydmVIZWxwZXJQcm9wb3J0aW9ucyApIHtcblx0XHRcdHRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTtcblx0XHR9XG5cblx0XHQvL1Bvc3QgXCJhY3RpdmF0ZVwiIGV2ZW50cyB0byBwb3NzaWJsZSBjb250YWluZXJzXG5cdFx0aWYgKCAhbm9BY3RpdmF0aW9uICkge1xuXHRcdFx0Zm9yICggaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHtcblx0XHRcdFx0dGhpcy5jb250YWluZXJzWyBpIF0uX3RyaWdnZXIoIFwiYWN0aXZhdGVcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCggdGhpcyApICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9QcmVwYXJlIHBvc3NpYmxlIGRyb3BwYWJsZXNcblx0XHRpZiAoICQudWkuZGRtYW5hZ2VyICkge1xuXHRcdFx0JC51aS5kZG1hbmFnZXIuY3VycmVudCA9IHRoaXM7XG5cdFx0fVxuXG5cdFx0aWYgKCAkLnVpLmRkbWFuYWdlciAmJiAhby5kcm9wQmVoYXZpb3VyICkge1xuXHRcdFx0JC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoIHRoaXMsIGV2ZW50ICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5kcmFnZ2luZyA9IHRydWU7XG5cblx0XHR0aGlzLl9hZGRDbGFzcyggdGhpcy5oZWxwZXIsIFwidWktc29ydGFibGUtaGVscGVyXCIgKTtcblxuXHRcdC8vIEV4ZWN1dGUgdGhlIGRyYWcgb25jZSAtIHRoaXMgY2F1c2VzIHRoZSBoZWxwZXIgbm90IHRvIGJlIHZpc2libGViZWZvcmUgZ2V0dGluZyBpdHNcblx0XHQvLyBjb3JyZWN0IHBvc2l0aW9uXG5cdFx0dGhpcy5fbW91c2VEcmFnKCBldmVudCApO1xuXHRcdHJldHVybiB0cnVlO1xuXG5cdH0sXG5cblx0X21vdXNlRHJhZzogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBpLCBpdGVtLCBpdGVtRWxlbWVudCwgaW50ZXJzZWN0aW9uLFxuXHRcdFx0byA9IHRoaXMub3B0aW9ucyxcblx0XHRcdHNjcm9sbGVkID0gZmFsc2U7XG5cblx0XHQvL0NvbXB1dGUgdGhlIGhlbHBlcnMgcG9zaXRpb25cblx0XHR0aGlzLnBvc2l0aW9uID0gdGhpcy5fZ2VuZXJhdGVQb3NpdGlvbiggZXZlbnQgKTtcblx0XHR0aGlzLnBvc2l0aW9uQWJzID0gdGhpcy5fY29udmVydFBvc2l0aW9uVG8oIFwiYWJzb2x1dGVcIiApO1xuXG5cdFx0aWYgKCAhdGhpcy5sYXN0UG9zaXRpb25BYnMgKSB7XG5cdFx0XHR0aGlzLmxhc3RQb3NpdGlvbkFicyA9IHRoaXMucG9zaXRpb25BYnM7XG5cdFx0fVxuXG5cdFx0Ly9EbyBzY3JvbGxpbmdcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5zY3JvbGwgKSB7XG5cdFx0XHRpZiAoIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0gIT09IHRoaXMuZG9jdW1lbnRbIDAgXSAmJlxuXHRcdFx0XHRcdHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0udGFnTmFtZSAhPT0gXCJIVE1MXCIgKSB7XG5cblx0XHRcdFx0aWYgKCAoIHRoaXMub3ZlcmZsb3dPZmZzZXQudG9wICsgdGhpcy5zY3JvbGxQYXJlbnRbIDAgXS5vZmZzZXRIZWlnaHQgKSAtXG5cdFx0XHRcdFx0XHRldmVudC5wYWdlWSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7XG5cdFx0XHRcdFx0dGhpcy5zY3JvbGxQYXJlbnRbIDAgXS5zY3JvbGxUb3AgPVxuXHRcdFx0XHRcdFx0c2Nyb2xsZWQgPSB0aGlzLnNjcm9sbFBhcmVudFsgMCBdLnNjcm9sbFRvcCArIG8uc2Nyb2xsU3BlZWQ7XG5cdFx0XHRcdH0gZWxzZSBpZiAoIGV2ZW50LnBhZ2VZIC0gdGhpcy5vdmVyZmxvd09mZnNldC50b3AgPCBvLnNjcm9sbFNlbnNpdGl2aXR5ICkge1xuXHRcdFx0XHRcdHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0uc2Nyb2xsVG9wID1cblx0XHRcdFx0XHRcdHNjcm9sbGVkID0gdGhpcy5zY3JvbGxQYXJlbnRbIDAgXS5zY3JvbGxUb3AgLSBvLnNjcm9sbFNwZWVkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAoIHRoaXMub3ZlcmZsb3dPZmZzZXQubGVmdCArIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0ub2Zmc2V0V2lkdGggKSAtXG5cdFx0XHRcdFx0XHRldmVudC5wYWdlWCA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7XG5cdFx0XHRcdFx0dGhpcy5zY3JvbGxQYXJlbnRbIDAgXS5zY3JvbGxMZWZ0ID0gc2Nyb2xsZWQgPVxuXHRcdFx0XHRcdFx0dGhpcy5zY3JvbGxQYXJlbnRbIDAgXS5zY3JvbGxMZWZ0ICsgby5zY3JvbGxTcGVlZDtcblx0XHRcdFx0fSBlbHNlIGlmICggZXZlbnQucGFnZVggLSB0aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQgPCBvLnNjcm9sbFNlbnNpdGl2aXR5ICkge1xuXHRcdFx0XHRcdHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0uc2Nyb2xsTGVmdCA9IHNjcm9sbGVkID1cblx0XHRcdFx0XHRcdHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0uc2Nyb2xsTGVmdCAtIG8uc2Nyb2xsU3BlZWQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRpZiAoIGV2ZW50LnBhZ2VZIC0gdGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7XG5cdFx0XHRcdFx0c2Nyb2xsZWQgPSB0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCggdGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKSAtIG8uc2Nyb2xsU3BlZWQgKTtcblx0XHRcdFx0fSBlbHNlIGlmICggdGhpcy53aW5kb3cuaGVpZ2h0KCkgLSAoIGV2ZW50LnBhZ2VZIC0gdGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKSApIDxcblx0XHRcdFx0XHRcdG8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7XG5cdFx0XHRcdFx0c2Nyb2xsZWQgPSB0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCggdGhpcy5kb2N1bWVudC5zY3JvbGxUb3AoKSArIG8uc2Nyb2xsU3BlZWQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggZXZlbnQucGFnZVggLSB0aGlzLmRvY3VtZW50LnNjcm9sbExlZnQoKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkgKSB7XG5cdFx0XHRcdFx0c2Nyb2xsZWQgPSB0aGlzLmRvY3VtZW50LnNjcm9sbExlZnQoXG5cdFx0XHRcdFx0XHR0aGlzLmRvY3VtZW50LnNjcm9sbExlZnQoKSAtIG8uc2Nyb2xsU3BlZWRcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCB0aGlzLndpbmRvdy53aWR0aCgpIC0gKCBldmVudC5wYWdlWCAtIHRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpICkgPFxuXHRcdFx0XHRcdFx0by5zY3JvbGxTZW5zaXRpdml0eSApIHtcblx0XHRcdFx0XHRzY3JvbGxlZCA9IHRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdChcblx0XHRcdFx0XHRcdHRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpICsgby5zY3JvbGxTcGVlZFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHNjcm9sbGVkICE9PSBmYWxzZSAmJiAkLnVpLmRkbWFuYWdlciAmJiAhby5kcm9wQmVoYXZpb3VyICkge1xuXHRcdFx0XHQkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyggdGhpcywgZXZlbnQgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvL1JlZ2VuZXJhdGUgdGhlIGFic29sdXRlIHBvc2l0aW9uIHVzZWQgZm9yIHBvc2l0aW9uIGNoZWNrc1xuXHRcdHRoaXMucG9zaXRpb25BYnMgPSB0aGlzLl9jb252ZXJ0UG9zaXRpb25UbyggXCJhYnNvbHV0ZVwiICk7XG5cblx0XHQvL1NldCB0aGUgaGVscGVyIHBvc2l0aW9uXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLmF4aXMgfHwgdGhpcy5vcHRpb25zLmF4aXMgIT09IFwieVwiICkge1xuXHRcdFx0dGhpcy5oZWxwZXJbIDAgXS5zdHlsZS5sZWZ0ID0gdGhpcy5wb3NpdGlvbi5sZWZ0ICsgXCJweFwiO1xuXHRcdH1cblx0XHRpZiAoICF0aGlzLm9wdGlvbnMuYXhpcyB8fCB0aGlzLm9wdGlvbnMuYXhpcyAhPT0gXCJ4XCIgKSB7XG5cdFx0XHR0aGlzLmhlbHBlclsgMCBdLnN0eWxlLnRvcCA9IHRoaXMucG9zaXRpb24udG9wICsgXCJweFwiO1xuXHRcdH1cblxuXHRcdC8vUmVhcnJhbmdlXG5cdFx0Zm9yICggaSA9IHRoaXMuaXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7XG5cblx0XHRcdC8vQ2FjaGUgdmFyaWFibGVzIGFuZCBpbnRlcnNlY3Rpb24sIGNvbnRpbnVlIGlmIG5vIGludGVyc2VjdGlvblxuXHRcdFx0aXRlbSA9IHRoaXMuaXRlbXNbIGkgXTtcblx0XHRcdGl0ZW1FbGVtZW50ID0gaXRlbS5pdGVtWyAwIF07XG5cdFx0XHRpbnRlcnNlY3Rpb24gPSB0aGlzLl9pbnRlcnNlY3RzV2l0aFBvaW50ZXIoIGl0ZW0gKTtcblx0XHRcdGlmICggIWludGVyc2VjdGlvbiApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ubHkgcHV0IHRoZSBwbGFjZWhvbGRlciBpbnNpZGUgdGhlIGN1cnJlbnQgQ29udGFpbmVyLCBza2lwIGFsbFxuXHRcdFx0Ly8gaXRlbXMgZnJvbSBvdGhlciBjb250YWluZXJzLiBUaGlzIHdvcmtzIGJlY2F1c2Ugd2hlbiBtb3Zpbmdcblx0XHRcdC8vIGFuIGl0ZW0gZnJvbSBvbmUgY29udGFpbmVyIHRvIGFub3RoZXIgdGhlXG5cdFx0XHQvLyBjdXJyZW50Q29udGFpbmVyIGlzIHN3aXRjaGVkIGJlZm9yZSB0aGUgcGxhY2Vob2xkZXIgaXMgbW92ZWQuXG5cdFx0XHQvL1xuXHRcdFx0Ly8gV2l0aG91dCB0aGlzLCBtb3ZpbmcgaXRlbXMgaW4gXCJzdWItc29ydGFibGVzXCIgY2FuIGNhdXNlXG5cdFx0XHQvLyB0aGUgcGxhY2Vob2xkZXIgdG8gaml0dGVyIGJldHdlZW4gdGhlIG91dGVyIGFuZCBpbm5lciBjb250YWluZXIuXG5cdFx0XHRpZiAoIGl0ZW0uaW5zdGFuY2UgIT09IHRoaXMuY3VycmVudENvbnRhaW5lciApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhbm5vdCBpbnRlcnNlY3Qgd2l0aCBpdHNlbGZcblx0XHRcdC8vIG5vIHVzZWxlc3MgYWN0aW9ucyB0aGF0IGhhdmUgYmVlbiBkb25lIGJlZm9yZVxuXHRcdFx0Ly8gbm8gYWN0aW9uIGlmIHRoZSBpdGVtIG1vdmVkIGlzIHRoZSBwYXJlbnQgb2YgdGhlIGl0ZW0gY2hlY2tlZFxuXHRcdFx0aWYgKCBpdGVtRWxlbWVudCAhPT0gdGhpcy5jdXJyZW50SXRlbVsgMCBdICYmXG5cdFx0XHRcdHRoaXMucGxhY2Vob2xkZXJbIGludGVyc2VjdGlvbiA9PT0gMSA/IFwibmV4dFwiIDogXCJwcmV2XCIgXSgpWyAwIF0gIT09IGl0ZW1FbGVtZW50ICYmXG5cdFx0XHRcdCEkLmNvbnRhaW5zKCB0aGlzLnBsYWNlaG9sZGVyWyAwIF0sIGl0ZW1FbGVtZW50ICkgJiZcblx0XHRcdFx0KCB0aGlzLm9wdGlvbnMudHlwZSA9PT0gXCJzZW1pLWR5bmFtaWNcIiA/XG5cdFx0XHRcdFx0ISQuY29udGFpbnMoIHRoaXMuZWxlbWVudFsgMCBdLCBpdGVtRWxlbWVudCApIDpcblx0XHRcdFx0XHR0cnVlXG5cdFx0XHRcdClcblx0XHRcdCkge1xuXG5cdFx0XHRcdHRoaXMuZGlyZWN0aW9uID0gaW50ZXJzZWN0aW9uID09PSAxID8gXCJkb3duXCIgOiBcInVwXCI7XG5cblx0XHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMudG9sZXJhbmNlID09PSBcInBvaW50ZXJcIiB8fCB0aGlzLl9pbnRlcnNlY3RzV2l0aFNpZGVzKCBpdGVtICkgKSB7XG5cdFx0XHRcdFx0dGhpcy5fcmVhcnJhbmdlKCBldmVudCwgaXRlbSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5fdHJpZ2dlciggXCJjaGFuZ2VcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpICk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vUG9zdCBldmVudHMgdG8gY29udGFpbmVyc1xuXHRcdHRoaXMuX2NvbnRhY3RDb250YWluZXJzKCBldmVudCApO1xuXG5cdFx0Ly9JbnRlcmNvbm5lY3Qgd2l0aCBkcm9wcGFibGVzXG5cdFx0aWYgKCAkLnVpLmRkbWFuYWdlciApIHtcblx0XHRcdCQudWkuZGRtYW5hZ2VyLmRyYWcoIHRoaXMsIGV2ZW50ICk7XG5cdFx0fVxuXG5cdFx0Ly9DYWxsIGNhbGxiYWNrc1xuXHRcdHRoaXMuX3RyaWdnZXIoIFwic29ydFwiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkgKTtcblxuXHRcdHRoaXMubGFzdFBvc2l0aW9uQWJzID0gdGhpcy5wb3NpdGlvbkFicztcblx0XHRyZXR1cm4gZmFsc2U7XG5cblx0fSxcblxuXHRfbW91c2VTdG9wOiBmdW5jdGlvbiggZXZlbnQsIG5vUHJvcGFnYXRpb24gKSB7XG5cblx0XHRpZiAoICFldmVudCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvL0lmIHdlIGFyZSB1c2luZyBkcm9wcGFibGVzLCBpbmZvcm0gdGhlIG1hbmFnZXIgYWJvdXQgdGhlIGRyb3Bcblx0XHRpZiAoICQudWkuZGRtYW5hZ2VyICYmICF0aGlzLm9wdGlvbnMuZHJvcEJlaGF2aW91ciApIHtcblx0XHRcdCQudWkuZGRtYW5hZ2VyLmRyb3AoIHRoaXMsIGV2ZW50ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMucmV2ZXJ0ICkge1xuXHRcdFx0dmFyIHRoYXQgPSB0aGlzLFxuXHRcdFx0XHRjdXIgPSB0aGlzLnBsYWNlaG9sZGVyLm9mZnNldCgpLFxuXHRcdFx0XHRheGlzID0gdGhpcy5vcHRpb25zLmF4aXMsXG5cdFx0XHRcdGFuaW1hdGlvbiA9IHt9O1xuXG5cdFx0XHRpZiAoICFheGlzIHx8IGF4aXMgPT09IFwieFwiICkge1xuXHRcdFx0XHRhbmltYXRpb24ubGVmdCA9IGN1ci5sZWZ0IC0gdGhpcy5vZmZzZXQucGFyZW50LmxlZnQgLSB0aGlzLm1hcmdpbnMubGVmdCArXG5cdFx0XHRcdFx0KCB0aGlzLm9mZnNldFBhcmVudFsgMCBdID09PSB0aGlzLmRvY3VtZW50WyAwIF0uYm9keSA/XG5cdFx0XHRcdFx0XHQwIDpcblx0XHRcdFx0XHRcdHRoaXMub2Zmc2V0UGFyZW50WyAwIF0uc2Nyb2xsTGVmdFxuXHRcdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICFheGlzIHx8IGF4aXMgPT09IFwieVwiICkge1xuXHRcdFx0XHRhbmltYXRpb24udG9wID0gY3VyLnRvcCAtIHRoaXMub2Zmc2V0LnBhcmVudC50b3AgLSB0aGlzLm1hcmdpbnMudG9wICtcblx0XHRcdFx0XHQoIHRoaXMub2Zmc2V0UGFyZW50WyAwIF0gPT09IHRoaXMuZG9jdW1lbnRbIDAgXS5ib2R5ID9cblx0XHRcdFx0XHRcdDAgOlxuXHRcdFx0XHRcdFx0dGhpcy5vZmZzZXRQYXJlbnRbIDAgXS5zY3JvbGxUb3Bcblx0XHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5yZXZlcnRpbmcgPSB0cnVlO1xuXHRcdFx0JCggdGhpcy5oZWxwZXIgKS5hbmltYXRlKFxuXHRcdFx0XHRhbmltYXRpb24sXG5cdFx0XHRcdHBhcnNlSW50KCB0aGlzLm9wdGlvbnMucmV2ZXJ0LCAxMCApIHx8IDUwMCxcblx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dGhhdC5fY2xlYXIoIGV2ZW50ICk7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX2NsZWFyKCBldmVudCwgbm9Qcm9wYWdhdGlvbiApO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblxuXHR9LFxuXG5cdGNhbmNlbDogZnVuY3Rpb24oKSB7XG5cblx0XHRpZiAoIHRoaXMuZHJhZ2dpbmcgKSB7XG5cblx0XHRcdHRoaXMuX21vdXNlVXAoIG5ldyAkLkV2ZW50KCBcIm1vdXNldXBcIiwgeyB0YXJnZXQ6IG51bGwgfSApICk7XG5cblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmhlbHBlciA9PT0gXCJvcmlnaW5hbFwiICkge1xuXHRcdFx0XHR0aGlzLmN1cnJlbnRJdGVtLmNzcyggdGhpcy5fc3RvcmVkQ1NTICk7XG5cdFx0XHRcdHRoaXMuX3JlbW92ZUNsYXNzKCB0aGlzLmN1cnJlbnRJdGVtLCBcInVpLXNvcnRhYmxlLWhlbHBlclwiICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmN1cnJlbnRJdGVtLnNob3coKTtcblx0XHRcdH1cblxuXHRcdFx0Ly9Qb3N0IGRlYWN0aXZhdGluZyBldmVudHMgdG8gY29udGFpbmVyc1xuXHRcdFx0Zm9yICggdmFyIGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7XG5cdFx0XHRcdHRoaXMuY29udGFpbmVyc1sgaSBdLl90cmlnZ2VyKCBcImRlYWN0aXZhdGVcIiwgbnVsbCwgdGhpcy5fdWlIYXNoKCB0aGlzICkgKTtcblx0XHRcdFx0aWYgKCB0aGlzLmNvbnRhaW5lcnNbIGkgXS5jb250YWluZXJDYWNoZS5vdmVyICkge1xuXHRcdFx0XHRcdHRoaXMuY29udGFpbmVyc1sgaSBdLl90cmlnZ2VyKCBcIm91dFwiLCBudWxsLCB0aGlzLl91aUhhc2goIHRoaXMgKSApO1xuXHRcdFx0XHRcdHRoaXMuY29udGFpbmVyc1sgaSBdLmNvbnRhaW5lckNhY2hlLm92ZXIgPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRpZiAoIHRoaXMucGxhY2Vob2xkZXIgKSB7XG5cblx0XHRcdC8vJCh0aGlzLnBsYWNlaG9sZGVyWzBdKS5yZW1vdmUoKTsgd291bGQgaGF2ZSBiZWVuIHRoZSBqUXVlcnkgd2F5IC0gdW5mb3J0dW5hdGVseSxcblx0XHRcdC8vIGl0IHVuYmluZHMgQUxMIGV2ZW50cyBmcm9tIHRoZSBvcmlnaW5hbCBub2RlIVxuXHRcdFx0aWYgKCB0aGlzLnBsYWNlaG9sZGVyWyAwIF0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wbGFjZWhvbGRlclsgMCBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHRoaXMucGxhY2Vob2xkZXJbIDAgXSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuaGVscGVyICE9PSBcIm9yaWdpbmFsXCIgJiYgdGhpcy5oZWxwZXIgJiZcblx0XHRcdFx0XHR0aGlzLmhlbHBlclsgMCBdLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMuaGVscGVyLnJlbW92ZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHQkLmV4dGVuZCggdGhpcywge1xuXHRcdFx0XHRoZWxwZXI6IG51bGwsXG5cdFx0XHRcdGRyYWdnaW5nOiBmYWxzZSxcblx0XHRcdFx0cmV2ZXJ0aW5nOiBmYWxzZSxcblx0XHRcdFx0X25vRmluYWxTb3J0OiBudWxsXG5cdFx0XHR9ICk7XG5cblx0XHRcdGlmICggdGhpcy5kb21Qb3NpdGlvbi5wcmV2ICkge1xuXHRcdFx0XHQkKCB0aGlzLmRvbVBvc2l0aW9uLnByZXYgKS5hZnRlciggdGhpcy5jdXJyZW50SXRlbSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCggdGhpcy5kb21Qb3NpdGlvbi5wYXJlbnQgKS5wcmVwZW5kKCB0aGlzLmN1cnJlbnRJdGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fSxcblxuXHRzZXJpYWxpemU6IGZ1bmN0aW9uKCBvICkge1xuXG5cdFx0dmFyIGl0ZW1zID0gdGhpcy5fZ2V0SXRlbXNBc2pRdWVyeSggbyAmJiBvLmNvbm5lY3RlZCApLFxuXHRcdFx0c3RyID0gW107XG5cdFx0byA9IG8gfHwge307XG5cblx0XHQkKCBpdGVtcyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHJlcyA9ICggJCggby5pdGVtIHx8IHRoaXMgKS5hdHRyKCBvLmF0dHJpYnV0ZSB8fCBcImlkXCIgKSB8fCBcIlwiIClcblx0XHRcdFx0Lm1hdGNoKCBvLmV4cHJlc3Npb24gfHwgKCAvKC4rKVtcXC09X10oLispLyApICk7XG5cdFx0XHRpZiAoIHJlcyApIHtcblx0XHRcdFx0c3RyLnB1c2goXG5cdFx0XHRcdFx0KCBvLmtleSB8fCByZXNbIDEgXSArIFwiW11cIiApICtcblx0XHRcdFx0XHRcIj1cIiArICggby5rZXkgJiYgby5leHByZXNzaW9uID8gcmVzWyAxIF0gOiByZXNbIDIgXSApICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXG5cdFx0aWYgKCAhc3RyLmxlbmd0aCAmJiBvLmtleSApIHtcblx0XHRcdHN0ci5wdXNoKCBvLmtleSArIFwiPVwiICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHN0ci5qb2luKCBcIiZcIiApO1xuXG5cdH0sXG5cblx0dG9BcnJheTogZnVuY3Rpb24oIG8gKSB7XG5cblx0XHR2YXIgaXRlbXMgPSB0aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KCBvICYmIG8uY29ubmVjdGVkICksXG5cdFx0XHRyZXQgPSBbXTtcblxuXHRcdG8gPSBvIHx8IHt9O1xuXG5cdFx0aXRlbXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXQucHVzaCggJCggby5pdGVtIHx8IHRoaXMgKS5hdHRyKCBvLmF0dHJpYnV0ZSB8fCBcImlkXCIgKSB8fCBcIlwiICk7XG5cdFx0fSApO1xuXHRcdHJldHVybiByZXQ7XG5cblx0fSxcblxuXHQvKiBCZSBjYXJlZnVsIHdpdGggdGhlIGZvbGxvd2luZyBjb3JlIGZ1bmN0aW9ucyAqL1xuXHRfaW50ZXJzZWN0c1dpdGg6IGZ1bmN0aW9uKCBpdGVtICkge1xuXG5cdFx0dmFyIHgxID0gdGhpcy5wb3NpdGlvbkFicy5sZWZ0LFxuXHRcdFx0eDIgPSB4MSArIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgsXG5cdFx0XHR5MSA9IHRoaXMucG9zaXRpb25BYnMudG9wLFxuXHRcdFx0eTIgPSB5MSArIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LFxuXHRcdFx0bCA9IGl0ZW0ubGVmdCxcblx0XHRcdHIgPSBsICsgaXRlbS53aWR0aCxcblx0XHRcdHQgPSBpdGVtLnRvcCxcblx0XHRcdGIgPSB0ICsgaXRlbS5oZWlnaHQsXG5cdFx0XHRkeUNsaWNrID0gdGhpcy5vZmZzZXQuY2xpY2sudG9wLFxuXHRcdFx0ZHhDbGljayA9IHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQsXG5cdFx0XHRpc092ZXJFbGVtZW50SGVpZ2h0ID0gKCB0aGlzLm9wdGlvbnMuYXhpcyA9PT0gXCJ4XCIgKSB8fCAoICggeTEgKyBkeUNsaWNrICkgPiB0ICYmXG5cdFx0XHRcdCggeTEgKyBkeUNsaWNrICkgPCBiICksXG5cdFx0XHRpc092ZXJFbGVtZW50V2lkdGggPSAoIHRoaXMub3B0aW9ucy5heGlzID09PSBcInlcIiApIHx8ICggKCB4MSArIGR4Q2xpY2sgKSA+IGwgJiZcblx0XHRcdFx0KCB4MSArIGR4Q2xpY2sgKSA8IHIgKSxcblx0XHRcdGlzT3ZlckVsZW1lbnQgPSBpc092ZXJFbGVtZW50SGVpZ2h0ICYmIGlzT3ZlckVsZW1lbnRXaWR0aDtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLnRvbGVyYW5jZSA9PT0gXCJwb2ludGVyXCIgfHxcblx0XHRcdHRoaXMub3B0aW9ucy5mb3JjZVBvaW50ZXJGb3JDb250YWluZXJzIHx8XG5cdFx0XHQoIHRoaXMub3B0aW9ucy50b2xlcmFuY2UgIT09IFwicG9pbnRlclwiICYmXG5cdFx0XHRcdHRoaXMuaGVscGVyUHJvcG9ydGlvbnNbIHRoaXMuZmxvYXRpbmcgPyBcIndpZHRoXCIgOiBcImhlaWdodFwiIF0gPlxuXHRcdFx0XHRpdGVtWyB0aGlzLmZsb2F0aW5nID8gXCJ3aWR0aFwiIDogXCJoZWlnaHRcIiBdIClcblx0XHQpIHtcblx0XHRcdHJldHVybiBpc092ZXJFbGVtZW50O1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHJldHVybiAoIGwgPCB4MSArICggdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAvIDIgKSAmJiAvLyBSaWdodCBIYWxmXG5cdFx0XHRcdHgyIC0gKCB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC8gMiApIDwgciAmJiAvLyBMZWZ0IEhhbGZcblx0XHRcdFx0dCA8IHkxICsgKCB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAvIDIgKSAmJiAvLyBCb3R0b20gSGFsZlxuXHRcdFx0XHR5MiAtICggdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLyAyICkgPCBiICk7IC8vIFRvcCBIYWxmXG5cblx0XHR9XG5cdH0sXG5cblx0X2ludGVyc2VjdHNXaXRoUG9pbnRlcjogZnVuY3Rpb24oIGl0ZW0gKSB7XG5cdFx0dmFyIHZlcnRpY2FsRGlyZWN0aW9uLCBob3Jpem9udGFsRGlyZWN0aW9uLFxuXHRcdFx0aXNPdmVyRWxlbWVudEhlaWdodCA9ICggdGhpcy5vcHRpb25zLmF4aXMgPT09IFwieFwiICkgfHxcblx0XHRcdFx0dGhpcy5faXNPdmVyQXhpcyhcblx0XHRcdFx0XHR0aGlzLnBvc2l0aW9uQWJzLnRvcCArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCwgaXRlbS50b3AsIGl0ZW0uaGVpZ2h0ICksXG5cdFx0XHRpc092ZXJFbGVtZW50V2lkdGggPSAoIHRoaXMub3B0aW9ucy5heGlzID09PSBcInlcIiApIHx8XG5cdFx0XHRcdHRoaXMuX2lzT3ZlckF4aXMoXG5cdFx0XHRcdFx0dGhpcy5wb3NpdGlvbkFicy5sZWZ0ICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdCwgaXRlbS5sZWZ0LCBpdGVtLndpZHRoICksXG5cdFx0XHRpc092ZXJFbGVtZW50ID0gaXNPdmVyRWxlbWVudEhlaWdodCAmJiBpc092ZXJFbGVtZW50V2lkdGg7XG5cblx0XHRpZiAoICFpc092ZXJFbGVtZW50ICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHZlcnRpY2FsRGlyZWN0aW9uID0gdGhpcy5fZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uKCk7XG5cdFx0aG9yaXpvbnRhbERpcmVjdGlvbiA9IHRoaXMuX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uKCk7XG5cblx0XHRyZXR1cm4gdGhpcy5mbG9hdGluZyA/XG5cdFx0XHQoICggaG9yaXpvbnRhbERpcmVjdGlvbiA9PT0gXCJyaWdodFwiIHx8IHZlcnRpY2FsRGlyZWN0aW9uID09PSBcImRvd25cIiApID8gMiA6IDEgKVxuXHRcdFx0OiAoIHZlcnRpY2FsRGlyZWN0aW9uICYmICggdmVydGljYWxEaXJlY3Rpb24gPT09IFwiZG93blwiID8gMiA6IDEgKSApO1xuXG5cdH0sXG5cblx0X2ludGVyc2VjdHNXaXRoU2lkZXM6IGZ1bmN0aW9uKCBpdGVtICkge1xuXG5cdFx0dmFyIGlzT3ZlckJvdHRvbUhhbGYgPSB0aGlzLl9pc092ZXJBeGlzKCB0aGlzLnBvc2l0aW9uQWJzLnRvcCArXG5cdFx0XHRcdHRoaXMub2Zmc2V0LmNsaWNrLnRvcCwgaXRlbS50b3AgKyAoIGl0ZW0uaGVpZ2h0IC8gMiApLCBpdGVtLmhlaWdodCApLFxuXHRcdFx0aXNPdmVyUmlnaHRIYWxmID0gdGhpcy5faXNPdmVyQXhpcyggdGhpcy5wb3NpdGlvbkFicy5sZWZ0ICtcblx0XHRcdFx0dGhpcy5vZmZzZXQuY2xpY2subGVmdCwgaXRlbS5sZWZ0ICsgKCBpdGVtLndpZHRoIC8gMiApLCBpdGVtLndpZHRoICksXG5cdFx0XHR2ZXJ0aWNhbERpcmVjdGlvbiA9IHRoaXMuX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbigpLFxuXHRcdFx0aG9yaXpvbnRhbERpcmVjdGlvbiA9IHRoaXMuX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uKCk7XG5cblx0XHRpZiAoIHRoaXMuZmxvYXRpbmcgJiYgaG9yaXpvbnRhbERpcmVjdGlvbiApIHtcblx0XHRcdHJldHVybiAoICggaG9yaXpvbnRhbERpcmVjdGlvbiA9PT0gXCJyaWdodFwiICYmIGlzT3ZlclJpZ2h0SGFsZiApIHx8XG5cdFx0XHRcdCggaG9yaXpvbnRhbERpcmVjdGlvbiA9PT0gXCJsZWZ0XCIgJiYgIWlzT3ZlclJpZ2h0SGFsZiApICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB2ZXJ0aWNhbERpcmVjdGlvbiAmJiAoICggdmVydGljYWxEaXJlY3Rpb24gPT09IFwiZG93blwiICYmIGlzT3ZlckJvdHRvbUhhbGYgKSB8fFxuXHRcdFx0XHQoIHZlcnRpY2FsRGlyZWN0aW9uID09PSBcInVwXCIgJiYgIWlzT3ZlckJvdHRvbUhhbGYgKSApO1xuXHRcdH1cblxuXHR9LFxuXG5cdF9nZXREcmFnVmVydGljYWxEaXJlY3Rpb246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBkZWx0YSA9IHRoaXMucG9zaXRpb25BYnMudG9wIC0gdGhpcy5sYXN0UG9zaXRpb25BYnMudG9wO1xuXHRcdHJldHVybiBkZWx0YSAhPT0gMCAmJiAoIGRlbHRhID4gMCA/IFwiZG93blwiIDogXCJ1cFwiICk7XG5cdH0sXG5cblx0X2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZGVsdGEgPSB0aGlzLnBvc2l0aW9uQWJzLmxlZnQgLSB0aGlzLmxhc3RQb3NpdGlvbkFicy5sZWZ0O1xuXHRcdHJldHVybiBkZWx0YSAhPT0gMCAmJiAoIGRlbHRhID4gMCA/IFwicmlnaHRcIiA6IFwibGVmdFwiICk7XG5cdH0sXG5cblx0cmVmcmVzaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHRoaXMuX3JlZnJlc2hJdGVtcyggZXZlbnQgKTtcblx0XHR0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKTtcblx0XHR0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRfY29ubmVjdFdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXHRcdHJldHVybiBvcHRpb25zLmNvbm5lY3RXaXRoLmNvbnN0cnVjdG9yID09PSBTdHJpbmcgP1xuXHRcdFx0WyBvcHRpb25zLmNvbm5lY3RXaXRoIF0gOlxuXHRcdFx0b3B0aW9ucy5jb25uZWN0V2l0aDtcblx0fSxcblxuXHRfZ2V0SXRlbXNBc2pRdWVyeTogZnVuY3Rpb24oIGNvbm5lY3RlZCApIHtcblxuXHRcdHZhciBpLCBqLCBjdXIsIGluc3QsXG5cdFx0XHRpdGVtcyA9IFtdLFxuXHRcdFx0cXVlcmllcyA9IFtdLFxuXHRcdFx0Y29ubmVjdFdpdGggPSB0aGlzLl9jb25uZWN0V2l0aCgpO1xuXG5cdFx0aWYgKCBjb25uZWN0V2l0aCAmJiBjb25uZWN0ZWQgKSB7XG5cdFx0XHRmb3IgKCBpID0gY29ubmVjdFdpdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7XG5cdFx0XHRcdGN1ciA9ICQoIGNvbm5lY3RXaXRoWyBpIF0sIHRoaXMuZG9jdW1lbnRbIDAgXSApO1xuXHRcdFx0XHRmb3IgKCBqID0gY3VyLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tICkge1xuXHRcdFx0XHRcdGluc3QgPSAkLmRhdGEoIGN1clsgaiBdLCB0aGlzLndpZGdldEZ1bGxOYW1lICk7XG5cdFx0XHRcdFx0aWYgKCBpbnN0ICYmIGluc3QgIT09IHRoaXMgJiYgIWluc3Qub3B0aW9ucy5kaXNhYmxlZCApIHtcblx0XHRcdFx0XHRcdHF1ZXJpZXMucHVzaCggWyAkLmlzRnVuY3Rpb24oIGluc3Qub3B0aW9ucy5pdGVtcyApID9cblx0XHRcdFx0XHRcdFx0aW5zdC5vcHRpb25zLml0ZW1zLmNhbGwoIGluc3QuZWxlbWVudCApIDpcblx0XHRcdFx0XHRcdFx0JCggaW5zdC5vcHRpb25zLml0ZW1zLCBpbnN0LmVsZW1lbnQgKVxuXHRcdFx0XHRcdFx0XHRcdC5ub3QoIFwiLnVpLXNvcnRhYmxlLWhlbHBlclwiIClcblx0XHRcdFx0XHRcdFx0XHQubm90KCBcIi51aS1zb3J0YWJsZS1wbGFjZWhvbGRlclwiICksIGluc3QgXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHF1ZXJpZXMucHVzaCggWyAkLmlzRnVuY3Rpb24oIHRoaXMub3B0aW9ucy5pdGVtcyApID9cblx0XHRcdHRoaXMub3B0aW9ucy5pdGVtc1xuXHRcdFx0XHQuY2FsbCggdGhpcy5lbGVtZW50LCBudWxsLCB7IG9wdGlvbnM6IHRoaXMub3B0aW9ucywgaXRlbTogdGhpcy5jdXJyZW50SXRlbSB9ICkgOlxuXHRcdFx0JCggdGhpcy5vcHRpb25zLml0ZW1zLCB0aGlzLmVsZW1lbnQgKVxuXHRcdFx0XHQubm90KCBcIi51aS1zb3J0YWJsZS1oZWxwZXJcIiApXG5cdFx0XHRcdC5ub3QoIFwiLnVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyXCIgKSwgdGhpcyBdICk7XG5cblx0XHRmdW5jdGlvbiBhZGRJdGVtcygpIHtcblx0XHRcdGl0ZW1zLnB1c2goIHRoaXMgKTtcblx0XHR9XG5cdFx0Zm9yICggaSA9IHF1ZXJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7XG5cdFx0XHRxdWVyaWVzWyBpIF1bIDAgXS5lYWNoKCBhZGRJdGVtcyApO1xuXHRcdH1cblxuXHRcdHJldHVybiAkKCBpdGVtcyApO1xuXG5cdH0sXG5cblx0X3JlbW92ZUN1cnJlbnRzRnJvbUl0ZW1zOiBmdW5jdGlvbigpIHtcblxuXHRcdHZhciBsaXN0ID0gdGhpcy5jdXJyZW50SXRlbS5maW5kKCBcIjpkYXRhKFwiICsgdGhpcy53aWRnZXROYW1lICsgXCItaXRlbSlcIiApO1xuXG5cdFx0dGhpcy5pdGVtcyA9ICQuZ3JlcCggdGhpcy5pdGVtcywgZnVuY3Rpb24oIGl0ZW0gKSB7XG5cdFx0XHRmb3IgKCB2YXIgaiA9IDA7IGogPCBsaXN0Lmxlbmd0aDsgaisrICkge1xuXHRcdFx0XHRpZiAoIGxpc3RbIGogXSA9PT0gaXRlbS5pdGVtWyAwIF0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9ICk7XG5cblx0fSxcblxuXHRfcmVmcmVzaEl0ZW1zOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cblx0XHR0aGlzLml0ZW1zID0gW107XG5cdFx0dGhpcy5jb250YWluZXJzID0gWyB0aGlzIF07XG5cblx0XHR2YXIgaSwgaiwgY3VyLCBpbnN0LCB0YXJnZXREYXRhLCBfcXVlcmllcywgaXRlbSwgcXVlcmllc0xlbmd0aCxcblx0XHRcdGl0ZW1zID0gdGhpcy5pdGVtcyxcblx0XHRcdHF1ZXJpZXMgPSBbIFsgJC5pc0Z1bmN0aW9uKCB0aGlzLm9wdGlvbnMuaXRlbXMgKSA/XG5cdFx0XHRcdHRoaXMub3B0aW9ucy5pdGVtcy5jYWxsKCB0aGlzLmVsZW1lbnRbIDAgXSwgZXZlbnQsIHsgaXRlbTogdGhpcy5jdXJyZW50SXRlbSB9ICkgOlxuXHRcdFx0XHQkKCB0aGlzLm9wdGlvbnMuaXRlbXMsIHRoaXMuZWxlbWVudCApLCB0aGlzIF0gXSxcblx0XHRcdGNvbm5lY3RXaXRoID0gdGhpcy5fY29ubmVjdFdpdGgoKTtcblxuXHRcdC8vU2hvdWxkbid0IGJlIHJ1biB0aGUgZmlyc3QgdGltZSB0aHJvdWdoIGR1ZSB0byBtYXNzaXZlIHNsb3ctZG93blxuXHRcdGlmICggY29ubmVjdFdpdGggJiYgdGhpcy5yZWFkeSApIHtcblx0XHRcdGZvciAoIGkgPSBjb25uZWN0V2l0aC5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHtcblx0XHRcdFx0Y3VyID0gJCggY29ubmVjdFdpdGhbIGkgXSwgdGhpcy5kb2N1bWVudFsgMCBdICk7XG5cdFx0XHRcdGZvciAoIGogPSBjdXIubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0gKSB7XG5cdFx0XHRcdFx0aW5zdCA9ICQuZGF0YSggY3VyWyBqIF0sIHRoaXMud2lkZ2V0RnVsbE5hbWUgKTtcblx0XHRcdFx0XHRpZiAoIGluc3QgJiYgaW5zdCAhPT0gdGhpcyAmJiAhaW5zdC5vcHRpb25zLmRpc2FibGVkICkge1xuXHRcdFx0XHRcdFx0cXVlcmllcy5wdXNoKCBbICQuaXNGdW5jdGlvbiggaW5zdC5vcHRpb25zLml0ZW1zICkgP1xuXHRcdFx0XHRcdFx0XHRpbnN0Lm9wdGlvbnMuaXRlbXNcblx0XHRcdFx0XHRcdFx0XHQuY2FsbCggaW5zdC5lbGVtZW50WyAwIF0sIGV2ZW50LCB7IGl0ZW06IHRoaXMuY3VycmVudEl0ZW0gfSApIDpcblx0XHRcdFx0XHRcdFx0JCggaW5zdC5vcHRpb25zLml0ZW1zLCBpbnN0LmVsZW1lbnQgKSwgaW5zdCBdICk7XG5cdFx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lcnMucHVzaCggaW5zdCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvciAoIGkgPSBxdWVyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tICkge1xuXHRcdFx0dGFyZ2V0RGF0YSA9IHF1ZXJpZXNbIGkgXVsgMSBdO1xuXHRcdFx0X3F1ZXJpZXMgPSBxdWVyaWVzWyBpIF1bIDAgXTtcblxuXHRcdFx0Zm9yICggaiA9IDAsIHF1ZXJpZXNMZW5ndGggPSBfcXVlcmllcy5sZW5ndGg7IGogPCBxdWVyaWVzTGVuZ3RoOyBqKysgKSB7XG5cdFx0XHRcdGl0ZW0gPSAkKCBfcXVlcmllc1sgaiBdICk7XG5cblx0XHRcdFx0Ly8gRGF0YSBmb3IgdGFyZ2V0IGNoZWNraW5nIChtb3VzZSBtYW5hZ2VyKVxuXHRcdFx0XHRpdGVtLmRhdGEoIHRoaXMud2lkZ2V0TmFtZSArIFwiLWl0ZW1cIiwgdGFyZ2V0RGF0YSApO1xuXG5cdFx0XHRcdGl0ZW1zLnB1c2goIHtcblx0XHRcdFx0XHRpdGVtOiBpdGVtLFxuXHRcdFx0XHRcdGluc3RhbmNlOiB0YXJnZXREYXRhLFxuXHRcdFx0XHRcdHdpZHRoOiAwLCBoZWlnaHQ6IDAsXG5cdFx0XHRcdFx0bGVmdDogMCwgdG9wOiAwXG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0fSxcblxuXHRyZWZyZXNoUG9zaXRpb25zOiBmdW5jdGlvbiggZmFzdCApIHtcblxuXHRcdC8vIERldGVybWluZSB3aGV0aGVyIGl0ZW1zIGFyZSBiZWluZyBkaXNwbGF5ZWQgaG9yaXpvbnRhbGx5XG5cdFx0dGhpcy5mbG9hdGluZyA9IHRoaXMuaXRlbXMubGVuZ3RoID9cblx0XHRcdHRoaXMub3B0aW9ucy5heGlzID09PSBcInhcIiB8fCB0aGlzLl9pc0Zsb2F0aW5nKCB0aGlzLml0ZW1zWyAwIF0uaXRlbSApIDpcblx0XHRcdGZhbHNlO1xuXG5cdFx0Ly9UaGlzIGhhcyB0byBiZSByZWRvbmUgYmVjYXVzZSBkdWUgdG8gdGhlIGl0ZW0gYmVpbmcgbW92ZWQgb3V0L2ludG8gdGhlIG9mZnNldFBhcmVudCxcblx0XHQvLyB0aGUgb2Zmc2V0UGFyZW50J3MgcG9zaXRpb24gd2lsbCBjaGFuZ2Vcblx0XHRpZiAoIHRoaXMub2Zmc2V0UGFyZW50ICYmIHRoaXMuaGVscGVyICkge1xuXHRcdFx0dGhpcy5vZmZzZXQucGFyZW50ID0gdGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCk7XG5cdFx0fVxuXG5cdFx0dmFyIGksIGl0ZW0sIHQsIHA7XG5cblx0XHRmb3IgKCBpID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHtcblx0XHRcdGl0ZW0gPSB0aGlzLml0ZW1zWyBpIF07XG5cblx0XHRcdC8vV2UgaWdub3JlIGNhbGN1bGF0aW5nIHBvc2l0aW9ucyBvZiBhbGwgY29ubmVjdGVkIGNvbnRhaW5lcnMgd2hlbiB3ZSdyZSBub3Qgb3ZlciB0aGVtXG5cdFx0XHRpZiAoIGl0ZW0uaW5zdGFuY2UgIT09IHRoaXMuY3VycmVudENvbnRhaW5lciAmJiB0aGlzLmN1cnJlbnRDb250YWluZXIgJiZcblx0XHRcdFx0XHRpdGVtLml0ZW1bIDAgXSAhPT0gdGhpcy5jdXJyZW50SXRlbVsgMCBdICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0dCA9IHRoaXMub3B0aW9ucy50b2xlcmFuY2VFbGVtZW50ID9cblx0XHRcdFx0JCggdGhpcy5vcHRpb25zLnRvbGVyYW5jZUVsZW1lbnQsIGl0ZW0uaXRlbSApIDpcblx0XHRcdFx0aXRlbS5pdGVtO1xuXG5cdFx0XHRpZiAoICFmYXN0ICkge1xuXHRcdFx0XHRpdGVtLndpZHRoID0gdC5vdXRlcldpZHRoKCk7XG5cdFx0XHRcdGl0ZW0uaGVpZ2h0ID0gdC5vdXRlckhlaWdodCgpO1xuXHRcdFx0fVxuXG5cdFx0XHRwID0gdC5vZmZzZXQoKTtcblx0XHRcdGl0ZW0ubGVmdCA9IHAubGVmdDtcblx0XHRcdGl0ZW0udG9wID0gcC50b3A7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuY3VzdG9tICYmIHRoaXMub3B0aW9ucy5jdXN0b20ucmVmcmVzaENvbnRhaW5lcnMgKSB7XG5cdFx0XHR0aGlzLm9wdGlvbnMuY3VzdG9tLnJlZnJlc2hDb250YWluZXJzLmNhbGwoIHRoaXMgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICggaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHtcblx0XHRcdFx0cCA9IHRoaXMuY29udGFpbmVyc1sgaSBdLmVsZW1lbnQub2Zmc2V0KCk7XG5cdFx0XHRcdHRoaXMuY29udGFpbmVyc1sgaSBdLmNvbnRhaW5lckNhY2hlLmxlZnQgPSBwLmxlZnQ7XG5cdFx0XHRcdHRoaXMuY29udGFpbmVyc1sgaSBdLmNvbnRhaW5lckNhY2hlLnRvcCA9IHAudG9wO1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lcnNbIGkgXS5jb250YWluZXJDYWNoZS53aWR0aCA9XG5cdFx0XHRcdFx0dGhpcy5jb250YWluZXJzWyBpIF0uZWxlbWVudC5vdXRlcldpZHRoKCk7XG5cdFx0XHRcdHRoaXMuY29udGFpbmVyc1sgaSBdLmNvbnRhaW5lckNhY2hlLmhlaWdodCA9XG5cdFx0XHRcdFx0dGhpcy5jb250YWluZXJzWyBpIF0uZWxlbWVudC5vdXRlckhlaWdodCgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdF9jcmVhdGVQbGFjZWhvbGRlcjogZnVuY3Rpb24oIHRoYXQgKSB7XG5cdFx0dGhhdCA9IHRoYXQgfHwgdGhpcztcblx0XHR2YXIgY2xhc3NOYW1lLFxuXHRcdFx0byA9IHRoYXQub3B0aW9ucztcblxuXHRcdGlmICggIW8ucGxhY2Vob2xkZXIgfHwgby5wbGFjZWhvbGRlci5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nICkge1xuXHRcdFx0Y2xhc3NOYW1lID0gby5wbGFjZWhvbGRlcjtcblx0XHRcdG8ucGxhY2Vob2xkZXIgPSB7XG5cdFx0XHRcdGVsZW1lbnQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0dmFyIG5vZGVOYW1lID0gdGhhdC5jdXJyZW50SXRlbVsgMCBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHRlbGVtZW50ID0gJCggXCI8XCIgKyBub2RlTmFtZSArIFwiPlwiLCB0aGF0LmRvY3VtZW50WyAwIF0gKTtcblxuXHRcdFx0XHRcdFx0dGhhdC5fYWRkQ2xhc3MoIGVsZW1lbnQsIFwidWktc29ydGFibGUtcGxhY2Vob2xkZXJcIixcblx0XHRcdFx0XHRcdFx0XHRjbGFzc05hbWUgfHwgdGhhdC5jdXJyZW50SXRlbVsgMCBdLmNsYXNzTmFtZSApXG5cdFx0XHRcdFx0XHRcdC5fcmVtb3ZlQ2xhc3MoIGVsZW1lbnQsIFwidWktc29ydGFibGUtaGVscGVyXCIgKTtcblxuXHRcdFx0XHRcdGlmICggbm9kZU5hbWUgPT09IFwidGJvZHlcIiApIHtcblx0XHRcdFx0XHRcdHRoYXQuX2NyZWF0ZVRyUGxhY2Vob2xkZXIoXG5cdFx0XHRcdFx0XHRcdHRoYXQuY3VycmVudEl0ZW0uZmluZCggXCJ0clwiICkuZXEoIDAgKSxcblx0XHRcdFx0XHRcdFx0JCggXCI8dHI+XCIsIHRoYXQuZG9jdW1lbnRbIDAgXSApLmFwcGVuZFRvKCBlbGVtZW50IClcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggbm9kZU5hbWUgPT09IFwidHJcIiApIHtcblx0XHRcdFx0XHRcdHRoYXQuX2NyZWF0ZVRyUGxhY2Vob2xkZXIoIHRoYXQuY3VycmVudEl0ZW0sIGVsZW1lbnQgKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBub2RlTmFtZSA9PT0gXCJpbWdcIiApIHtcblx0XHRcdFx0XHRcdGVsZW1lbnQuYXR0ciggXCJzcmNcIiwgdGhhdC5jdXJyZW50SXRlbS5hdHRyKCBcInNyY1wiICkgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoICFjbGFzc05hbWUgKSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50LmNzcyggXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gZWxlbWVudDtcblx0XHRcdFx0fSxcblx0XHRcdFx0dXBkYXRlOiBmdW5jdGlvbiggY29udGFpbmVyLCBwICkge1xuXG5cdFx0XHRcdFx0Ly8gMS4gSWYgYSBjbGFzc05hbWUgaXMgc2V0IGFzICdwbGFjZWhvbGRlciBvcHRpb24sIHdlIGRvbid0IGZvcmNlIHNpemVzIC1cblx0XHRcdFx0XHQvLyB0aGUgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoYXRcblx0XHRcdFx0XHQvLyAyLiBUaGUgb3B0aW9uICdmb3JjZVBsYWNlaG9sZGVyU2l6ZSBjYW4gYmUgZW5hYmxlZCB0byBmb3JjZSBpdCBldmVuIGlmIGFcblx0XHRcdFx0XHQvLyBjbGFzcyBuYW1lIGlzIHNwZWNpZmllZFxuXHRcdFx0XHRcdGlmICggY2xhc3NOYW1lICYmICFvLmZvcmNlUGxhY2Vob2xkZXJTaXplICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vSWYgdGhlIGVsZW1lbnQgZG9lc24ndCBoYXZlIGEgYWN0dWFsIGhlaWdodCBieSBpdHNlbGYgKHdpdGhvdXQgc3R5bGVzIGNvbWluZ1xuXHRcdFx0XHRcdC8vIGZyb20gYSBzdHlsZXNoZWV0KSwgaXQgcmVjZWl2ZXMgdGhlIGlubGluZSBoZWlnaHQgZnJvbSB0aGUgZHJhZ2dlZCBpdGVtXG5cdFx0XHRcdFx0aWYgKCAhcC5oZWlnaHQoKSApIHtcblx0XHRcdFx0XHRcdHAuaGVpZ2h0KFxuXHRcdFx0XHRcdFx0XHR0aGF0LmN1cnJlbnRJdGVtLmlubmVySGVpZ2h0KCkgLVxuXHRcdFx0XHRcdFx0XHRwYXJzZUludCggdGhhdC5jdXJyZW50SXRlbS5jc3MoIFwicGFkZGluZ1RvcFwiICkgfHwgMCwgMTAgKSAtXG5cdFx0XHRcdFx0XHRcdHBhcnNlSW50KCB0aGF0LmN1cnJlbnRJdGVtLmNzcyggXCJwYWRkaW5nQm90dG9tXCIgKSB8fCAwLCAxMCApICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggIXAud2lkdGgoKSApIHtcblx0XHRcdFx0XHRcdHAud2lkdGgoXG5cdFx0XHRcdFx0XHRcdHRoYXQuY3VycmVudEl0ZW0uaW5uZXJXaWR0aCgpIC1cblx0XHRcdFx0XHRcdFx0cGFyc2VJbnQoIHRoYXQuY3VycmVudEl0ZW0uY3NzKCBcInBhZGRpbmdMZWZ0XCIgKSB8fCAwLCAxMCApIC1cblx0XHRcdFx0XHRcdFx0cGFyc2VJbnQoIHRoYXQuY3VycmVudEl0ZW0uY3NzKCBcInBhZGRpbmdSaWdodFwiICkgfHwgMCwgMTAgKSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHQvL0NyZWF0ZSB0aGUgcGxhY2Vob2xkZXJcblx0XHR0aGF0LnBsYWNlaG9sZGVyID0gJCggby5wbGFjZWhvbGRlci5lbGVtZW50LmNhbGwoIHRoYXQuZWxlbWVudCwgdGhhdC5jdXJyZW50SXRlbSApICk7XG5cblx0XHQvL0FwcGVuZCBpdCBhZnRlciB0aGUgYWN0dWFsIGN1cnJlbnQgaXRlbVxuXHRcdHRoYXQuY3VycmVudEl0ZW0uYWZ0ZXIoIHRoYXQucGxhY2Vob2xkZXIgKTtcblxuXHRcdC8vVXBkYXRlIHRoZSBzaXplIG9mIHRoZSBwbGFjZWhvbGRlciAoVE9ETzogTG9naWMgdG8gZnV6enksIHNlZSBsaW5lIDMxNi8zMTcpXG5cdFx0by5wbGFjZWhvbGRlci51cGRhdGUoIHRoYXQsIHRoYXQucGxhY2Vob2xkZXIgKTtcblxuXHR9LFxuXG5cdF9jcmVhdGVUclBsYWNlaG9sZGVyOiBmdW5jdGlvbiggc291cmNlVHIsIHRhcmdldFRyICkge1xuXHRcdHZhciB0aGF0ID0gdGhpcztcblxuXHRcdHNvdXJjZVRyLmNoaWxkcmVuKCkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCBcIjx0ZD4mIzE2MDs8L3RkPlwiLCB0aGF0LmRvY3VtZW50WyAwIF0gKVxuXHRcdFx0XHQuYXR0ciggXCJjb2xzcGFuXCIsICQoIHRoaXMgKS5hdHRyKCBcImNvbHNwYW5cIiApIHx8IDEgKVxuXHRcdFx0XHQuYXBwZW5kVG8oIHRhcmdldFRyICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdF9jb250YWN0Q29udGFpbmVyczogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBpLCBqLCBkaXN0LCBpdGVtV2l0aExlYXN0RGlzdGFuY2UsIHBvc1Byb3BlcnR5LCBzaXplUHJvcGVydHksIGN1ciwgbmVhckJvdHRvbSxcblx0XHRcdGZsb2F0aW5nLCBheGlzLFxuXHRcdFx0aW5uZXJtb3N0Q29udGFpbmVyID0gbnVsbCxcblx0XHRcdGlubmVybW9zdEluZGV4ID0gbnVsbDtcblxuXHRcdC8vIEdldCBpbm5lcm1vc3QgY29udGFpbmVyIHRoYXQgaW50ZXJzZWN0cyB3aXRoIGl0ZW1cblx0XHRmb3IgKCBpID0gdGhpcy5jb250YWluZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tICkge1xuXG5cdFx0XHQvLyBOZXZlciBjb25zaWRlciBhIGNvbnRhaW5lciB0aGF0J3MgbG9jYXRlZCB3aXRoaW4gdGhlIGl0ZW0gaXRzZWxmXG5cdFx0XHRpZiAoICQuY29udGFpbnMoIHRoaXMuY3VycmVudEl0ZW1bIDAgXSwgdGhpcy5jb250YWluZXJzWyBpIF0uZWxlbWVudFsgMCBdICkgKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHRoaXMuX2ludGVyc2VjdHNXaXRoKCB0aGlzLmNvbnRhaW5lcnNbIGkgXS5jb250YWluZXJDYWNoZSApICkge1xuXG5cdFx0XHRcdC8vIElmIHdlJ3ZlIGFscmVhZHkgZm91bmQgYSBjb250YWluZXIgYW5kIGl0J3MgbW9yZSBcImlubmVyXCIgdGhhbiB0aGlzLCB0aGVuIGNvbnRpbnVlXG5cdFx0XHRcdGlmICggaW5uZXJtb3N0Q29udGFpbmVyICYmXG5cdFx0XHRcdFx0XHQkLmNvbnRhaW5zKFxuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lcnNbIGkgXS5lbGVtZW50WyAwIF0sXG5cdFx0XHRcdFx0XHRcdGlubmVybW9zdENvbnRhaW5lci5lbGVtZW50WyAwIF0gKSApIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlubmVybW9zdENvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyc1sgaSBdO1xuXHRcdFx0XHRpbm5lcm1vc3RJbmRleCA9IGk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gY29udGFpbmVyIGRvZXNuJ3QgaW50ZXJzZWN0LiB0cmlnZ2VyIFwib3V0XCIgZXZlbnQgaWYgbmVjZXNzYXJ5XG5cdFx0XHRcdGlmICggdGhpcy5jb250YWluZXJzWyBpIF0uY29udGFpbmVyQ2FjaGUub3ZlciApIHtcblx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lcnNbIGkgXS5fdHJpZ2dlciggXCJvdXRcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCggdGhpcyApICk7XG5cdFx0XHRcdFx0dGhpcy5jb250YWluZXJzWyBpIF0uY29udGFpbmVyQ2FjaGUub3ZlciA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdC8vIElmIG5vIGludGVyc2VjdGluZyBjb250YWluZXJzIGZvdW5kLCByZXR1cm5cblx0XHRpZiAoICFpbm5lcm1vc3RDb250YWluZXIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTW92ZSB0aGUgaXRlbSBpbnRvIHRoZSBjb250YWluZXIgaWYgaXQncyBub3QgdGhlcmUgYWxyZWFkeVxuXHRcdGlmICggdGhpcy5jb250YWluZXJzLmxlbmd0aCA9PT0gMSApIHtcblx0XHRcdGlmICggIXRoaXMuY29udGFpbmVyc1sgaW5uZXJtb3N0SW5kZXggXS5jb250YWluZXJDYWNoZS5vdmVyICkge1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lcnNbIGlubmVybW9zdEluZGV4IF0uX3RyaWdnZXIoIFwib3ZlclwiLCBldmVudCwgdGhpcy5fdWlIYXNoKCB0aGlzICkgKTtcblx0XHRcdFx0dGhpcy5jb250YWluZXJzWyBpbm5lcm1vc3RJbmRleCBdLmNvbnRhaW5lckNhY2hlLm92ZXIgPSAxO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIFdoZW4gZW50ZXJpbmcgYSBuZXcgY29udGFpbmVyLCB3ZSB3aWxsIGZpbmQgdGhlIGl0ZW0gd2l0aCB0aGUgbGVhc3QgZGlzdGFuY2UgYW5kXG5cdFx0XHQvLyBhcHBlbmQgb3VyIGl0ZW0gbmVhciBpdFxuXHRcdFx0ZGlzdCA9IDEwMDAwO1xuXHRcdFx0aXRlbVdpdGhMZWFzdERpc3RhbmNlID0gbnVsbDtcblx0XHRcdGZsb2F0aW5nID0gaW5uZXJtb3N0Q29udGFpbmVyLmZsb2F0aW5nIHx8IHRoaXMuX2lzRmxvYXRpbmcoIHRoaXMuY3VycmVudEl0ZW0gKTtcblx0XHRcdHBvc1Byb3BlcnR5ID0gZmxvYXRpbmcgPyBcImxlZnRcIiA6IFwidG9wXCI7XG5cdFx0XHRzaXplUHJvcGVydHkgPSBmbG9hdGluZyA/IFwid2lkdGhcIiA6IFwiaGVpZ2h0XCI7XG5cdFx0XHRheGlzID0gZmxvYXRpbmcgPyBcInBhZ2VYXCIgOiBcInBhZ2VZXCI7XG5cblx0XHRcdGZvciAoIGogPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tICkge1xuXHRcdFx0XHRpZiAoICEkLmNvbnRhaW5zKFxuXHRcdFx0XHRcdFx0dGhpcy5jb250YWluZXJzWyBpbm5lcm1vc3RJbmRleCBdLmVsZW1lbnRbIDAgXSwgdGhpcy5pdGVtc1sgaiBdLml0ZW1bIDAgXSApXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggdGhpcy5pdGVtc1sgaiBdLml0ZW1bIDAgXSA9PT0gdGhpcy5jdXJyZW50SXRlbVsgMCBdICkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y3VyID0gdGhpcy5pdGVtc1sgaiBdLml0ZW0ub2Zmc2V0KClbIHBvc1Byb3BlcnR5IF07XG5cdFx0XHRcdG5lYXJCb3R0b20gPSBmYWxzZTtcblx0XHRcdFx0aWYgKCBldmVudFsgYXhpcyBdIC0gY3VyID4gdGhpcy5pdGVtc1sgaiBdWyBzaXplUHJvcGVydHkgXSAvIDIgKSB7XG5cdFx0XHRcdFx0bmVhckJvdHRvbSA9IHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIE1hdGguYWJzKCBldmVudFsgYXhpcyBdIC0gY3VyICkgPCBkaXN0ICkge1xuXHRcdFx0XHRcdGRpc3QgPSBNYXRoLmFicyggZXZlbnRbIGF4aXMgXSAtIGN1ciApO1xuXHRcdFx0XHRcdGl0ZW1XaXRoTGVhc3REaXN0YW5jZSA9IHRoaXMuaXRlbXNbIGogXTtcblx0XHRcdFx0XHR0aGlzLmRpcmVjdGlvbiA9IG5lYXJCb3R0b20gPyBcInVwXCIgOiBcImRvd25cIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvL0NoZWNrIGlmIGRyb3BPbkVtcHR5IGlzIGVuYWJsZWRcblx0XHRcdGlmICggIWl0ZW1XaXRoTGVhc3REaXN0YW5jZSAmJiAhdGhpcy5vcHRpb25zLmRyb3BPbkVtcHR5ICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggdGhpcy5jdXJyZW50Q29udGFpbmVyID09PSB0aGlzLmNvbnRhaW5lcnNbIGlubmVybW9zdEluZGV4IF0gKSB7XG5cdFx0XHRcdGlmICggIXRoaXMuY3VycmVudENvbnRhaW5lci5jb250YWluZXJDYWNoZS5vdmVyICkge1xuXHRcdFx0XHRcdHRoaXMuY29udGFpbmVyc1sgaW5uZXJtb3N0SW5kZXggXS5fdHJpZ2dlciggXCJvdmVyXCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSApO1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudENvbnRhaW5lci5jb250YWluZXJDYWNoZS5vdmVyID0gMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGl0ZW1XaXRoTGVhc3REaXN0YW5jZSA/XG5cdFx0XHRcdHRoaXMuX3JlYXJyYW5nZSggZXZlbnQsIGl0ZW1XaXRoTGVhc3REaXN0YW5jZSwgbnVsbCwgdHJ1ZSApIDpcblx0XHRcdFx0dGhpcy5fcmVhcnJhbmdlKCBldmVudCwgbnVsbCwgdGhpcy5jb250YWluZXJzWyBpbm5lcm1vc3RJbmRleCBdLmVsZW1lbnQsIHRydWUgKTtcblx0XHRcdHRoaXMuX3RyaWdnZXIoIFwiY2hhbmdlXCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSApO1xuXHRcdFx0dGhpcy5jb250YWluZXJzWyBpbm5lcm1vc3RJbmRleCBdLl90cmlnZ2VyKCBcImNoYW5nZVwiLCBldmVudCwgdGhpcy5fdWlIYXNoKCB0aGlzICkgKTtcblx0XHRcdHRoaXMuY3VycmVudENvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyc1sgaW5uZXJtb3N0SW5kZXggXTtcblxuXHRcdFx0Ly9VcGRhdGUgdGhlIHBsYWNlaG9sZGVyXG5cdFx0XHR0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIudXBkYXRlKCB0aGlzLmN1cnJlbnRDb250YWluZXIsIHRoaXMucGxhY2Vob2xkZXIgKTtcblxuXHRcdFx0dGhpcy5jb250YWluZXJzWyBpbm5lcm1vc3RJbmRleCBdLl90cmlnZ2VyKCBcIm92ZXJcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCggdGhpcyApICk7XG5cdFx0XHR0aGlzLmNvbnRhaW5lcnNbIGlubmVybW9zdEluZGV4IF0uY29udGFpbmVyQ2FjaGUub3ZlciA9IDE7XG5cdFx0fVxuXG5cdH0sXG5cblx0X2NyZWF0ZUhlbHBlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRoZWxwZXIgPSAkLmlzRnVuY3Rpb24oIG8uaGVscGVyICkgP1xuXHRcdFx0XHQkKCBvLmhlbHBlci5hcHBseSggdGhpcy5lbGVtZW50WyAwIF0sIFsgZXZlbnQsIHRoaXMuY3VycmVudEl0ZW0gXSApICkgOlxuXHRcdFx0XHQoIG8uaGVscGVyID09PSBcImNsb25lXCIgPyB0aGlzLmN1cnJlbnRJdGVtLmNsb25lKCkgOiB0aGlzLmN1cnJlbnRJdGVtICk7XG5cblx0XHQvL0FkZCB0aGUgaGVscGVyIHRvIHRoZSBET00gaWYgdGhhdCBkaWRuJ3QgaGFwcGVuIGFscmVhZHlcblx0XHRpZiAoICFoZWxwZXIucGFyZW50cyggXCJib2R5XCIgKS5sZW5ndGggKSB7XG5cdFx0XHQkKCBvLmFwcGVuZFRvICE9PSBcInBhcmVudFwiID9cblx0XHRcdFx0by5hcHBlbmRUbyA6XG5cdFx0XHRcdHRoaXMuY3VycmVudEl0ZW1bIDAgXS5wYXJlbnROb2RlIClbIDAgXS5hcHBlbmRDaGlsZCggaGVscGVyWyAwIF0gKTtcblx0XHR9XG5cblx0XHRpZiAoIGhlbHBlclsgMCBdID09PSB0aGlzLmN1cnJlbnRJdGVtWyAwIF0gKSB7XG5cdFx0XHR0aGlzLl9zdG9yZWRDU1MgPSB7XG5cdFx0XHRcdHdpZHRoOiB0aGlzLmN1cnJlbnRJdGVtWyAwIF0uc3R5bGUud2lkdGgsXG5cdFx0XHRcdGhlaWdodDogdGhpcy5jdXJyZW50SXRlbVsgMCBdLnN0eWxlLmhlaWdodCxcblx0XHRcdFx0cG9zaXRpb246IHRoaXMuY3VycmVudEl0ZW0uY3NzKCBcInBvc2l0aW9uXCIgKSxcblx0XHRcdFx0dG9wOiB0aGlzLmN1cnJlbnRJdGVtLmNzcyggXCJ0b3BcIiApLFxuXHRcdFx0XHRsZWZ0OiB0aGlzLmN1cnJlbnRJdGVtLmNzcyggXCJsZWZ0XCIgKVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRpZiAoICFoZWxwZXJbIDAgXS5zdHlsZS53aWR0aCB8fCBvLmZvcmNlSGVscGVyU2l6ZSApIHtcblx0XHRcdGhlbHBlci53aWR0aCggdGhpcy5jdXJyZW50SXRlbS53aWR0aCgpICk7XG5cdFx0fVxuXHRcdGlmICggIWhlbHBlclsgMCBdLnN0eWxlLmhlaWdodCB8fCBvLmZvcmNlSGVscGVyU2l6ZSApIHtcblx0XHRcdGhlbHBlci5oZWlnaHQoIHRoaXMuY3VycmVudEl0ZW0uaGVpZ2h0KCkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaGVscGVyO1xuXG5cdH0sXG5cblx0X2FkanVzdE9mZnNldEZyb21IZWxwZXI6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0aWYgKCB0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0b2JqID0gb2JqLnNwbGl0KCBcIiBcIiApO1xuXHRcdH1cblx0XHRpZiAoICQuaXNBcnJheSggb2JqICkgKSB7XG5cdFx0XHRvYmogPSB7IGxlZnQ6ICtvYmpbIDAgXSwgdG9wOiArb2JqWyAxIF0gfHwgMCB9O1xuXHRcdH1cblx0XHRpZiAoIFwibGVmdFwiIGluIG9iaiApIHtcblx0XHRcdHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPSBvYmoubGVmdCArIHRoaXMubWFyZ2lucy5sZWZ0O1xuXHRcdH1cblx0XHRpZiAoIFwicmlnaHRcIiBpbiBvYmogKSB7XG5cdFx0XHR0aGlzLm9mZnNldC5jbGljay5sZWZ0ID0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAtIG9iai5yaWdodCArIHRoaXMubWFyZ2lucy5sZWZ0O1xuXHRcdH1cblx0XHRpZiAoIFwidG9wXCIgaW4gb2JqICkge1xuXHRcdFx0dGhpcy5vZmZzZXQuY2xpY2sudG9wID0gb2JqLnRvcCArIHRoaXMubWFyZ2lucy50b3A7XG5cdFx0fVxuXHRcdGlmICggXCJib3R0b21cIiBpbiBvYmogKSB7XG5cdFx0XHR0aGlzLm9mZnNldC5jbGljay50b3AgPSB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIG9iai5ib3R0b20gKyB0aGlzLm1hcmdpbnMudG9wO1xuXHRcdH1cblx0fSxcblxuXHRfZ2V0UGFyZW50T2Zmc2V0OiBmdW5jdGlvbigpIHtcblxuXHRcdC8vR2V0IHRoZSBvZmZzZXRQYXJlbnQgYW5kIGNhY2hlIGl0cyBwb3NpdGlvblxuXHRcdHRoaXMub2Zmc2V0UGFyZW50ID0gdGhpcy5oZWxwZXIub2Zmc2V0UGFyZW50KCk7XG5cdFx0dmFyIHBvID0gdGhpcy5vZmZzZXRQYXJlbnQub2Zmc2V0KCk7XG5cblx0XHQvLyBUaGlzIGlzIGEgc3BlY2lhbCBjYXNlIHdoZXJlIHdlIG5lZWQgdG8gbW9kaWZ5IGEgb2Zmc2V0IGNhbGN1bGF0ZWQgb24gc3RhcnQsIHNpbmNlIHRoZVxuXHRcdC8vIGZvbGxvd2luZyBoYXBwZW5lZDpcblx0XHQvLyAxLiBUaGUgcG9zaXRpb24gb2YgdGhlIGhlbHBlciBpcyBhYnNvbHV0ZSwgc28gaXQncyBwb3NpdGlvbiBpcyBjYWxjdWxhdGVkIGJhc2VkIG9uIHRoZVxuXHRcdC8vIG5leHQgcG9zaXRpb25lZCBwYXJlbnRcblx0XHQvLyAyLiBUaGUgYWN0dWFsIG9mZnNldCBwYXJlbnQgaXMgYSBjaGlsZCBvZiB0aGUgc2Nyb2xsIHBhcmVudCwgYW5kIHRoZSBzY3JvbGwgcGFyZW50IGlzbid0XG5cdFx0Ly8gdGhlIGRvY3VtZW50LCB3aGljaCBtZWFucyB0aGF0IHRoZSBzY3JvbGwgaXMgaW5jbHVkZWQgaW4gdGhlIGluaXRpYWwgY2FsY3VsYXRpb24gb2YgdGhlXG5cdFx0Ly8gb2Zmc2V0IG9mIHRoZSBwYXJlbnQsIGFuZCBuZXZlciByZWNhbGN1bGF0ZWQgdXBvbiBkcmFnXG5cdFx0aWYgKCB0aGlzLmNzc1Bvc2l0aW9uID09PSBcImFic29sdXRlXCIgJiYgdGhpcy5zY3JvbGxQYXJlbnRbIDAgXSAhPT0gdGhpcy5kb2N1bWVudFsgMCBdICYmXG5cdFx0XHRcdCQuY29udGFpbnMoIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0sIHRoaXMub2Zmc2V0UGFyZW50WyAwIF0gKSApIHtcblx0XHRcdHBvLmxlZnQgKz0gdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpO1xuXHRcdFx0cG8udG9wICs9IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpO1xuXHRcdH1cblxuXHRcdC8vIFRoaXMgbmVlZHMgdG8gYmUgYWN0dWFsbHkgZG9uZSBmb3IgYWxsIGJyb3dzZXJzLCBzaW5jZSBwYWdlWC9wYWdlWSBpbmNsdWRlcyB0aGlzXG5cdFx0Ly8gaW5mb3JtYXRpb24gd2l0aCBhbiB1Z2x5IElFIGZpeFxuXHRcdGlmICggdGhpcy5vZmZzZXRQYXJlbnRbIDAgXSA9PT0gdGhpcy5kb2N1bWVudFsgMCBdLmJvZHkgfHxcblx0XHRcdFx0KCB0aGlzLm9mZnNldFBhcmVudFsgMCBdLnRhZ05hbWUgJiZcblx0XHRcdFx0dGhpcy5vZmZzZXRQYXJlbnRbIDAgXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaHRtbFwiICYmICQudWkuaWUgKSApIHtcblx0XHRcdHBvID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblx0XHR9XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBwby50b3AgKyAoIHBhcnNlSW50KCB0aGlzLm9mZnNldFBhcmVudC5jc3MoIFwiYm9yZGVyVG9wV2lkdGhcIiApLCAxMCApIHx8IDAgKSxcblx0XHRcdGxlZnQ6IHBvLmxlZnQgKyAoIHBhcnNlSW50KCB0aGlzLm9mZnNldFBhcmVudC5jc3MoIFwiYm9yZGVyTGVmdFdpZHRoXCIgKSwgMTAgKSB8fCAwIClcblx0XHR9O1xuXG5cdH0sXG5cblx0X2dldFJlbGF0aXZlT2Zmc2V0OiBmdW5jdGlvbigpIHtcblxuXHRcdGlmICggdGhpcy5jc3NQb3NpdGlvbiA9PT0gXCJyZWxhdGl2ZVwiICkge1xuXHRcdFx0dmFyIHAgPSB0aGlzLmN1cnJlbnRJdGVtLnBvc2l0aW9uKCk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0b3A6IHAudG9wIC0gKCBwYXJzZUludCggdGhpcy5oZWxwZXIuY3NzKCBcInRvcFwiICksIDEwICkgfHwgMCApICtcblx0XHRcdFx0XHR0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSxcblx0XHRcdFx0bGVmdDogcC5sZWZ0IC0gKCBwYXJzZUludCggdGhpcy5oZWxwZXIuY3NzKCBcImxlZnRcIiApLCAxMCApIHx8IDAgKSArXG5cdFx0XHRcdFx0dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpXG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblx0XHR9XG5cblx0fSxcblxuXHRfY2FjaGVNYXJnaW5zOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLm1hcmdpbnMgPSB7XG5cdFx0XHRsZWZ0OiAoIHBhcnNlSW50KCB0aGlzLmN1cnJlbnRJdGVtLmNzcyggXCJtYXJnaW5MZWZ0XCIgKSwgMTAgKSB8fCAwICksXG5cdFx0XHR0b3A6ICggcGFyc2VJbnQoIHRoaXMuY3VycmVudEl0ZW0uY3NzKCBcIm1hcmdpblRvcFwiICksIDEwICkgfHwgMCApXG5cdFx0fTtcblx0fSxcblxuXHRfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5oZWxwZXJQcm9wb3J0aW9ucyA9IHtcblx0XHRcdHdpZHRoOiB0aGlzLmhlbHBlci5vdXRlcldpZHRoKCksXG5cdFx0XHRoZWlnaHQ6IHRoaXMuaGVscGVyLm91dGVySGVpZ2h0KClcblx0XHR9O1xuXHR9LFxuXG5cdF9zZXRDb250YWlubWVudDogZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgY2UsIGNvLCBvdmVyLFxuXHRcdFx0byA9IHRoaXMub3B0aW9ucztcblx0XHRpZiAoIG8uY29udGFpbm1lbnQgPT09IFwicGFyZW50XCIgKSB7XG5cdFx0XHRvLmNvbnRhaW5tZW50ID0gdGhpcy5oZWxwZXJbIDAgXS5wYXJlbnROb2RlO1xuXHRcdH1cblx0XHRpZiAoIG8uY29udGFpbm1lbnQgPT09IFwiZG9jdW1lbnRcIiB8fCBvLmNvbnRhaW5tZW50ID09PSBcIndpbmRvd1wiICkge1xuXHRcdFx0dGhpcy5jb250YWlubWVudCA9IFtcblx0XHRcdFx0MCAtIHRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQgLSB0aGlzLm9mZnNldC5wYXJlbnQubGVmdCxcblx0XHRcdFx0MCAtIHRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCAtIHRoaXMub2Zmc2V0LnBhcmVudC50b3AsXG5cdFx0XHRcdG8uY29udGFpbm1lbnQgPT09IFwiZG9jdW1lbnRcIiA/XG5cdFx0XHRcdFx0dGhpcy5kb2N1bWVudC53aWR0aCgpIDpcblx0XHRcdFx0XHR0aGlzLndpbmRvdy53aWR0aCgpIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAtIHRoaXMubWFyZ2lucy5sZWZ0LFxuXHRcdFx0XHQoIG8uY29udGFpbm1lbnQgPT09IFwiZG9jdW1lbnRcIiA/XG5cdFx0XHRcdFx0KCB0aGlzLmRvY3VtZW50LmhlaWdodCgpIHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQgKSA6XG5cdFx0XHRcdFx0dGhpcy53aW5kb3cuaGVpZ2h0KCkgfHwgdGhpcy5kb2N1bWVudFsgMCBdLmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHRcblx0XHRcdFx0KSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0gdGhpcy5tYXJnaW5zLnRvcFxuXHRcdFx0XTtcblx0XHR9XG5cblx0XHRpZiAoICEoIC9eKGRvY3VtZW50fHdpbmRvd3xwYXJlbnQpJC8gKS50ZXN0KCBvLmNvbnRhaW5tZW50ICkgKSB7XG5cdFx0XHRjZSA9ICQoIG8uY29udGFpbm1lbnQgKVsgMCBdO1xuXHRcdFx0Y28gPSAkKCBvLmNvbnRhaW5tZW50ICkub2Zmc2V0KCk7XG5cdFx0XHRvdmVyID0gKCAkKCBjZSApLmNzcyggXCJvdmVyZmxvd1wiICkgIT09IFwiaGlkZGVuXCIgKTtcblxuXHRcdFx0dGhpcy5jb250YWlubWVudCA9IFtcblx0XHRcdFx0Y28ubGVmdCArICggcGFyc2VJbnQoICQoIGNlICkuY3NzKCBcImJvcmRlckxlZnRXaWR0aFwiICksIDEwICkgfHwgMCApICtcblx0XHRcdFx0XHQoIHBhcnNlSW50KCAkKCBjZSApLmNzcyggXCJwYWRkaW5nTGVmdFwiICksIDEwICkgfHwgMCApIC0gdGhpcy5tYXJnaW5zLmxlZnQsXG5cdFx0XHRcdGNvLnRvcCArICggcGFyc2VJbnQoICQoIGNlICkuY3NzKCBcImJvcmRlclRvcFdpZHRoXCIgKSwgMTAgKSB8fCAwICkgK1xuXHRcdFx0XHRcdCggcGFyc2VJbnQoICQoIGNlICkuY3NzKCBcInBhZGRpbmdUb3BcIiApLCAxMCApIHx8IDAgKSAtIHRoaXMubWFyZ2lucy50b3AsXG5cdFx0XHRcdGNvLmxlZnQgKyAoIG92ZXIgPyBNYXRoLm1heCggY2Uuc2Nyb2xsV2lkdGgsIGNlLm9mZnNldFdpZHRoICkgOiBjZS5vZmZzZXRXaWR0aCApIC1cblx0XHRcdFx0XHQoIHBhcnNlSW50KCAkKCBjZSApLmNzcyggXCJib3JkZXJMZWZ0V2lkdGhcIiApLCAxMCApIHx8IDAgKSAtXG5cdFx0XHRcdFx0KCBwYXJzZUludCggJCggY2UgKS5jc3MoIFwicGFkZGluZ1JpZ2h0XCIgKSwgMTAgKSB8fCAwICkgLVxuXHRcdFx0XHRcdHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCxcblx0XHRcdFx0Y28udG9wICsgKCBvdmVyID8gTWF0aC5tYXgoIGNlLnNjcm9sbEhlaWdodCwgY2Uub2Zmc2V0SGVpZ2h0ICkgOiBjZS5vZmZzZXRIZWlnaHQgKSAtXG5cdFx0XHRcdFx0KCBwYXJzZUludCggJCggY2UgKS5jc3MoIFwiYm9yZGVyVG9wV2lkdGhcIiApLCAxMCApIHx8IDAgKSAtXG5cdFx0XHRcdFx0KCBwYXJzZUludCggJCggY2UgKS5jc3MoIFwicGFkZGluZ0JvdHRvbVwiICksIDEwICkgfHwgMCApIC1cblx0XHRcdFx0XHR0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIHRoaXMubWFyZ2lucy50b3Bcblx0XHRcdF07XG5cdFx0fVxuXG5cdH0sXG5cblx0X2NvbnZlcnRQb3NpdGlvblRvOiBmdW5jdGlvbiggZCwgcG9zICkge1xuXG5cdFx0aWYgKCAhcG9zICkge1xuXHRcdFx0cG9zID0gdGhpcy5wb3NpdGlvbjtcblx0XHR9XG5cdFx0dmFyIG1vZCA9IGQgPT09IFwiYWJzb2x1dGVcIiA/IDEgOiAtMSxcblx0XHRcdHNjcm9sbCA9IHRoaXMuY3NzUG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiAmJlxuXHRcdFx0XHQhKCB0aGlzLnNjcm9sbFBhcmVudFsgMCBdICE9PSB0aGlzLmRvY3VtZW50WyAwIF0gJiZcblx0XHRcdFx0JC5jb250YWlucyggdGhpcy5zY3JvbGxQYXJlbnRbIDAgXSwgdGhpcy5vZmZzZXRQYXJlbnRbIDAgXSApICkgP1xuXHRcdFx0XHRcdHRoaXMub2Zmc2V0UGFyZW50IDpcblx0XHRcdFx0XHR0aGlzLnNjcm9sbFBhcmVudCxcblx0XHRcdHNjcm9sbElzUm9vdE5vZGUgPSAoIC8oaHRtbHxib2R5KS9pICkudGVzdCggc2Nyb2xsWyAwIF0udGFnTmFtZSApO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogKFxuXG5cdFx0XHRcdC8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvblxuXHRcdFx0XHRwb3MudG9wXHQrXG5cblx0XHRcdFx0Ly8gT25seSBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBub2RlczogUmVsYXRpdmUgb2Zmc2V0IGZyb20gZWxlbWVudCB0byBvZmZzZXQgcGFyZW50XG5cdFx0XHRcdHRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCAqIG1vZCArXG5cblx0XHRcdFx0Ly8gVGhlIG9mZnNldFBhcmVudCdzIG9mZnNldCB3aXRob3V0IGJvcmRlcnMgKG9mZnNldCArIGJvcmRlcilcblx0XHRcdFx0dGhpcy5vZmZzZXQucGFyZW50LnRvcCAqIG1vZCAtXG5cdFx0XHRcdCggKCB0aGlzLmNzc1Bvc2l0aW9uID09PSBcImZpeGVkXCIgP1xuXHRcdFx0XHRcdC10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSA6XG5cdFx0XHRcdFx0KCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHNjcm9sbC5zY3JvbGxUb3AoKSApICkgKiBtb2QgKVxuXHRcdFx0KSxcblx0XHRcdGxlZnQ6IChcblxuXHRcdFx0XHQvLyBUaGUgYWJzb2x1dGUgbW91c2UgcG9zaXRpb25cblx0XHRcdFx0cG9zLmxlZnQgK1xuXG5cdFx0XHRcdC8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudFxuXHRcdFx0XHR0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0ICogbW9kICtcblxuXHRcdFx0XHQvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKVxuXHRcdFx0XHR0aGlzLm9mZnNldC5wYXJlbnQubGVmdCAqIG1vZFx0LVxuXHRcdFx0XHQoICggdGhpcy5jc3NQb3NpdGlvbiA9PT0gXCJmaXhlZFwiID9cblx0XHRcdFx0XHQtdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpIDogc2Nyb2xsSXNSb290Tm9kZSA/IDAgOlxuXHRcdFx0XHRcdHNjcm9sbC5zY3JvbGxMZWZ0KCkgKSAqIG1vZCApXG5cdFx0XHQpXG5cdFx0fTtcblxuXHR9LFxuXG5cdF9nZW5lcmF0ZVBvc2l0aW9uOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cblx0XHR2YXIgdG9wLCBsZWZ0LFxuXHRcdFx0byA9IHRoaXMub3B0aW9ucyxcblx0XHRcdHBhZ2VYID0gZXZlbnQucGFnZVgsXG5cdFx0XHRwYWdlWSA9IGV2ZW50LnBhZ2VZLFxuXHRcdFx0c2Nyb2xsID0gdGhpcy5jc3NQb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiICYmXG5cdFx0XHRcdCEoIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0gIT09IHRoaXMuZG9jdW1lbnRbIDAgXSAmJlxuXHRcdFx0XHQkLmNvbnRhaW5zKCB0aGlzLnNjcm9sbFBhcmVudFsgMCBdLCB0aGlzLm9mZnNldFBhcmVudFsgMCBdICkgKSA/XG5cdFx0XHRcdFx0dGhpcy5vZmZzZXRQYXJlbnQgOlxuXHRcdFx0XHRcdHRoaXMuc2Nyb2xsUGFyZW50LFxuXHRcdFx0XHRzY3JvbGxJc1Jvb3ROb2RlID0gKCAvKGh0bWx8Ym9keSkvaSApLnRlc3QoIHNjcm9sbFsgMCBdLnRhZ05hbWUgKTtcblxuXHRcdC8vIFRoaXMgaXMgYW5vdGhlciB2ZXJ5IHdlaXJkIHNwZWNpYWwgY2FzZSB0aGF0IG9ubHkgaGFwcGVucyBmb3IgcmVsYXRpdmUgZWxlbWVudHM6XG5cdFx0Ly8gMS4gSWYgdGhlIGNzcyBwb3NpdGlvbiBpcyByZWxhdGl2ZVxuXHRcdC8vIDIuIGFuZCB0aGUgc2Nyb2xsIHBhcmVudCBpcyB0aGUgZG9jdW1lbnQgb3Igc2ltaWxhciB0byB0aGUgb2Zmc2V0IHBhcmVudFxuXHRcdC8vIHdlIGhhdmUgdG8gcmVmcmVzaCB0aGUgcmVsYXRpdmUgb2Zmc2V0IGR1cmluZyB0aGUgc2Nyb2xsIHNvIHRoZXJlIGFyZSBubyBqdW1wc1xuXHRcdGlmICggdGhpcy5jc3NQb3NpdGlvbiA9PT0gXCJyZWxhdGl2ZVwiICYmICEoIHRoaXMuc2Nyb2xsUGFyZW50WyAwIF0gIT09IHRoaXMuZG9jdW1lbnRbIDAgXSAmJlxuXHRcdFx0XHR0aGlzLnNjcm9sbFBhcmVudFsgMCBdICE9PSB0aGlzLm9mZnNldFBhcmVudFsgMCBdICkgKSB7XG5cdFx0XHR0aGlzLm9mZnNldC5yZWxhdGl2ZSA9IHRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KCk7XG5cdFx0fVxuXG5cdFx0Lypcblx0XHQgKiAtIFBvc2l0aW9uIGNvbnN0cmFpbmluZyAtXG5cdFx0ICogQ29uc3RyYWluIHRoZSBwb3NpdGlvbiB0byBhIG1peCBvZiBncmlkLCBjb250YWlubWVudC5cblx0XHQgKi9cblxuXHRcdGlmICggdGhpcy5vcmlnaW5hbFBvc2l0aW9uICkgeyAvL0lmIHdlIGFyZSBub3QgZHJhZ2dpbmcgeWV0LCB3ZSB3b24ndCBjaGVjayBmb3Igb3B0aW9uc1xuXG5cdFx0XHRpZiAoIHRoaXMuY29udGFpbm1lbnQgKSB7XG5cdFx0XHRcdGlmICggZXZlbnQucGFnZVggLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0IDwgdGhpcy5jb250YWlubWVudFsgMCBdICkge1xuXHRcdFx0XHRcdHBhZ2VYID0gdGhpcy5jb250YWlubWVudFsgMCBdICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIGV2ZW50LnBhZ2VZIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wIDwgdGhpcy5jb250YWlubWVudFsgMSBdICkge1xuXHRcdFx0XHRcdHBhZ2VZID0gdGhpcy5jb250YWlubWVudFsgMSBdICsgdGhpcy5vZmZzZXQuY2xpY2sudG9wO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggZXZlbnQucGFnZVggLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID4gdGhpcy5jb250YWlubWVudFsgMiBdICkge1xuXHRcdFx0XHRcdHBhZ2VYID0gdGhpcy5jb250YWlubWVudFsgMiBdICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIGV2ZW50LnBhZ2VZIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wID4gdGhpcy5jb250YWlubWVudFsgMyBdICkge1xuXHRcdFx0XHRcdHBhZ2VZID0gdGhpcy5jb250YWlubWVudFsgMyBdICsgdGhpcy5vZmZzZXQuY2xpY2sudG9wO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggby5ncmlkICkge1xuXHRcdFx0XHR0b3AgPSB0aGlzLm9yaWdpbmFsUGFnZVkgKyBNYXRoLnJvdW5kKCAoIHBhZ2VZIC0gdGhpcy5vcmlnaW5hbFBhZ2VZICkgL1xuXHRcdFx0XHRcdG8uZ3JpZFsgMSBdICkgKiBvLmdyaWRbIDEgXTtcblx0XHRcdFx0cGFnZVkgPSB0aGlzLmNvbnRhaW5tZW50ID9cblx0XHRcdFx0XHQoICggdG9wIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wID49IHRoaXMuY29udGFpbm1lbnRbIDEgXSAmJlxuXHRcdFx0XHRcdFx0dG9wIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wIDw9IHRoaXMuY29udGFpbm1lbnRbIDMgXSApID9cblx0XHRcdFx0XHRcdFx0dG9wIDpcblx0XHRcdFx0XHRcdFx0KCAoIHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+PSB0aGlzLmNvbnRhaW5tZW50WyAxIF0gKSA/XG5cdFx0XHRcdFx0XHRcdFx0dG9wIC0gby5ncmlkWyAxIF0gOiB0b3AgKyBvLmdyaWRbIDEgXSApICkgOlxuXHRcdFx0XHRcdFx0XHRcdHRvcDtcblxuXHRcdFx0XHRsZWZ0ID0gdGhpcy5vcmlnaW5hbFBhZ2VYICsgTWF0aC5yb3VuZCggKCBwYWdlWCAtIHRoaXMub3JpZ2luYWxQYWdlWCApIC9cblx0XHRcdFx0XHRvLmdyaWRbIDAgXSApICogby5ncmlkWyAwIF07XG5cdFx0XHRcdHBhZ2VYID0gdGhpcy5jb250YWlubWVudCA/XG5cdFx0XHRcdFx0KCAoIGxlZnQgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID49IHRoaXMuY29udGFpbm1lbnRbIDAgXSAmJlxuXHRcdFx0XHRcdFx0bGVmdCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPD0gdGhpcy5jb250YWlubWVudFsgMiBdICkgP1xuXHRcdFx0XHRcdFx0XHRsZWZ0IDpcblx0XHRcdFx0XHRcdFx0KCAoIGxlZnQgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID49IHRoaXMuY29udGFpbm1lbnRbIDAgXSApID9cblx0XHRcdFx0XHRcdFx0XHRsZWZ0IC0gby5ncmlkWyAwIF0gOiBsZWZ0ICsgby5ncmlkWyAwIF0gKSApIDpcblx0XHRcdFx0XHRcdFx0XHRsZWZ0O1xuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogKFxuXG5cdFx0XHRcdC8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvblxuXHRcdFx0XHRwYWdlWSAtXG5cblx0XHRcdFx0Ly8gQ2xpY2sgb2Zmc2V0IChyZWxhdGl2ZSB0byB0aGUgZWxlbWVudClcblx0XHRcdFx0dGhpcy5vZmZzZXQuY2xpY2sudG9wIC1cblxuXHRcdFx0XHQvLyBPbmx5IGZvciByZWxhdGl2ZSBwb3NpdGlvbmVkIG5vZGVzOiBSZWxhdGl2ZSBvZmZzZXQgZnJvbSBlbGVtZW50IHRvIG9mZnNldCBwYXJlbnRcblx0XHRcdFx0dGhpcy5vZmZzZXQucmVsYXRpdmUudG9wIC1cblxuXHRcdFx0XHQvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKVxuXHRcdFx0XHR0aGlzLm9mZnNldC5wYXJlbnQudG9wICtcblx0XHRcdFx0KCAoIHRoaXMuY3NzUG9zaXRpb24gPT09IFwiZml4ZWRcIiA/XG5cdFx0XHRcdFx0LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpIDpcblx0XHRcdFx0XHQoIHNjcm9sbElzUm9vdE5vZGUgPyAwIDogc2Nyb2xsLnNjcm9sbFRvcCgpICkgKSApXG5cdFx0XHQpLFxuXHRcdFx0bGVmdDogKFxuXG5cdFx0XHRcdC8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvblxuXHRcdFx0XHRwYWdlWCAtXG5cblx0XHRcdFx0Ly8gQ2xpY2sgb2Zmc2V0IChyZWxhdGl2ZSB0byB0aGUgZWxlbWVudClcblx0XHRcdFx0dGhpcy5vZmZzZXQuY2xpY2subGVmdCAtXG5cblx0XHRcdFx0Ly8gT25seSBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBub2RlczogUmVsYXRpdmUgb2Zmc2V0IGZyb20gZWxlbWVudCB0byBvZmZzZXQgcGFyZW50XG5cdFx0XHRcdHRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQgLVxuXG5cdFx0XHRcdC8vIFRoZSBvZmZzZXRQYXJlbnQncyBvZmZzZXQgd2l0aG91dCBib3JkZXJzIChvZmZzZXQgKyBib3JkZXIpXG5cdFx0XHRcdHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0ICtcblx0XHRcdFx0KCAoIHRoaXMuY3NzUG9zaXRpb24gPT09IFwiZml4ZWRcIiA/XG5cdFx0XHRcdFx0LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKSA6XG5cdFx0XHRcdFx0c2Nyb2xsSXNSb290Tm9kZSA/IDAgOiBzY3JvbGwuc2Nyb2xsTGVmdCgpICkgKVxuXHRcdFx0KVxuXHRcdH07XG5cblx0fSxcblxuXHRfcmVhcnJhbmdlOiBmdW5jdGlvbiggZXZlbnQsIGksIGEsIGhhcmRSZWZyZXNoICkge1xuXG5cdFx0YSA/IGFbIDAgXS5hcHBlbmRDaGlsZCggdGhpcy5wbGFjZWhvbGRlclsgMCBdICkgOlxuXHRcdFx0aS5pdGVtWyAwIF0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIHRoaXMucGxhY2Vob2xkZXJbIDAgXSxcblx0XHRcdFx0KCB0aGlzLmRpcmVjdGlvbiA9PT0gXCJkb3duXCIgPyBpLml0ZW1bIDAgXSA6IGkuaXRlbVsgMCBdLm5leHRTaWJsaW5nICkgKTtcblxuXHRcdC8vVmFyaW91cyB0aGluZ3MgZG9uZSBoZXJlIHRvIGltcHJvdmUgdGhlIHBlcmZvcm1hbmNlOlxuXHRcdC8vIDEuIHdlIGNyZWF0ZSBhIHNldFRpbWVvdXQsIHRoYXQgY2FsbHMgcmVmcmVzaFBvc2l0aW9uc1xuXHRcdC8vIDIuIG9uIHRoZSBpbnN0YW5jZSwgd2UgaGF2ZSBhIGNvdW50ZXIgdmFyaWFibGUsIHRoYXQgZ2V0J3MgaGlnaGVyIGFmdGVyIGV2ZXJ5IGFwcGVuZFxuXHRcdC8vIDMuIG9uIHRoZSBsb2NhbCBzY29wZSwgd2UgY29weSB0aGUgY291bnRlciB2YXJpYWJsZSwgYW5kIGNoZWNrIGluIHRoZSB0aW1lb3V0LFxuXHRcdC8vIGlmIGl0J3Mgc3RpbGwgdGhlIHNhbWVcblx0XHQvLyA0LiB0aGlzIGxldHMgb25seSB0aGUgbGFzdCBhZGRpdGlvbiB0byB0aGUgdGltZW91dCBzdGFjayB0aHJvdWdoXG5cdFx0dGhpcy5jb3VudGVyID0gdGhpcy5jb3VudGVyID8gKyt0aGlzLmNvdW50ZXIgOiAxO1xuXHRcdHZhciBjb3VudGVyID0gdGhpcy5jb3VudGVyO1xuXG5cdFx0dGhpcy5fZGVsYXkoIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBjb3VudGVyID09PSB0aGlzLmNvdW50ZXIgKSB7XG5cblx0XHRcdFx0Ly9QcmVjb21wdXRlIGFmdGVyIGVhY2ggRE9NIGluc2VydGlvbiwgTk9UIG9uIG1vdXNlbW92ZVxuXHRcdFx0XHR0aGlzLnJlZnJlc2hQb3NpdGlvbnMoICFoYXJkUmVmcmVzaCApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHR9LFxuXG5cdF9jbGVhcjogZnVuY3Rpb24oIGV2ZW50LCBub1Byb3BhZ2F0aW9uICkge1xuXG5cdFx0dGhpcy5yZXZlcnRpbmcgPSBmYWxzZTtcblxuXHRcdC8vIFdlIGRlbGF5IGFsbCBldmVudHMgdGhhdCBoYXZlIHRvIGJlIHRyaWdnZXJlZCB0byBhZnRlciB0aGUgcG9pbnQgd2hlcmUgdGhlIHBsYWNlaG9sZGVyXG5cdFx0Ly8gaGFzIGJlZW4gcmVtb3ZlZCBhbmQgZXZlcnl0aGluZyBlbHNlIG5vcm1hbGl6ZWQgYWdhaW5cblx0XHR2YXIgaSxcblx0XHRcdGRlbGF5ZWRUcmlnZ2VycyA9IFtdO1xuXG5cdFx0Ly8gV2UgZmlyc3QgaGF2ZSB0byB1cGRhdGUgdGhlIGRvbSBwb3NpdGlvbiBvZiB0aGUgYWN0dWFsIGN1cnJlbnRJdGVtXG5cdFx0Ly8gTm90ZTogZG9uJ3QgZG8gaXQgaWYgdGhlIGN1cnJlbnQgaXRlbSBpcyBhbHJlYWR5IHJlbW92ZWQgKGJ5IGEgdXNlciksIG9yIGl0IGdldHNcblx0XHQvLyByZWFwcGVuZGVkIChzZWUgIzQwODgpXG5cdFx0aWYgKCAhdGhpcy5fbm9GaW5hbFNvcnQgJiYgdGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKS5sZW5ndGggKSB7XG5cdFx0XHR0aGlzLnBsYWNlaG9sZGVyLmJlZm9yZSggdGhpcy5jdXJyZW50SXRlbSApO1xuXHRcdH1cblx0XHR0aGlzLl9ub0ZpbmFsU29ydCA9IG51bGw7XG5cblx0XHRpZiAoIHRoaXMuaGVscGVyWyAwIF0gPT09IHRoaXMuY3VycmVudEl0ZW1bIDAgXSApIHtcblx0XHRcdGZvciAoIGkgaW4gdGhpcy5fc3RvcmVkQ1NTICkge1xuXHRcdFx0XHRpZiAoIHRoaXMuX3N0b3JlZENTU1sgaSBdID09PSBcImF1dG9cIiB8fCB0aGlzLl9zdG9yZWRDU1NbIGkgXSA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdFx0XHR0aGlzLl9zdG9yZWRDU1NbIGkgXSA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRoaXMuY3VycmVudEl0ZW0uY3NzKCB0aGlzLl9zdG9yZWRDU1MgKTtcblx0XHRcdHRoaXMuX3JlbW92ZUNsYXNzKCB0aGlzLmN1cnJlbnRJdGVtLCBcInVpLXNvcnRhYmxlLWhlbHBlclwiICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuY3VycmVudEl0ZW0uc2hvdygpO1xuXHRcdH1cblxuXHRcdGlmICggdGhpcy5mcm9tT3V0c2lkZSAmJiAhbm9Qcm9wYWdhdGlvbiApIHtcblx0XHRcdGRlbGF5ZWRUcmlnZ2Vycy5wdXNoKCBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdHRoaXMuX3RyaWdnZXIoIFwicmVjZWl2ZVwiLCBldmVudCwgdGhpcy5fdWlIYXNoKCB0aGlzLmZyb21PdXRzaWRlICkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cdFx0aWYgKCAoIHRoaXMuZnJvbU91dHNpZGUgfHxcblx0XHRcdFx0dGhpcy5kb21Qb3NpdGlvbi5wcmV2ICE9PVxuXHRcdFx0XHR0aGlzLmN1cnJlbnRJdGVtLnByZXYoKS5ub3QoIFwiLnVpLXNvcnRhYmxlLWhlbHBlclwiIClbIDAgXSB8fFxuXHRcdFx0XHR0aGlzLmRvbVBvc2l0aW9uLnBhcmVudCAhPT0gdGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKVsgMCBdICkgJiYgIW5vUHJvcGFnYXRpb24gKSB7XG5cblx0XHRcdC8vIFRyaWdnZXIgdXBkYXRlIGNhbGxiYWNrIGlmIHRoZSBET00gcG9zaXRpb24gaGFzIGNoYW5nZWRcblx0XHRcdGRlbGF5ZWRUcmlnZ2Vycy5wdXNoKCBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdHRoaXMuX3RyaWdnZXIoIFwidXBkYXRlXCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIHRoZSBpdGVtcyBDb250YWluZXIgaGFzIENoYW5nZWQgYW5kIHRyaWdnZXIgYXBwcm9wcmlhdGVcblx0XHQvLyBldmVudHMuXG5cdFx0aWYgKCB0aGlzICE9PSB0aGlzLmN1cnJlbnRDb250YWluZXIgKSB7XG5cdFx0XHRpZiAoICFub1Byb3BhZ2F0aW9uICkge1xuXHRcdFx0XHRkZWxheWVkVHJpZ2dlcnMucHVzaCggZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRcdHRoaXMuX3RyaWdnZXIoIFwicmVtb3ZlXCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHRcdGRlbGF5ZWRUcmlnZ2Vycy5wdXNoKCAoIGZ1bmN0aW9uKCBjICkge1xuXHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRjLl90cmlnZ2VyKCBcInJlY2VpdmVcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCggdGhpcyApICk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSApLmNhbGwoIHRoaXMsIHRoaXMuY3VycmVudENvbnRhaW5lciApICk7XG5cdFx0XHRcdGRlbGF5ZWRUcmlnZ2Vycy5wdXNoKCAoIGZ1bmN0aW9uKCBjICkge1xuXHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRjLl90cmlnZ2VyKCBcInVwZGF0ZVwiLCBldmVudCwgdGhpcy5fdWlIYXNoKCB0aGlzICkgKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9ICkuY2FsbCggdGhpcywgdGhpcy5jdXJyZW50Q29udGFpbmVyICkgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvL1Bvc3QgZXZlbnRzIHRvIGNvbnRhaW5lcnNcblx0XHRmdW5jdGlvbiBkZWxheUV2ZW50KCB0eXBlLCBpbnN0YW5jZSwgY29udGFpbmVyICkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0Y29udGFpbmVyLl90cmlnZ2VyKCB0eXBlLCBldmVudCwgaW5zdGFuY2UuX3VpSGFzaCggaW5zdGFuY2UgKSApO1xuXHRcdFx0fTtcblx0XHR9XG5cdFx0Zm9yICggaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHtcblx0XHRcdGlmICggIW5vUHJvcGFnYXRpb24gKSB7XG5cdFx0XHRcdGRlbGF5ZWRUcmlnZ2Vycy5wdXNoKCBkZWxheUV2ZW50KCBcImRlYWN0aXZhdGVcIiwgdGhpcywgdGhpcy5jb250YWluZXJzWyBpIF0gKSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCB0aGlzLmNvbnRhaW5lcnNbIGkgXS5jb250YWluZXJDYWNoZS5vdmVyICkge1xuXHRcdFx0XHRkZWxheWVkVHJpZ2dlcnMucHVzaCggZGVsYXlFdmVudCggXCJvdXRcIiwgdGhpcywgdGhpcy5jb250YWluZXJzWyBpIF0gKSApO1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lcnNbIGkgXS5jb250YWluZXJDYWNoZS5vdmVyID0gMDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvL0RvIHdoYXQgd2FzIG9yaWdpbmFsbHkgaW4gcGx1Z2luc1xuXHRcdGlmICggdGhpcy5zdG9yZWRDdXJzb3IgKSB7XG5cdFx0XHR0aGlzLmRvY3VtZW50LmZpbmQoIFwiYm9keVwiICkuY3NzKCBcImN1cnNvclwiLCB0aGlzLnN0b3JlZEN1cnNvciApO1xuXHRcdFx0dGhpcy5zdG9yZWRTdHlsZXNoZWV0LnJlbW92ZSgpO1xuXHRcdH1cblx0XHRpZiAoIHRoaXMuX3N0b3JlZE9wYWNpdHkgKSB7XG5cdFx0XHR0aGlzLmhlbHBlci5jc3MoIFwib3BhY2l0eVwiLCB0aGlzLl9zdG9yZWRPcGFjaXR5ICk7XG5cdFx0fVxuXHRcdGlmICggdGhpcy5fc3RvcmVkWkluZGV4ICkge1xuXHRcdFx0dGhpcy5oZWxwZXIuY3NzKCBcInpJbmRleFwiLCB0aGlzLl9zdG9yZWRaSW5kZXggPT09IFwiYXV0b1wiID8gXCJcIiA6IHRoaXMuX3N0b3JlZFpJbmRleCApO1xuXHRcdH1cblxuXHRcdHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcblxuXHRcdGlmICggIW5vUHJvcGFnYXRpb24gKSB7XG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcImJlZm9yZVN0b3BcIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpICk7XG5cdFx0fVxuXG5cdFx0Ly8kKHRoaXMucGxhY2Vob2xkZXJbMF0pLnJlbW92ZSgpOyB3b3VsZCBoYXZlIGJlZW4gdGhlIGpRdWVyeSB3YXkgLSB1bmZvcnR1bmF0ZWx5LFxuXHRcdC8vIGl0IHVuYmluZHMgQUxMIGV2ZW50cyBmcm9tIHRoZSBvcmlnaW5hbCBub2RlIVxuXHRcdHRoaXMucGxhY2Vob2xkZXJbIDAgXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCB0aGlzLnBsYWNlaG9sZGVyWyAwIF0gKTtcblxuXHRcdGlmICggIXRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbCApIHtcblx0XHRcdGlmICggdGhpcy5oZWxwZXJbIDAgXSAhPT0gdGhpcy5jdXJyZW50SXRlbVsgMCBdICkge1xuXHRcdFx0XHR0aGlzLmhlbHBlci5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuaGVscGVyID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAoICFub1Byb3BhZ2F0aW9uICkge1xuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCBkZWxheWVkVHJpZ2dlcnMubGVuZ3RoOyBpKysgKSB7XG5cblx0XHRcdFx0Ly8gVHJpZ2dlciBhbGwgZGVsYXllZCBldmVudHNcblx0XHRcdFx0ZGVsYXllZFRyaWdnZXJzWyBpIF0uY2FsbCggdGhpcywgZXZlbnQgKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX3RyaWdnZXIoIFwic3RvcFwiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkgKTtcblx0XHR9XG5cblx0XHR0aGlzLmZyb21PdXRzaWRlID0gZmFsc2U7XG5cdFx0cmV0dXJuICF0aGlzLmNhbmNlbEhlbHBlclJlbW92YWw7XG5cblx0fSxcblxuXHRfdHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCAkLldpZGdldC5wcm90b3R5cGUuX3RyaWdnZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApID09PSBmYWxzZSApIHtcblx0XHRcdHRoaXMuY2FuY2VsKCk7XG5cdFx0fVxuXHR9LFxuXG5cdF91aUhhc2g6IGZ1bmN0aW9uKCBfaW5zdCApIHtcblx0XHR2YXIgaW5zdCA9IF9pbnN0IHx8IHRoaXM7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGhlbHBlcjogaW5zdC5oZWxwZXIsXG5cdFx0XHRwbGFjZWhvbGRlcjogaW5zdC5wbGFjZWhvbGRlciB8fCAkKCBbXSApLFxuXHRcdFx0cG9zaXRpb246IGluc3QucG9zaXRpb24sXG5cdFx0XHRvcmlnaW5hbFBvc2l0aW9uOiBpbnN0Lm9yaWdpbmFsUG9zaXRpb24sXG5cdFx0XHRvZmZzZXQ6IGluc3QucG9zaXRpb25BYnMsXG5cdFx0XHRpdGVtOiBpbnN0LmN1cnJlbnRJdGVtLFxuXHRcdFx0c2VuZGVyOiBfaW5zdCA/IF9pbnN0LmVsZW1lbnQgOiBudWxsXG5cdFx0fTtcblx0fVxuXG59ICk7XG5cbn0gKSApO1xuIiwiLyohXG4gKiBqUXVlcnkgVUkgVGFicyAxLjEyLjFcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICovXG5cbi8vPj5sYWJlbDogVGFic1xuLy8+Pmdyb3VwOiBXaWRnZXRzXG4vLz4+ZGVzY3JpcHRpb246IFRyYW5zZm9ybXMgYSBzZXQgb2YgY29udGFpbmVyIGVsZW1lbnRzIGludG8gYSB0YWIgc3RydWN0dXJlLlxuLy8+PmRvY3M6IGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3RhYnMvXG4vLz4+ZGVtb3M6IGh0dHA6Ly9qcXVlcnl1aS5jb20vdGFicy9cbi8vPj5jc3Muc3RydWN0dXJlOiAuLi8uLi90aGVtZXMvYmFzZS9jb3JlLmNzc1xuLy8+PmNzcy5zdHJ1Y3R1cmU6IC4uLy4uL3RoZW1lcy9iYXNlL3RhYnMuY3NzXG4vLz4+Y3NzLnRoZW1lOiAuLi8uLi90aGVtZXMvYmFzZS90aGVtZS5jc3NcblxuKCBmdW5jdGlvbiggZmFjdG9yeSApIHtcblx0aWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblxuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cblx0XHRkZWZpbmUoIFtcblx0XHRcdFwianF1ZXJ5XCIsXG5cdFx0XHRcIi4uL2VzY2FwZS1zZWxlY3RvclwiLFxuXHRcdFx0XCIuLi9rZXljb2RlXCIsXG5cdFx0XHRcIi4uL3NhZmUtYWN0aXZlLWVsZW1lbnRcIixcblx0XHRcdFwiLi4vdW5pcXVlLWlkXCIsXG5cdFx0XHRcIi4uL3ZlcnNpb25cIixcblx0XHRcdFwiLi4vd2lkZ2V0XCJcblx0XHRdLCBmYWN0b3J5ICk7XG5cdH0gZWxzZSB7XG5cblx0XHQvLyBCcm93c2VyIGdsb2JhbHNcblx0XHRmYWN0b3J5KCBqUXVlcnkgKTtcblx0fVxufSggZnVuY3Rpb24oICQgKSB7XG5cbiQud2lkZ2V0KCBcInVpLnRhYnNcIiwge1xuXHR2ZXJzaW9uOiBcIjEuMTIuMVwiLFxuXHRkZWxheTogMzAwLFxuXHRvcHRpb25zOiB7XG5cdFx0YWN0aXZlOiBudWxsLFxuXHRcdGNsYXNzZXM6IHtcblx0XHRcdFwidWktdGFic1wiOiBcInVpLWNvcm5lci1hbGxcIixcblx0XHRcdFwidWktdGFicy1uYXZcIjogXCJ1aS1jb3JuZXItYWxsXCIsXG5cdFx0XHRcInVpLXRhYnMtcGFuZWxcIjogXCJ1aS1jb3JuZXItYm90dG9tXCIsXG5cdFx0XHRcInVpLXRhYnMtdGFiXCI6IFwidWktY29ybmVyLXRvcFwiXG5cdFx0fSxcblx0XHRjb2xsYXBzaWJsZTogZmFsc2UsXG5cdFx0ZXZlbnQ6IFwiY2xpY2tcIixcblx0XHRoZWlnaHRTdHlsZTogXCJjb250ZW50XCIsXG5cdFx0aGlkZTogbnVsbCxcblx0XHRzaG93OiBudWxsLFxuXG5cdFx0Ly8gQ2FsbGJhY2tzXG5cdFx0YWN0aXZhdGU6IG51bGwsXG5cdFx0YmVmb3JlQWN0aXZhdGU6IG51bGwsXG5cdFx0YmVmb3JlTG9hZDogbnVsbCxcblx0XHRsb2FkOiBudWxsXG5cdH0sXG5cblx0X2lzTG9jYWw6ICggZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHJoYXNoID0gLyMuKiQvO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBhbmNob3IgKSB7XG5cdFx0XHR2YXIgYW5jaG9yVXJsLCBsb2NhdGlvblVybDtcblxuXHRcdFx0YW5jaG9yVXJsID0gYW5jaG9yLmhyZWYucmVwbGFjZSggcmhhc2gsIFwiXCIgKTtcblx0XHRcdGxvY2F0aW9uVXJsID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKCByaGFzaCwgXCJcIiApO1xuXG5cdFx0XHQvLyBEZWNvZGluZyBtYXkgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIFVSTCBpc24ndCBVVEYtOCAoIzk1MTgpXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhbmNob3JVcmwgPSBkZWNvZGVVUklDb21wb25lbnQoIGFuY2hvclVybCApO1xuXHRcdFx0fSBjYXRjaCAoIGVycm9yICkge31cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGxvY2F0aW9uVXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KCBsb2NhdGlvblVybCApO1xuXHRcdFx0fSBjYXRjaCAoIGVycm9yICkge31cblxuXHRcdFx0cmV0dXJuIGFuY2hvci5oYXNoLmxlbmd0aCA+IDEgJiYgYW5jaG9yVXJsID09PSBsb2NhdGlvblVybDtcblx0XHR9O1xuXHR9ICkoKSxcblxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG5cdFx0dGhpcy5ydW5uaW5nID0gZmFsc2U7XG5cblx0XHR0aGlzLl9hZGRDbGFzcyggXCJ1aS10YWJzXCIsIFwidWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50XCIgKTtcblx0XHR0aGlzLl90b2dnbGVDbGFzcyggXCJ1aS10YWJzLWNvbGxhcHNpYmxlXCIsIG51bGwsIG9wdGlvbnMuY29sbGFwc2libGUgKTtcblxuXHRcdHRoaXMuX3Byb2Nlc3NUYWJzKCk7XG5cdFx0b3B0aW9ucy5hY3RpdmUgPSB0aGlzLl9pbml0aWFsQWN0aXZlKCk7XG5cblx0XHQvLyBUYWtlIGRpc2FibGluZyB0YWJzIHZpYSBjbGFzcyBhdHRyaWJ1dGUgZnJvbSBIVE1MXG5cdFx0Ly8gaW50byBhY2NvdW50IGFuZCB1cGRhdGUgb3B0aW9uIHByb3Blcmx5LlxuXHRcdGlmICggJC5pc0FycmF5KCBvcHRpb25zLmRpc2FibGVkICkgKSB7XG5cdFx0XHRvcHRpb25zLmRpc2FibGVkID0gJC51bmlxdWUoIG9wdGlvbnMuZGlzYWJsZWQuY29uY2F0KFxuXHRcdFx0XHQkLm1hcCggdGhpcy50YWJzLmZpbHRlciggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApLCBmdW5jdGlvbiggbGkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRoYXQudGFicy5pbmRleCggbGkgKTtcblx0XHRcdFx0fSApXG5cdFx0XHQpICkuc29ydCgpO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBsZW5ndGggYXZvaWRzIGVycm9yIHdoZW4gaW5pdGlhbGl6aW5nIGVtcHR5IGxpc3Rcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5hY3RpdmUgIT09IGZhbHNlICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XG5cdFx0XHR0aGlzLmFjdGl2ZSA9IHRoaXMuX2ZpbmRBY3RpdmUoIG9wdGlvbnMuYWN0aXZlICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuYWN0aXZlID0gJCgpO1xuXHRcdH1cblxuXHRcdHRoaXMuX3JlZnJlc2goKTtcblxuXHRcdGlmICggdGhpcy5hY3RpdmUubGVuZ3RoICkge1xuXHRcdFx0dGhpcy5sb2FkKCBvcHRpb25zLmFjdGl2ZSApO1xuXHRcdH1cblx0fSxcblxuXHRfaW5pdGlhbEFjdGl2ZTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGFjdGl2ZSA9IHRoaXMub3B0aW9ucy5hY3RpdmUsXG5cdFx0XHRjb2xsYXBzaWJsZSA9IHRoaXMub3B0aW9ucy5jb2xsYXBzaWJsZSxcblx0XHRcdGxvY2F0aW9uSGFzaCA9IGxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKCAxICk7XG5cblx0XHRpZiAoIGFjdGl2ZSA9PT0gbnVsbCApIHtcblxuXHRcdFx0Ly8gY2hlY2sgdGhlIGZyYWdtZW50IGlkZW50aWZpZXIgaW4gdGhlIFVSTFxuXHRcdFx0aWYgKCBsb2NhdGlvbkhhc2ggKSB7XG5cdFx0XHRcdHRoaXMudGFicy5lYWNoKCBmdW5jdGlvbiggaSwgdGFiICkge1xuXHRcdFx0XHRcdGlmICggJCggdGFiICkuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKSA9PT0gbG9jYXRpb25IYXNoICkge1xuXHRcdFx0XHRcdFx0YWN0aXZlID0gaTtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2hlY2sgZm9yIGEgdGFiIG1hcmtlZCBhY3RpdmUgdmlhIGEgY2xhc3Ncblx0XHRcdGlmICggYWN0aXZlID09PSBudWxsICkge1xuXHRcdFx0XHRhY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMudGFicy5maWx0ZXIoIFwiLnVpLXRhYnMtYWN0aXZlXCIgKSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBObyBhY3RpdmUgdGFiLCBzZXQgdG8gZmFsc2Vcblx0XHRcdGlmICggYWN0aXZlID09PSBudWxsIHx8IGFjdGl2ZSA9PT0gLTEgKSB7XG5cdFx0XHRcdGFjdGl2ZSA9IHRoaXMudGFicy5sZW5ndGggPyAwIDogZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIG51bWJlcnM6IG5lZ2F0aXZlLCBvdXQgb2YgcmFuZ2Vcblx0XHRpZiAoIGFjdGl2ZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHRhY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMudGFicy5lcSggYWN0aXZlICkgKTtcblx0XHRcdGlmICggYWN0aXZlID09PSAtMSApIHtcblx0XHRcdFx0YWN0aXZlID0gY29sbGFwc2libGUgPyBmYWxzZSA6IDA7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRG9uJ3QgYWxsb3cgY29sbGFwc2libGU6IGZhbHNlIGFuZCBhY3RpdmU6IGZhbHNlXG5cdFx0aWYgKCAhY29sbGFwc2libGUgJiYgYWN0aXZlID09PSBmYWxzZSAmJiB0aGlzLmFuY2hvcnMubGVuZ3RoICkge1xuXHRcdFx0YWN0aXZlID0gMDtcblx0XHR9XG5cblx0XHRyZXR1cm4gYWN0aXZlO1xuXHR9LFxuXG5cdF9nZXRDcmVhdGVFdmVudERhdGE6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHR0YWI6IHRoaXMuYWN0aXZlLFxuXHRcdFx0cGFuZWw6ICF0aGlzLmFjdGl2ZS5sZW5ndGggPyAkKCkgOiB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGhpcy5hY3RpdmUgKVxuXHRcdH07XG5cdH0sXG5cblx0X3RhYktleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHR2YXIgZm9jdXNlZFRhYiA9ICQoICQudWkuc2FmZUFjdGl2ZUVsZW1lbnQoIHRoaXMuZG9jdW1lbnRbIDAgXSApICkuY2xvc2VzdCggXCJsaVwiICksXG5cdFx0XHRzZWxlY3RlZEluZGV4ID0gdGhpcy50YWJzLmluZGV4KCBmb2N1c2VkVGFiICksXG5cdFx0XHRnb2luZ0ZvcndhcmQgPSB0cnVlO1xuXG5cdFx0aWYgKCB0aGlzLl9oYW5kbGVQYWdlTmF2KCBldmVudCApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XG5cdFx0Y2FzZSAkLnVpLmtleUNvZGUuUklHSFQ6XG5cdFx0Y2FzZSAkLnVpLmtleUNvZGUuRE9XTjpcblx0XHRcdHNlbGVjdGVkSW5kZXgrKztcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJC51aS5rZXlDb2RlLlVQOlxuXHRcdGNhc2UgJC51aS5rZXlDb2RlLkxFRlQ6XG5cdFx0XHRnb2luZ0ZvcndhcmQgPSBmYWxzZTtcblx0XHRcdHNlbGVjdGVkSW5kZXgtLTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJC51aS5rZXlDb2RlLkVORDpcblx0XHRcdHNlbGVjdGVkSW5kZXggPSB0aGlzLmFuY2hvcnMubGVuZ3RoIC0gMTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJC51aS5rZXlDb2RlLkhPTUU6XG5cdFx0XHRzZWxlY3RlZEluZGV4ID0gMDtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJC51aS5rZXlDb2RlLlNQQUNFOlxuXG5cdFx0XHQvLyBBY3RpdmF0ZSBvbmx5LCBubyBjb2xsYXBzaW5nXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLmFjdGl2YXRpbmcgKTtcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCBzZWxlY3RlZEluZGV4ICk7XG5cdFx0XHRyZXR1cm47XG5cdFx0Y2FzZSAkLnVpLmtleUNvZGUuRU5URVI6XG5cblx0XHRcdC8vIFRvZ2dsZSAoY2FuY2VsIGRlbGF5ZWQgYWN0aXZhdGlvbiwgYWxsb3cgY29sbGFwc2luZylcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApO1xuXG5cdFx0XHQvLyBEZXRlcm1pbmUgaWYgd2Ugc2hvdWxkIGNvbGxhcHNlIG9yIGFjdGl2YXRlXG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggc2VsZWN0ZWRJbmRleCA9PT0gdGhpcy5vcHRpb25zLmFjdGl2ZSA/IGZhbHNlIDogc2VsZWN0ZWRJbmRleCApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRm9jdXMgdGhlIGFwcHJvcHJpYXRlIHRhYiwgYmFzZWQgb24gd2hpY2gga2V5IHdhcyBwcmVzc2VkXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRjbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApO1xuXHRcdHNlbGVjdGVkSW5kZXggPSB0aGlzLl9mb2N1c05leHRUYWIoIHNlbGVjdGVkSW5kZXgsIGdvaW5nRm9yd2FyZCApO1xuXG5cdFx0Ly8gTmF2aWdhdGluZyB3aXRoIGNvbnRyb2wvY29tbWFuZCBrZXkgd2lsbCBwcmV2ZW50IGF1dG9tYXRpYyBhY3RpdmF0aW9uXG5cdFx0aWYgKCAhZXZlbnQuY3RybEtleSAmJiAhZXZlbnQubWV0YUtleSApIHtcblxuXHRcdFx0Ly8gVXBkYXRlIGFyaWEtc2VsZWN0ZWQgaW1tZWRpYXRlbHkgc28gdGhhdCBBVCB0aGluayB0aGUgdGFiIGlzIGFscmVhZHkgc2VsZWN0ZWQuXG5cdFx0XHQvLyBPdGhlcndpc2UgQVQgbWF5IGNvbmZ1c2UgdGhlIHVzZXIgYnkgc3RhdGluZyB0aGF0IHRoZXkgbmVlZCB0byBhY3RpdmF0ZSB0aGUgdGFiLFxuXHRcdFx0Ly8gYnV0IHRoZSB0YWIgd2lsbCBhbHJlYWR5IGJlIGFjdGl2YXRlZCBieSB0aGUgdGltZSB0aGUgYW5ub3VuY2VtZW50IGZpbmlzaGVzLlxuXHRcdFx0Zm9jdXNlZFRhYi5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgXCJmYWxzZVwiICk7XG5cdFx0XHR0aGlzLnRhYnMuZXEoIHNlbGVjdGVkSW5kZXggKS5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgXCJ0cnVlXCIgKTtcblxuXHRcdFx0dGhpcy5hY3RpdmF0aW5nID0gdGhpcy5fZGVsYXkoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGlzLm9wdGlvbiggXCJhY3RpdmVcIiwgc2VsZWN0ZWRJbmRleCApO1xuXHRcdFx0fSwgdGhpcy5kZWxheSApO1xuXHRcdH1cblx0fSxcblxuXHRfcGFuZWxLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCB0aGlzLl9oYW5kbGVQYWdlTmF2KCBldmVudCApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEN0cmwrdXAgbW92ZXMgZm9jdXMgdG8gdGhlIGN1cnJlbnQgdGFiXG5cdFx0aWYgKCBldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5VUCApIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLmFjdGl2ZS50cmlnZ2VyKCBcImZvY3VzXCIgKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gQWx0K3BhZ2UgdXAvZG93biBtb3ZlcyBmb2N1cyB0byB0aGUgcHJldmlvdXMvbmV4dCB0YWIgKGFuZCBhY3RpdmF0ZXMpXG5cdF9oYW5kbGVQYWdlTmF2OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCBldmVudC5hbHRLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlBBR0VfVVAgKSB7XG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZm9jdXNOZXh0VGFiKCB0aGlzLm9wdGlvbnMuYWN0aXZlIC0gMSwgZmFsc2UgKSApO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdGlmICggZXZlbnQuYWx0S2V5ICYmIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5QQUdFX0RPV04gKSB7XG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZm9jdXNOZXh0VGFiKCB0aGlzLm9wdGlvbnMuYWN0aXZlICsgMSwgdHJ1ZSApICk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH0sXG5cblx0X2ZpbmROZXh0VGFiOiBmdW5jdGlvbiggaW5kZXgsIGdvaW5nRm9yd2FyZCApIHtcblx0XHR2YXIgbGFzdFRhYkluZGV4ID0gdGhpcy50YWJzLmxlbmd0aCAtIDE7XG5cblx0XHRmdW5jdGlvbiBjb25zdHJhaW4oKSB7XG5cdFx0XHRpZiAoIGluZGV4ID4gbGFzdFRhYkluZGV4ICkge1xuXHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGluZGV4IDwgMCApIHtcblx0XHRcdFx0aW5kZXggPSBsYXN0VGFiSW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gaW5kZXg7XG5cdFx0fVxuXG5cdFx0d2hpbGUgKCAkLmluQXJyYXkoIGNvbnN0cmFpbigpLCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSAhPT0gLTEgKSB7XG5cdFx0XHRpbmRleCA9IGdvaW5nRm9yd2FyZCA/IGluZGV4ICsgMSA6IGluZGV4IC0gMTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaW5kZXg7XG5cdH0sXG5cblx0X2ZvY3VzTmV4dFRhYjogZnVuY3Rpb24oIGluZGV4LCBnb2luZ0ZvcndhcmQgKSB7XG5cdFx0aW5kZXggPSB0aGlzLl9maW5kTmV4dFRhYiggaW5kZXgsIGdvaW5nRm9yd2FyZCApO1xuXHRcdHRoaXMudGFicy5lcSggaW5kZXggKS50cmlnZ2VyKCBcImZvY3VzXCIgKTtcblx0XHRyZXR1cm4gaW5kZXg7XG5cdH0sXG5cblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0aWYgKCBrZXkgPT09IFwiYWN0aXZlXCIgKSB7XG5cblx0XHRcdC8vIF9hY3RpdmF0ZSgpIHdpbGwgaGFuZGxlIGludmFsaWQgdmFsdWVzIGFuZCB1cGRhdGUgdGhpcy5vcHRpb25zXG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggdmFsdWUgKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApO1xuXG5cdFx0aWYgKCBrZXkgPT09IFwiY29sbGFwc2libGVcIiApIHtcblx0XHRcdHRoaXMuX3RvZ2dsZUNsYXNzKCBcInVpLXRhYnMtY29sbGFwc2libGVcIiwgbnVsbCwgdmFsdWUgKTtcblxuXHRcdFx0Ly8gU2V0dGluZyBjb2xsYXBzaWJsZTogZmFsc2Ugd2hpbGUgY29sbGFwc2VkOyBvcGVuIGZpcnN0IHBhbmVsXG5cdFx0XHRpZiAoICF2YWx1ZSAmJiB0aGlzLm9wdGlvbnMuYWN0aXZlID09PSBmYWxzZSApIHtcblx0XHRcdFx0dGhpcy5fYWN0aXZhdGUoIDAgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIGtleSA9PT0gXCJldmVudFwiICkge1xuXHRcdFx0dGhpcy5fc2V0dXBFdmVudHMoIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgPT09IFwiaGVpZ2h0U3R5bGVcIiApIHtcblx0XHRcdHRoaXMuX3NldHVwSGVpZ2h0U3R5bGUoIHZhbHVlICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9zYW5pdGl6ZVNlbGVjdG9yOiBmdW5jdGlvbiggaGFzaCApIHtcblx0XHRyZXR1cm4gaGFzaCA/IGhhc2gucmVwbGFjZSggL1shXCIkJSYnKCkqKywuXFwvOjs8PT4/QFxcW1xcXVxcXmB7fH1+XS9nLCBcIlxcXFwkJlwiICkgOiBcIlwiO1xuXHR9LFxuXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuXHRcdFx0bGlzID0gdGhpcy50YWJsaXN0LmNoaWxkcmVuKCBcIjpoYXMoYVtocmVmXSlcIiApO1xuXG5cdFx0Ly8gR2V0IGRpc2FibGVkIHRhYnMgZnJvbSBjbGFzcyBhdHRyaWJ1dGUgZnJvbSBIVE1MXG5cdFx0Ly8gdGhpcyB3aWxsIGdldCBjb252ZXJ0ZWQgdG8gYSBib29sZWFuIGlmIG5lZWRlZCBpbiBfcmVmcmVzaCgpXG5cdFx0b3B0aW9ucy5kaXNhYmxlZCA9ICQubWFwKCBsaXMuZmlsdGVyKCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICksIGZ1bmN0aW9uKCB0YWIgKSB7XG5cdFx0XHRyZXR1cm4gbGlzLmluZGV4KCB0YWIgKTtcblx0XHR9ICk7XG5cblx0XHR0aGlzLl9wcm9jZXNzVGFicygpO1xuXG5cdFx0Ly8gV2FzIGNvbGxhcHNlZCBvciBubyB0YWJzXG5cdFx0aWYgKCBvcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgfHwgIXRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XG5cdFx0XHRvcHRpb25zLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0dGhpcy5hY3RpdmUgPSAkKCk7XG5cblx0XHQvLyB3YXMgYWN0aXZlLCBidXQgYWN0aXZlIHRhYiBpcyBnb25lXG5cdFx0fSBlbHNlIGlmICggdGhpcy5hY3RpdmUubGVuZ3RoICYmICEkLmNvbnRhaW5zKCB0aGlzLnRhYmxpc3RbIDAgXSwgdGhpcy5hY3RpdmVbIDAgXSApICkge1xuXG5cdFx0XHQvLyBhbGwgcmVtYWluaW5nIHRhYnMgYXJlIGRpc2FibGVkXG5cdFx0XHRpZiAoIHRoaXMudGFicy5sZW5ndGggPT09IG9wdGlvbnMuZGlzYWJsZWQubGVuZ3RoICkge1xuXHRcdFx0XHRvcHRpb25zLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHR0aGlzLmFjdGl2ZSA9ICQoKTtcblxuXHRcdFx0Ly8gYWN0aXZhdGUgcHJldmlvdXMgdGFiXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZmluZE5leHRUYWIoIE1hdGgubWF4KCAwLCBvcHRpb25zLmFjdGl2ZSAtIDEgKSwgZmFsc2UgKSApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gd2FzIGFjdGl2ZSwgYWN0aXZlIHRhYiBzdGlsbCBleGlzdHNcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBtYWtlIHN1cmUgYWN0aXZlIGluZGV4IGlzIGNvcnJlY3Rcblx0XHRcdG9wdGlvbnMuYWN0aXZlID0gdGhpcy50YWJzLmluZGV4KCB0aGlzLmFjdGl2ZSApO1xuXHRcdH1cblxuXHRcdHRoaXMuX3JlZnJlc2goKTtcblx0fSxcblxuXHRfcmVmcmVzaDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5fc2V0T3B0aW9uRGlzYWJsZWQoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApO1xuXHRcdHRoaXMuX3NldHVwRXZlbnRzKCB0aGlzLm9wdGlvbnMuZXZlbnQgKTtcblx0XHR0aGlzLl9zZXR1cEhlaWdodFN0eWxlKCB0aGlzLm9wdGlvbnMuaGVpZ2h0U3R5bGUgKTtcblxuXHRcdHRoaXMudGFicy5ub3QoIHRoaXMuYWN0aXZlICkuYXR0cigge1xuXHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwiZmFsc2VcIixcblx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCIsXG5cdFx0XHR0YWJJbmRleDogLTFcblx0XHR9ICk7XG5cdFx0dGhpcy5wYW5lbHMubm90KCB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGhpcy5hY3RpdmUgKSApXG5cdFx0XHQuaGlkZSgpXG5cdFx0XHQuYXR0cigge1xuXHRcdFx0XHRcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiXG5cdFx0XHR9ICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgb25lIHRhYiBpcyBpbiB0aGUgdGFiIG9yZGVyXG5cdFx0aWYgKCAhdGhpcy5hY3RpdmUubGVuZ3RoICkge1xuXHRcdFx0dGhpcy50YWJzLmVxKCAwICkuYXR0ciggXCJ0YWJJbmRleFwiLCAwICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuYWN0aXZlXG5cdFx0XHRcdC5hdHRyKCB7XG5cdFx0XHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwidHJ1ZVwiLFxuXHRcdFx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcInRydWVcIixcblx0XHRcdFx0XHR0YWJJbmRleDogMFxuXHRcdFx0XHR9ICk7XG5cdFx0XHR0aGlzLl9hZGRDbGFzcyggdGhpcy5hY3RpdmUsIFwidWktdGFicy1hY3RpdmVcIiwgXCJ1aS1zdGF0ZS1hY3RpdmVcIiApO1xuXHRcdFx0dGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRoaXMuYWN0aXZlIClcblx0XHRcdFx0LnNob3coKVxuXHRcdFx0XHQuYXR0cigge1xuXHRcdFx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJmYWxzZVwiXG5cdFx0XHRcdH0gKTtcblx0XHR9XG5cdH0sXG5cblx0X3Byb2Nlc3NUYWJzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRwcmV2VGFicyA9IHRoaXMudGFicyxcblx0XHRcdHByZXZBbmNob3JzID0gdGhpcy5hbmNob3JzLFxuXHRcdFx0cHJldlBhbmVscyA9IHRoaXMucGFuZWxzO1xuXG5cdFx0dGhpcy50YWJsaXN0ID0gdGhpcy5fZ2V0TGlzdCgpLmF0dHIoIFwicm9sZVwiLCBcInRhYmxpc3RcIiApO1xuXHRcdHRoaXMuX2FkZENsYXNzKCB0aGlzLnRhYmxpc3QsIFwidWktdGFicy1uYXZcIixcblx0XHRcdFwidWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyXCIgKTtcblxuXHRcdC8vIFByZXZlbnQgdXNlcnMgZnJvbSBmb2N1c2luZyBkaXNhYmxlZCB0YWJzIHZpYSBjbGlja1xuXHRcdHRoaXMudGFibGlzdFxuXHRcdFx0Lm9uKCBcIm1vdXNlZG93blwiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgXCI+IGxpXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0aWYgKCAkKCB0aGlzICkuaXMoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IClcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgPDlcblx0XHRcdC8vIFByZXZlbnRpbmcgdGhlIGRlZmF1bHQgYWN0aW9uIGluIG1vdXNlZG93biBkb2Vzbid0IHByZXZlbnQgSUVcblx0XHRcdC8vIGZyb20gZm9jdXNpbmcgdGhlIGVsZW1lbnQsIHNvIGlmIHRoZSBhbmNob3IgZ2V0cyBmb2N1c2VkLCBibHVyLlxuXHRcdFx0Ly8gV2UgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBmb2N1c2luZyB0aGUgcHJldmlvdXNseSBmb2N1c2VkXG5cdFx0XHQvLyBlbGVtZW50IHNpbmNlIGNsaWNraW5nIG9uIGEgbm9uLWZvY3VzYWJsZSBlbGVtZW50IHNob3VsZCBmb2N1c1xuXHRcdFx0Ly8gdGhlIGJvZHkgYW55d2F5LlxuXHRcdFx0Lm9uKCBcImZvY3VzXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBcIi51aS10YWJzLWFuY2hvclwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAkKCB0aGlzICkuY2xvc2VzdCggXCJsaVwiICkuaXMoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSApIHtcblx0XHRcdFx0XHR0aGlzLmJsdXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0dGhpcy50YWJzID0gdGhpcy50YWJsaXN0LmZpbmQoIFwiPiBsaTpoYXMoYVtocmVmXSlcIiApXG5cdFx0XHQuYXR0cigge1xuXHRcdFx0XHRyb2xlOiBcInRhYlwiLFxuXHRcdFx0XHR0YWJJbmRleDogLTFcblx0XHRcdH0gKTtcblx0XHR0aGlzLl9hZGRDbGFzcyggdGhpcy50YWJzLCBcInVpLXRhYnMtdGFiXCIsIFwidWktc3RhdGUtZGVmYXVsdFwiICk7XG5cblx0XHR0aGlzLmFuY2hvcnMgPSB0aGlzLnRhYnMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAkKCBcImFcIiwgdGhpcyApWyAwIF07XG5cdFx0fSApXG5cdFx0XHQuYXR0cigge1xuXHRcdFx0XHRyb2xlOiBcInByZXNlbnRhdGlvblwiLFxuXHRcdFx0XHR0YWJJbmRleDogLTFcblx0XHRcdH0gKTtcblx0XHR0aGlzLl9hZGRDbGFzcyggdGhpcy5hbmNob3JzLCBcInVpLXRhYnMtYW5jaG9yXCIgKTtcblxuXHRcdHRoaXMucGFuZWxzID0gJCgpO1xuXG5cdFx0dGhpcy5hbmNob3JzLmVhY2goIGZ1bmN0aW9uKCBpLCBhbmNob3IgKSB7XG5cdFx0XHR2YXIgc2VsZWN0b3IsIHBhbmVsLCBwYW5lbElkLFxuXHRcdFx0XHRhbmNob3JJZCA9ICQoIGFuY2hvciApLnVuaXF1ZUlkKCkuYXR0ciggXCJpZFwiICksXG5cdFx0XHRcdHRhYiA9ICQoIGFuY2hvciApLmNsb3Nlc3QoIFwibGlcIiApLFxuXHRcdFx0XHRvcmlnaW5hbEFyaWFDb250cm9scyA9IHRhYi5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApO1xuXG5cdFx0XHQvLyBJbmxpbmUgdGFiXG5cdFx0XHRpZiAoIHRoYXQuX2lzTG9jYWwoIGFuY2hvciApICkge1xuXHRcdFx0XHRzZWxlY3RvciA9IGFuY2hvci5oYXNoO1xuXHRcdFx0XHRwYW5lbElkID0gc2VsZWN0b3Iuc3Vic3RyaW5nKCAxICk7XG5cdFx0XHRcdHBhbmVsID0gdGhhdC5lbGVtZW50LmZpbmQoIHRoYXQuX3Nhbml0aXplU2VsZWN0b3IoIHNlbGVjdG9yICkgKTtcblxuXHRcdFx0Ly8gcmVtb3RlIHRhYlxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBJZiB0aGUgdGFiIGRvZXNuJ3QgYWxyZWFkeSBoYXZlIGFyaWEtY29udHJvbHMsXG5cdFx0XHRcdC8vIGdlbmVyYXRlIGFuIGlkIGJ5IHVzaW5nIGEgdGhyb3ctYXdheSBlbGVtZW50XG5cdFx0XHRcdHBhbmVsSWQgPSB0YWIuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKSB8fCAkKCB7fSApLnVuaXF1ZUlkKClbIDAgXS5pZDtcblx0XHRcdFx0c2VsZWN0b3IgPSBcIiNcIiArIHBhbmVsSWQ7XG5cdFx0XHRcdHBhbmVsID0gdGhhdC5lbGVtZW50LmZpbmQoIHNlbGVjdG9yICk7XG5cdFx0XHRcdGlmICggIXBhbmVsLmxlbmd0aCApIHtcblx0XHRcdFx0XHRwYW5lbCA9IHRoYXQuX2NyZWF0ZVBhbmVsKCBwYW5lbElkICk7XG5cdFx0XHRcdFx0cGFuZWwuaW5zZXJ0QWZ0ZXIoIHRoYXQucGFuZWxzWyBpIC0gMSBdIHx8IHRoYXQudGFibGlzdCApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1saXZlXCIsIFwicG9saXRlXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBwYW5lbC5sZW5ndGggKSB7XG5cdFx0XHRcdHRoYXQucGFuZWxzID0gdGhhdC5wYW5lbHMuYWRkKCBwYW5lbCApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBvcmlnaW5hbEFyaWFDb250cm9scyApIHtcblx0XHRcdFx0dGFiLmRhdGEoIFwidWktdGFicy1hcmlhLWNvbnRyb2xzXCIsIG9yaWdpbmFsQXJpYUNvbnRyb2xzICk7XG5cdFx0XHR9XG5cdFx0XHR0YWIuYXR0cigge1xuXHRcdFx0XHRcImFyaWEtY29udHJvbHNcIjogcGFuZWxJZCxcblx0XHRcdFx0XCJhcmlhLWxhYmVsbGVkYnlcIjogYW5jaG9ySWRcblx0XHRcdH0gKTtcblx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1sYWJlbGxlZGJ5XCIsIGFuY2hvcklkICk7XG5cdFx0fSApO1xuXG5cdFx0dGhpcy5wYW5lbHMuYXR0ciggXCJyb2xlXCIsIFwidGFicGFuZWxcIiApO1xuXHRcdHRoaXMuX2FkZENsYXNzKCB0aGlzLnBhbmVscywgXCJ1aS10YWJzLXBhbmVsXCIsIFwidWktd2lkZ2V0LWNvbnRlbnRcIiApO1xuXG5cdFx0Ly8gQXZvaWQgbWVtb3J5IGxlYWtzICgjMTAwNTYpXG5cdFx0aWYgKCBwcmV2VGFicyApIHtcblx0XHRcdHRoaXMuX29mZiggcHJldlRhYnMubm90KCB0aGlzLnRhYnMgKSApO1xuXHRcdFx0dGhpcy5fb2ZmKCBwcmV2QW5jaG9ycy5ub3QoIHRoaXMuYW5jaG9ycyApICk7XG5cdFx0XHR0aGlzLl9vZmYoIHByZXZQYW5lbHMubm90KCB0aGlzLnBhbmVscyApICk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIEFsbG93IG92ZXJyaWRpbmcgaG93IHRvIGZpbmQgdGhlIGxpc3QgZm9yIHJhcmUgdXNhZ2Ugc2NlbmFyaW9zICgjNzcxNSlcblx0X2dldExpc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnRhYmxpc3QgfHwgdGhpcy5lbGVtZW50LmZpbmQoIFwib2wsIHVsXCIgKS5lcSggMCApO1xuXHR9LFxuXG5cdF9jcmVhdGVQYW5lbDogZnVuY3Rpb24oIGlkICkge1xuXHRcdHJldHVybiAkKCBcIjxkaXY+XCIgKVxuXHRcdFx0LmF0dHIoIFwiaWRcIiwgaWQgKVxuXHRcdFx0LmRhdGEoIFwidWktdGFicy1kZXN0cm95XCIsIHRydWUgKTtcblx0fSxcblxuXHRfc2V0T3B0aW9uRGlzYWJsZWQ6IGZ1bmN0aW9uKCBkaXNhYmxlZCApIHtcblx0XHR2YXIgY3VycmVudEl0ZW0sIGxpLCBpO1xuXG5cdFx0aWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7XG5cdFx0XHRpZiAoICFkaXNhYmxlZC5sZW5ndGggKSB7XG5cdFx0XHRcdGRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHR9IGVsc2UgaWYgKCBkaXNhYmxlZC5sZW5ndGggPT09IHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XG5cdFx0XHRcdGRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBEaXNhYmxlIHRhYnNcblx0XHRmb3IgKCBpID0gMDsgKCBsaSA9IHRoaXMudGFic1sgaSBdICk7IGkrKyApIHtcblx0XHRcdGN1cnJlbnRJdGVtID0gJCggbGkgKTtcblx0XHRcdGlmICggZGlzYWJsZWQgPT09IHRydWUgfHwgJC5pbkFycmF5KCBpLCBkaXNhYmxlZCApICE9PSAtMSApIHtcblx0XHRcdFx0Y3VycmVudEl0ZW0uYXR0ciggXCJhcmlhLWRpc2FibGVkXCIsIFwidHJ1ZVwiICk7XG5cdFx0XHRcdHRoaXMuX2FkZENsYXNzKCBjdXJyZW50SXRlbSwgbnVsbCwgXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjdXJyZW50SXRlbS5yZW1vdmVBdHRyKCBcImFyaWEtZGlzYWJsZWRcIiApO1xuXHRcdFx0XHR0aGlzLl9yZW1vdmVDbGFzcyggY3VycmVudEl0ZW0sIG51bGwsIFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9IGRpc2FibGVkO1xuXG5cdFx0dGhpcy5fdG9nZ2xlQ2xhc3MoIHRoaXMud2lkZ2V0KCksIHRoaXMud2lkZ2V0RnVsbE5hbWUgKyBcIi1kaXNhYmxlZFwiLCBudWxsLFxuXHRcdFx0ZGlzYWJsZWQgPT09IHRydWUgKTtcblx0fSxcblxuXHRfc2V0dXBFdmVudHM6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHR2YXIgZXZlbnRzID0ge307XG5cdFx0aWYgKCBldmVudCApIHtcblx0XHRcdCQuZWFjaCggZXZlbnQuc3BsaXQoIFwiIFwiICksIGZ1bmN0aW9uKCBpbmRleCwgZXZlbnROYW1lICkge1xuXHRcdFx0XHRldmVudHNbIGV2ZW50TmFtZSBdID0gXCJfZXZlbnRIYW5kbGVyXCI7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fb2ZmKCB0aGlzLmFuY2hvcnMuYWRkKCB0aGlzLnRhYnMgKS5hZGQoIHRoaXMucGFuZWxzICkgKTtcblxuXHRcdC8vIEFsd2F5cyBwcmV2ZW50IHRoZSBkZWZhdWx0IGFjdGlvbiwgZXZlbiB3aGVuIGRpc2FibGVkXG5cdFx0dGhpcy5fb24oIHRydWUsIHRoaXMuYW5jaG9ycywge1xuXHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdFx0dGhpcy5fb24oIHRoaXMuYW5jaG9ycywgZXZlbnRzICk7XG5cdFx0dGhpcy5fb24oIHRoaXMudGFicywgeyBrZXlkb3duOiBcIl90YWJLZXlkb3duXCIgfSApO1xuXHRcdHRoaXMuX29uKCB0aGlzLnBhbmVscywgeyBrZXlkb3duOiBcIl9wYW5lbEtleWRvd25cIiB9ICk7XG5cblx0XHR0aGlzLl9mb2N1c2FibGUoIHRoaXMudGFicyApO1xuXHRcdHRoaXMuX2hvdmVyYWJsZSggdGhpcy50YWJzICk7XG5cdH0sXG5cblx0X3NldHVwSGVpZ2h0U3R5bGU6IGZ1bmN0aW9uKCBoZWlnaHRTdHlsZSApIHtcblx0XHR2YXIgbWF4SGVpZ2h0LFxuXHRcdFx0cGFyZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudCgpO1xuXG5cdFx0aWYgKCBoZWlnaHRTdHlsZSA9PT0gXCJmaWxsXCIgKSB7XG5cdFx0XHRtYXhIZWlnaHQgPSBwYXJlbnQuaGVpZ2h0KCk7XG5cdFx0XHRtYXhIZWlnaHQgLT0gdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCkgLSB0aGlzLmVsZW1lbnQuaGVpZ2h0KCk7XG5cblx0XHRcdHRoaXMuZWxlbWVudC5zaWJsaW5ncyggXCI6dmlzaWJsZVwiICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBlbGVtID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdHBvc2l0aW9uID0gZWxlbS5jc3MoIFwicG9zaXRpb25cIiApO1xuXG5cdFx0XHRcdGlmICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRtYXhIZWlnaHQgLT0gZWxlbS5vdXRlckhlaWdodCggdHJ1ZSApO1xuXHRcdFx0fSApO1xuXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKS5ub3QoIHRoaXMucGFuZWxzICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdG1heEhlaWdodCAtPSAkKCB0aGlzICkub3V0ZXJIZWlnaHQoIHRydWUgKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0dGhpcy5wYW5lbHMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoIHRoaXMgKS5oZWlnaHQoIE1hdGgubWF4KCAwLCBtYXhIZWlnaHQgLVxuXHRcdFx0XHRcdCQoIHRoaXMgKS5pbm5lckhlaWdodCgpICsgJCggdGhpcyApLmhlaWdodCgpICkgKTtcblx0XHRcdH0gKVxuXHRcdFx0XHQuY3NzKCBcIm92ZXJmbG93XCIsIFwiYXV0b1wiICk7XG5cdFx0fSBlbHNlIGlmICggaGVpZ2h0U3R5bGUgPT09IFwiYXV0b1wiICkge1xuXHRcdFx0bWF4SGVpZ2h0ID0gMDtcblx0XHRcdHRoaXMucGFuZWxzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRtYXhIZWlnaHQgPSBNYXRoLm1heCggbWF4SGVpZ2h0LCAkKCB0aGlzICkuaGVpZ2h0KCBcIlwiICkuaGVpZ2h0KCkgKTtcblx0XHRcdH0gKS5oZWlnaHQoIG1heEhlaWdodCApO1xuXHRcdH1cblx0fSxcblxuXHRfZXZlbnRIYW5kbGVyOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRhY3RpdmUgPSB0aGlzLmFjdGl2ZSxcblx0XHRcdGFuY2hvciA9ICQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKSxcblx0XHRcdHRhYiA9IGFuY2hvci5jbG9zZXN0KCBcImxpXCIgKSxcblx0XHRcdGNsaWNrZWRJc0FjdGl2ZSA9IHRhYlsgMCBdID09PSBhY3RpdmVbIDAgXSxcblx0XHRcdGNvbGxhcHNpbmcgPSBjbGlja2VkSXNBY3RpdmUgJiYgb3B0aW9ucy5jb2xsYXBzaWJsZSxcblx0XHRcdHRvU2hvdyA9IGNvbGxhcHNpbmcgPyAkKCkgOiB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGFiICksXG5cdFx0XHR0b0hpZGUgPSAhYWN0aXZlLmxlbmd0aCA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCBhY3RpdmUgKSxcblx0XHRcdGV2ZW50RGF0YSA9IHtcblx0XHRcdFx0b2xkVGFiOiBhY3RpdmUsXG5cdFx0XHRcdG9sZFBhbmVsOiB0b0hpZGUsXG5cdFx0XHRcdG5ld1RhYjogY29sbGFwc2luZyA/ICQoKSA6IHRhYixcblx0XHRcdFx0bmV3UGFuZWw6IHRvU2hvd1xuXHRcdFx0fTtcblxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRpZiAoIHRhYi5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgfHxcblxuXHRcdFx0XHQvLyB0YWIgaXMgYWxyZWFkeSBsb2FkaW5nXG5cdFx0XHRcdHRhYi5oYXNDbGFzcyggXCJ1aS10YWJzLWxvYWRpbmdcIiApIHx8XG5cblx0XHRcdFx0Ly8gY2FuJ3Qgc3dpdGNoIGR1cm5pbmcgYW4gYW5pbWF0aW9uXG5cdFx0XHRcdHRoaXMucnVubmluZyB8fFxuXG5cdFx0XHRcdC8vIGNsaWNrIG9uIGFjdGl2ZSBoZWFkZXIsIGJ1dCBub3QgY29sbGFwc2libGVcblx0XHRcdFx0KCBjbGlja2VkSXNBY3RpdmUgJiYgIW9wdGlvbnMuY29sbGFwc2libGUgKSB8fFxuXG5cdFx0XHRcdC8vIGFsbG93IGNhbmNlbGluZyBhY3RpdmF0aW9uXG5cdFx0XHRcdCggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVBY3RpdmF0ZVwiLCBldmVudCwgZXZlbnREYXRhICkgPT09IGZhbHNlICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0b3B0aW9ucy5hY3RpdmUgPSBjb2xsYXBzaW5nID8gZmFsc2UgOiB0aGlzLnRhYnMuaW5kZXgoIHRhYiApO1xuXG5cdFx0dGhpcy5hY3RpdmUgPSBjbGlja2VkSXNBY3RpdmUgPyAkKCkgOiB0YWI7XG5cdFx0aWYgKCB0aGlzLnhociApIHtcblx0XHRcdHRoaXMueGhyLmFib3J0KCk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhdG9IaWRlLmxlbmd0aCAmJiAhdG9TaG93Lmxlbmd0aCApIHtcblx0XHRcdCQuZXJyb3IoIFwialF1ZXJ5IFVJIFRhYnM6IE1pc21hdGNoaW5nIGZyYWdtZW50IGlkZW50aWZpZXIuXCIgKTtcblx0XHR9XG5cblx0XHRpZiAoIHRvU2hvdy5sZW5ndGggKSB7XG5cdFx0XHR0aGlzLmxvYWQoIHRoaXMudGFicy5pbmRleCggdGFiICksIGV2ZW50ICk7XG5cdFx0fVxuXHRcdHRoaXMuX3RvZ2dsZSggZXZlbnQsIGV2ZW50RGF0YSApO1xuXHR9LFxuXG5cdC8vIEhhbmRsZXMgc2hvdy9oaWRlIGZvciBzZWxlY3RpbmcgdGFic1xuXHRfdG9nZ2xlOiBmdW5jdGlvbiggZXZlbnQsIGV2ZW50RGF0YSApIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHR0b1Nob3cgPSBldmVudERhdGEubmV3UGFuZWwsXG5cdFx0XHR0b0hpZGUgPSBldmVudERhdGEub2xkUGFuZWw7XG5cblx0XHR0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuXG5cdFx0ZnVuY3Rpb24gY29tcGxldGUoKSB7XG5cdFx0XHR0aGF0LnJ1bm5pbmcgPSBmYWxzZTtcblx0XHRcdHRoYXQuX3RyaWdnZXIoIFwiYWN0aXZhdGVcIiwgZXZlbnQsIGV2ZW50RGF0YSApO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNob3coKSB7XG5cdFx0XHR0aGF0Ll9hZGRDbGFzcyggZXZlbnREYXRhLm5ld1RhYi5jbG9zZXN0KCBcImxpXCIgKSwgXCJ1aS10YWJzLWFjdGl2ZVwiLCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7XG5cblx0XHRcdGlmICggdG9TaG93Lmxlbmd0aCAmJiB0aGF0Lm9wdGlvbnMuc2hvdyApIHtcblx0XHRcdFx0dGhhdC5fc2hvdyggdG9TaG93LCB0aGF0Lm9wdGlvbnMuc2hvdywgY29tcGxldGUgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRvU2hvdy5zaG93KCk7XG5cdFx0XHRcdGNvbXBsZXRlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU3RhcnQgb3V0IGJ5IGhpZGluZywgdGhlbiBzaG93aW5nLCB0aGVuIGNvbXBsZXRpbmdcblx0XHRpZiAoIHRvSGlkZS5sZW5ndGggJiYgdGhpcy5vcHRpb25zLmhpZGUgKSB7XG5cdFx0XHR0aGlzLl9oaWRlKCB0b0hpZGUsIHRoaXMub3B0aW9ucy5oaWRlLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dGhhdC5fcmVtb3ZlQ2xhc3MoIGV2ZW50RGF0YS5vbGRUYWIuY2xvc2VzdCggXCJsaVwiICksXG5cdFx0XHRcdFx0XCJ1aS10YWJzLWFjdGl2ZVwiLCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7XG5cdFx0XHRcdHNob3coKTtcblx0XHRcdH0gKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fcmVtb3ZlQ2xhc3MoIGV2ZW50RGF0YS5vbGRUYWIuY2xvc2VzdCggXCJsaVwiICksXG5cdFx0XHRcdFwidWktdGFicy1hY3RpdmVcIiwgXCJ1aS1zdGF0ZS1hY3RpdmVcIiApO1xuXHRcdFx0dG9IaWRlLmhpZGUoKTtcblx0XHRcdHNob3coKTtcblx0XHR9XG5cblx0XHR0b0hpZGUuYXR0ciggXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIiApO1xuXHRcdGV2ZW50RGF0YS5vbGRUYWIuYXR0cigge1xuXHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwiZmFsc2VcIixcblx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCJcblx0XHR9ICk7XG5cblx0XHQvLyBJZiB3ZSdyZSBzd2l0Y2hpbmcgdGFicywgcmVtb3ZlIHRoZSBvbGQgdGFiIGZyb20gdGhlIHRhYiBvcmRlci5cblx0XHQvLyBJZiB3ZSdyZSBvcGVuaW5nIGZyb20gY29sbGFwc2VkIHN0YXRlLCByZW1vdmUgdGhlIHByZXZpb3VzIHRhYiBmcm9tIHRoZSB0YWIgb3JkZXIuXG5cdFx0Ly8gSWYgd2UncmUgY29sbGFwc2luZywgdGhlbiBrZWVwIHRoZSBjb2xsYXBzaW5nIHRhYiBpbiB0aGUgdGFiIG9yZGVyLlxuXHRcdGlmICggdG9TaG93Lmxlbmd0aCAmJiB0b0hpZGUubGVuZ3RoICkge1xuXHRcdFx0ZXZlbnREYXRhLm9sZFRhYi5hdHRyKCBcInRhYkluZGV4XCIsIC0xICk7XG5cdFx0fSBlbHNlIGlmICggdG9TaG93Lmxlbmd0aCApIHtcblx0XHRcdHRoaXMudGFicy5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gJCggdGhpcyApLmF0dHIoIFwidGFiSW5kZXhcIiApID09PSAwO1xuXHRcdFx0fSApXG5cdFx0XHRcdC5hdHRyKCBcInRhYkluZGV4XCIsIC0xICk7XG5cdFx0fVxuXG5cdFx0dG9TaG93LmF0dHIoIFwiYXJpYS1oaWRkZW5cIiwgXCJmYWxzZVwiICk7XG5cdFx0ZXZlbnREYXRhLm5ld1RhYi5hdHRyKCB7XG5cdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJ0cnVlXCIsXG5cdFx0XHRcImFyaWEtZXhwYW5kZWRcIjogXCJ0cnVlXCIsXG5cdFx0XHR0YWJJbmRleDogMFxuXHRcdH0gKTtcblx0fSxcblxuXHRfYWN0aXZhdGU6IGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHR2YXIgYW5jaG9yLFxuXHRcdFx0YWN0aXZlID0gdGhpcy5fZmluZEFjdGl2ZSggaW5kZXggKTtcblxuXHRcdC8vIFRyeWluZyB0byBhY3RpdmF0ZSB0aGUgYWxyZWFkeSBhY3RpdmUgcGFuZWxcblx0XHRpZiAoIGFjdGl2ZVsgMCBdID09PSB0aGlzLmFjdGl2ZVsgMCBdICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFRyeWluZyB0byBjb2xsYXBzZSwgc2ltdWxhdGUgYSBjbGljayBvbiB0aGUgY3VycmVudCBhY3RpdmUgaGVhZGVyXG5cdFx0aWYgKCAhYWN0aXZlLmxlbmd0aCApIHtcblx0XHRcdGFjdGl2ZSA9IHRoaXMuYWN0aXZlO1xuXHRcdH1cblxuXHRcdGFuY2hvciA9IGFjdGl2ZS5maW5kKCBcIi51aS10YWJzLWFuY2hvclwiIClbIDAgXTtcblx0XHR0aGlzLl9ldmVudEhhbmRsZXIoIHtcblx0XHRcdHRhcmdldDogYW5jaG9yLFxuXHRcdFx0Y3VycmVudFRhcmdldDogYW5jaG9yLFxuXHRcdFx0cHJldmVudERlZmF1bHQ6ICQubm9vcFxuXHRcdH0gKTtcblx0fSxcblxuXHRfZmluZEFjdGl2ZTogZnVuY3Rpb24oIGluZGV4ICkge1xuXHRcdHJldHVybiBpbmRleCA9PT0gZmFsc2UgPyAkKCkgOiB0aGlzLnRhYnMuZXEoIGluZGV4ICk7XG5cdH0sXG5cblx0X2dldEluZGV4OiBmdW5jdGlvbiggaW5kZXggKSB7XG5cblx0XHQvLyBtZXRhLWZ1bmN0aW9uIHRvIGdpdmUgdXNlcnMgb3B0aW9uIHRvIHByb3ZpZGUgYSBocmVmIHN0cmluZyBpbnN0ZWFkIG9mIGEgbnVtZXJpY2FsIGluZGV4LlxuXHRcdGlmICggdHlwZW9mIGluZGV4ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0aW5kZXggPSB0aGlzLmFuY2hvcnMuaW5kZXgoIHRoaXMuYW5jaG9ycy5maWx0ZXIoIFwiW2hyZWYkPSdcIiArXG5cdFx0XHRcdCQudWkuZXNjYXBlU2VsZWN0b3IoIGluZGV4ICkgKyBcIiddXCIgKSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBpbmRleDtcblx0fSxcblxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCB0aGlzLnhociApIHtcblx0XHRcdHRoaXMueGhyLmFib3J0KCk7XG5cdFx0fVxuXG5cdFx0dGhpcy50YWJsaXN0XG5cdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKVxuXHRcdFx0Lm9mZiggdGhpcy5ldmVudE5hbWVzcGFjZSApO1xuXG5cdFx0dGhpcy5hbmNob3JzXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlIHRhYkluZGV4XCIgKVxuXHRcdFx0LnJlbW92ZVVuaXF1ZUlkKCk7XG5cblx0XHR0aGlzLnRhYnMuYWRkKCB0aGlzLnBhbmVscyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAkLmRhdGEoIHRoaXMsIFwidWktdGFicy1kZXN0cm95XCIgKSApIHtcblx0XHRcdFx0JCggdGhpcyApLnJlbW92ZSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCggdGhpcyApLnJlbW92ZUF0dHIoIFwicm9sZSB0YWJJbmRleCBcIiArXG5cdFx0XHRcdFx0XCJhcmlhLWxpdmUgYXJpYS1idXN5IGFyaWEtc2VsZWN0ZWQgYXJpYS1sYWJlbGxlZGJ5IGFyaWEtaGlkZGVuIGFyaWEtZXhwYW5kZWRcIiApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHRcdHRoaXMudGFicy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBsaSA9ICQoIHRoaXMgKSxcblx0XHRcdFx0cHJldiA9IGxpLmRhdGEoIFwidWktdGFicy1hcmlhLWNvbnRyb2xzXCIgKTtcblx0XHRcdGlmICggcHJldiApIHtcblx0XHRcdFx0bGlcblx0XHRcdFx0XHQuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIsIHByZXYgKVxuXHRcdFx0XHRcdC5yZW1vdmVEYXRhKCBcInVpLXRhYnMtYXJpYS1jb250cm9sc1wiICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRsaS5yZW1vdmVBdHRyKCBcImFyaWEtY29udHJvbHNcIiApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHRcdHRoaXMucGFuZWxzLnNob3coKTtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLmhlaWdodFN0eWxlICE9PSBcImNvbnRlbnRcIiApIHtcblx0XHRcdHRoaXMucGFuZWxzLmNzcyggXCJoZWlnaHRcIiwgXCJcIiApO1xuXHRcdH1cblx0fSxcblxuXHRlbmFibGU6IGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHR2YXIgZGlzYWJsZWQgPSB0aGlzLm9wdGlvbnMuZGlzYWJsZWQ7XG5cdFx0aWYgKCBkaXNhYmxlZCA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBpbmRleCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0ZGlzYWJsZWQgPSBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTtcblx0XHRcdGlmICggJC5pc0FycmF5KCBkaXNhYmxlZCApICkge1xuXHRcdFx0XHRkaXNhYmxlZCA9ICQubWFwKCBkaXNhYmxlZCwgZnVuY3Rpb24oIG51bSApIHtcblx0XHRcdFx0XHRyZXR1cm4gbnVtICE9PSBpbmRleCA/IG51bSA6IG51bGw7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRpc2FibGVkID0gJC5tYXAoIHRoaXMudGFicywgZnVuY3Rpb24oIGxpLCBudW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG51bSAhPT0gaW5kZXggPyBudW0gOiBudWxsO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuX3NldE9wdGlvbkRpc2FibGVkKCBkaXNhYmxlZCApO1xuXHR9LFxuXG5cdGRpc2FibGU6IGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHR2YXIgZGlzYWJsZWQgPSB0aGlzLm9wdGlvbnMuZGlzYWJsZWQ7XG5cdFx0aWYgKCBkaXNhYmxlZCA9PT0gdHJ1ZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIGluZGV4ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRkaXNhYmxlZCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7XG5cdFx0XHRpZiAoICQuaW5BcnJheSggaW5kZXgsIGRpc2FibGVkICkgIT09IC0xICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAoICQuaXNBcnJheSggZGlzYWJsZWQgKSApIHtcblx0XHRcdFx0ZGlzYWJsZWQgPSAkLm1lcmdlKCBbIGluZGV4IF0sIGRpc2FibGVkICkuc29ydCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGlzYWJsZWQgPSBbIGluZGV4IF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuX3NldE9wdGlvbkRpc2FibGVkKCBkaXNhYmxlZCApO1xuXHR9LFxuXG5cdGxvYWQ6IGZ1bmN0aW9uKCBpbmRleCwgZXZlbnQgKSB7XG5cdFx0aW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHR0YWIgPSB0aGlzLnRhYnMuZXEoIGluZGV4ICksXG5cdFx0XHRhbmNob3IgPSB0YWIuZmluZCggXCIudWktdGFicy1hbmNob3JcIiApLFxuXHRcdFx0cGFuZWwgPSB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGFiICksXG5cdFx0XHRldmVudERhdGEgPSB7XG5cdFx0XHRcdHRhYjogdGFiLFxuXHRcdFx0XHRwYW5lbDogcGFuZWxcblx0XHRcdH0sXG5cdFx0XHRjb21wbGV0ZSA9IGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xuXHRcdFx0XHRpZiAoIHN0YXR1cyA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdHRoYXQucGFuZWxzLnN0b3AoIGZhbHNlLCB0cnVlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGF0Ll9yZW1vdmVDbGFzcyggdGFiLCBcInVpLXRhYnMtbG9hZGluZ1wiICk7XG5cdFx0XHRcdHBhbmVsLnJlbW92ZUF0dHIoIFwiYXJpYS1idXN5XCIgKTtcblxuXHRcdFx0XHRpZiAoIGpxWEhSID09PSB0aGF0LnhociApIHtcblx0XHRcdFx0XHRkZWxldGUgdGhhdC54aHI7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHQvLyBOb3QgcmVtb3RlXG5cdFx0aWYgKCB0aGlzLl9pc0xvY2FsKCBhbmNob3JbIDAgXSApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMueGhyID0gJC5hamF4KCB0aGlzLl9hamF4U2V0dGluZ3MoIGFuY2hvciwgZXZlbnQsIGV2ZW50RGF0YSApICk7XG5cblx0XHQvLyBTdXBwb3J0OiBqUXVlcnkgPDEuOFxuXHRcdC8vIGpRdWVyeSA8MS44IHJldHVybnMgZmFsc2UgaWYgdGhlIHJlcXVlc3QgaXMgY2FuY2VsZWQgaW4gYmVmb3JlU2VuZCxcblx0XHQvLyBidXQgYXMgb2YgMS44LCAkLmFqYXgoKSBhbHdheXMgcmV0dXJucyBhIGpxWEhSIG9iamVjdC5cblx0XHRpZiAoIHRoaXMueGhyICYmIHRoaXMueGhyLnN0YXR1c1RleHQgIT09IFwiY2FuY2VsZWRcIiApIHtcblx0XHRcdHRoaXMuX2FkZENsYXNzKCB0YWIsIFwidWktdGFicy1sb2FkaW5nXCIgKTtcblx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1idXN5XCIsIFwidHJ1ZVwiICk7XG5cblx0XHRcdHRoaXMueGhyXG5cdFx0XHRcdC5kb25lKCBmdW5jdGlvbiggcmVzcG9uc2UsIHN0YXR1cywganFYSFIgKSB7XG5cblx0XHRcdFx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxuXHRcdFx0XHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzExNzc4XG5cdFx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRwYW5lbC5odG1sKCByZXNwb25zZSApO1xuXHRcdFx0XHRcdFx0dGhhdC5fdHJpZ2dlciggXCJsb2FkXCIsIGV2ZW50LCBldmVudERhdGEgKTtcblxuXHRcdFx0XHRcdFx0Y29tcGxldGUoIGpxWEhSLCBzdGF0dXMgKTtcblx0XHRcdFx0XHR9LCAxICk7XG5cdFx0XHRcdH0gKVxuXHRcdFx0XHQuZmFpbCggZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XG5cblx0XHRcdFx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxuXHRcdFx0XHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzExNzc4XG5cdFx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRjb21wbGV0ZSgganFYSFIsIHN0YXR1cyApO1xuXHRcdFx0XHRcdH0sIDEgKTtcblx0XHRcdFx0fSApO1xuXHRcdH1cblx0fSxcblxuXHRfYWpheFNldHRpbmdzOiBmdW5jdGlvbiggYW5jaG9yLCBldmVudCwgZXZlbnREYXRhICkge1xuXHRcdHZhciB0aGF0ID0gdGhpcztcblx0XHRyZXR1cm4ge1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8MTEgb25seVxuXHRcdFx0Ly8gU3RyaXAgYW55IGhhc2ggdGhhdCBleGlzdHMgdG8gcHJldmVudCBlcnJvcnMgd2l0aCB0aGUgQWpheCByZXF1ZXN0XG5cdFx0XHR1cmw6IGFuY2hvci5hdHRyKCBcImhyZWZcIiApLnJlcGxhY2UoIC8jLiokLywgXCJcIiApLFxuXHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oIGpxWEhSLCBzZXR0aW5ncyApIHtcblx0XHRcdFx0cmV0dXJuIHRoYXQuX3RyaWdnZXIoIFwiYmVmb3JlTG9hZFwiLCBldmVudCxcblx0XHRcdFx0XHQkLmV4dGVuZCggeyBqcVhIUjoganFYSFIsIGFqYXhTZXR0aW5nczogc2V0dGluZ3MgfSwgZXZlbnREYXRhICkgKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9LFxuXG5cdF9nZXRQYW5lbEZvclRhYjogZnVuY3Rpb24oIHRhYiApIHtcblx0XHR2YXIgaWQgPSAkKCB0YWIgKS5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApO1xuXHRcdHJldHVybiB0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5fc2FuaXRpemVTZWxlY3RvciggXCIjXCIgKyBpZCApICk7XG5cdH1cbn0gKTtcblxuLy8gREVQUkVDQVRFRFxuLy8gVE9ETzogU3dpdGNoIHJldHVybiBiYWNrIHRvIHdpZGdldCBkZWNsYXJhdGlvbiBhdCB0b3Agb2YgZmlsZSB3aGVuIHRoaXMgaXMgcmVtb3ZlZFxuaWYgKCAkLnVpQmFja0NvbXBhdCAhPT0gZmFsc2UgKSB7XG5cblx0Ly8gQmFja2NvbXBhdCBmb3IgdWktdGFiIGNsYXNzIChub3cgdWktdGFicy10YWIpXG5cdCQud2lkZ2V0KCBcInVpLnRhYnNcIiwgJC51aS50YWJzLCB7XG5cdFx0X3Byb2Nlc3NUYWJzOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xuXHRcdFx0dGhpcy5fYWRkQ2xhc3MoIHRoaXMudGFicywgXCJ1aS10YWJcIiApO1xuXHRcdH1cblx0fSApO1xufVxuXG5yZXR1cm4gJC51aS50YWJzO1xuXG59ICkgKTtcbiIsIi8qXG4gKiBqUXVlcnkgVUkgTmVzdGVkIFNvcnRhYmxlXG4gKiB2IDIuMWEgLyAyMDE2LTAyLTA0XG4gKiBodHRwczovL2dpdGh1Yi5jb20vaWxpa2Vud2YvbmVzdGVkU29ydGFibGVcbiAqXG4gKiBEZXBlbmRzIG9uOlxuICpcdCBqcXVlcnkudWkuc29ydGFibGUuanMgMS4xMCtcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxNiBNYW51ZWxlIEogU2FyZmF0dGkgYW5kIGNvbnRyaWJ1dG9yc1xuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4gKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICovXG4oZnVuY3Rpb24oIGZhY3RvcnkgKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG5cblx0XHQvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG5cdFx0ZGVmaW5lKFtcblx0XHRcdFwianF1ZXJ5XCIsXG5cdFx0XHRcImpxdWVyeS11aS9zb3J0YWJsZVwiXG5cdFx0XSwgZmFjdG9yeSApO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXG5cdFx0ZmFjdG9yeSggd2luZG93LmpRdWVyeSApO1xuXHR9XG59KGZ1bmN0aW9uKCQpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0ZnVuY3Rpb24gaXNPdmVyQXhpcyggeCwgcmVmZXJlbmNlLCBzaXplICkge1xuXHRcdHJldHVybiAoIHggPiByZWZlcmVuY2UgKSAmJiAoIHggPCAoIHJlZmVyZW5jZSArIHNpemUgKSApO1xuXHR9XG5cblx0JC53aWRnZXQoXCJtanMubmVzdGVkU29ydGFibGVcIiwgJC5leHRlbmQoe30sICQudWkuc29ydGFibGUucHJvdG90eXBlLCB7XG5cblx0XHRvcHRpb25zOiB7XG5cdFx0XHRkaXNhYmxlUGFyZW50Q2hhbmdlOiBmYWxzZSxcblx0XHRcdGRvTm90Q2xlYXI6IGZhbHNlLFxuXHRcdFx0ZXhwYW5kT25Ib3ZlcjogNzAwLFxuXHRcdFx0aXNBbGxvd2VkOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXG5cdFx0XHRpc1RyZWU6IGZhbHNlLFxuXHRcdFx0bGlzdFR5cGU6IFwib2xcIixcblx0XHRcdG1heExldmVsczogMCxcblx0XHRcdHByb3RlY3RSb290OiBmYWxzZSxcblx0XHRcdHJvb3RJRDogbnVsbCxcblx0XHRcdHJ0bDogZmFsc2UsXG5cdFx0XHRzdGFydENvbGxhcHNlZDogZmFsc2UsXG5cdFx0XHR0YWJTaXplOiAyMCxcblxuXHRcdFx0YnJhbmNoQ2xhc3M6IFwibWpzLW5lc3RlZFNvcnRhYmxlLWJyYW5jaFwiLFxuXHRcdFx0Y29sbGFwc2VkQ2xhc3M6IFwibWpzLW5lc3RlZFNvcnRhYmxlLWNvbGxhcHNlZFwiLFxuXHRcdFx0ZGlzYWJsZU5lc3RpbmdDbGFzczogXCJtanMtbmVzdGVkU29ydGFibGUtbm8tbmVzdGluZ1wiLFxuXHRcdFx0ZXJyb3JDbGFzczogXCJtanMtbmVzdGVkU29ydGFibGUtZXJyb3JcIixcblx0XHRcdGV4cGFuZGVkQ2xhc3M6IFwibWpzLW5lc3RlZFNvcnRhYmxlLWV4cGFuZGVkXCIsXG5cdFx0XHRob3ZlcmluZ0NsYXNzOiBcIm1qcy1uZXN0ZWRTb3J0YWJsZS1ob3ZlcmluZ1wiLFxuXHRcdFx0bGVhZkNsYXNzOiBcIm1qcy1uZXN0ZWRTb3J0YWJsZS1sZWFmXCIsXG5cdFx0XHRkaXNhYmxlZENsYXNzOiBcIm1qcy1uZXN0ZWRTb3J0YWJsZS1kaXNhYmxlZFwiXG5cdFx0fSxcblxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHRlcnI7XG5cblx0XHRcdHRoaXMuZWxlbWVudC5kYXRhKFwidWktc29ydGFibGVcIiwgdGhpcy5lbGVtZW50LmRhdGEoXCJtanMtbmVzdGVkU29ydGFibGVcIikpO1xuXG5cdFx0XHQvLyBtanMgLSBwcmV2ZW50IGJyb3dzZXIgZnJvbSBmcmVlemluZyBpZiB0aGUgSFRNTCBpcyBub3QgY29ycmVjdFxuXHRcdFx0aWYgKCF0aGlzLmVsZW1lbnQuaXModGhpcy5vcHRpb25zLmxpc3RUeXBlKSkge1xuXHRcdFx0XHRlcnIgPSBcIm5lc3RlZFNvcnRhYmxlOiBcIiArXG5cdFx0XHRcdFx0XCJQbGVhc2UgY2hlY2sgdGhhdCB0aGUgbGlzdFR5cGUgb3B0aW9uIGlzIHNldCB0byB5b3VyIGFjdHVhbCBsaXN0IHR5cGVcIjtcblxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZXJyKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaWYgd2UgaGF2ZSBhIHRyZWUgd2l0aCBleHBhbmRpbmcvY29sbGFwc2luZyBmdW5jdGlvbmFsaXR5LFxuXHRcdFx0Ly8gZm9yY2UgJ2ludGVyc2VjdCcgdG9sZXJhbmNlIG1ldGhvZFxuXHRcdFx0aWYgKHRoaXMub3B0aW9ucy5pc1RyZWUgJiYgdGhpcy5vcHRpb25zLmV4cGFuZE9uSG92ZXIpIHtcblx0XHRcdFx0dGhpcy5vcHRpb25zLnRvbGVyYW5jZSA9IFwiaW50ZXJzZWN0XCI7XG5cdFx0XHR9XG5cblx0XHRcdCQudWkuc29ydGFibGUucHJvdG90eXBlLl9jcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdFx0Ly8gcHJlcGFyZSB0aGUgdHJlZSBieSBhcHBseWluZyB0aGUgcmlnaHQgY2xhc3Nlc1xuXHRcdFx0Ly8gKHRoZSBDU1MgaXMgcmVzcG9uc2libGUgZm9yIGFjdHVhbCBoaWRlL3Nob3cgZnVuY3Rpb25hbGl0eSlcblx0XHRcdGlmICh0aGlzLm9wdGlvbnMuaXNUcmVlKSB7XG5cdFx0XHRcdCQodGhpcy5pdGVtcykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgJGxpID0gdGhpcy5pdGVtLFxuXHRcdFx0XHRcdFx0aGFzQ29sbGFwc2VkQ2xhc3MgPSAkbGkuaGFzQ2xhc3Moc2VsZi5vcHRpb25zLmNvbGxhcHNlZENsYXNzKSxcblx0XHRcdFx0XHRcdGhhc0V4cGFuZGVkQ2xhc3MgPSAkbGkuaGFzQ2xhc3Moc2VsZi5vcHRpb25zLmV4cGFuZGVkQ2xhc3MpO1xuXG5cdFx0XHRcdFx0aWYgKCRsaS5jaGlsZHJlbihzZWxmLm9wdGlvbnMubGlzdFR5cGUpLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JGxpLmFkZENsYXNzKHNlbGYub3B0aW9ucy5icmFuY2hDbGFzcyk7XG5cdFx0XHRcdFx0XHQvLyBleHBhbmQvY29sbGFwc2UgY2xhc3Mgb25seSBpZiB0aGV5IGhhdmUgY2hpbGRyZW5cblxuXHRcdFx0XHRcdFx0aWYgKCAhaGFzQ29sbGFwc2VkQ2xhc3MgJiYgIWhhc0V4cGFuZGVkQ2xhc3MgKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChzZWxmLm9wdGlvbnMuc3RhcnRDb2xsYXBzZWQpIHtcblx0XHRcdFx0XHRcdFx0XHQkbGkuYWRkQ2xhc3Moc2VsZi5vcHRpb25zLmNvbGxhcHNlZENsYXNzKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHQkbGkuYWRkQ2xhc3Moc2VsZi5vcHRpb25zLmV4cGFuZGVkQ2xhc3MpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdCRsaS5hZGRDbGFzcyhzZWxmLm9wdGlvbnMubGVhZkNsYXNzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLmVsZW1lbnRcblx0XHRcdFx0LnJlbW92ZURhdGEoXCJtanMtbmVzdGVkU29ydGFibGVcIilcblx0XHRcdFx0LnJlbW92ZURhdGEoXCJ1aS1zb3J0YWJsZVwiKTtcblx0XHRcdHJldHVybiAkLnVpLnNvcnRhYmxlLnByb3RvdHlwZS5fZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdH0sXG5cblx0XHRfbW91c2VEcmFnOiBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0dmFyIGksXG5cdFx0XHRcdGl0ZW0sXG5cdFx0XHRcdGl0ZW1FbGVtZW50LFxuXHRcdFx0XHRpbnRlcnNlY3Rpb24sXG5cdFx0XHRcdHNlbGYgPSB0aGlzLFxuXHRcdFx0XHRvID0gdGhpcy5vcHRpb25zLFxuXHRcdFx0XHRzY3JvbGxlZCA9IGZhbHNlLFxuXHRcdFx0XHQkZG9jdW1lbnQgPSAkKGRvY3VtZW50KSxcblx0XHRcdFx0cHJldmlvdXNUb3BPZmZzZXQsXG5cdFx0XHRcdHBhcmVudEl0ZW0sXG5cdFx0XHRcdGxldmVsLFxuXHRcdFx0XHRjaGlsZExldmVscyxcblx0XHRcdFx0aXRlbUFmdGVyLFxuXHRcdFx0XHRpdGVtQmVmb3JlLFxuXHRcdFx0XHRuZXdMaXN0LFxuXHRcdFx0XHRtZXRob2QsXG5cdFx0XHRcdGEsXG5cdFx0XHRcdHByZXZpb3VzSXRlbSxcblx0XHRcdFx0bmV4dEl0ZW0sXG5cdFx0XHRcdGhlbHBlcklzTm90U2libGluZztcblxuXHRcdFx0Ly9Db21wdXRlIHRoZSBoZWxwZXJzIHBvc2l0aW9uXG5cdFx0XHR0aGlzLnBvc2l0aW9uID0gdGhpcy5fZ2VuZXJhdGVQb3NpdGlvbihldmVudCk7XG5cdFx0XHR0aGlzLnBvc2l0aW9uQWJzID0gdGhpcy5fY29udmVydFBvc2l0aW9uVG8oXCJhYnNvbHV0ZVwiKTtcblxuXHRcdFx0aWYgKCF0aGlzLmxhc3RQb3NpdGlvbkFicykge1xuXHRcdFx0XHR0aGlzLmxhc3RQb3NpdGlvbkFicyA9IHRoaXMucG9zaXRpb25BYnM7XG5cdFx0XHR9XG5cblx0XHRcdC8vRG8gc2Nyb2xsaW5nXG5cdFx0XHRpZiAodGhpcy5vcHRpb25zLnNjcm9sbCkge1xuXHRcdFx0XHRpZiAodGhpcy5zY3JvbGxQYXJlbnRbMF0gIT09IGRvY3VtZW50ICYmIHRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUgIT09IFwiSFRNTFwiKSB7XG5cblx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHQoXG5cdFx0XHRcdFx0XHRcdHRoaXMub3ZlcmZsb3dPZmZzZXQudG9wICtcblx0XHRcdFx0XHRcdFx0dGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0SGVpZ2h0XG5cdFx0XHRcdFx0XHQpIC1cblx0XHRcdFx0XHRcdGV2ZW50LnBhZ2VZIDxcblx0XHRcdFx0XHRcdG8uc2Nyb2xsU2Vuc2l0aXZpdHlcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdHNjcm9sbGVkID0gdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCkgKyBvLnNjcm9sbFNwZWVkO1xuXHRcdFx0XHRcdFx0dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKHNjcm9sbGVkKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0XHRcdFx0ZXZlbnQucGFnZVkgLVxuXHRcdFx0XHRcdFx0dGhpcy5vdmVyZmxvd09mZnNldC50b3AgPFxuXHRcdFx0XHRcdFx0by5zY3JvbGxTZW5zaXRpdml0eVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0c2Nyb2xsZWQgPSB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSAtIG8uc2Nyb2xsU3BlZWQ7XG5cdFx0XHRcdFx0XHR0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3Aoc2Nyb2xsZWQpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdChcblx0XHRcdFx0XHRcdFx0dGhpcy5vdmVyZmxvd09mZnNldC5sZWZ0ICtcblx0XHRcdFx0XHRcdFx0dGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0V2lkdGhcblx0XHRcdFx0XHRcdCkgLVxuXHRcdFx0XHRcdFx0ZXZlbnQucGFnZVggPFxuXHRcdFx0XHRcdFx0by5zY3JvbGxTZW5zaXRpdml0eVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0c2Nyb2xsZWQgPSB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCkgKyBvLnNjcm9sbFNwZWVkO1xuXHRcdFx0XHRcdFx0dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdChzY3JvbGxlZCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChcblx0XHRcdFx0XHRcdGV2ZW50LnBhZ2VYIC1cblx0XHRcdFx0XHRcdHRoaXMub3ZlcmZsb3dPZmZzZXQubGVmdCA8XG5cdFx0XHRcdFx0XHRvLnNjcm9sbFNlbnNpdGl2aXR5XG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRzY3JvbGxlZCA9IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKSAtIG8uc2Nyb2xsU3BlZWQ7XG5cdFx0XHRcdFx0XHR0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KHNjcm9sbGVkKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdGV2ZW50LnBhZ2VZIC1cblx0XHRcdFx0XHRcdCRkb2N1bWVudC5zY3JvbGxUb3AoKSA8XG5cdFx0XHRcdFx0XHRvLnNjcm9sbFNlbnNpdGl2aXR5XG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRzY3JvbGxlZCA9ICRkb2N1bWVudC5zY3JvbGxUb3AoKSAtIG8uc2Nyb2xsU3BlZWQ7XG5cdFx0XHRcdFx0XHQkZG9jdW1lbnQuc2Nyb2xsVG9wKHNjcm9sbGVkKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0XHRcdFx0JCh3aW5kb3cpLmhlaWdodCgpIC1cblx0XHRcdFx0XHRcdChcblx0XHRcdFx0XHRcdFx0ZXZlbnQucGFnZVkgLVxuXHRcdFx0XHRcdFx0XHQkZG9jdW1lbnQuc2Nyb2xsVG9wKClcblx0XHRcdFx0XHRcdCkgPFxuXHRcdFx0XHRcdFx0by5zY3JvbGxTZW5zaXRpdml0eVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0c2Nyb2xsZWQgPSAkZG9jdW1lbnQuc2Nyb2xsVG9wKCkgKyBvLnNjcm9sbFNwZWVkO1xuXHRcdFx0XHRcdFx0JGRvY3VtZW50LnNjcm9sbFRvcChzY3JvbGxlZCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0ZXZlbnQucGFnZVggLVxuXHRcdFx0XHRcdFx0JGRvY3VtZW50LnNjcm9sbExlZnQoKSA8XG5cdFx0XHRcdFx0XHRvLnNjcm9sbFNlbnNpdGl2aXR5XG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRzY3JvbGxlZCA9ICRkb2N1bWVudC5zY3JvbGxMZWZ0KCkgLSBvLnNjcm9sbFNwZWVkO1xuXHRcdFx0XHRcdFx0JGRvY3VtZW50LnNjcm9sbExlZnQoc2Nyb2xsZWQpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRcdFx0XHQkKHdpbmRvdykud2lkdGgoKSAtXG5cdFx0XHRcdFx0XHQoXG5cdFx0XHRcdFx0XHRcdGV2ZW50LnBhZ2VYIC1cblx0XHRcdFx0XHRcdFx0JGRvY3VtZW50LnNjcm9sbExlZnQoKVxuXHRcdFx0XHRcdFx0KSA8XG5cdFx0XHRcdFx0XHRvLnNjcm9sbFNlbnNpdGl2aXR5XG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRzY3JvbGxlZCA9ICRkb2N1bWVudC5zY3JvbGxMZWZ0KCkgKyBvLnNjcm9sbFNwZWVkO1xuXHRcdFx0XHRcdFx0JGRvY3VtZW50LnNjcm9sbExlZnQoc2Nyb2xsZWQpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHNjcm9sbGVkICE9PSBmYWxzZSAmJiAkLnVpLmRkbWFuYWdlciAmJiAhby5kcm9wQmVoYXZpb3VyKSB7XG5cdFx0XHRcdFx0JC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcywgZXZlbnQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vUmVnZW5lcmF0ZSB0aGUgYWJzb2x1dGUgcG9zaXRpb24gdXNlZCBmb3IgcG9zaXRpb24gY2hlY2tzXG5cdFx0XHR0aGlzLnBvc2l0aW9uQWJzID0gdGhpcy5fY29udmVydFBvc2l0aW9uVG8oXCJhYnNvbHV0ZVwiKTtcblxuXHRcdFx0Ly8gbWpzIC0gZmluZCB0aGUgdG9wIG9mZnNldCBiZWZvcmUgcmVhcnJhbmdlbWVudCxcblx0XHRcdHByZXZpb3VzVG9wT2Zmc2V0ID0gdGhpcy5wbGFjZWhvbGRlci5vZmZzZXQoKS50b3A7XG5cblx0XHRcdC8vU2V0IHRoZSBoZWxwZXIgcG9zaXRpb25cblx0XHRcdGlmICghdGhpcy5vcHRpb25zLmF4aXMgfHwgdGhpcy5vcHRpb25zLmF4aXMgIT09IFwieVwiKSB7XG5cdFx0XHRcdHRoaXMuaGVscGVyWzBdLnN0eWxlLmxlZnQgPSB0aGlzLnBvc2l0aW9uLmxlZnQgKyBcInB4XCI7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXRoaXMub3B0aW9ucy5heGlzIHx8IHRoaXMub3B0aW9ucy5heGlzICE9PSBcInhcIikge1xuXHRcdFx0XHR0aGlzLmhlbHBlclswXS5zdHlsZS50b3AgPSAodGhpcy5wb3NpdGlvbi50b3ApICsgXCJweFwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBtanMgLSBjaGVjayBhbmQgcmVzZXQgaG92ZXJpbmcgc3RhdGUgYXQgZWFjaCBjeWNsZVxuXHRcdFx0dGhpcy5ob3ZlcmluZyA9IHRoaXMuaG92ZXJpbmcgPyB0aGlzLmhvdmVyaW5nIDogbnVsbDtcblx0XHRcdHRoaXMubW91c2VlbnRlcmVkID0gdGhpcy5tb3VzZWVudGVyZWQgPyB0aGlzLm1vdXNlZW50ZXJlZCA6IGZhbHNlO1xuXG5cdFx0XHQvLyBtanMgLSBsZXQncyBzdGFydCBjYWNoaW5nIHNvbWUgdmFyaWFibGVzXG5cdFx0XHQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBfcGFyZW50SXRlbSA9IHRoaXMucGxhY2Vob2xkZXIucGFyZW50KCkucGFyZW50KCk7XG5cdFx0XHRcdGlmIChfcGFyZW50SXRlbSAmJiBfcGFyZW50SXRlbS5jbG9zZXN0KFwiLnVpLXNvcnRhYmxlXCIpLmxlbmd0aCkge1xuXHRcdFx0XHRcdHBhcmVudEl0ZW0gPSBfcGFyZW50SXRlbTtcblx0XHRcdFx0fVxuXHRcdFx0fS5jYWxsKHRoaXMpKTtcblxuXHRcdFx0bGV2ZWwgPSB0aGlzLl9nZXRMZXZlbCh0aGlzLnBsYWNlaG9sZGVyKTtcblx0XHRcdGNoaWxkTGV2ZWxzID0gdGhpcy5fZ2V0Q2hpbGRMZXZlbHModGhpcy5oZWxwZXIpO1xuXHRcdFx0bmV3TGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoby5saXN0VHlwZSk7XG5cblx0XHRcdC8vUmVhcnJhbmdlXG5cdFx0XHRmb3IgKGkgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cblx0XHRcdFx0Ly9DYWNoZSB2YXJpYWJsZXMgYW5kIGludGVyc2VjdGlvbiwgY29udGludWUgaWYgbm8gaW50ZXJzZWN0aW9uXG5cdFx0XHRcdGl0ZW0gPSB0aGlzLml0ZW1zW2ldO1xuXHRcdFx0XHRpdGVtRWxlbWVudCA9IGl0ZW0uaXRlbVswXTtcblx0XHRcdFx0aW50ZXJzZWN0aW9uID0gdGhpcy5faW50ZXJzZWN0c1dpdGhQb2ludGVyKGl0ZW0pO1xuXHRcdFx0XHRpZiAoIWludGVyc2VjdGlvbikge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gT25seSBwdXQgdGhlIHBsYWNlaG9sZGVyIGluc2lkZSB0aGUgY3VycmVudCBDb250YWluZXIsIHNraXAgYWxsXG5cdFx0XHRcdC8vIGl0ZW1zIGZvcm0gb3RoZXIgY29udGFpbmVycy4gVGhpcyB3b3JrcyBiZWNhdXNlIHdoZW4gbW92aW5nXG5cdFx0XHRcdC8vIGFuIGl0ZW0gZnJvbSBvbmUgY29udGFpbmVyIHRvIGFub3RoZXIgdGhlXG5cdFx0XHRcdC8vIGN1cnJlbnRDb250YWluZXIgaXMgc3dpdGNoZWQgYmVmb3JlIHRoZSBwbGFjZWhvbGRlciBpcyBtb3ZlZC5cblx0XHRcdFx0Ly9cblx0XHRcdFx0Ly8gV2l0aG91dCB0aGlzIG1vdmluZyBpdGVtcyBpbiBcInN1Yi1zb3J0YWJsZXNcIiBjYW4gY2F1c2UgdGhlIHBsYWNlaG9sZGVyIHRvIGppdHRlclxuXHRcdFx0XHQvLyBiZWV0d2VlbiB0aGUgb3V0ZXIgYW5kIGlubmVyIGNvbnRhaW5lci5cblx0XHRcdFx0aWYgKGl0ZW0uaW5zdGFuY2UgIT09IHRoaXMuY3VycmVudENvbnRhaW5lcikge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTm8gYWN0aW9uIGlmIGludGVyc2VjdGVkIGl0ZW0gaXMgZGlzYWJsZWRcblx0XHRcdFx0Ly8gYW5kIHRoZSBlbGVtZW50IGFib3ZlIG9yIGJlbG93IGluIHRoZSBkaXJlY3Rpb24gd2UncmUgZ29pbmcgaXMgYWxzbyBkaXNhYmxlZFxuXHRcdFx0XHRpZiAoaXRlbUVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2Yoby5kaXNhYmxlZENsYXNzKSAhPT0gLTEpIHtcblx0XHRcdFx0XHQvLyBOb3RlOiBpbnRlcnNlY3Rpb24gaGFyZGNvZGVkIGRpcmVjdGlvbiB2YWx1ZXMgZnJvbVxuXHRcdFx0XHRcdC8vIGpxdWVyeS51aS5zb3J0YWJsZS5qczpfaW50ZXJzZWN0c1dpdGhQb2ludGVyXG5cdFx0XHRcdFx0aWYgKGludGVyc2VjdGlvbiA9PT0gMikge1xuXHRcdFx0XHRcdFx0Ly8gR29pbmcgZG93blxuXHRcdFx0XHRcdFx0aXRlbUFmdGVyID0gdGhpcy5pdGVtc1tpICsgMV07XG5cdFx0XHRcdFx0XHRpZiAoaXRlbUFmdGVyICYmIGl0ZW1BZnRlci5pdGVtLmhhc0NsYXNzKG8uZGlzYWJsZWRDbGFzcykpIHtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKGludGVyc2VjdGlvbiA9PT0gMSkge1xuXHRcdFx0XHRcdFx0Ly8gR29pbmcgdXBcblx0XHRcdFx0XHRcdGl0ZW1CZWZvcmUgPSB0aGlzLml0ZW1zW2kgLSAxXTtcblx0XHRcdFx0XHRcdGlmIChpdGVtQmVmb3JlICYmIGl0ZW1CZWZvcmUuaXRlbS5oYXNDbGFzcyhvLmRpc2FibGVkQ2xhc3MpKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdG1ldGhvZCA9IGludGVyc2VjdGlvbiA9PT0gMSA/IFwibmV4dFwiIDogXCJwcmV2XCI7XG5cblx0XHRcdFx0Ly8gY2Fubm90IGludGVyc2VjdCB3aXRoIGl0c2VsZlxuXHRcdFx0XHQvLyBubyB1c2VsZXNzIGFjdGlvbnMgdGhhdCBoYXZlIGJlZW4gZG9uZSBiZWZvcmVcblx0XHRcdFx0Ly8gbm8gYWN0aW9uIGlmIHRoZSBpdGVtIG1vdmVkIGlzIHRoZSBwYXJlbnQgb2YgdGhlIGl0ZW0gY2hlY2tlZFxuXHRcdFx0XHRpZiAoaXRlbUVsZW1lbnQgIT09IHRoaXMuY3VycmVudEl0ZW1bMF0gJiZcblx0XHRcdFx0XHR0aGlzLnBsYWNlaG9sZGVyW21ldGhvZF0oKVswXSAhPT0gaXRlbUVsZW1lbnQgJiZcblx0XHRcdFx0XHQhJC5jb250YWlucyh0aGlzLnBsYWNlaG9sZGVyWzBdLCBpdGVtRWxlbWVudCkgJiZcblx0XHRcdFx0XHQoXG5cdFx0XHRcdFx0XHR0aGlzLm9wdGlvbnMudHlwZSA9PT0gXCJzZW1pLWR5bmFtaWNcIiA/XG5cdFx0XHRcdFx0XHRcdCEkLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSwgaXRlbUVsZW1lbnQpIDpcblx0XHRcdFx0XHRcdFx0dHJ1ZVxuXHRcdFx0XHRcdClcblx0XHRcdFx0KSB7XG5cblx0XHRcdFx0XHQvLyBtanMgLSB3ZSBhcmUgaW50ZXJzZWN0aW5nIGFuIGVsZW1lbnQ6XG5cdFx0XHRcdFx0Ly8gdHJpZ2dlciB0aGUgbW91c2VlbnRlciBldmVudCBhbmQgc3RvcmUgdGhpcyBzdGF0ZVxuXHRcdFx0XHRcdGlmICghdGhpcy5tb3VzZWVudGVyZWQpIHtcblx0XHRcdFx0XHRcdCQoaXRlbUVsZW1lbnQpLm1vdXNlZW50ZXIoKTtcblx0XHRcdFx0XHRcdHRoaXMubW91c2VlbnRlcmVkID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBtanMgLSBpZiB0aGUgZWxlbWVudCBoYXMgY2hpbGRyZW4gYW5kIHRoZXkgYXJlIGhpZGRlbixcblx0XHRcdFx0XHQvLyBzaG93IHRoZW0gYWZ0ZXIgYSBkZWxheSAoQ1NTIHJlc3BvbnNpYmxlKVxuXHRcdFx0XHRcdGlmIChvLmlzVHJlZSAmJiAkKGl0ZW1FbGVtZW50KS5oYXNDbGFzcyhvLmNvbGxhcHNlZENsYXNzKSAmJiBvLmV4cGFuZE9uSG92ZXIpIHtcblx0XHRcdFx0XHRcdGlmICghdGhpcy5ob3ZlcmluZykge1xuXHRcdFx0XHRcdFx0XHQkKGl0ZW1FbGVtZW50KS5hZGRDbGFzcyhvLmhvdmVyaW5nQ2xhc3MpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmhvdmVyaW5nID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0JChpdGVtRWxlbWVudClcblx0XHRcdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhvLmNvbGxhcHNlZENsYXNzKVxuXHRcdFx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKG8uZXhwYW5kZWRDbGFzcyk7XG5cblx0XHRcdFx0XHRcdFx0XHRzZWxmLnJlZnJlc2hQb3NpdGlvbnMoKTtcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKFwiZXhwYW5kXCIsIGV2ZW50LCBzZWxmLl91aUhhc2goKSk7XG5cdFx0XHRcdFx0XHRcdH0sIG8uZXhwYW5kT25Ib3Zlcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dGhpcy5kaXJlY3Rpb24gPSBpbnRlcnNlY3Rpb24gPT09IDEgPyBcImRvd25cIiA6IFwidXBcIjtcblxuXHRcdFx0XHRcdC8vIG1qcyAtIHJlYXJyYW5nZSB0aGUgZWxlbWVudHMgYW5kIHJlc2V0IHRpbWVvdXRzIGFuZCBob3ZlcmluZyBzdGF0ZVxuXHRcdFx0XHRcdGlmICh0aGlzLm9wdGlvbnMudG9sZXJhbmNlID09PSBcInBvaW50ZXJcIiB8fCB0aGlzLl9pbnRlcnNlY3RzV2l0aFNpZGVzKGl0ZW0pKSB7XG5cdFx0XHRcdFx0XHQkKGl0ZW1FbGVtZW50KS5tb3VzZWxlYXZlKCk7XG5cdFx0XHRcdFx0XHR0aGlzLm1vdXNlZW50ZXJlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0JChpdGVtRWxlbWVudCkucmVtb3ZlQ2xhc3Moby5ob3ZlcmluZ0NsYXNzKTtcblx0XHRcdFx0XHRcdGlmICh0aGlzLmhvdmVyaW5nKSB7XG5cdFx0XHRcdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5ob3ZlcmluZyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR0aGlzLmhvdmVyaW5nID0gbnVsbDtcblxuXHRcdFx0XHRcdFx0Ly8gbWpzIC0gZG8gbm90IHN3aXRjaCBjb250YWluZXIgaWZcblx0XHRcdFx0XHRcdC8vIGl0J3MgYSByb290IGl0ZW0gYW5kICdwcm90ZWN0Um9vdCcgaXMgdHJ1ZVxuXHRcdFx0XHRcdFx0Ly8gb3IgaWYgaXQncyBub3QgYSByb290IGl0ZW0gYnV0IHdlIGFyZSB0cnlpbmcgdG8gbWFrZSBpdCByb290XG5cdFx0XHRcdFx0XHRpZiAoby5wcm90ZWN0Um9vdCAmJlxuXHRcdFx0XHRcdFx0XHQhKFxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY3VycmVudEl0ZW1bMF0ucGFyZW50Tm9kZSA9PT0gdGhpcy5lbGVtZW50WzBdICYmXG5cdFx0XHRcdFx0XHRcdFx0Ly8gaXQncyBhIHJvb3QgaXRlbVxuXHRcdFx0XHRcdFx0XHRcdGl0ZW1FbGVtZW50LnBhcmVudE5vZGUgIT09IHRoaXMuZWxlbWVudFswXVxuXHRcdFx0XHRcdFx0XHRcdC8vIGl0J3MgaW50ZXJzZWN0aW5nIGEgbm9uLXJvb3QgaXRlbVxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuY3VycmVudEl0ZW1bMF0ucGFyZW50Tm9kZSAhPT0gdGhpcy5lbGVtZW50WzBdICYmXG5cdFx0XHRcdFx0XHRcdFx0aXRlbUVsZW1lbnQucGFyZW50Tm9kZSA9PT0gdGhpcy5lbGVtZW50WzBdXG5cdFx0XHRcdFx0XHRcdCkge1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCAhJChpdGVtRWxlbWVudCkuY2hpbGRyZW4oby5saXN0VHlwZSkubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpdGVtRWxlbWVudC5hcHBlbmRDaGlsZChuZXdMaXN0KTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChvLmlzVHJlZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQkKGl0ZW1FbGVtZW50KVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhvLmxlYWZDbGFzcylcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3Moby5icmFuY2hDbGFzcyArIFwiIFwiICsgby5leHBhbmRlZENsYXNzKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5kaXJlY3Rpb24gPT09IFwiZG93blwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRhID0gJChpdGVtRWxlbWVudCkucHJldigpLmNoaWxkcmVuKG8ubGlzdFR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRhID0gJChpdGVtRWxlbWVudCkuY2hpbGRyZW4oby5saXN0VHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGFbMF0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fcmVhcnJhbmdlKGV2ZW50LCBudWxsLCBhKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9yZWFycmFuZ2UoZXZlbnQsIGl0ZW0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCFvLnByb3RlY3RSb290KSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuX3JlYXJyYW5nZShldmVudCwgaXRlbSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIENsZWFyIGVtdHB5IHVsJ3Mvb2wnc1xuXHRcdFx0XHRcdHRoaXMuX2NsZWFyRW1wdHkoaXRlbUVsZW1lbnQpO1xuXG5cdFx0XHRcdFx0dGhpcy5fdHJpZ2dlcihcImNoYW5nZVwiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIG1qcyAtIHRvIGZpbmQgdGhlIHByZXZpb3VzIHNpYmxpbmcgaW4gdGhlIGxpc3QsXG5cdFx0XHQvLyBrZWVwIGJhY2t0cmFja2luZyB1bnRpbCB3ZSBoaXQgYSB2YWxpZCBsaXN0IGl0ZW0uXG5cdFx0XHQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBfcHJldmlvdXNJdGVtID0gdGhpcy5wbGFjZWhvbGRlci5wcmV2KCk7XG5cdFx0XHRcdGlmIChfcHJldmlvdXNJdGVtLmxlbmd0aCkge1xuXHRcdFx0XHRcdHByZXZpb3VzSXRlbSA9IF9wcmV2aW91c0l0ZW07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cHJldmlvdXNJdGVtID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fS5jYWxsKHRoaXMpKTtcblxuXHRcdFx0aWYgKHByZXZpb3VzSXRlbSAhPSBudWxsKSB7XG5cdFx0XHRcdHdoaWxlIChcblx0XHRcdFx0XHRwcmV2aW91c0l0ZW1bMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJsaVwiIHx8XG5cdFx0XHRcdFx0cHJldmlvdXNJdGVtWzBdLmNsYXNzTmFtZS5pbmRleE9mKG8uZGlzYWJsZWRDbGFzcykgIT09IC0xIHx8XG5cdFx0XHRcdFx0cHJldmlvdXNJdGVtWzBdID09PSB0aGlzLmN1cnJlbnRJdGVtWzBdIHx8XG5cdFx0XHRcdFx0cHJldmlvdXNJdGVtWzBdID09PSB0aGlzLmhlbHBlclswXVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRpZiAocHJldmlvdXNJdGVtWzBdLnByZXZpb3VzU2libGluZykge1xuXHRcdFx0XHRcdFx0cHJldmlvdXNJdGVtID0gJChwcmV2aW91c0l0ZW1bMF0ucHJldmlvdXNTaWJsaW5nKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cHJldmlvdXNJdGVtID0gbnVsbDtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBtanMgLSB0byBmaW5kIHRoZSBuZXh0IHNpYmxpbmcgaW4gdGhlIGxpc3QsXG5cdFx0XHQvLyBrZWVwIHN0ZXBwaW5nIGZvcndhcmQgdW50aWwgd2UgaGl0IGEgdmFsaWQgbGlzdCBpdGVtLlxuXHRcdFx0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgX25leHRJdGVtID0gdGhpcy5wbGFjZWhvbGRlci5uZXh0KCk7XG5cdFx0XHRcdGlmIChfbmV4dEl0ZW0ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0bmV4dEl0ZW0gPSBfbmV4dEl0ZW07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bmV4dEl0ZW0gPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9LmNhbGwodGhpcykpO1xuXG5cdFx0XHRpZiAobmV4dEl0ZW0gIT0gbnVsbCkge1xuXHRcdFx0XHR3aGlsZSAoXG5cdFx0XHRcdFx0bmV4dEl0ZW1bMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJsaVwiIHx8XG5cdFx0XHRcdFx0bmV4dEl0ZW1bMF0uY2xhc3NOYW1lLmluZGV4T2Yoby5kaXNhYmxlZENsYXNzKSAhPT0gLTEgfHxcblx0XHRcdFx0XHRuZXh0SXRlbVswXSA9PT0gdGhpcy5jdXJyZW50SXRlbVswXSB8fFxuXHRcdFx0XHRcdG5leHRJdGVtWzBdID09PSB0aGlzLmhlbHBlclswXVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRpZiAobmV4dEl0ZW1bMF0ubmV4dFNpYmxpbmcpIHtcblx0XHRcdFx0XHRcdG5leHRJdGVtID0gJChuZXh0SXRlbVswXS5uZXh0U2libGluZyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG5leHRJdGVtID0gbnVsbDtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmJleW9uZE1heExldmVscyA9IDA7XG5cblx0XHRcdC8vIG1qcyAtIGlmIHRoZSBpdGVtIGlzIG1vdmVkIHRvIHRoZSBsZWZ0LCBzZW5kIGl0IG9uZSBsZXZlbCB1cFxuXHRcdFx0Ly8gYnV0IG9ubHkgaWYgaXQncyBhdCB0aGUgYm90dG9tIG9mIHRoZSBsaXN0XG5cdFx0XHRpZiAocGFyZW50SXRlbSAhPSBudWxsICYmXG5cdFx0XHRcdG5leHRJdGVtID09IG51bGwgJiZcblx0XHRcdFx0IShvLnByb3RlY3RSb290ICYmIHBhcmVudEl0ZW1bMF0ucGFyZW50Tm9kZSA9PSB0aGlzLmVsZW1lbnRbMF0pICYmXG5cdFx0XHRcdChcblx0XHRcdFx0XHRvLnJ0bCAmJlxuXHRcdFx0XHRcdChcblx0XHRcdFx0XHRcdHRoaXMucG9zaXRpb25BYnMubGVmdCArXG5cdFx0XHRcdFx0XHR0aGlzLmhlbHBlci5vdXRlcldpZHRoKCkgPiBwYXJlbnRJdGVtLm9mZnNldCgpLmxlZnQgK1xuXHRcdFx0XHRcdFx0cGFyZW50SXRlbS5vdXRlcldpZHRoKClcblx0XHRcdFx0XHQpIHx8XG5cdFx0XHRcdFx0IW8ucnRsICYmICh0aGlzLnBvc2l0aW9uQWJzLmxlZnQgPCBwYXJlbnRJdGVtLm9mZnNldCgpLmxlZnQpXG5cdFx0XHRcdClcblx0XHRcdCkge1xuXG5cdFx0XHRcdHBhcmVudEl0ZW0uYWZ0ZXIodGhpcy5wbGFjZWhvbGRlclswXSk7XG5cdFx0XHRcdGhlbHBlcklzTm90U2libGluZyA9ICFwYXJlbnRJdGVtXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0LmNoaWxkcmVuKG8ubGlzdEl0ZW0pXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0LmNoaWxkcmVuKFwibGk6dmlzaWJsZTpub3QoLnVpLXNvcnRhYmxlLWhlbHBlcilcIilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQubGVuZ3RoO1xuXHRcdFx0XHRpZiAoby5pc1RyZWUgJiYgaGVscGVySXNOb3RTaWJsaW5nKSB7XG5cdFx0XHRcdFx0cGFyZW50SXRlbVxuXHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5icmFuY2hDbGFzcyArIFwiIFwiICsgdGhpcy5vcHRpb25zLmV4cGFuZGVkQ2xhc3MpXG5cdFx0XHRcdFx0XHQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmxlYWZDbGFzcyk7XG5cdFx0XHRcdH1cbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgcGFyZW50SXRlbSAhPT0gJ3VuZGVmaW5lZCcpXG5cdFx0XHRcdCAgICB0aGlzLl9jbGVhckVtcHR5KHBhcmVudEl0ZW1bMF0pO1xuXHRcdFx0XHR0aGlzLl90cmlnZ2VyKFwiY2hhbmdlXCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7XG5cdFx0XHRcdC8vIG1qcyAtIGlmIHRoZSBpdGVtIGlzIGJlbG93IGEgc2libGluZyBhbmQgaXMgbW92ZWQgdG8gdGhlIHJpZ2h0LFxuXHRcdFx0XHQvLyBtYWtlIGl0IGEgY2hpbGQgb2YgdGhhdCBzaWJsaW5nXG5cdFx0XHR9IGVsc2UgaWYgKHByZXZpb3VzSXRlbSAhPSBudWxsICYmXG5cdFx0XHRcdCFwcmV2aW91c0l0ZW0uaGFzQ2xhc3Moby5kaXNhYmxlTmVzdGluZ0NsYXNzKSAmJlxuXHRcdFx0XHQoXG5cdFx0XHRcdFx0cHJldmlvdXNJdGVtLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmxlbmd0aCAmJlxuXHRcdFx0XHRcdHByZXZpb3VzSXRlbS5jaGlsZHJlbihvLmxpc3RUeXBlKS5pcyhcIjp2aXNpYmxlXCIpIHx8XG5cdFx0XHRcdFx0IXByZXZpb3VzSXRlbS5jaGlsZHJlbihvLmxpc3RUeXBlKS5sZW5ndGhcblx0XHRcdFx0KSAmJlxuXHRcdFx0XHQhKG8ucHJvdGVjdFJvb3QgJiYgdGhpcy5jdXJyZW50SXRlbVswXS5wYXJlbnROb2RlID09PSB0aGlzLmVsZW1lbnRbMF0pICYmXG5cdFx0XHRcdChcblx0XHRcdFx0XHRvLnJ0bCAmJlxuXHRcdFx0XHRcdChcblx0XHRcdFx0XHRcdHRoaXMucG9zaXRpb25BYnMubGVmdCArXG5cdFx0XHRcdFx0XHR0aGlzLmhlbHBlci5vdXRlcldpZHRoKCkgPFxuXHRcdFx0XHRcdFx0cHJldmlvdXNJdGVtLm9mZnNldCgpLmxlZnQgK1xuXHRcdFx0XHRcdFx0cHJldmlvdXNJdGVtLm91dGVyV2lkdGgoKSAtXG5cdFx0XHRcdFx0XHRvLnRhYlNpemVcblx0XHRcdFx0XHQpIHx8XG5cdFx0XHRcdFx0IW8ucnRsICYmXG5cdFx0XHRcdFx0KHRoaXMucG9zaXRpb25BYnMubGVmdCA+IHByZXZpb3VzSXRlbS5vZmZzZXQoKS5sZWZ0ICsgby50YWJTaXplKVxuXHRcdFx0XHQpXG5cdFx0XHQpIHtcblxuXHRcdFx0XHR0aGlzLl9pc0FsbG93ZWQocHJldmlvdXNJdGVtLCBsZXZlbCwgbGV2ZWwgKyBjaGlsZExldmVscyArIDEpO1xuXG5cdFx0XHRcdGlmICghcHJldmlvdXNJdGVtLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmxlbmd0aCkge1xuXHRcdFx0XHRcdHByZXZpb3VzSXRlbVswXS5hcHBlbmRDaGlsZChuZXdMaXN0KTtcblx0XHRcdFx0XHRpZiAoby5pc1RyZWUpIHtcblx0XHRcdFx0XHRcdHByZXZpb3VzSXRlbVxuXHRcdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3Moby5sZWFmQ2xhc3MpXG5cdFx0XHRcdFx0XHRcdC5hZGRDbGFzcyhvLmJyYW5jaENsYXNzICsgXCIgXCIgKyBvLmV4cGFuZGVkQ2xhc3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIG1qcyAtIGlmIHRoaXMgaXRlbSBpcyBiZWluZyBtb3ZlZCBmcm9tIHRoZSB0b3AsIGFkZCBpdCB0byB0aGUgdG9wIG9mIHRoZSBsaXN0LlxuXHRcdFx0XHRpZiAocHJldmlvdXNUb3BPZmZzZXQgJiYgKHByZXZpb3VzVG9wT2Zmc2V0IDw9IHByZXZpb3VzSXRlbS5vZmZzZXQoKS50b3ApKSB7XG5cdFx0XHRcdFx0cHJldmlvdXNJdGVtLmNoaWxkcmVuKG8ubGlzdFR5cGUpLnByZXBlbmQodGhpcy5wbGFjZWhvbGRlcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gbWpzIC0gb3RoZXJ3aXNlLCBhZGQgaXQgdG8gdGhlIGJvdHRvbSBvZiB0aGUgbGlzdC5cblx0XHRcdFx0XHRwcmV2aW91c0l0ZW0uY2hpbGRyZW4oby5saXN0VHlwZSlbMF0uYXBwZW5kQ2hpbGQodGhpcy5wbGFjZWhvbGRlclswXSk7XG5cdFx0XHRcdH1cbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgcGFyZW50SXRlbSAhPT0gJ3VuZGVmaW5lZCcpXG5cdFx0XHRcdCAgICB0aGlzLl9jbGVhckVtcHR5KHBhcmVudEl0ZW1bMF0pO1xuXHRcdFx0XHR0aGlzLl90cmlnZ2VyKFwiY2hhbmdlXCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9pc0FsbG93ZWQocGFyZW50SXRlbSwgbGV2ZWwsIGxldmVsICsgY2hpbGRMZXZlbHMpO1xuXHRcdFx0fVxuXG5cdFx0XHQvL1Bvc3QgZXZlbnRzIHRvIGNvbnRhaW5lcnNcblx0XHRcdHRoaXMuX2NvbnRhY3RDb250YWluZXJzKGV2ZW50KTtcblxuXHRcdFx0Ly9JbnRlcmNvbm5lY3Qgd2l0aCBkcm9wcGFibGVzXG5cdFx0XHRpZiAoJC51aS5kZG1hbmFnZXIpIHtcblx0XHRcdFx0JC51aS5kZG1hbmFnZXIuZHJhZyh0aGlzLCBldmVudCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vQ2FsbCBjYWxsYmFja3Ncblx0XHRcdHRoaXMuX3RyaWdnZXIoXCJzb3J0XCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7XG5cblx0XHRcdHRoaXMubGFzdFBvc2l0aW9uQWJzID0gdGhpcy5wb3NpdGlvbkFicztcblx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdH0sXG5cblx0XHRfbW91c2VTdG9wOiBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0Ly8gbWpzIC0gaWYgdGhlIGl0ZW0gaXMgaW4gYSBwb3NpdGlvbiBub3QgYWxsb3dlZCwgc2VuZCBpdCBiYWNrXG5cdFx0XHRpZiAodGhpcy5iZXlvbmRNYXhMZXZlbHMpIHtcblxuXHRcdFx0XHR0aGlzLnBsYWNlaG9sZGVyLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5lcnJvckNsYXNzKTtcblxuXHRcdFx0XHRpZiAodGhpcy5kb21Qb3NpdGlvbi5wcmV2KSB7XG5cdFx0XHRcdFx0JCh0aGlzLmRvbVBvc2l0aW9uLnByZXYpLmFmdGVyKHRoaXMucGxhY2Vob2xkZXIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQodGhpcy5kb21Qb3NpdGlvbi5wYXJlbnQpLnByZXBlbmQodGhpcy5wbGFjZWhvbGRlcik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyKFwicmV2ZXJ0XCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gbWpzIC0gY2xlYXIgdGhlIGhvdmVyaW5nIHRpbWVvdXQsIGp1c3QgdG8gYmUgc3VyZVxuXHRcdFx0JChcIi5cIiArIHRoaXMub3B0aW9ucy5ob3ZlcmluZ0NsYXNzKVxuXHRcdFx0XHQubW91c2VsZWF2ZSgpXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuaG92ZXJpbmdDbGFzcyk7XG5cblx0XHRcdHRoaXMubW91c2VlbnRlcmVkID0gZmFsc2U7XG5cdFx0XHRpZiAodGhpcy5ob3ZlcmluZykge1xuXHRcdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuaG92ZXJpbmcpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5ob3ZlcmluZyA9IG51bGw7XG5cblx0XHRcdHRoaXMuX3JlbG9jYXRlX2V2ZW50ID0gZXZlbnQ7XG5cdFx0XHR0aGlzLl9waWRfY3VycmVudCA9ICQodGhpcy5kb21Qb3NpdGlvbi5wYXJlbnQpLnBhcmVudCgpLmF0dHIoXCJpZFwiKTtcblx0XHRcdHRoaXMuX3NvcnRfY3VycmVudCA9IHRoaXMuZG9tUG9zaXRpb24ucHJldiA/ICQodGhpcy5kb21Qb3NpdGlvbi5wcmV2KS5uZXh0KCkuaW5kZXgoKSA6IDA7XG5cdFx0XHQkLnVpLnNvcnRhYmxlLnByb3RvdHlwZS5fbW91c2VTdG9wLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vYXN5Ym5jaHJvbm91cyBleGVjdXRpb24sIEBzZWUgX2NsZWFyIGZvciB0aGUgcmVsb2NhdGUgZXZlbnQuXG5cdFx0fSxcblxuXHRcdC8vIG1qcyAtIHRoaXMgZnVuY3Rpb24gaXMgc2xpZ2h0bHkgbW9kaWZpZWRcblx0XHQvLyB0byBtYWtlIGl0IGVhc2llciB0byBob3ZlciBvdmVyIGEgY29sbGFwc2VkIGVsZW1lbnQgYW5kIGhhdmUgaXQgZXhwYW5kXG5cdFx0X2ludGVyc2VjdHNXaXRoU2lkZXM6IGZ1bmN0aW9uKGl0ZW0pIHtcblxuXHRcdFx0dmFyIGhhbGYgPSB0aGlzLm9wdGlvbnMuaXNUcmVlID8gLjggOiAuNSxcblx0XHRcdFx0aXNPdmVyQm90dG9tSGFsZiA9IGlzT3ZlckF4aXMoXG5cdFx0XHRcdFx0dGhpcy5wb3NpdGlvbkFicy50b3AgKyB0aGlzLm9mZnNldC5jbGljay50b3AsXG5cdFx0XHRcdFx0aXRlbS50b3AgKyAoaXRlbS5oZWlnaHQgKiBoYWxmKSxcblx0XHRcdFx0XHRpdGVtLmhlaWdodFxuXHRcdFx0XHQpLFxuXHRcdFx0XHRpc092ZXJUb3BIYWxmID0gaXNPdmVyQXhpcyhcblx0XHRcdFx0XHR0aGlzLnBvc2l0aW9uQWJzLnRvcCArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCxcblx0XHRcdFx0XHRpdGVtLnRvcCAtIChpdGVtLmhlaWdodCAqIGhhbGYpLFxuXHRcdFx0XHRcdGl0ZW0uaGVpZ2h0XG5cdFx0XHRcdCksXG5cdFx0XHRcdGlzT3ZlclJpZ2h0SGFsZiA9IGlzT3ZlckF4aXMoXG5cdFx0XHRcdFx0dGhpcy5wb3NpdGlvbkFicy5sZWZ0ICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdCxcblx0XHRcdFx0XHRpdGVtLmxlZnQgKyAoaXRlbS53aWR0aCAvIDIpLFxuXHRcdFx0XHRcdGl0ZW0ud2lkdGhcblx0XHRcdFx0KSxcblx0XHRcdFx0dmVydGljYWxEaXJlY3Rpb24gPSB0aGlzLl9nZXREcmFnVmVydGljYWxEaXJlY3Rpb24oKSxcblx0XHRcdFx0aG9yaXpvbnRhbERpcmVjdGlvbiA9IHRoaXMuX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uKCk7XG5cblx0XHRcdGlmICh0aGlzLmZsb2F0aW5nICYmIGhvcml6b250YWxEaXJlY3Rpb24pIHtcblx0XHRcdFx0cmV0dXJuIChcblx0XHRcdFx0XHQoaG9yaXpvbnRhbERpcmVjdGlvbiA9PT0gXCJyaWdodFwiICYmIGlzT3ZlclJpZ2h0SGFsZikgfHxcblx0XHRcdFx0XHQoaG9yaXpvbnRhbERpcmVjdGlvbiA9PT0gXCJsZWZ0XCIgJiYgIWlzT3ZlclJpZ2h0SGFsZilcblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiB2ZXJ0aWNhbERpcmVjdGlvbiAmJiAoXG5cdFx0XHRcdFx0KHZlcnRpY2FsRGlyZWN0aW9uID09PSBcImRvd25cIiAmJiBpc092ZXJCb3R0b21IYWxmKSB8fFxuXHRcdFx0XHRcdCh2ZXJ0aWNhbERpcmVjdGlvbiA9PT0gXCJ1cFwiICYmIGlzT3ZlclRvcEhhbGYpXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0X2NvbnRhY3RDb250YWluZXJzOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0aWYgKHRoaXMub3B0aW9ucy5wcm90ZWN0Um9vdCAmJiB0aGlzLmN1cnJlbnRJdGVtWzBdLnBhcmVudE5vZGUgPT09IHRoaXMuZWxlbWVudFswXSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQkLnVpLnNvcnRhYmxlLnByb3RvdHlwZS5fY29udGFjdENvbnRhaW5lcnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdH0sXG5cblx0XHRfY2xlYXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGksXG5cdFx0XHRcdGl0ZW07XG5cblx0XHRcdCQudWkuc29ydGFibGUucHJvdG90eXBlLl9jbGVhci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdFx0XHQvL3JlbG9jYXRlIGV2ZW50XG5cdFx0XHRpZiAoISh0aGlzLl9waWRfY3VycmVudCA9PT0gdGhpcy5fdWlIYXNoKCkuaXRlbS5wYXJlbnQoKS5wYXJlbnQoKS5hdHRyKFwiaWRcIikgJiZcblx0XHRcdFx0dGhpcy5fc29ydF9jdXJyZW50ID09PSB0aGlzLl91aUhhc2goKS5pdGVtLmluZGV4KCkpKSB7XG5cdFx0XHRcdHRoaXMuX3RyaWdnZXIoXCJyZWxvY2F0ZVwiLCB0aGlzLl9yZWxvY2F0ZV9ldmVudCwgdGhpcy5fdWlIYXNoKCkpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBtanMgLSBjbGVhbiBsYXN0IGVtcHR5IHVsL29sXG5cdFx0XHRmb3IgKGkgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdGl0ZW0gPSB0aGlzLml0ZW1zW2ldLml0ZW1bMF07XG5cdFx0XHRcdHRoaXMuX2NsZWFyRW1wdHkoaXRlbSk7XG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0c2VyaWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cblx0XHRcdHZhciBvID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyksXG5cdFx0XHRcdGl0ZW1zID0gdGhpcy5fZ2V0SXRlbXNBc2pRdWVyeShvICYmIG8uY29ubmVjdGVkKSxcblx0XHRcdFx0c3RyID0gW107XG5cblx0XHRcdCQoaXRlbXMpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciByZXMgPSAoJChvLml0ZW0gfHwgdGhpcykuYXR0cihvLmF0dHJpYnV0ZSB8fCBcImlkXCIpIHx8IFwiXCIpXG5cdFx0XHRcdFx0XHQubWF0Y2goby5leHByZXNzaW9uIHx8ICgvKC4rKVstPV9dKC4rKS8pKSxcblx0XHRcdFx0XHRwaWQgPSAoJChvLml0ZW0gfHwgdGhpcykucGFyZW50KG8ubGlzdFR5cGUpXG5cdFx0XHRcdFx0XHQucGFyZW50KG8uaXRlbXMpXG5cdFx0XHRcdFx0XHQuYXR0cihvLmF0dHJpYnV0ZSB8fCBcImlkXCIpIHx8IFwiXCIpXG5cdFx0XHRcdFx0XHQubWF0Y2goby5leHByZXNzaW9uIHx8ICgvKC4rKVstPV9dKC4rKS8pKTtcblxuXHRcdFx0XHRpZiAocmVzKSB7XG5cdFx0XHRcdFx0c3RyLnB1c2goXG5cdFx0XHRcdFx0XHQoXG5cdFx0XHRcdFx0XHRcdChvLmtleSB8fCByZXNbMV0pICtcblx0XHRcdFx0XHRcdFx0XCJbXCIgK1xuXHRcdFx0XHRcdFx0XHQoby5rZXkgJiYgby5leHByZXNzaW9uID8gcmVzWzFdIDogcmVzWzJdKSArIFwiXVwiXG5cdFx0XHRcdFx0XHQpICtcblx0XHRcdFx0XHRcdFwiPVwiICtcblx0XHRcdFx0XHRcdChwaWQgPyAoby5rZXkgJiYgby5leHByZXNzaW9uID8gcGlkWzFdIDogcGlkWzJdKSA6IG8ucm9vdElEKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAoIXN0ci5sZW5ndGggJiYgby5rZXkpIHtcblx0XHRcdFx0c3RyLnB1c2goby5rZXkgKyBcIj1cIik7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBzdHIuam9pbihcIiZcIik7XG5cblx0XHR9LFxuXG5cdFx0dG9IaWVyYXJjaHk6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuXHRcdFx0dmFyIG8gPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKSxcblx0XHRcdFx0cmV0ID0gW107XG5cblx0XHRcdCQodGhpcy5lbGVtZW50KS5jaGlsZHJlbihvLml0ZW1zKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbGV2ZWwgPSBfcmVjdXJzaXZlSXRlbXModGhpcyk7XG5cdFx0XHRcdHJldC5wdXNoKGxldmVsKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gcmV0O1xuXG5cdFx0XHRmdW5jdGlvbiBfcmVjdXJzaXZlSXRlbXMoaXRlbSkge1xuXHRcdFx0XHR2YXIgaWQgPSAoJChpdGVtKS5hdHRyKG8uYXR0cmlidXRlIHx8IFwiaWRcIikgfHwgXCJcIikubWF0Y2goby5leHByZXNzaW9uIHx8ICgvKC4rKVstPV9dKC4rKS8pKSxcblx0XHRcdFx0XHRjdXJyZW50SXRlbTtcblxuXHRcdFx0XHR2YXIgZGF0YSA9ICQoaXRlbSkuZGF0YSgpO1xuXHRcdFx0XHRpZiAoZGF0YS5uZXN0ZWRTb3J0YWJsZUl0ZW0pIHtcblx0XHRcdFx0XHRkZWxldGUgZGF0YS5uZXN0ZWRTb3J0YWJsZUl0ZW07IC8vIFJlbW92ZSB0aGUgbmVzdGVkU29ydGFibGVJdGVtIG9iamVjdCBmcm9tIHRoZSBkYXRhXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoaWQpIHtcblx0XHRcdFx0XHRjdXJyZW50SXRlbSA9IHtcblx0XHRcdFx0XHRcdFwiaWRcIjogaWRbMl1cblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0Y3VycmVudEl0ZW0gPSAkLmV4dGVuZCh7fSwgY3VycmVudEl0ZW0sIGRhdGEpOyAvLyBDb21iaW5lIHRoZSB0d28gb2JqZWN0c1xuXG5cdFx0XHRcdFx0aWYgKCQoaXRlbSkuY2hpbGRyZW4oby5saXN0VHlwZSkuY2hpbGRyZW4oby5pdGVtcykubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0Y3VycmVudEl0ZW0uY2hpbGRyZW4gPSBbXTtcblx0XHRcdFx0XHRcdCQoaXRlbSkuY2hpbGRyZW4oby5saXN0VHlwZSkuY2hpbGRyZW4oby5pdGVtcykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0dmFyIGxldmVsID0gX3JlY3Vyc2l2ZUl0ZW1zKHRoaXMpO1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50SXRlbS5jaGlsZHJlbi5wdXNoKGxldmVsKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gY3VycmVudEl0ZW07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0dG9BcnJheTogZnVuY3Rpb24ob3B0aW9ucykge1xuXG5cdFx0XHR2YXIgbyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpLFxuXHRcdFx0XHRzRGVwdGggPSBvLnN0YXJ0RGVwdGhDb3VudCB8fCAwLFxuXHRcdFx0XHRyZXQgPSBbXSxcblx0XHRcdFx0bGVmdCA9IDE7XG5cblx0XHRcdGlmICghby5leGNsdWRlUm9vdCkge1xuXHRcdFx0XHRyZXQucHVzaCh7XG5cdFx0XHRcdFx0XCJpdGVtX2lkXCI6IG8ucm9vdElELFxuXHRcdFx0XHRcdFwicGFyZW50X2lkXCI6IG51bGwsXG5cdFx0XHRcdFx0XCJkZXB0aFwiOiBzRGVwdGgsXG5cdFx0XHRcdFx0XCJsZWZ0XCI6IGxlZnQsXG5cdFx0XHRcdFx0XCJyaWdodFwiOiAoJChvLml0ZW1zLCB0aGlzLmVsZW1lbnQpLmxlbmd0aCArIDEpICogMlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0bGVmdCsrO1xuXHRcdFx0fVxuXG5cdFx0XHQkKHRoaXMuZWxlbWVudCkuY2hpbGRyZW4oby5pdGVtcykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0bGVmdCA9IF9yZWN1cnNpdmVBcnJheSh0aGlzLCBzRGVwdGgsIGxlZnQpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldCA9IHJldC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIChhLmxlZnQgLSBiLmxlZnQpOyB9KTtcblxuXHRcdFx0cmV0dXJuIHJldDtcblxuXHRcdFx0ZnVuY3Rpb24gX3JlY3Vyc2l2ZUFycmF5KGl0ZW0sIGRlcHRoLCBfbGVmdCkge1xuXG5cdFx0XHRcdHZhciByaWdodCA9IF9sZWZ0ICsgMSxcblx0XHRcdFx0XHRpZCxcblx0XHRcdFx0XHRwaWQsXG5cdFx0XHRcdFx0cGFyZW50SXRlbTtcblxuXHRcdFx0XHRpZiAoJChpdGVtKS5jaGlsZHJlbihvLmxpc3RUeXBlKS5jaGlsZHJlbihvLml0ZW1zKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0ZGVwdGgrKztcblx0XHRcdFx0XHQkKGl0ZW0pLmNoaWxkcmVuKG8ubGlzdFR5cGUpLmNoaWxkcmVuKG8uaXRlbXMpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyaWdodCA9IF9yZWN1cnNpdmVBcnJheSgkKHRoaXMpLCBkZXB0aCwgcmlnaHQpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGRlcHRoLS07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZCA9ICgkKGl0ZW0pLmF0dHIoby5hdHRyaWJ1dGUgfHwgXCJpZFwiKSkubWF0Y2goby5leHByZXNzaW9uIHx8ICgvKC4rKVstPV9dKC4rKS8pKTtcblxuXHRcdFx0XHRpZiAoZGVwdGggPT09IHNEZXB0aCkge1xuXHRcdFx0XHRcdHBpZCA9IG8ucm9vdElEO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHBhcmVudEl0ZW0gPSAoJChpdGVtKS5wYXJlbnQoby5saXN0VHlwZSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQucGFyZW50KG8uaXRlbXMpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0LmF0dHIoby5hdHRyaWJ1dGUgfHwgXCJpZFwiKSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQubWF0Y2goby5leHByZXNzaW9uIHx8ICgvKC4rKVstPV9dKC4rKS8pKTtcblx0XHRcdFx0XHRwaWQgPSBwYXJlbnRJdGVtWzJdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGlkKSB7XG5cdFx0XHRcdFx0ICAgICAgICB2YXIgbmFtZSA9ICQoaXRlbSkuZGF0YShcIm5hbWVcIik7XG5cdFx0XHRcdFx0XHRyZXQucHVzaCh7XG5cdFx0XHRcdFx0XHRcdFwiaWRcIjogaWRbMl0sXG5cdFx0XHRcdFx0XHRcdFwicGFyZW50X2lkXCI6IHBpZCxcblx0XHRcdFx0XHRcdFx0XCJkZXB0aFwiOiBkZXB0aCxcblx0XHRcdFx0XHRcdFx0XCJsZWZ0XCI6IF9sZWZ0LFxuXHRcdFx0XHRcdFx0XHRcInJpZ2h0XCI6IHJpZ2h0LFxuXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpuYW1lXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdF9sZWZ0ID0gcmlnaHQgKyAxO1xuXHRcdFx0XHRyZXR1cm4gX2xlZnQ7XG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0X2NsZWFyRW1wdHk6IGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHRmdW5jdGlvbiByZXBsYWNlQ2xhc3MoZWxlbSwgc2VhcmNoLCByZXBsYWNlLCBzd2FwKSB7XG5cdFx0XHRcdGlmIChzd2FwKSB7XG5cdFx0XHRcdFx0c2VhcmNoID0gW3JlcGxhY2UsIHJlcGxhY2UgPSBzZWFyY2hdWzBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JChlbGVtKS5yZW1vdmVDbGFzcyhzZWFyY2gpLmFkZENsYXNzKHJlcGxhY2UpO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucyxcblx0XHRcdFx0Y2hpbGRyZW5MaXN0ID0gJChpdGVtKS5jaGlsZHJlbihvLmxpc3RUeXBlKSxcblx0XHRcdFx0aGFzQ2hpbGRyZW4gPSBjaGlsZHJlbkxpc3QuaXMoJzpub3QoOmVtcHR5KScpO1xuXG5cdFx0XHR2YXIgZG9Ob3RDbGVhciA9XG5cdFx0XHRcdG8uZG9Ob3RDbGVhciB8fFxuXHRcdFx0XHRoYXNDaGlsZHJlbiB8fFxuXHRcdFx0XHRvLnByb3RlY3RSb290ICYmICQoaXRlbSlbMF0gPT09IHRoaXMuZWxlbWVudFswXTtcblxuXHRcdFx0aWYgKG8uaXNUcmVlKSB7XG5cdFx0XHRcdHJlcGxhY2VDbGFzcyhpdGVtLCBvLmJyYW5jaENsYXNzLCBvLmxlYWZDbGFzcywgZG9Ob3RDbGVhcik7XG5cblx0XHRcdFx0aWYgKGRvTm90Q2xlYXIgJiYgaGFzQ2hpbGRyZW4pIHtcblx0XHRcdFx0XHRyZXBsYWNlQ2xhc3MoaXRlbSwgby5jb2xsYXBzZWRDbGFzcywgby5leHBhbmRlZENsYXNzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWRvTm90Q2xlYXIpIHtcblx0XHRcdFx0Y2hpbGRyZW5MaXN0LnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRfZ2V0TGV2ZWw6IGZ1bmN0aW9uKGl0ZW0pIHtcblxuXHRcdFx0dmFyIGxldmVsID0gMSxcblx0XHRcdFx0bGlzdDtcblxuXHRcdFx0aWYgKHRoaXMub3B0aW9ucy5saXN0VHlwZSkge1xuXHRcdFx0XHRsaXN0ID0gaXRlbS5jbG9zZXN0KHRoaXMub3B0aW9ucy5saXN0VHlwZSk7XG5cdFx0XHRcdHdoaWxlIChsaXN0ICYmIGxpc3QubGVuZ3RoID4gMCAmJiAhbGlzdC5pcyhcIi51aS1zb3J0YWJsZVwiKSkge1xuXHRcdFx0XHRcdGxldmVsKys7XG5cdFx0XHRcdFx0bGlzdCA9IGxpc3QucGFyZW50KCkuY2xvc2VzdCh0aGlzLm9wdGlvbnMubGlzdFR5cGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBsZXZlbDtcblx0XHR9LFxuXG5cdFx0X2dldENoaWxkTGV2ZWxzOiBmdW5jdGlvbihwYXJlbnQsIGRlcHRoKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdG8gPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRcdHJlc3VsdCA9IDA7XG5cdFx0XHRkZXB0aCA9IGRlcHRoIHx8IDA7XG5cblx0XHRcdCQocGFyZW50KS5jaGlsZHJlbihvLmxpc3RUeXBlKS5jaGlsZHJlbihvLml0ZW1zKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBjaGlsZCkge1xuXHRcdFx0XHRyZXN1bHQgPSBNYXRoLm1heChzZWxmLl9nZXRDaGlsZExldmVscyhjaGlsZCwgZGVwdGggKyAxKSwgcmVzdWx0KTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVwdGggPyByZXN1bHQgKyAxIDogcmVzdWx0O1xuXHRcdH0sXG5cblx0XHRfaXNBbGxvd2VkOiBmdW5jdGlvbihwYXJlbnRJdGVtLCBsZXZlbCwgbGV2ZWxzKSB7XG5cdFx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucyxcblx0XHRcdFx0Ly8gdGhpcyB0YWtlcyBpbnRvIGFjY291bnQgdGhlIG1heExldmVscyBzZXQgdG8gdGhlIHJlY2lwaWVudCBsaXN0XG5cdFx0XHRcdG1heExldmVscyA9IHRoaXNcblx0XHRcdFx0XHQucGxhY2Vob2xkZXJcblx0XHRcdFx0XHQuY2xvc2VzdChcIi51aS1zb3J0YWJsZVwiKVxuXHRcdFx0XHRcdC5uZXN0ZWRTb3J0YWJsZShcIm9wdGlvblwiLCBcIm1heExldmVsc1wiKSxcblxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGUgcGFyZW50IGhhcyBjaGFuZ2VkIHRvIHByZXZlbnQgaXQsIHdoZW4gby5kaXNhYmxlUGFyZW50Q2hhbmdlIGlzIHRydWVcblx0XHRcdFx0b2xkUGFyZW50ID0gdGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKS5wYXJlbnQoKSxcblx0XHRcdFx0ZGlzYWJsZWRCeVBhcmVudGNoYW5nZSA9IG8uZGlzYWJsZVBhcmVudENoYW5nZSAmJiAoXG5cdFx0XHRcdFx0Ly9Gcm9tIHNvbWV3aGVyZSB0byBzb21ld2hlcmUgZWxzZSwgZXhjZXB0IHRoZSByb290XG5cdFx0XHRcdFx0dHlwZW9mIHBhcmVudEl0ZW0gIT09ICd1bmRlZmluZWQnICYmICFvbGRQYXJlbnQuaXMocGFyZW50SXRlbSkgfHxcblx0XHRcdFx0XHR0eXBlb2YgcGFyZW50SXRlbSA9PT0gJ3VuZGVmaW5lZCcgJiYgb2xkUGFyZW50LmlzKFwibGlcIilcdC8vRnJvbSBzb21ld2hlcmUgdG8gdGhlIHJvb3Rcblx0XHRcdFx0KTtcblx0XHRcdC8vIG1qcyAtIGlzIHRoZSByb290IHByb3RlY3RlZD9cblx0XHRcdC8vIG1qcyAtIGFyZSB3ZSBuZXN0aW5nIHRvbyBkZWVwP1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRkaXNhYmxlZEJ5UGFyZW50Y2hhbmdlIHx8XG5cdFx0XHRcdCFvLmlzQWxsb3dlZCh0aGlzLnBsYWNlaG9sZGVyLCBwYXJlbnRJdGVtLCB0aGlzLmN1cnJlbnRJdGVtKVxuXHRcdFx0KSB7XG5cdFx0XHRcdHRoaXMucGxhY2Vob2xkZXIuYWRkQ2xhc3Moby5lcnJvckNsYXNzKTtcblx0XHRcdFx0aWYgKG1heExldmVscyA8IGxldmVscyAmJiBtYXhMZXZlbHMgIT09IDApIHtcblx0XHRcdFx0XHR0aGlzLmJleW9uZE1heExldmVscyA9IGxldmVscyAtIG1heExldmVscztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLmJleW9uZE1heExldmVscyA9IDE7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChtYXhMZXZlbHMgPCBsZXZlbHMgJiYgbWF4TGV2ZWxzICE9PSAwKSB7XG5cdFx0XHRcdFx0dGhpcy5wbGFjZWhvbGRlci5hZGRDbGFzcyhvLmVycm9yQ2xhc3MpO1xuXHRcdFx0XHRcdHRoaXMuYmV5b25kTWF4TGV2ZWxzID0gbGV2ZWxzIC0gbWF4TGV2ZWxzO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMucGxhY2Vob2xkZXIucmVtb3ZlQ2xhc3Moby5lcnJvckNsYXNzKTtcblx0XHRcdFx0XHR0aGlzLmJleW9uZE1heExldmVscyA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0fSkpO1xuXG5cdCQubWpzLm5lc3RlZFNvcnRhYmxlLnByb3RvdHlwZS5vcHRpb25zID0gJC5leHRlbmQoXG5cdFx0e30sXG5cdFx0JC51aS5zb3J0YWJsZS5wcm90b3R5cGUub3B0aW9ucyxcblx0XHQkLm1qcy5uZXN0ZWRTb3J0YWJsZS5wcm90b3R5cGUub3B0aW9uc1xuXHQpO1xufSkpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==