(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["blocks/edit"],{

/***/ "./develop/components/BlocksManager/Delete/index.js":
/*!**********************************************************!*\
  !*** ./develop/components/BlocksManager/Delete/index.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return deleteBlock; });
/* harmony import */ var _Dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Dialog */ "./develop/components/Dialog/index.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var _window = window,
    lang = _window.lang;
function deleteBlock(positions, $block) {
  var _buttons;

  Object(_Dialog__WEBPACK_IMPORTED_MODULE_0__["default"])('#dialog-confirm', {
    autoOpen: true,
    buttons: (_buttons = {}, _defineProperty(_buttons, lang.remove, function deleteBtn() {
      $(this).dialog('close');
      positions.removeBlock($block);
    }), _defineProperty(_buttons, lang.cancel, function cancelBtn() {
      $(this).dialog('close');
    }), _buttons)
  });
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./develop/components/BlocksManager/Edit/ClassPicker/index.js":
/*!********************************************************************!*\
  !*** ./develop/components/BlocksManager/Edit/ClassPicker/index.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ClassPicker; });
function ClassPicker($dialogEdit, _ref) {
  var initCodeMirror = _ref.initCodeMirror,
      insertText = _ref.insertText;
  var cm;
  $dialogEdit.dialog({
    open: function open() {
      cm = initCodeMirror('#class_editor', {
        theme: 'default',
        lineWrapping: true,
        indentWithTabs: false,
        lineNumbers: false,
        allowFullScreen: false,
        actionBtnsSelector: '.sm-class-editor-button'
      });
    },
    close: function close() {
      $dialogEdit.off('click', '.class-cat');
      $dialogEdit.off('click', '.transform');
    }
  });
  $dialogEdit.on('click', '.class-cat', function category(e) {
    e.preventDefault();
    var id = $(this).attr('href');
    var $scroller = $('#classes-scroller');
    $scroller.stop().animate({
      scrollTop: $scroller.scrollTop() + $(id).position().top
    }, 1000);
  }).on('click', '.transform', function insertClass(e) {
    e.preventDefault();
    insertText(cm, $(this).text());
  });
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./develop/components/BlocksManager/Edit/index.js":
/*!********************************************************!*\
  !*** ./develop/components/BlocksManager/Edit/index.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return EditBlock; });
/* harmony import */ var jquery_ui_ui_widgets_tabs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery-ui/ui/widgets/tabs */ "./node_modules/jquery-ui/ui/widgets/tabs.js");
/* harmony import */ var jquery_ui_ui_widgets_tabs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_ui_widgets_tabs__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jquery_ui_themes_base_core_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery-ui/themes/base/core.css */ "./node_modules/jquery-ui-themes/themes/smoothness/jquery-ui.css");
/* harmony import */ var jquery_ui_themes_base_core_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_themes_base_core_css__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jquery_ui_themes_base_theme_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery-ui/themes/base/theme.css */ "./node_modules/jquery-ui-themes/themes/smoothness/theme.css");
/* harmony import */ var jquery_ui_themes_base_theme_css__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_themes_base_theme_css__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var jquery_ui_themes_base_tabs_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery-ui/themes/base/tabs.css */ "./node_modules/jquery-ui/themes/base/tabs.css");
/* harmony import */ var jquery_ui_themes_base_tabs_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery_ui_themes_base_tabs_css__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Dialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../Dialog */ "./develop/components/Dialog/index.js");
/* harmony import */ var _ClassPicker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ClassPicker */ "./develop/components/BlocksManager/Edit/ClassPicker/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils */ "./develop/utils/index.js");
/* harmony import */ var _BlockRenderer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../BlockRenderer */ "./develop/components/BlockRenderer/index.js");
/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./style.scss */ "./develop/components/BlocksManager/Edit/style.scss");
/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_style_scss__WEBPACK_IMPORTED_MODULE_8__);
function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }










var _window = window,
    actions = _window.actions,
    config = _window.config,
    lang = _window.lang;
function EditBlock($block, codemirror) {
  var $dialogEdit;
  var $document;
  var blockData = {
    block: {}
  };

  function getFormData() {
    return Object(_utils__WEBPACK_IMPORTED_MODULE_6__["getPOJO"])($dialogEdit.find('#edit_form').serializeArray());
  }

  function previewBlock() {
    var formData = getFormData();

    var data = _objectSpread(_objectSpread({}, blockData), {}, {
      block: _objectSpread(_objectSpread({}, blockData.block), formData)
    });

    _BlockRenderer__WEBPACK_IMPORTED_MODULE_7__["default"].render($block, data);
  }

  function undoPreviewBlock() {
    _BlockRenderer__WEBPACK_IMPORTED_MODULE_7__["default"].render($block, blockData);
  }

  function saveForm() {
    var updateSimilar = $dialogEdit.dialog('widget').find('#update-similar:checked').length;

    var data = _objectSpread(_objectSpread({}, getFormData()), {}, {
      route: config.route,
      similar: updateSimilar
    });
    /**
     * Event to allow other extensions to modify block data before it is saved
     *
     * @event blitze_sitemaker_save_block_before
     * @type {object}
     * @property {object} data Block data to be saved to db
     * @since 3.1.2
     */


    $document.trigger({
      type: 'blitze_sitemaker_save_block_before',
      data: data
    });
    $.post(actions.save_block, data).done(function (resp) {
      if (resp.list) {
        $dialogEdit.dialog('close');
        $.each(resp.list, function (i, block) {
          return _BlockRenderer__WEBPACK_IMPORTED_MODULE_7__["default"].render($("#block-".concat(block.id)), {
            block: block
          });
        });
      }
    });
  }

  function getEditForm(id) {
    $.getJSON(actions.edit_block, {
      id: id
    }).done(function (row) {
      blockData.block = row;

      if (row.form) {
        var title = row.title.replace(/(<([^>]+)>)/gi, '');
        $dialogEdit.dialog('option', 'title', "".concat(lang.edit, " - ").concat(title));
        $dialogEdit.html(row.form);
        $dialogEdit.find('#block-settings').tabs();
        $dialogEdit.find('.sm-toggler').click(function (e) {
          e.preventDefault();
          var target = $(e.currentTarget).data('target');
          $(target).slideToggle();
        }).each(function iterator() {
          $($(this).data('target')).hide();
        });
        $dialogEdit.find('select[data-togglable-settings]').each(function iterator() {
          var $this = $(this);
          $this.change(function () {
            return window.phpbb.toggleSelectSettings($this);
          });
          window.phpbb.toggleSelectSettings($this);
        });
        $dialogEdit.dialog('open');
      }
    });
  }

  function createContextualSelect() {
    $dialogEdit.find('select[data-togglable-settings]').each(function iterator() {
      var $el = $(this);
      $el.change(function () {
        return window.phpbb.toggleSelectSettings($el);
      });
      window.phpbb.toggleSelectSettings($el);
    });
  }

  function addBottomPane() {
    $(this).dialog('widget').find('.ui-dialog-buttonpane').prepend("<label class=\"sm-reset dialog-check-button\">\n\t\t\t\t\t<input id=\"update-similar\" type=\"checkbox\" /> ".concat(lang.updateSimilar, "\n\t\t\t\t</label>"));
  }

  function getEditDialog() {
    var _buttons;

    return new _Dialog__WEBPACK_IMPORTED_MODULE_4__["default"]('#dialog-edit', {
      create: addBottomPane,
      beforeClose: function beforeClose() {
        return undoPreviewBlock();
      },
      buttons: (_buttons = {}, _defineProperty(_buttons, lang.edit, function editBtn() {
        saveForm();
      }), _defineProperty(_buttons, lang.cancel, function cancelBtn() {
        $(this).dialog('close');
      }), _buttons)
    });
  }

  $document = $(document);
  $dialogEdit = getEditDialog();
  $dialogEdit.on('dialogopen', function isFeedBlock() {
    var _this = this;

    if ($(this).find('.sm-multi-input-ui').length) {
      __webpack_require__.e(/*! import() | blocks/multiInput/input */ "blocks/multiInput/input").then(__webpack_require__.bind(null, /*! ../../MultiInputUI */ "./develop/components/MultiInputUI/index.js")).then(function () {
        return $('.sm-multi-input-ui').multiInputUI();
      });
    }

    if ($(this).find('#sm-feed-template').length) {
      Promise.all([__webpack_require__.e(/*! import() | twig/twig */ "twig/twig").then(__webpack_require__.t.bind(null, /*! twig */ "./node_modules/twig/twig.js", 7)), Promise.all(/*! import() | blocks/feeds/feeds */[__webpack_require__.e("codemirror/codemirror"), __webpack_require__.e("blocks/feeds/feeds")]).then(__webpack_require__.bind(null, /*! ../../Feeds */ "./develop/components/Feeds/index.js"))]).then(function (_ref) {
        var _ref2 = _slicedToArray(_ref, 2),
            Twig = _ref2[0].default,
            Feeds = _ref2[1].default;

        return Feeds($(_this), Twig, codemirror);
      });
    }

    $(this).find('.code-editor').each(function (i, element) {
      var $textarea = $(element);
      var id = $textarea.attr('id');

      if (!$textarea.next().hasClass('CodeMirror')) {
        var _$textarea$data = $textarea.data(),
            width = _$textarea$data.width,
            _$textarea$data$heigh = _$textarea$data.height,
            height = _$textarea$data$heigh === void 0 ? 100 : _$textarea$data$heigh,
            options = _objectWithoutProperties(_$textarea$data, ["width", "height"]);

        var cm = codemirror.initCodeMirror("#".concat(id), _objectSpread({
          actionBtnsSelector: ".".concat(id, "-button")
        }, options));
        cm.setSize(width, height);
      }
    });
    $dialogEdit.find('.sortable').sortable({
      axis: 'y',
      containment: 'parent',
      classes: {
        'ui-sortable-handle': 'panel'
      }
    }).disableSelection();
    $dialogEdit.find('.block-preview').off().change(function () {
      return previewBlock();
    });
  });
  var id = $block.attr('id').substring(6);
  getEditForm(id);
  createContextualSelect();
  Object(_ClassPicker__WEBPACK_IMPORTED_MODULE_5__["default"])($dialogEdit, codemirror);
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ "jquery")))

/***/ }),

/***/ "./develop/components/BlocksManager/Edit/style.scss":
/*!**********************************************************!*\
  !*** ./develop/components/BlocksManager/Edit/style.scss ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./node_modules/jquery-ui/themes/base/tabs.css":
/*!*****************************************************!*\
  !*** ./node_modules/jquery-ui/themes/base/tabs.css ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./node_modules/jquery-ui/ui/widgets/tabs.js":
/*!***************************************************!*\
  !*** ./node_modules/jquery-ui/ui/widgets/tabs.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jQuery UI Tabs 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Tabs
//>>group: Widgets
//>>description: Transforms a set of container elements into a tab structure.
//>>docs: http://api.jqueryui.com/tabs/
//>>demos: http://jqueryui.com/tabs/
//>>css.structure: ../../themes/base/core.css
//>>css.structure: ../../themes/base/tabs.css
//>>css.theme: ../../themes/base/theme.css

( function( factory ) {
	if ( true ) {

		// AMD. Register as an anonymous module.
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [
			__webpack_require__(/*! jquery */ "jquery"),
			__webpack_require__(/*! ../escape-selector */ "./node_modules/jquery-ui/ui/escape-selector.js"),
			__webpack_require__(/*! ../keycode */ "./node_modules/jquery-ui/ui/keycode.js"),
			__webpack_require__(/*! ../safe-active-element */ "./node_modules/jquery-ui/ui/safe-active-element.js"),
			__webpack_require__(/*! ../unique-id */ "./node_modules/jquery-ui/ui/unique-id.js"),
			__webpack_require__(/*! ../version */ "./node_modules/jquery-ui/ui/version.js"),
			__webpack_require__(/*! ../widget */ "./node_modules/jquery-ui/ui/widget.js")
		], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}
}( function( $ ) {

$.widget( "ui.tabs", {
	version: "1.12.1",
	delay: 300,
	options: {
		active: null,
		classes: {
			"ui-tabs": "ui-corner-all",
			"ui-tabs-nav": "ui-corner-all",
			"ui-tabs-panel": "ui-corner-bottom",
			"ui-tabs-tab": "ui-corner-top"
		},
		collapsible: false,
		event: "click",
		heightStyle: "content",
		hide: null,
		show: null,

		// Callbacks
		activate: null,
		beforeActivate: null,
		beforeLoad: null,
		load: null
	},

	_isLocal: ( function() {
		var rhash = /#.*$/;

		return function( anchor ) {
			var anchorUrl, locationUrl;

			anchorUrl = anchor.href.replace( rhash, "" );
			locationUrl = location.href.replace( rhash, "" );

			// Decoding may throw an error if the URL isn't UTF-8 (#9518)
			try {
				anchorUrl = decodeURIComponent( anchorUrl );
			} catch ( error ) {}
			try {
				locationUrl = decodeURIComponent( locationUrl );
			} catch ( error ) {}

			return anchor.hash.length > 1 && anchorUrl === locationUrl;
		};
	} )(),

	_create: function() {
		var that = this,
			options = this.options;

		this.running = false;

		this._addClass( "ui-tabs", "ui-widget ui-widget-content" );
		this._toggleClass( "ui-tabs-collapsible", null, options.collapsible );

		this._processTabs();
		options.active = this._initialActive();

		// Take disabling tabs via class attribute from HTML
		// into account and update option properly.
		if ( $.isArray( options.disabled ) ) {
			options.disabled = $.unique( options.disabled.concat(
				$.map( this.tabs.filter( ".ui-state-disabled" ), function( li ) {
					return that.tabs.index( li );
				} )
			) ).sort();
		}

		// Check for length avoids error when initializing empty list
		if ( this.options.active !== false && this.anchors.length ) {
			this.active = this._findActive( options.active );
		} else {
			this.active = $();
		}

		this._refresh();

		if ( this.active.length ) {
			this.load( options.active );
		}
	},

	_initialActive: function() {
		var active = this.options.active,
			collapsible = this.options.collapsible,
			locationHash = location.hash.substring( 1 );

		if ( active === null ) {

			// check the fragment identifier in the URL
			if ( locationHash ) {
				this.tabs.each( function( i, tab ) {
					if ( $( tab ).attr( "aria-controls" ) === locationHash ) {
						active = i;
						return false;
					}
				} );
			}

			// Check for a tab marked active via a class
			if ( active === null ) {
				active = this.tabs.index( this.tabs.filter( ".ui-tabs-active" ) );
			}

			// No active tab, set to false
			if ( active === null || active === -1 ) {
				active = this.tabs.length ? 0 : false;
			}
		}

		// Handle numbers: negative, out of range
		if ( active !== false ) {
			active = this.tabs.index( this.tabs.eq( active ) );
			if ( active === -1 ) {
				active = collapsible ? false : 0;
			}
		}

		// Don't allow collapsible: false and active: false
		if ( !collapsible && active === false && this.anchors.length ) {
			active = 0;
		}

		return active;
	},

	_getCreateEventData: function() {
		return {
			tab: this.active,
			panel: !this.active.length ? $() : this._getPanelForTab( this.active )
		};
	},

	_tabKeydown: function( event ) {
		var focusedTab = $( $.ui.safeActiveElement( this.document[ 0 ] ) ).closest( "li" ),
			selectedIndex = this.tabs.index( focusedTab ),
			goingForward = true;

		if ( this._handlePageNav( event ) ) {
			return;
		}

		switch ( event.keyCode ) {
		case $.ui.keyCode.RIGHT:
		case $.ui.keyCode.DOWN:
			selectedIndex++;
			break;
		case $.ui.keyCode.UP:
		case $.ui.keyCode.LEFT:
			goingForward = false;
			selectedIndex--;
			break;
		case $.ui.keyCode.END:
			selectedIndex = this.anchors.length - 1;
			break;
		case $.ui.keyCode.HOME:
			selectedIndex = 0;
			break;
		case $.ui.keyCode.SPACE:

			// Activate only, no collapsing
			event.preventDefault();
			clearTimeout( this.activating );
			this._activate( selectedIndex );
			return;
		case $.ui.keyCode.ENTER:

			// Toggle (cancel delayed activation, allow collapsing)
			event.preventDefault();
			clearTimeout( this.activating );

			// Determine if we should collapse or activate
			this._activate( selectedIndex === this.options.active ? false : selectedIndex );
			return;
		default:
			return;
		}

		// Focus the appropriate tab, based on which key was pressed
		event.preventDefault();
		clearTimeout( this.activating );
		selectedIndex = this._focusNextTab( selectedIndex, goingForward );

		// Navigating with control/command key will prevent automatic activation
		if ( !event.ctrlKey && !event.metaKey ) {

			// Update aria-selected immediately so that AT think the tab is already selected.
			// Otherwise AT may confuse the user by stating that they need to activate the tab,
			// but the tab will already be activated by the time the announcement finishes.
			focusedTab.attr( "aria-selected", "false" );
			this.tabs.eq( selectedIndex ).attr( "aria-selected", "true" );

			this.activating = this._delay( function() {
				this.option( "active", selectedIndex );
			}, this.delay );
		}
	},

	_panelKeydown: function( event ) {
		if ( this._handlePageNav( event ) ) {
			return;
		}

		// Ctrl+up moves focus to the current tab
		if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {
			event.preventDefault();
			this.active.trigger( "focus" );
		}
	},

	// Alt+page up/down moves focus to the previous/next tab (and activates)
	_handlePageNav: function( event ) {
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {
			this._activate( this._focusNextTab( this.options.active - 1, false ) );
			return true;
		}
		if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {
			this._activate( this._focusNextTab( this.options.active + 1, true ) );
			return true;
		}
	},

	_findNextTab: function( index, goingForward ) {
		var lastTabIndex = this.tabs.length - 1;

		function constrain() {
			if ( index > lastTabIndex ) {
				index = 0;
			}
			if ( index < 0 ) {
				index = lastTabIndex;
			}
			return index;
		}

		while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {
			index = goingForward ? index + 1 : index - 1;
		}

		return index;
	},

	_focusNextTab: function( index, goingForward ) {
		index = this._findNextTab( index, goingForward );
		this.tabs.eq( index ).trigger( "focus" );
		return index;
	},

	_setOption: function( key, value ) {
		if ( key === "active" ) {

			// _activate() will handle invalid values and update this.options
			this._activate( value );
			return;
		}

		this._super( key, value );

		if ( key === "collapsible" ) {
			this._toggleClass( "ui-tabs-collapsible", null, value );

			// Setting collapsible: false while collapsed; open first panel
			if ( !value && this.options.active === false ) {
				this._activate( 0 );
			}
		}

		if ( key === "event" ) {
			this._setupEvents( value );
		}

		if ( key === "heightStyle" ) {
			this._setupHeightStyle( value );
		}
	},

	_sanitizeSelector: function( hash ) {
		return hash ? hash.replace( /[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&" ) : "";
	},

	refresh: function() {
		var options = this.options,
			lis = this.tablist.children( ":has(a[href])" );

		// Get disabled tabs from class attribute from HTML
		// this will get converted to a boolean if needed in _refresh()
		options.disabled = $.map( lis.filter( ".ui-state-disabled" ), function( tab ) {
			return lis.index( tab );
		} );

		this._processTabs();

		// Was collapsed or no tabs
		if ( options.active === false || !this.anchors.length ) {
			options.active = false;
			this.active = $();

		// was active, but active tab is gone
		} else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {

			// all remaining tabs are disabled
			if ( this.tabs.length === options.disabled.length ) {
				options.active = false;
				this.active = $();

			// activate previous tab
			} else {
				this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );
			}

		// was active, active tab still exists
		} else {

			// make sure active index is correct
			options.active = this.tabs.index( this.active );
		}

		this._refresh();
	},

	_refresh: function() {
		this._setOptionDisabled( this.options.disabled );
		this._setupEvents( this.options.event );
		this._setupHeightStyle( this.options.heightStyle );

		this.tabs.not( this.active ).attr( {
			"aria-selected": "false",
			"aria-expanded": "false",
			tabIndex: -1
		} );
		this.panels.not( this._getPanelForTab( this.active ) )
			.hide()
			.attr( {
				"aria-hidden": "true"
			} );

		// Make sure one tab is in the tab order
		if ( !this.active.length ) {
			this.tabs.eq( 0 ).attr( "tabIndex", 0 );
		} else {
			this.active
				.attr( {
					"aria-selected": "true",
					"aria-expanded": "true",
					tabIndex: 0
				} );
			this._addClass( this.active, "ui-tabs-active", "ui-state-active" );
			this._getPanelForTab( this.active )
				.show()
				.attr( {
					"aria-hidden": "false"
				} );
		}
	},

	_processTabs: function() {
		var that = this,
			prevTabs = this.tabs,
			prevAnchors = this.anchors,
			prevPanels = this.panels;

		this.tablist = this._getList().attr( "role", "tablist" );
		this._addClass( this.tablist, "ui-tabs-nav",
			"ui-helper-reset ui-helper-clearfix ui-widget-header" );

		// Prevent users from focusing disabled tabs via click
		this.tablist
			.on( "mousedown" + this.eventNamespace, "> li", function( event ) {
				if ( $( this ).is( ".ui-state-disabled" ) ) {
					event.preventDefault();
				}
			} )

			// Support: IE <9
			// Preventing the default action in mousedown doesn't prevent IE
			// from focusing the element, so if the anchor gets focused, blur.
			// We don't have to worry about focusing the previously focused
			// element since clicking on a non-focusable element should focus
			// the body anyway.
			.on( "focus" + this.eventNamespace, ".ui-tabs-anchor", function() {
				if ( $( this ).closest( "li" ).is( ".ui-state-disabled" ) ) {
					this.blur();
				}
			} );

		this.tabs = this.tablist.find( "> li:has(a[href])" )
			.attr( {
				role: "tab",
				tabIndex: -1
			} );
		this._addClass( this.tabs, "ui-tabs-tab", "ui-state-default" );

		this.anchors = this.tabs.map( function() {
			return $( "a", this )[ 0 ];
		} )
			.attr( {
				role: "presentation",
				tabIndex: -1
			} );
		this._addClass( this.anchors, "ui-tabs-anchor" );

		this.panels = $();

		this.anchors.each( function( i, anchor ) {
			var selector, panel, panelId,
				anchorId = $( anchor ).uniqueId().attr( "id" ),
				tab = $( anchor ).closest( "li" ),
				originalAriaControls = tab.attr( "aria-controls" );

			// Inline tab
			if ( that._isLocal( anchor ) ) {
				selector = anchor.hash;
				panelId = selector.substring( 1 );
				panel = that.element.find( that._sanitizeSelector( selector ) );

			// remote tab
			} else {

				// If the tab doesn't already have aria-controls,
				// generate an id by using a throw-away element
				panelId = tab.attr( "aria-controls" ) || $( {} ).uniqueId()[ 0 ].id;
				selector = "#" + panelId;
				panel = that.element.find( selector );
				if ( !panel.length ) {
					panel = that._createPanel( panelId );
					panel.insertAfter( that.panels[ i - 1 ] || that.tablist );
				}
				panel.attr( "aria-live", "polite" );
			}

			if ( panel.length ) {
				that.panels = that.panels.add( panel );
			}
			if ( originalAriaControls ) {
				tab.data( "ui-tabs-aria-controls", originalAriaControls );
			}
			tab.attr( {
				"aria-controls": panelId,
				"aria-labelledby": anchorId
			} );
			panel.attr( "aria-labelledby", anchorId );
		} );

		this.panels.attr( "role", "tabpanel" );
		this._addClass( this.panels, "ui-tabs-panel", "ui-widget-content" );

		// Avoid memory leaks (#10056)
		if ( prevTabs ) {
			this._off( prevTabs.not( this.tabs ) );
			this._off( prevAnchors.not( this.anchors ) );
			this._off( prevPanels.not( this.panels ) );
		}
	},

	// Allow overriding how to find the list for rare usage scenarios (#7715)
	_getList: function() {
		return this.tablist || this.element.find( "ol, ul" ).eq( 0 );
	},

	_createPanel: function( id ) {
		return $( "<div>" )
			.attr( "id", id )
			.data( "ui-tabs-destroy", true );
	},

	_setOptionDisabled: function( disabled ) {
		var currentItem, li, i;

		if ( $.isArray( disabled ) ) {
			if ( !disabled.length ) {
				disabled = false;
			} else if ( disabled.length === this.anchors.length ) {
				disabled = true;
			}
		}

		// Disable tabs
		for ( i = 0; ( li = this.tabs[ i ] ); i++ ) {
			currentItem = $( li );
			if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {
				currentItem.attr( "aria-disabled", "true" );
				this._addClass( currentItem, null, "ui-state-disabled" );
			} else {
				currentItem.removeAttr( "aria-disabled" );
				this._removeClass( currentItem, null, "ui-state-disabled" );
			}
		}

		this.options.disabled = disabled;

		this._toggleClass( this.widget(), this.widgetFullName + "-disabled", null,
			disabled === true );
	},

	_setupEvents: function( event ) {
		var events = {};
		if ( event ) {
			$.each( event.split( " " ), function( index, eventName ) {
				events[ eventName ] = "_eventHandler";
			} );
		}

		this._off( this.anchors.add( this.tabs ).add( this.panels ) );

		// Always prevent the default action, even when disabled
		this._on( true, this.anchors, {
			click: function( event ) {
				event.preventDefault();
			}
		} );
		this._on( this.anchors, events );
		this._on( this.tabs, { keydown: "_tabKeydown" } );
		this._on( this.panels, { keydown: "_panelKeydown" } );

		this._focusable( this.tabs );
		this._hoverable( this.tabs );
	},

	_setupHeightStyle: function( heightStyle ) {
		var maxHeight,
			parent = this.element.parent();

		if ( heightStyle === "fill" ) {
			maxHeight = parent.height();
			maxHeight -= this.element.outerHeight() - this.element.height();

			this.element.siblings( ":visible" ).each( function() {
				var elem = $( this ),
					position = elem.css( "position" );

				if ( position === "absolute" || position === "fixed" ) {
					return;
				}
				maxHeight -= elem.outerHeight( true );
			} );

			this.element.children().not( this.panels ).each( function() {
				maxHeight -= $( this ).outerHeight( true );
			} );

			this.panels.each( function() {
				$( this ).height( Math.max( 0, maxHeight -
					$( this ).innerHeight() + $( this ).height() ) );
			} )
				.css( "overflow", "auto" );
		} else if ( heightStyle === "auto" ) {
			maxHeight = 0;
			this.panels.each( function() {
				maxHeight = Math.max( maxHeight, $( this ).height( "" ).height() );
			} ).height( maxHeight );
		}
	},

	_eventHandler: function( event ) {
		var options = this.options,
			active = this.active,
			anchor = $( event.currentTarget ),
			tab = anchor.closest( "li" ),
			clickedIsActive = tab[ 0 ] === active[ 0 ],
			collapsing = clickedIsActive && options.collapsible,
			toShow = collapsing ? $() : this._getPanelForTab( tab ),
			toHide = !active.length ? $() : this._getPanelForTab( active ),
			eventData = {
				oldTab: active,
				oldPanel: toHide,
				newTab: collapsing ? $() : tab,
				newPanel: toShow
			};

		event.preventDefault();

		if ( tab.hasClass( "ui-state-disabled" ) ||

				// tab is already loading
				tab.hasClass( "ui-tabs-loading" ) ||

				// can't switch durning an animation
				this.running ||

				// click on active header, but not collapsible
				( clickedIsActive && !options.collapsible ) ||

				// allow canceling activation
				( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
			return;
		}

		options.active = collapsing ? false : this.tabs.index( tab );

		this.active = clickedIsActive ? $() : tab;
		if ( this.xhr ) {
			this.xhr.abort();
		}

		if ( !toHide.length && !toShow.length ) {
			$.error( "jQuery UI Tabs: Mismatching fragment identifier." );
		}

		if ( toShow.length ) {
			this.load( this.tabs.index( tab ), event );
		}
		this._toggle( event, eventData );
	},

	// Handles show/hide for selecting tabs
	_toggle: function( event, eventData ) {
		var that = this,
			toShow = eventData.newPanel,
			toHide = eventData.oldPanel;

		this.running = true;

		function complete() {
			that.running = false;
			that._trigger( "activate", event, eventData );
		}

		function show() {
			that._addClass( eventData.newTab.closest( "li" ), "ui-tabs-active", "ui-state-active" );

			if ( toShow.length && that.options.show ) {
				that._show( toShow, that.options.show, complete );
			} else {
				toShow.show();
				complete();
			}
		}

		// Start out by hiding, then showing, then completing
		if ( toHide.length && this.options.hide ) {
			this._hide( toHide, this.options.hide, function() {
				that._removeClass( eventData.oldTab.closest( "li" ),
					"ui-tabs-active", "ui-state-active" );
				show();
			} );
		} else {
			this._removeClass( eventData.oldTab.closest( "li" ),
				"ui-tabs-active", "ui-state-active" );
			toHide.hide();
			show();
		}

		toHide.attr( "aria-hidden", "true" );
		eventData.oldTab.attr( {
			"aria-selected": "false",
			"aria-expanded": "false"
		} );

		// If we're switching tabs, remove the old tab from the tab order.
		// If we're opening from collapsed state, remove the previous tab from the tab order.
		// If we're collapsing, then keep the collapsing tab in the tab order.
		if ( toShow.length && toHide.length ) {
			eventData.oldTab.attr( "tabIndex", -1 );
		} else if ( toShow.length ) {
			this.tabs.filter( function() {
				return $( this ).attr( "tabIndex" ) === 0;
			} )
				.attr( "tabIndex", -1 );
		}

		toShow.attr( "aria-hidden", "false" );
		eventData.newTab.attr( {
			"aria-selected": "true",
			"aria-expanded": "true",
			tabIndex: 0
		} );
	},

	_activate: function( index ) {
		var anchor,
			active = this._findActive( index );

		// Trying to activate the already active panel
		if ( active[ 0 ] === this.active[ 0 ] ) {
			return;
		}

		// Trying to collapse, simulate a click on the current active header
		if ( !active.length ) {
			active = this.active;
		}

		anchor = active.find( ".ui-tabs-anchor" )[ 0 ];
		this._eventHandler( {
			target: anchor,
			currentTarget: anchor,
			preventDefault: $.noop
		} );
	},

	_findActive: function( index ) {
		return index === false ? $() : this.tabs.eq( index );
	},

	_getIndex: function( index ) {

		// meta-function to give users option to provide a href string instead of a numerical index.
		if ( typeof index === "string" ) {
			index = this.anchors.index( this.anchors.filter( "[href$='" +
				$.ui.escapeSelector( index ) + "']" ) );
		}

		return index;
	},

	_destroy: function() {
		if ( this.xhr ) {
			this.xhr.abort();
		}

		this.tablist
			.removeAttr( "role" )
			.off( this.eventNamespace );

		this.anchors
			.removeAttr( "role tabIndex" )
			.removeUniqueId();

		this.tabs.add( this.panels ).each( function() {
			if ( $.data( this, "ui-tabs-destroy" ) ) {
				$( this ).remove();
			} else {
				$( this ).removeAttr( "role tabIndex " +
					"aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded" );
			}
		} );

		this.tabs.each( function() {
			var li = $( this ),
				prev = li.data( "ui-tabs-aria-controls" );
			if ( prev ) {
				li
					.attr( "aria-controls", prev )
					.removeData( "ui-tabs-aria-controls" );
			} else {
				li.removeAttr( "aria-controls" );
			}
		} );

		this.panels.show();

		if ( this.options.heightStyle !== "content" ) {
			this.panels.css( "height", "" );
		}
	},

	enable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === false ) {
			return;
		}

		if ( index === undefined ) {
			disabled = false;
		} else {
			index = this._getIndex( index );
			if ( $.isArray( disabled ) ) {
				disabled = $.map( disabled, function( num ) {
					return num !== index ? num : null;
				} );
			} else {
				disabled = $.map( this.tabs, function( li, num ) {
					return num !== index ? num : null;
				} );
			}
		}
		this._setOptionDisabled( disabled );
	},

	disable: function( index ) {
		var disabled = this.options.disabled;
		if ( disabled === true ) {
			return;
		}

		if ( index === undefined ) {
			disabled = true;
		} else {
			index = this._getIndex( index );
			if ( $.inArray( index, disabled ) !== -1 ) {
				return;
			}
			if ( $.isArray( disabled ) ) {
				disabled = $.merge( [ index ], disabled ).sort();
			} else {
				disabled = [ index ];
			}
		}
		this._setOptionDisabled( disabled );
	},

	load: function( index, event ) {
		index = this._getIndex( index );
		var that = this,
			tab = this.tabs.eq( index ),
			anchor = tab.find( ".ui-tabs-anchor" ),
			panel = this._getPanelForTab( tab ),
			eventData = {
				tab: tab,
				panel: panel
			},
			complete = function( jqXHR, status ) {
				if ( status === "abort" ) {
					that.panels.stop( false, true );
				}

				that._removeClass( tab, "ui-tabs-loading" );
				panel.removeAttr( "aria-busy" );

				if ( jqXHR === that.xhr ) {
					delete that.xhr;
				}
			};

		// Not remote
		if ( this._isLocal( anchor[ 0 ] ) ) {
			return;
		}

		this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );

		// Support: jQuery <1.8
		// jQuery <1.8 returns false if the request is canceled in beforeSend,
		// but as of 1.8, $.ajax() always returns a jqXHR object.
		if ( this.xhr && this.xhr.statusText !== "canceled" ) {
			this._addClass( tab, "ui-tabs-loading" );
			panel.attr( "aria-busy", "true" );

			this.xhr
				.done( function( response, status, jqXHR ) {

					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout( function() {
						panel.html( response );
						that._trigger( "load", event, eventData );

						complete( jqXHR, status );
					}, 1 );
				} )
				.fail( function( jqXHR, status ) {

					// support: jQuery <1.8
					// http://bugs.jquery.com/ticket/11778
					setTimeout( function() {
						complete( jqXHR, status );
					}, 1 );
				} );
		}
	},

	_ajaxSettings: function( anchor, event, eventData ) {
		var that = this;
		return {

			// Support: IE <11 only
			// Strip any hash that exists to prevent errors with the Ajax request
			url: anchor.attr( "href" ).replace( /#.*$/, "" ),
			beforeSend: function( jqXHR, settings ) {
				return that._trigger( "beforeLoad", event,
					$.extend( { jqXHR: jqXHR, ajaxSettings: settings }, eventData ) );
			}
		};
	},

	_getPanelForTab: function( tab ) {
		var id = $( tab ).attr( "aria-controls" );
		return this.element.find( this._sanitizeSelector( "#" + id ) );
	}
} );

// DEPRECATED
// TODO: Switch return back to widget declaration at top of file when this is removed
if ( $.uiBackCompat !== false ) {

	// Backcompat for ui-tab class (now ui-tabs-tab)
	$.widget( "ui.tabs", $.ui.tabs, {
		_processTabs: function() {
			this._superApply( arguments );
			this._addClass( this.tabs, "ui-tab" );
		}
	} );
}

return $.ui.tabs;

} ) );


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvbXBvbmVudHMvQmxvY2tzTWFuYWdlci9EZWxldGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vZGV2ZWxvcC9jb21wb25lbnRzL0Jsb2Nrc01hbmFnZXIvRWRpdC9DbGFzc1BpY2tlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9kZXZlbG9wL2NvbXBvbmVudHMvQmxvY2tzTWFuYWdlci9FZGl0L2luZGV4LmpzIiwid2VicGFjazovLy8uL2RldmVsb3AvY29tcG9uZW50cy9CbG9ja3NNYW5hZ2VyL0VkaXQvc3R5bGUuc2NzcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanF1ZXJ5LXVpL3RoZW1lcy9iYXNlL3RhYnMuY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9qcXVlcnktdWkvdWkvd2lkZ2V0cy90YWJzLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsImxhbmciLCJkZWxldGVCbG9jayIsInBvc2l0aW9ucyIsIiRibG9jayIsIkRpYWxvZyIsImF1dG9PcGVuIiwiYnV0dG9ucyIsInJlbW92ZSIsImRlbGV0ZUJ0biIsIiQiLCJkaWFsb2ciLCJyZW1vdmVCbG9jayIsImNhbmNlbCIsImNhbmNlbEJ0biIsIkNsYXNzUGlja2VyIiwiJGRpYWxvZ0VkaXQiLCJpbml0Q29kZU1pcnJvciIsImluc2VydFRleHQiLCJjbSIsIm9wZW4iLCJ0aGVtZSIsImxpbmVXcmFwcGluZyIsImluZGVudFdpdGhUYWJzIiwibGluZU51bWJlcnMiLCJhbGxvd0Z1bGxTY3JlZW4iLCJhY3Rpb25CdG5zU2VsZWN0b3IiLCJjbG9zZSIsIm9mZiIsIm9uIiwiY2F0ZWdvcnkiLCJlIiwicHJldmVudERlZmF1bHQiLCJpZCIsImF0dHIiLCIkc2Nyb2xsZXIiLCJzdG9wIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInBvc2l0aW9uIiwidG9wIiwiaW5zZXJ0Q2xhc3MiLCJ0ZXh0IiwiYWN0aW9ucyIsImNvbmZpZyIsIkVkaXRCbG9jayIsImNvZGVtaXJyb3IiLCIkZG9jdW1lbnQiLCJibG9ja0RhdGEiLCJibG9jayIsImdldEZvcm1EYXRhIiwiZ2V0UE9KTyIsImZpbmQiLCJzZXJpYWxpemVBcnJheSIsInByZXZpZXdCbG9jayIsImZvcm1EYXRhIiwiZGF0YSIsIkJsb2NrUmVuZGVyZXIiLCJyZW5kZXIiLCJ1bmRvUHJldmlld0Jsb2NrIiwic2F2ZUZvcm0iLCJ1cGRhdGVTaW1pbGFyIiwibGVuZ3RoIiwicm91dGUiLCJzaW1pbGFyIiwidHJpZ2dlciIsInR5cGUiLCJwb3N0Iiwic2F2ZV9ibG9jayIsImRvbmUiLCJyZXNwIiwibGlzdCIsImVhY2giLCJpIiwiZ2V0RWRpdEZvcm0iLCJnZXRKU09OIiwiZWRpdF9ibG9jayIsInJvdyIsImZvcm0iLCJ0aXRsZSIsInJlcGxhY2UiLCJlZGl0IiwiaHRtbCIsInRhYnMiLCJjbGljayIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJzbGlkZVRvZ2dsZSIsIml0ZXJhdG9yIiwiaGlkZSIsIiR0aGlzIiwiY2hhbmdlIiwicGhwYmIiLCJ0b2dnbGVTZWxlY3RTZXR0aW5ncyIsImNyZWF0ZUNvbnRleHR1YWxTZWxlY3QiLCIkZWwiLCJhZGRCb3R0b21QYW5lIiwicHJlcGVuZCIsImdldEVkaXREaWFsb2ciLCJjcmVhdGUiLCJiZWZvcmVDbG9zZSIsImVkaXRCdG4iLCJkb2N1bWVudCIsImlzRmVlZEJsb2NrIiwidGhlbiIsIm11bHRpSW5wdXRVSSIsIlByb21pc2UiLCJhbGwiLCJUd2lnIiwiZGVmYXVsdCIsIkZlZWRzIiwiZWxlbWVudCIsIiR0ZXh0YXJlYSIsIm5leHQiLCJoYXNDbGFzcyIsIndpZHRoIiwiaGVpZ2h0Iiwib3B0aW9ucyIsInNldFNpemUiLCJzb3J0YWJsZSIsImF4aXMiLCJjb250YWlubWVudCIsImNsYXNzZXMiLCJkaXNhYmxlU2VsZWN0aW9uIiwic3Vic3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtjQUVpQkEsTTtJQUFUQyxJLFdBQUFBLEk7QUFF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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxnREFBZ0QsYUFBYSxFQUFFO0FBQy9ELEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYyx5QkFBeUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esd0JBQXdCLHlCQUF5QjtBQUNqRCwwQkFBMEIsMkJBQTJCOztBQUVyRDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1Q0FBdUM7QUFDdkQ7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7O0FBRUEsQ0FBQyIsImZpbGUiOiJibG9ja3MvZWRpdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRGlhbG9nIGZyb20gJy4uLy4uL0RpYWxvZyc7XG5cbmNvbnN0IHsgbGFuZyB9ID0gd2luZG93O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWxldGVCbG9jayhwb3NpdGlvbnMsICRibG9jaykge1xuXHREaWFsb2coJyNkaWFsb2ctY29uZmlybScsIHtcblx0XHRhdXRvT3BlbjogdHJ1ZSxcblx0XHRidXR0b25zOiB7XG5cdFx0XHRbbGFuZy5yZW1vdmVdOiBmdW5jdGlvbiBkZWxldGVCdG4oKSB7XG5cdFx0XHRcdCQodGhpcykuZGlhbG9nKCdjbG9zZScpO1xuXG5cdFx0XHRcdHBvc2l0aW9ucy5yZW1vdmVCbG9jaygkYmxvY2spO1xuXHRcdFx0fSxcblxuXHRcdFx0W2xhbmcuY2FuY2VsXTogZnVuY3Rpb24gY2FuY2VsQnRuKCkge1xuXHRcdFx0XHQkKHRoaXMpLmRpYWxvZygnY2xvc2UnKTtcblx0XHRcdH0sXG5cdFx0fSxcblx0fSk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDbGFzc1BpY2tlcihcblx0JGRpYWxvZ0VkaXQsXG5cdHsgaW5pdENvZGVNaXJyb3IsIGluc2VydFRleHQgfSxcbikge1xuXHRsZXQgY207XG5cdCRkaWFsb2dFZGl0LmRpYWxvZyh7XG5cdFx0b3BlbjogKCkgPT4ge1xuXHRcdFx0Y20gPSBpbml0Q29kZU1pcnJvcignI2NsYXNzX2VkaXRvcicsIHtcblx0XHRcdFx0dGhlbWU6ICdkZWZhdWx0Jyxcblx0XHRcdFx0bGluZVdyYXBwaW5nOiB0cnVlLFxuXHRcdFx0XHRpbmRlbnRXaXRoVGFiczogZmFsc2UsXG5cdFx0XHRcdGxpbmVOdW1iZXJzOiBmYWxzZSxcblx0XHRcdFx0YWxsb3dGdWxsU2NyZWVuOiBmYWxzZSxcblx0XHRcdFx0YWN0aW9uQnRuc1NlbGVjdG9yOiAnLnNtLWNsYXNzLWVkaXRvci1idXR0b24nLFxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRjbG9zZTogKCkgPT4ge1xuXHRcdFx0JGRpYWxvZ0VkaXQub2ZmKCdjbGljaycsICcuY2xhc3MtY2F0Jyk7XG5cdFx0XHQkZGlhbG9nRWRpdC5vZmYoJ2NsaWNrJywgJy50cmFuc2Zvcm0nKTtcblx0XHR9LFxuXHR9KTtcblxuXHQkZGlhbG9nRWRpdFxuXHRcdC5vbignY2xpY2snLCAnLmNsYXNzLWNhdCcsIGZ1bmN0aW9uIGNhdGVnb3J5KGUpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0Y29uc3QgaWQgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcblx0XHRcdGNvbnN0ICRzY3JvbGxlciA9ICQoJyNjbGFzc2VzLXNjcm9sbGVyJyk7XG5cdFx0XHQkc2Nyb2xsZXIuc3RvcCgpLmFuaW1hdGUoXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzY3JvbGxUb3A6ICRzY3JvbGxlci5zY3JvbGxUb3AoKSArICQoaWQpLnBvc2l0aW9uKCkudG9wLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHQxMDAwLFxuXHRcdFx0KTtcblx0XHR9KVxuXHRcdC5vbignY2xpY2snLCAnLnRyYW5zZm9ybScsIGZ1bmN0aW9uIGluc2VydENsYXNzKGUpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGluc2VydFRleHQoY20sICQodGhpcykudGV4dCgpKTtcblx0XHR9KTtcbn1cbiIsImltcG9ydCAnanF1ZXJ5LXVpL3VpL3dpZGdldHMvdGFicyc7XG5pbXBvcnQgJ2pxdWVyeS11aS90aGVtZXMvYmFzZS9jb3JlLmNzcyc7XG5pbXBvcnQgJ2pxdWVyeS11aS90aGVtZXMvYmFzZS90aGVtZS5jc3MnO1xuaW1wb3J0ICdqcXVlcnktdWkvdGhlbWVzL2Jhc2UvdGFicy5jc3MnO1xuXG5pbXBvcnQgRGlhbG9nIGZyb20gJy4uLy4uL0RpYWxvZyc7XG5pbXBvcnQgQ2xhc3NQaWNrZXIgZnJvbSAnLi9DbGFzc1BpY2tlcic7XG5pbXBvcnQgeyBnZXRQT0pPIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMnO1xuaW1wb3J0IEJsb2NrUmVuZGVyZXIgZnJvbSAnLi4vLi4vQmxvY2tSZW5kZXJlcic7XG5cbmltcG9ydCAnLi9zdHlsZS5zY3NzJztcblxuY29uc3QgeyBhY3Rpb25zLCBjb25maWcsIGxhbmcgfSA9IHdpbmRvdztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRWRpdEJsb2NrKCRibG9jaywgY29kZW1pcnJvcikge1xuXHRsZXQgJGRpYWxvZ0VkaXQ7XG5cdGxldCAkZG9jdW1lbnQ7XG5cdGNvbnN0IGJsb2NrRGF0YSA9IHtcblx0XHRibG9jazoge30sXG5cdH07XG5cblx0ZnVuY3Rpb24gZ2V0Rm9ybURhdGEoKSB7XG5cdFx0cmV0dXJuIGdldFBPSk8oJGRpYWxvZ0VkaXQuZmluZCgnI2VkaXRfZm9ybScpLnNlcmlhbGl6ZUFycmF5KCkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcHJldmlld0Jsb2NrKCkge1xuXHRcdGNvbnN0IGZvcm1EYXRhID0gZ2V0Rm9ybURhdGEoKTtcblxuXHRcdGNvbnN0IGRhdGEgPSB7XG5cdFx0XHQuLi5ibG9ja0RhdGEsXG5cdFx0XHRibG9jazoge1xuXHRcdFx0XHQuLi5ibG9ja0RhdGEuYmxvY2ssXG5cdFx0XHRcdC4uLmZvcm1EYXRhLFxuXHRcdFx0fSxcblx0XHR9O1xuXG5cdFx0QmxvY2tSZW5kZXJlci5yZW5kZXIoJGJsb2NrLCBkYXRhKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVuZG9QcmV2aWV3QmxvY2soKSB7XG5cdFx0QmxvY2tSZW5kZXJlci5yZW5kZXIoJGJsb2NrLCBibG9ja0RhdGEpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2F2ZUZvcm0oKSB7XG5cdFx0Y29uc3QgdXBkYXRlU2ltaWxhciA9ICRkaWFsb2dFZGl0XG5cdFx0XHQuZGlhbG9nKCd3aWRnZXQnKVxuXHRcdFx0LmZpbmQoJyN1cGRhdGUtc2ltaWxhcjpjaGVja2VkJykubGVuZ3RoO1xuXHRcdGNvbnN0IGRhdGEgPSB7XG5cdFx0XHQuLi5nZXRGb3JtRGF0YSgpLFxuXHRcdFx0cm91dGU6IGNvbmZpZy5yb3V0ZSxcblx0XHRcdHNpbWlsYXI6IHVwZGF0ZVNpbWlsYXIsXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEV2ZW50IHRvIGFsbG93IG90aGVyIGV4dGVuc2lvbnMgdG8gbW9kaWZ5IGJsb2NrIGRhdGEgYmVmb3JlIGl0IGlzIHNhdmVkXG5cdFx0ICpcblx0XHQgKiBAZXZlbnQgYmxpdHplX3NpdGVtYWtlcl9zYXZlX2Jsb2NrX2JlZm9yZVxuXHRcdCAqIEB0eXBlIHtvYmplY3R9XG5cdFx0ICogQHByb3BlcnR5IHtvYmplY3R9IGRhdGEgQmxvY2sgZGF0YSB0byBiZSBzYXZlZCB0byBkYlxuXHRcdCAqIEBzaW5jZSAzLjEuMlxuXHRcdCAqL1xuXHRcdCRkb2N1bWVudC50cmlnZ2VyKHsgdHlwZTogJ2JsaXR6ZV9zaXRlbWFrZXJfc2F2ZV9ibG9ja19iZWZvcmUnLCBkYXRhIH0pO1xuXG5cdFx0JC5wb3N0KGFjdGlvbnMuc2F2ZV9ibG9jaywgZGF0YSkuZG9uZSgocmVzcCkgPT4ge1xuXHRcdFx0aWYgKHJlc3AubGlzdCkge1xuXHRcdFx0XHQkZGlhbG9nRWRpdC5kaWFsb2coJ2Nsb3NlJyk7XG5cdFx0XHRcdCQuZWFjaChyZXNwLmxpc3QsIChpLCBibG9jaykgPT5cblx0XHRcdFx0XHRCbG9ja1JlbmRlcmVyLnJlbmRlcigkKGAjYmxvY2stJHtibG9jay5pZH1gKSwgeyBibG9jayB9KSxcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEVkaXRGb3JtKGlkKSB7XG5cdFx0JC5nZXRKU09OKGFjdGlvbnMuZWRpdF9ibG9jaywgeyBpZCB9KS5kb25lKChyb3cpID0+IHtcblx0XHRcdGJsb2NrRGF0YS5ibG9jayA9IHJvdztcblx0XHRcdGlmIChyb3cuZm9ybSkge1xuXHRcdFx0XHRjb25zdCB0aXRsZSA9IHJvdy50aXRsZS5yZXBsYWNlKC8oPChbXj5dKyk+KS9naSwgJycpO1xuXG5cdFx0XHRcdCRkaWFsb2dFZGl0LmRpYWxvZyhcblx0XHRcdFx0XHQnb3B0aW9uJyxcblx0XHRcdFx0XHQndGl0bGUnLFxuXHRcdFx0XHRcdGAke2xhbmcuZWRpdH0gLSAke3RpdGxlfWAsXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0JGRpYWxvZ0VkaXQuaHRtbChyb3cuZm9ybSk7XG5cdFx0XHRcdCRkaWFsb2dFZGl0LmZpbmQoJyNibG9jay1zZXR0aW5ncycpLnRhYnMoKTtcblx0XHRcdFx0JGRpYWxvZ0VkaXRcblx0XHRcdFx0XHQuZmluZCgnLnNtLXRvZ2dsZXInKVxuXHRcdFx0XHRcdC5jbGljaygoZSkgPT4ge1xuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ3RhcmdldCcpO1xuXHRcdFx0XHRcdFx0JCh0YXJnZXQpLnNsaWRlVG9nZ2xlKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuZWFjaChmdW5jdGlvbiBpdGVyYXRvcigpIHtcblx0XHRcdFx0XHRcdCQoJCh0aGlzKS5kYXRhKCd0YXJnZXQnKSkuaGlkZSgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHQkZGlhbG9nRWRpdFxuXHRcdFx0XHRcdC5maW5kKCdzZWxlY3RbZGF0YS10b2dnbGFibGUtc2V0dGluZ3NdJylcblx0XHRcdFx0XHQuZWFjaChmdW5jdGlvbiBpdGVyYXRvcigpIHtcblx0XHRcdFx0XHRcdGNvbnN0ICR0aGlzID0gJCh0aGlzKTtcblxuXHRcdFx0XHRcdFx0JHRoaXMuY2hhbmdlKCgpID0+XG5cdFx0XHRcdFx0XHRcdHdpbmRvdy5waHBiYi50b2dnbGVTZWxlY3RTZXR0aW5ncygkdGhpcyksXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0d2luZG93LnBocGJiLnRvZ2dsZVNlbGVjdFNldHRpbmdzKCR0aGlzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0JGRpYWxvZ0VkaXQuZGlhbG9nKCdvcGVuJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVDb250ZXh0dWFsU2VsZWN0KCkge1xuXHRcdCRkaWFsb2dFZGl0XG5cdFx0XHQuZmluZCgnc2VsZWN0W2RhdGEtdG9nZ2xhYmxlLXNldHRpbmdzXScpXG5cdFx0XHQuZWFjaChmdW5jdGlvbiBpdGVyYXRvcigpIHtcblx0XHRcdFx0Y29uc3QgJGVsID0gJCh0aGlzKTtcblxuXHRcdFx0XHQkZWwuY2hhbmdlKCgpID0+IHdpbmRvdy5waHBiYi50b2dnbGVTZWxlY3RTZXR0aW5ncygkZWwpKTtcblx0XHRcdFx0d2luZG93LnBocGJiLnRvZ2dsZVNlbGVjdFNldHRpbmdzKCRlbCk7XG5cdFx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZEJvdHRvbVBhbmUoKSB7XG5cdFx0JCh0aGlzKS5kaWFsb2coJ3dpZGdldCcpLmZpbmQoJy51aS1kaWFsb2ctYnV0dG9ucGFuZScpLnByZXBlbmQoXG5cdFx0XHRgPGxhYmVsIGNsYXNzPVwic20tcmVzZXQgZGlhbG9nLWNoZWNrLWJ1dHRvblwiPlxuXHRcdFx0XHRcdDxpbnB1dCBpZD1cInVwZGF0ZS1zaW1pbGFyXCIgdHlwZT1cImNoZWNrYm94XCIgLz4gJHtsYW5nLnVwZGF0ZVNpbWlsYXJ9XG5cdFx0XHRcdDwvbGFiZWw+YCxcblx0XHQpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RWRpdERpYWxvZygpIHtcblx0XHRyZXR1cm4gbmV3IERpYWxvZygnI2RpYWxvZy1lZGl0Jywge1xuXHRcdFx0Y3JlYXRlOiBhZGRCb3R0b21QYW5lLFxuXHRcdFx0YmVmb3JlQ2xvc2U6ICgpID0+IHVuZG9QcmV2aWV3QmxvY2soKSxcblx0XHRcdGJ1dHRvbnM6IHtcblx0XHRcdFx0W2xhbmcuZWRpdF06IGZ1bmN0aW9uIGVkaXRCdG4oKSB7XG5cdFx0XHRcdFx0c2F2ZUZvcm0oKTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHRbbGFuZy5jYW5jZWxdOiBmdW5jdGlvbiBjYW5jZWxCdG4oKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5kaWFsb2coJ2Nsb3NlJyk7XG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdH0pO1xuXHR9XG5cblx0JGRvY3VtZW50ID0gJChkb2N1bWVudCk7XG5cdCRkaWFsb2dFZGl0ID0gZ2V0RWRpdERpYWxvZygpO1xuXG5cdCRkaWFsb2dFZGl0Lm9uKCdkaWFsb2dvcGVuJywgZnVuY3Rpb24gaXNGZWVkQmxvY2soKSB7XG5cdFx0aWYgKCQodGhpcykuZmluZCgnLnNtLW11bHRpLWlucHV0LXVpJykubGVuZ3RoKSB7XG5cdFx0XHRpbXBvcnQoXG5cdFx0XHRcdC8qIHdlYnBhY2tDaHVua05hbWU6IFwiYmxvY2tzL211bHRpSW5wdXQvaW5wdXRcIiAqLyAnLi4vLi4vTXVsdGlJbnB1dFVJJ1xuXHRcdFx0KS50aGVuKCgpID0+ICQoJy5zbS1tdWx0aS1pbnB1dC11aScpLm11bHRpSW5wdXRVSSgpKTtcblx0XHR9XG5cblx0XHRpZiAoJCh0aGlzKS5maW5kKCcjc20tZmVlZC10ZW1wbGF0ZScpLmxlbmd0aCkge1xuXHRcdFx0UHJvbWlzZS5hbGwoW1xuXHRcdFx0XHRpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJ0d2lnL3R3aWdcIiAqLyAndHdpZycpLFxuXHRcdFx0XHRpbXBvcnQoXG5cdFx0XHRcdFx0Lyogd2VicGFja0NodW5rTmFtZTogXCJibG9ja3MvZmVlZHMvZmVlZHNcIiAqLyAnLi4vLi4vRmVlZHMnXG5cdFx0XHRcdCksXG5cdFx0XHRdKS50aGVuKChbeyBkZWZhdWx0OiBUd2lnIH0sIHsgZGVmYXVsdDogRmVlZHMgfV0pID0+XG5cdFx0XHRcdEZlZWRzKCQodGhpcyksIFR3aWcsIGNvZGVtaXJyb3IpLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQkKHRoaXMpXG5cdFx0XHQuZmluZCgnLmNvZGUtZWRpdG9yJylcblx0XHRcdC5lYWNoKChpLCBlbGVtZW50KSA9PiB7XG5cdFx0XHRcdGNvbnN0ICR0ZXh0YXJlYSA9ICQoZWxlbWVudCk7XG5cdFx0XHRcdGNvbnN0IGlkID0gJHRleHRhcmVhLmF0dHIoJ2lkJyk7XG5cdFx0XHRcdGlmICghJHRleHRhcmVhLm5leHQoKS5oYXNDbGFzcygnQ29kZU1pcnJvcicpKSB7XG5cdFx0XHRcdFx0Y29uc3Qge1xuXHRcdFx0XHRcdFx0d2lkdGgsXG5cdFx0XHRcdFx0XHRoZWlnaHQgPSAxMDAsXG5cdFx0XHRcdFx0XHQuLi5vcHRpb25zXG5cdFx0XHRcdFx0fSA9ICR0ZXh0YXJlYS5kYXRhKCk7XG5cdFx0XHRcdFx0Y29uc3QgY20gPSBjb2RlbWlycm9yLmluaXRDb2RlTWlycm9yKGAjJHtpZH1gLCB7XG5cdFx0XHRcdFx0XHRhY3Rpb25CdG5zU2VsZWN0b3I6IGAuJHtpZH0tYnV0dG9uYCxcblx0XHRcdFx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y20uc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHQkZGlhbG9nRWRpdFxuXHRcdFx0LmZpbmQoJy5zb3J0YWJsZScpXG5cdFx0XHQuc29ydGFibGUoe1xuXHRcdFx0XHRheGlzOiAneScsXG5cdFx0XHRcdGNvbnRhaW5tZW50OiAncGFyZW50Jyxcblx0XHRcdFx0Y2xhc3Nlczoge1xuXHRcdFx0XHRcdCd1aS1zb3J0YWJsZS1oYW5kbGUnOiAncGFuZWwnLFxuXHRcdFx0XHR9LFxuXHRcdFx0fSlcblx0XHRcdC5kaXNhYmxlU2VsZWN0aW9uKCk7XG5cblx0XHQkZGlhbG9nRWRpdFxuXHRcdFx0LmZpbmQoJy5ibG9jay1wcmV2aWV3Jylcblx0XHRcdC5vZmYoKVxuXHRcdFx0LmNoYW5nZSgoKSA9PiBwcmV2aWV3QmxvY2soKSk7XG5cdH0pO1xuXG5cdGNvbnN0IGlkID0gJGJsb2NrLmF0dHIoJ2lkJykuc3Vic3RyaW5nKDYpO1xuXG5cdGdldEVkaXRGb3JtKGlkKTtcblx0Y3JlYXRlQ29udGV4dHVhbFNlbGVjdCgpO1xuXHRDbGFzc1BpY2tlcigkZGlhbG9nRWRpdCwgY29kZW1pcnJvcik7XG59XG4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iLCIvKiFcbiAqIGpRdWVyeSBVSSBUYWJzIDEuMTIuMVxuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKi9cblxuLy8+PmxhYmVsOiBUYWJzXG4vLz4+Z3JvdXA6IFdpZGdldHNcbi8vPj5kZXNjcmlwdGlvbjogVHJhbnNmb3JtcyBhIHNldCBvZiBjb250YWluZXIgZWxlbWVudHMgaW50byBhIHRhYiBzdHJ1Y3R1cmUuXG4vLz4+ZG9jczogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vdGFicy9cbi8vPj5kZW1vczogaHR0cDovL2pxdWVyeXVpLmNvbS90YWJzL1xuLy8+PmNzcy5zdHJ1Y3R1cmU6IC4uLy4uL3RoZW1lcy9iYXNlL2NvcmUuY3NzXG4vLz4+Y3NzLnN0cnVjdHVyZTogLi4vLi4vdGhlbWVzL2Jhc2UvdGFicy5jc3Ncbi8vPj5jc3MudGhlbWU6IC4uLy4uL3RoZW1lcy9iYXNlL3RoZW1lLmNzc1xuXG4oIGZ1bmN0aW9uKCBmYWN0b3J5ICkge1xuXHRpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuXG5cdFx0Ly8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuXHRcdGRlZmluZSggW1xuXHRcdFx0XCJqcXVlcnlcIixcblx0XHRcdFwiLi4vZXNjYXBlLXNlbGVjdG9yXCIsXG5cdFx0XHRcIi4uL2tleWNvZGVcIixcblx0XHRcdFwiLi4vc2FmZS1hY3RpdmUtZWxlbWVudFwiLFxuXHRcdFx0XCIuLi91bmlxdWUtaWRcIixcblx0XHRcdFwiLi4vdmVyc2lvblwiLFxuXHRcdFx0XCIuLi93aWRnZXRcIlxuXHRcdF0sIGZhY3RvcnkgKTtcblx0fSBlbHNlIHtcblxuXHRcdC8vIEJyb3dzZXIgZ2xvYmFsc1xuXHRcdGZhY3RvcnkoIGpRdWVyeSApO1xuXHR9XG59KCBmdW5jdGlvbiggJCApIHtcblxuJC53aWRnZXQoIFwidWkudGFic1wiLCB7XG5cdHZlcnNpb246IFwiMS4xMi4xXCIsXG5cdGRlbGF5OiAzMDAsXG5cdG9wdGlvbnM6IHtcblx0XHRhY3RpdmU6IG51bGwsXG5cdFx0Y2xhc3Nlczoge1xuXHRcdFx0XCJ1aS10YWJzXCI6IFwidWktY29ybmVyLWFsbFwiLFxuXHRcdFx0XCJ1aS10YWJzLW5hdlwiOiBcInVpLWNvcm5lci1hbGxcIixcblx0XHRcdFwidWktdGFicy1wYW5lbFwiOiBcInVpLWNvcm5lci1ib3R0b21cIixcblx0XHRcdFwidWktdGFicy10YWJcIjogXCJ1aS1jb3JuZXItdG9wXCJcblx0XHR9LFxuXHRcdGNvbGxhcHNpYmxlOiBmYWxzZSxcblx0XHRldmVudDogXCJjbGlja1wiLFxuXHRcdGhlaWdodFN0eWxlOiBcImNvbnRlbnRcIixcblx0XHRoaWRlOiBudWxsLFxuXHRcdHNob3c6IG51bGwsXG5cblx0XHQvLyBDYWxsYmFja3Ncblx0XHRhY3RpdmF0ZTogbnVsbCxcblx0XHRiZWZvcmVBY3RpdmF0ZTogbnVsbCxcblx0XHRiZWZvcmVMb2FkOiBudWxsLFxuXHRcdGxvYWQ6IG51bGxcblx0fSxcblxuXHRfaXNMb2NhbDogKCBmdW5jdGlvbigpIHtcblx0XHR2YXIgcmhhc2ggPSAvIy4qJC87XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24oIGFuY2hvciApIHtcblx0XHRcdHZhciBhbmNob3JVcmwsIGxvY2F0aW9uVXJsO1xuXG5cdFx0XHRhbmNob3JVcmwgPSBhbmNob3IuaHJlZi5yZXBsYWNlKCByaGFzaCwgXCJcIiApO1xuXHRcdFx0bG9jYXRpb25VcmwgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoIHJoYXNoLCBcIlwiICk7XG5cblx0XHRcdC8vIERlY29kaW5nIG1heSB0aHJvdyBhbiBlcnJvciBpZiB0aGUgVVJMIGlzbid0IFVURi04ICgjOTUxOClcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGFuY2hvclVybCA9IGRlY29kZVVSSUNvbXBvbmVudCggYW5jaG9yVXJsICk7XG5cdFx0XHR9IGNhdGNoICggZXJyb3IgKSB7fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bG9jYXRpb25VcmwgPSBkZWNvZGVVUklDb21wb25lbnQoIGxvY2F0aW9uVXJsICk7XG5cdFx0XHR9IGNhdGNoICggZXJyb3IgKSB7fVxuXG5cdFx0XHRyZXR1cm4gYW5jaG9yLmhhc2gubGVuZ3RoID4gMSAmJiBhbmNob3JVcmwgPT09IGxvY2F0aW9uVXJsO1xuXHRcdH07XG5cdH0gKSgpLFxuXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHR0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcblxuXHRcdHRoaXMuX2FkZENsYXNzKCBcInVpLXRhYnNcIiwgXCJ1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnRcIiApO1xuXHRcdHRoaXMuX3RvZ2dsZUNsYXNzKCBcInVpLXRhYnMtY29sbGFwc2libGVcIiwgbnVsbCwgb3B0aW9ucy5jb2xsYXBzaWJsZSApO1xuXG5cdFx0dGhpcy5fcHJvY2Vzc1RhYnMoKTtcblx0XHRvcHRpb25zLmFjdGl2ZSA9IHRoaXMuX2luaXRpYWxBY3RpdmUoKTtcblxuXHRcdC8vIFRha2UgZGlzYWJsaW5nIHRhYnMgdmlhIGNsYXNzIGF0dHJpYnV0ZSBmcm9tIEhUTUxcblx0XHQvLyBpbnRvIGFjY291bnQgYW5kIHVwZGF0ZSBvcHRpb24gcHJvcGVybHkuXG5cdFx0aWYgKCAkLmlzQXJyYXkoIG9wdGlvbnMuZGlzYWJsZWQgKSApIHtcblx0XHRcdG9wdGlvbnMuZGlzYWJsZWQgPSAkLnVuaXF1ZSggb3B0aW9ucy5kaXNhYmxlZC5jb25jYXQoXG5cdFx0XHRcdCQubWFwKCB0aGlzLnRhYnMuZmlsdGVyKCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICksIGZ1bmN0aW9uKCBsaSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhhdC50YWJzLmluZGV4KCBsaSApO1xuXHRcdFx0XHR9IClcblx0XHRcdCkgKS5zb3J0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIGxlbmd0aCBhdm9pZHMgZXJyb3Igd2hlbiBpbml0aWFsaXppbmcgZW1wdHkgbGlzdFxuXHRcdGlmICggdGhpcy5vcHRpb25zLmFjdGl2ZSAhPT0gZmFsc2UgJiYgdGhpcy5hbmNob3JzLmxlbmd0aCApIHtcblx0XHRcdHRoaXMuYWN0aXZlID0gdGhpcy5fZmluZEFjdGl2ZSggb3B0aW9ucy5hY3RpdmUgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5hY3RpdmUgPSAkKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xuXG5cdFx0aWYgKCB0aGlzLmFjdGl2ZS5sZW5ndGggKSB7XG5cdFx0XHR0aGlzLmxvYWQoIG9wdGlvbnMuYWN0aXZlICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9pbml0aWFsQWN0aXZlOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgYWN0aXZlID0gdGhpcy5vcHRpb25zLmFjdGl2ZSxcblx0XHRcdGNvbGxhcHNpYmxlID0gdGhpcy5vcHRpb25zLmNvbGxhcHNpYmxlLFxuXHRcdFx0bG9jYXRpb25IYXNoID0gbG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoIDEgKTtcblxuXHRcdGlmICggYWN0aXZlID09PSBudWxsICkge1xuXG5cdFx0XHQvLyBjaGVjayB0aGUgZnJhZ21lbnQgaWRlbnRpZmllciBpbiB0aGUgVVJMXG5cdFx0XHRpZiAoIGxvY2F0aW9uSGFzaCApIHtcblx0XHRcdFx0dGhpcy50YWJzLmVhY2goIGZ1bmN0aW9uKCBpLCB0YWIgKSB7XG5cdFx0XHRcdFx0aWYgKCAkKCB0YWIgKS5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApID09PSBsb2NhdGlvbkhhc2ggKSB7XG5cdFx0XHRcdFx0XHRhY3RpdmUgPSBpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBmb3IgYSB0YWIgbWFya2VkIGFjdGl2ZSB2aWEgYSBjbGFzc1xuXHRcdFx0aWYgKCBhY3RpdmUgPT09IG51bGwgKSB7XG5cdFx0XHRcdGFjdGl2ZSA9IHRoaXMudGFicy5pbmRleCggdGhpcy50YWJzLmZpbHRlciggXCIudWktdGFicy1hY3RpdmVcIiApICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE5vIGFjdGl2ZSB0YWIsIHNldCB0byBmYWxzZVxuXHRcdFx0aWYgKCBhY3RpdmUgPT09IG51bGwgfHwgYWN0aXZlID09PSAtMSApIHtcblx0XHRcdFx0YWN0aXZlID0gdGhpcy50YWJzLmxlbmd0aCA/IDAgOiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBIYW5kbGUgbnVtYmVyczogbmVnYXRpdmUsIG91dCBvZiByYW5nZVxuXHRcdGlmICggYWN0aXZlICE9PSBmYWxzZSApIHtcblx0XHRcdGFjdGl2ZSA9IHRoaXMudGFicy5pbmRleCggdGhpcy50YWJzLmVxKCBhY3RpdmUgKSApO1xuXHRcdFx0aWYgKCBhY3RpdmUgPT09IC0xICkge1xuXHRcdFx0XHRhY3RpdmUgPSBjb2xsYXBzaWJsZSA/IGZhbHNlIDogMDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBEb24ndCBhbGxvdyBjb2xsYXBzaWJsZTogZmFsc2UgYW5kIGFjdGl2ZTogZmFsc2Vcblx0XHRpZiAoICFjb2xsYXBzaWJsZSAmJiBhY3RpdmUgPT09IGZhbHNlICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XG5cdFx0XHRhY3RpdmUgPSAwO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY3RpdmU7XG5cdH0sXG5cblx0X2dldENyZWF0ZUV2ZW50RGF0YTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHRhYjogdGhpcy5hY3RpdmUsXG5cdFx0XHRwYW5lbDogIXRoaXMuYWN0aXZlLmxlbmd0aCA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApXG5cdFx0fTtcblx0fSxcblxuXHRfdGFiS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBmb2N1c2VkVGFiID0gJCggJC51aS5zYWZlQWN0aXZlRWxlbWVudCggdGhpcy5kb2N1bWVudFsgMCBdICkgKS5jbG9zZXN0KCBcImxpXCIgKSxcblx0XHRcdHNlbGVjdGVkSW5kZXggPSB0aGlzLnRhYnMuaW5kZXgoIGZvY3VzZWRUYWIgKSxcblx0XHRcdGdvaW5nRm9yd2FyZCA9IHRydWU7XG5cblx0XHRpZiAoIHRoaXMuX2hhbmRsZVBhZ2VOYXYoIGV2ZW50ICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcblx0XHRjYXNlICQudWkua2V5Q29kZS5SSUdIVDpcblx0XHRjYXNlICQudWkua2V5Q29kZS5ET1dOOlxuXHRcdFx0c2VsZWN0ZWRJbmRleCsrO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAkLnVpLmtleUNvZGUuVVA6XG5cdFx0Y2FzZSAkLnVpLmtleUNvZGUuTEVGVDpcblx0XHRcdGdvaW5nRm9yd2FyZCA9IGZhbHNlO1xuXHRcdFx0c2VsZWN0ZWRJbmRleC0tO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAkLnVpLmtleUNvZGUuRU5EOlxuXHRcdFx0c2VsZWN0ZWRJbmRleCA9IHRoaXMuYW5jaG9ycy5sZW5ndGggLSAxO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAkLnVpLmtleUNvZGUuSE9NRTpcblx0XHRcdHNlbGVjdGVkSW5kZXggPSAwO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAkLnVpLmtleUNvZGUuU1BBQ0U6XG5cblx0XHRcdC8vIEFjdGl2YXRlIG9ubHksIG5vIGNvbGxhcHNpbmdcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApO1xuXHRcdFx0dGhpcy5fYWN0aXZhdGUoIHNlbGVjdGVkSW5kZXggKTtcblx0XHRcdHJldHVybjtcblx0XHRjYXNlICQudWkua2V5Q29kZS5FTlRFUjpcblxuXHRcdFx0Ly8gVG9nZ2xlIChjYW5jZWwgZGVsYXllZCBhY3RpdmF0aW9uLCBhbGxvdyBjb2xsYXBzaW5nKVxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5hY3RpdmF0aW5nICk7XG5cblx0XHRcdC8vIERldGVybWluZSBpZiB3ZSBzaG91bGQgY29sbGFwc2Ugb3IgYWN0aXZhdGVcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCBzZWxlY3RlZEluZGV4ID09PSB0aGlzLm9wdGlvbnMuYWN0aXZlID8gZmFsc2UgOiBzZWxlY3RlZEluZGV4ICk7XG5cdFx0XHRyZXR1cm47XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBGb2N1cyB0aGUgYXBwcm9wcmlhdGUgdGFiLCBiYXNlZCBvbiB3aGljaCBrZXkgd2FzIHByZXNzZWRcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGNsZWFyVGltZW91dCggdGhpcy5hY3RpdmF0aW5nICk7XG5cdFx0c2VsZWN0ZWRJbmRleCA9IHRoaXMuX2ZvY3VzTmV4dFRhYiggc2VsZWN0ZWRJbmRleCwgZ29pbmdGb3J3YXJkICk7XG5cblx0XHQvLyBOYXZpZ2F0aW5nIHdpdGggY29udHJvbC9jb21tYW5kIGtleSB3aWxsIHByZXZlbnQgYXV0b21hdGljIGFjdGl2YXRpb25cblx0XHRpZiAoICFldmVudC5jdHJsS2V5ICYmICFldmVudC5tZXRhS2V5ICkge1xuXG5cdFx0XHQvLyBVcGRhdGUgYXJpYS1zZWxlY3RlZCBpbW1lZGlhdGVseSBzbyB0aGF0IEFUIHRoaW5rIHRoZSB0YWIgaXMgYWxyZWFkeSBzZWxlY3RlZC5cblx0XHRcdC8vIE90aGVyd2lzZSBBVCBtYXkgY29uZnVzZSB0aGUgdXNlciBieSBzdGF0aW5nIHRoYXQgdGhleSBuZWVkIHRvIGFjdGl2YXRlIHRoZSB0YWIsXG5cdFx0XHQvLyBidXQgdGhlIHRhYiB3aWxsIGFscmVhZHkgYmUgYWN0aXZhdGVkIGJ5IHRoZSB0aW1lIHRoZSBhbm5vdW5jZW1lbnQgZmluaXNoZXMuXG5cdFx0XHRmb2N1c2VkVGFiLmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCBcImZhbHNlXCIgKTtcblx0XHRcdHRoaXMudGFicy5lcSggc2VsZWN0ZWRJbmRleCApLmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCBcInRydWVcIiApO1xuXG5cdFx0XHR0aGlzLmFjdGl2YXRpbmcgPSB0aGlzLl9kZWxheSggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMub3B0aW9uKCBcImFjdGl2ZVwiLCBzZWxlY3RlZEluZGV4ICk7XG5cdFx0XHR9LCB0aGlzLmRlbGF5ICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9wYW5lbEtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRpZiAoIHRoaXMuX2hhbmRsZVBhZ2VOYXYoIGV2ZW50ICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQ3RybCt1cCBtb3ZlcyBmb2N1cyB0byB0aGUgY3VycmVudCB0YWJcblx0XHRpZiAoIGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlVQICkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMuYWN0aXZlLnRyaWdnZXIoIFwiZm9jdXNcIiApO1xuXHRcdH1cblx0fSxcblxuXHQvLyBBbHQrcGFnZSB1cC9kb3duIG1vdmVzIGZvY3VzIHRvIHRoZSBwcmV2aW91cy9uZXh0IHRhYiAoYW5kIGFjdGl2YXRlcylcblx0X2hhbmRsZVBhZ2VOYXY6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRpZiAoIGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuUEFHRV9VUCApIHtcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCB0aGlzLl9mb2N1c05leHRUYWIoIHRoaXMub3B0aW9ucy5hY3RpdmUgLSAxLCBmYWxzZSApICk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0aWYgKCBldmVudC5hbHRLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlBBR0VfRE9XTiApIHtcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCB0aGlzLl9mb2N1c05leHRUYWIoIHRoaXMub3B0aW9ucy5hY3RpdmUgKyAxLCB0cnVlICkgKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fSxcblxuXHRfZmluZE5leHRUYWI6IGZ1bmN0aW9uKCBpbmRleCwgZ29pbmdGb3J3YXJkICkge1xuXHRcdHZhciBsYXN0VGFiSW5kZXggPSB0aGlzLnRhYnMubGVuZ3RoIC0gMTtcblxuXHRcdGZ1bmN0aW9uIGNvbnN0cmFpbigpIHtcblx0XHRcdGlmICggaW5kZXggPiBsYXN0VGFiSW5kZXggKSB7XG5cdFx0XHRcdGluZGV4ID0gMDtcblx0XHRcdH1cblx0XHRcdGlmICggaW5kZXggPCAwICkge1xuXHRcdFx0XHRpbmRleCA9IGxhc3RUYWJJbmRleDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBpbmRleDtcblx0XHR9XG5cblx0XHR3aGlsZSAoICQuaW5BcnJheSggY29uc3RyYWluKCksIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApICE9PSAtMSApIHtcblx0XHRcdGluZGV4ID0gZ29pbmdGb3J3YXJkID8gaW5kZXggKyAxIDogaW5kZXggLSAxO1xuXHRcdH1cblxuXHRcdHJldHVybiBpbmRleDtcblx0fSxcblxuXHRfZm9jdXNOZXh0VGFiOiBmdW5jdGlvbiggaW5kZXgsIGdvaW5nRm9yd2FyZCApIHtcblx0XHRpbmRleCA9IHRoaXMuX2ZpbmROZXh0VGFiKCBpbmRleCwgZ29pbmdGb3J3YXJkICk7XG5cdFx0dGhpcy50YWJzLmVxKCBpbmRleCApLnRyaWdnZXIoIFwiZm9jdXNcIiApO1xuXHRcdHJldHVybiBpbmRleDtcblx0fSxcblxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblx0XHRpZiAoIGtleSA9PT0gXCJhY3RpdmVcIiApIHtcblxuXHRcdFx0Ly8gX2FjdGl2YXRlKCkgd2lsbCBoYW5kbGUgaW52YWxpZCB2YWx1ZXMgYW5kIHVwZGF0ZSB0aGlzLm9wdGlvbnNcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCB2YWx1ZSApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7XG5cblx0XHRpZiAoIGtleSA9PT0gXCJjb2xsYXBzaWJsZVwiICkge1xuXHRcdFx0dGhpcy5fdG9nZ2xlQ2xhc3MoIFwidWktdGFicy1jb2xsYXBzaWJsZVwiLCBudWxsLCB2YWx1ZSApO1xuXG5cdFx0XHQvLyBTZXR0aW5nIGNvbGxhcHNpYmxlOiBmYWxzZSB3aGlsZSBjb2xsYXBzZWQ7IG9wZW4gZmlyc3QgcGFuZWxcblx0XHRcdGlmICggIXZhbHVlICYmIHRoaXMub3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlICkge1xuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggMCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICgga2V5ID09PSBcImV2ZW50XCIgKSB7XG5cdFx0XHR0aGlzLl9zZXR1cEV2ZW50cyggdmFsdWUgKTtcblx0XHR9XG5cblx0XHRpZiAoIGtleSA9PT0gXCJoZWlnaHRTdHlsZVwiICkge1xuXHRcdFx0dGhpcy5fc2V0dXBIZWlnaHRTdHlsZSggdmFsdWUgKTtcblx0XHR9XG5cdH0sXG5cblx0X3Nhbml0aXplU2VsZWN0b3I6IGZ1bmN0aW9uKCBoYXNoICkge1xuXHRcdHJldHVybiBoYXNoID8gaGFzaC5yZXBsYWNlKCAvWyFcIiQlJicoKSorLC5cXC86Ozw9Pj9AXFxbXFxdXFxeYHt8fX5dL2csIFwiXFxcXCQmXCIgKSA6IFwiXCI7XG5cdH0sXG5cblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRsaXMgPSB0aGlzLnRhYmxpc3QuY2hpbGRyZW4oIFwiOmhhcyhhW2hyZWZdKVwiICk7XG5cblx0XHQvLyBHZXQgZGlzYWJsZWQgdGFicyBmcm9tIGNsYXNzIGF0dHJpYnV0ZSBmcm9tIEhUTUxcblx0XHQvLyB0aGlzIHdpbGwgZ2V0IGNvbnZlcnRlZCB0byBhIGJvb2xlYW4gaWYgbmVlZGVkIGluIF9yZWZyZXNoKClcblx0XHRvcHRpb25zLmRpc2FibGVkID0gJC5tYXAoIGxpcy5maWx0ZXIoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSwgZnVuY3Rpb24oIHRhYiApIHtcblx0XHRcdHJldHVybiBsaXMuaW5kZXgoIHRhYiApO1xuXHRcdH0gKTtcblxuXHRcdHRoaXMuX3Byb2Nlc3NUYWJzKCk7XG5cblx0XHQvLyBXYXMgY29sbGFwc2VkIG9yIG5vIHRhYnNcblx0XHRpZiAoIG9wdGlvbnMuYWN0aXZlID09PSBmYWxzZSB8fCAhdGhpcy5hbmNob3JzLmxlbmd0aCApIHtcblx0XHRcdG9wdGlvbnMuYWN0aXZlID0gZmFsc2U7XG5cdFx0XHR0aGlzLmFjdGl2ZSA9ICQoKTtcblxuXHRcdC8vIHdhcyBhY3RpdmUsIGJ1dCBhY3RpdmUgdGFiIGlzIGdvbmVcblx0XHR9IGVsc2UgaWYgKCB0aGlzLmFjdGl2ZS5sZW5ndGggJiYgISQuY29udGFpbnMoIHRoaXMudGFibGlzdFsgMCBdLCB0aGlzLmFjdGl2ZVsgMCBdICkgKSB7XG5cblx0XHRcdC8vIGFsbCByZW1haW5pbmcgdGFicyBhcmUgZGlzYWJsZWRcblx0XHRcdGlmICggdGhpcy50YWJzLmxlbmd0aCA9PT0gb3B0aW9ucy5kaXNhYmxlZC5sZW5ndGggKSB7XG5cdFx0XHRcdG9wdGlvbnMuYWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdHRoaXMuYWN0aXZlID0gJCgpO1xuXG5cdFx0XHQvLyBhY3RpdmF0ZSBwcmV2aW91cyB0YWJcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuX2FjdGl2YXRlKCB0aGlzLl9maW5kTmV4dFRhYiggTWF0aC5tYXgoIDAsIG9wdGlvbnMuYWN0aXZlIC0gMSApLCBmYWxzZSApICk7XG5cdFx0XHR9XG5cblx0XHQvLyB3YXMgYWN0aXZlLCBhY3RpdmUgdGFiIHN0aWxsIGV4aXN0c1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIG1ha2Ugc3VyZSBhY3RpdmUgaW5kZXggaXMgY29ycmVjdFxuXHRcdFx0b3B0aW9ucy5hY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMuYWN0aXZlICk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xuXHR9LFxuXG5cdF9yZWZyZXNoOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLl9zZXRPcHRpb25EaXNhYmxlZCggdGhpcy5vcHRpb25zLmRpc2FibGVkICk7XG5cdFx0dGhpcy5fc2V0dXBFdmVudHMoIHRoaXMub3B0aW9ucy5ldmVudCApO1xuXHRcdHRoaXMuX3NldHVwSGVpZ2h0U3R5bGUoIHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSApO1xuXG5cdFx0dGhpcy50YWJzLm5vdCggdGhpcy5hY3RpdmUgKS5hdHRyKCB7XG5cdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJmYWxzZVwiLFxuXHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwiZmFsc2VcIixcblx0XHRcdHRhYkluZGV4OiAtMVxuXHRcdH0gKTtcblx0XHR0aGlzLnBhbmVscy5ub3QoIHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApIClcblx0XHRcdC5oaWRlKClcblx0XHRcdC5hdHRyKCB7XG5cdFx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJcblx0XHRcdH0gKTtcblxuXHRcdC8vIE1ha2Ugc3VyZSBvbmUgdGFiIGlzIGluIHRoZSB0YWIgb3JkZXJcblx0XHRpZiAoICF0aGlzLmFjdGl2ZS5sZW5ndGggKSB7XG5cdFx0XHR0aGlzLnRhYnMuZXEoIDAgKS5hdHRyKCBcInRhYkluZGV4XCIsIDAgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5hY3RpdmVcblx0XHRcdFx0LmF0dHIoIHtcblx0XHRcdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJ0cnVlXCIsXG5cdFx0XHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwidHJ1ZVwiLFxuXHRcdFx0XHRcdHRhYkluZGV4OiAwXG5cdFx0XHRcdH0gKTtcblx0XHRcdHRoaXMuX2FkZENsYXNzKCB0aGlzLmFjdGl2ZSwgXCJ1aS10YWJzLWFjdGl2ZVwiLCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7XG5cdFx0XHR0aGlzLl9nZXRQYW5lbEZvclRhYiggdGhpcy5hY3RpdmUgKVxuXHRcdFx0XHQuc2hvdygpXG5cdFx0XHRcdC5hdHRyKCB7XG5cdFx0XHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcImZhbHNlXCJcblx0XHRcdFx0fSApO1xuXHRcdH1cblx0fSxcblxuXHRfcHJvY2Vzc1RhYnM6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdHByZXZUYWJzID0gdGhpcy50YWJzLFxuXHRcdFx0cHJldkFuY2hvcnMgPSB0aGlzLmFuY2hvcnMsXG5cdFx0XHRwcmV2UGFuZWxzID0gdGhpcy5wYW5lbHM7XG5cblx0XHR0aGlzLnRhYmxpc3QgPSB0aGlzLl9nZXRMaXN0KCkuYXR0ciggXCJyb2xlXCIsIFwidGFibGlzdFwiICk7XG5cdFx0dGhpcy5fYWRkQ2xhc3MoIHRoaXMudGFibGlzdCwgXCJ1aS10YWJzLW5hdlwiLFxuXHRcdFx0XCJ1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXJcIiApO1xuXG5cdFx0Ly8gUHJldmVudCB1c2VycyBmcm9tIGZvY3VzaW5nIGRpc2FibGVkIHRhYnMgdmlhIGNsaWNrXG5cdFx0dGhpcy50YWJsaXN0XG5cdFx0XHQub24oIFwibW91c2Vkb3duXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBcIj4gbGlcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRpZiAoICQoIHRoaXMgKS5pcyggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApICkge1xuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8OVxuXHRcdFx0Ly8gUHJldmVudGluZyB0aGUgZGVmYXVsdCBhY3Rpb24gaW4gbW91c2Vkb3duIGRvZXNuJ3QgcHJldmVudCBJRVxuXHRcdFx0Ly8gZnJvbSBmb2N1c2luZyB0aGUgZWxlbWVudCwgc28gaWYgdGhlIGFuY2hvciBnZXRzIGZvY3VzZWQsIGJsdXIuXG5cdFx0XHQvLyBXZSBkb24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0IGZvY3VzaW5nIHRoZSBwcmV2aW91c2x5IGZvY3VzZWRcblx0XHRcdC8vIGVsZW1lbnQgc2luY2UgY2xpY2tpbmcgb24gYSBub24tZm9jdXNhYmxlIGVsZW1lbnQgc2hvdWxkIGZvY3VzXG5cdFx0XHQvLyB0aGUgYm9keSBhbnl3YXkuXG5cdFx0XHQub24oIFwiZm9jdXNcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIFwiLnVpLXRhYnMtYW5jaG9yXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICQoIHRoaXMgKS5jbG9zZXN0KCBcImxpXCIgKS5pcyggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApICkge1xuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cblx0XHR0aGlzLnRhYnMgPSB0aGlzLnRhYmxpc3QuZmluZCggXCI+IGxpOmhhcyhhW2hyZWZdKVwiIClcblx0XHRcdC5hdHRyKCB7XG5cdFx0XHRcdHJvbGU6IFwidGFiXCIsXG5cdFx0XHRcdHRhYkluZGV4OiAtMVxuXHRcdFx0fSApO1xuXHRcdHRoaXMuX2FkZENsYXNzKCB0aGlzLnRhYnMsIFwidWktdGFicy10YWJcIiwgXCJ1aS1zdGF0ZS1kZWZhdWx0XCIgKTtcblxuXHRcdHRoaXMuYW5jaG9ycyA9IHRoaXMudGFicy5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuICQoIFwiYVwiLCB0aGlzIClbIDAgXTtcblx0XHR9IClcblx0XHRcdC5hdHRyKCB7XG5cdFx0XHRcdHJvbGU6IFwicHJlc2VudGF0aW9uXCIsXG5cdFx0XHRcdHRhYkluZGV4OiAtMVxuXHRcdFx0fSApO1xuXHRcdHRoaXMuX2FkZENsYXNzKCB0aGlzLmFuY2hvcnMsIFwidWktdGFicy1hbmNob3JcIiApO1xuXG5cdFx0dGhpcy5wYW5lbHMgPSAkKCk7XG5cblx0XHR0aGlzLmFuY2hvcnMuZWFjaCggZnVuY3Rpb24oIGksIGFuY2hvciApIHtcblx0XHRcdHZhciBzZWxlY3RvciwgcGFuZWwsIHBhbmVsSWQsXG5cdFx0XHRcdGFuY2hvcklkID0gJCggYW5jaG9yICkudW5pcXVlSWQoKS5hdHRyKCBcImlkXCIgKSxcblx0XHRcdFx0dGFiID0gJCggYW5jaG9yICkuY2xvc2VzdCggXCJsaVwiICksXG5cdFx0XHRcdG9yaWdpbmFsQXJpYUNvbnRyb2xzID0gdGFiLmF0dHIoIFwiYXJpYS1jb250cm9sc1wiICk7XG5cblx0XHRcdC8vIElubGluZSB0YWJcblx0XHRcdGlmICggdGhhdC5faXNMb2NhbCggYW5jaG9yICkgKSB7XG5cdFx0XHRcdHNlbGVjdG9yID0gYW5jaG9yLmhhc2g7XG5cdFx0XHRcdHBhbmVsSWQgPSBzZWxlY3Rvci5zdWJzdHJpbmcoIDEgKTtcblx0XHRcdFx0cGFuZWwgPSB0aGF0LmVsZW1lbnQuZmluZCggdGhhdC5fc2FuaXRpemVTZWxlY3Rvciggc2VsZWN0b3IgKSApO1xuXG5cdFx0XHQvLyByZW1vdGUgdGFiXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIElmIHRoZSB0YWIgZG9lc24ndCBhbHJlYWR5IGhhdmUgYXJpYS1jb250cm9scyxcblx0XHRcdFx0Ly8gZ2VuZXJhdGUgYW4gaWQgYnkgdXNpbmcgYSB0aHJvdy1hd2F5IGVsZW1lbnRcblx0XHRcdFx0cGFuZWxJZCA9IHRhYi5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApIHx8ICQoIHt9ICkudW5pcXVlSWQoKVsgMCBdLmlkO1xuXHRcdFx0XHRzZWxlY3RvciA9IFwiI1wiICsgcGFuZWxJZDtcblx0XHRcdFx0cGFuZWwgPSB0aGF0LmVsZW1lbnQuZmluZCggc2VsZWN0b3IgKTtcblx0XHRcdFx0aWYgKCAhcGFuZWwubGVuZ3RoICkge1xuXHRcdFx0XHRcdHBhbmVsID0gdGhhdC5fY3JlYXRlUGFuZWwoIHBhbmVsSWQgKTtcblx0XHRcdFx0XHRwYW5lbC5pbnNlcnRBZnRlciggdGhhdC5wYW5lbHNbIGkgLSAxIF0gfHwgdGhhdC50YWJsaXN0ICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cGFuZWwuYXR0ciggXCJhcmlhLWxpdmVcIiwgXCJwb2xpdGVcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHBhbmVsLmxlbmd0aCApIHtcblx0XHRcdFx0dGhhdC5wYW5lbHMgPSB0aGF0LnBhbmVscy5hZGQoIHBhbmVsICk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIG9yaWdpbmFsQXJpYUNvbnRyb2xzICkge1xuXHRcdFx0XHR0YWIuZGF0YSggXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIiwgb3JpZ2luYWxBcmlhQ29udHJvbHMgKTtcblx0XHRcdH1cblx0XHRcdHRhYi5hdHRyKCB7XG5cdFx0XHRcdFwiYXJpYS1jb250cm9sc1wiOiBwYW5lbElkLFxuXHRcdFx0XHRcImFyaWEtbGFiZWxsZWRieVwiOiBhbmNob3JJZFxuXHRcdFx0fSApO1xuXHRcdFx0cGFuZWwuYXR0ciggXCJhcmlhLWxhYmVsbGVkYnlcIiwgYW5jaG9ySWQgKTtcblx0XHR9ICk7XG5cblx0XHR0aGlzLnBhbmVscy5hdHRyKCBcInJvbGVcIiwgXCJ0YWJwYW5lbFwiICk7XG5cdFx0dGhpcy5fYWRkQ2xhc3MoIHRoaXMucGFuZWxzLCBcInVpLXRhYnMtcGFuZWxcIiwgXCJ1aS13aWRnZXQtY29udGVudFwiICk7XG5cblx0XHQvLyBBdm9pZCBtZW1vcnkgbGVha3MgKCMxMDA1Nilcblx0XHRpZiAoIHByZXZUYWJzICkge1xuXHRcdFx0dGhpcy5fb2ZmKCBwcmV2VGFicy5ub3QoIHRoaXMudGFicyApICk7XG5cdFx0XHR0aGlzLl9vZmYoIHByZXZBbmNob3JzLm5vdCggdGhpcy5hbmNob3JzICkgKTtcblx0XHRcdHRoaXMuX29mZiggcHJldlBhbmVscy5ub3QoIHRoaXMucGFuZWxzICkgKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gQWxsb3cgb3ZlcnJpZGluZyBob3cgdG8gZmluZCB0aGUgbGlzdCBmb3IgcmFyZSB1c2FnZSBzY2VuYXJpb3MgKCM3NzE1KVxuXHRfZ2V0TGlzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudGFibGlzdCB8fCB0aGlzLmVsZW1lbnQuZmluZCggXCJvbCwgdWxcIiApLmVxKCAwICk7XG5cdH0sXG5cblx0X2NyZWF0ZVBhbmVsOiBmdW5jdGlvbiggaWQgKSB7XG5cdFx0cmV0dXJuICQoIFwiPGRpdj5cIiApXG5cdFx0XHQuYXR0ciggXCJpZFwiLCBpZCApXG5cdFx0XHQuZGF0YSggXCJ1aS10YWJzLWRlc3Ryb3lcIiwgdHJ1ZSApO1xuXHR9LFxuXG5cdF9zZXRPcHRpb25EaXNhYmxlZDogZnVuY3Rpb24oIGRpc2FibGVkICkge1xuXHRcdHZhciBjdXJyZW50SXRlbSwgbGksIGk7XG5cblx0XHRpZiAoICQuaXNBcnJheSggZGlzYWJsZWQgKSApIHtcblx0XHRcdGlmICggIWRpc2FibGVkLmxlbmd0aCApIHtcblx0XHRcdFx0ZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdH0gZWxzZSBpZiAoIGRpc2FibGVkLmxlbmd0aCA9PT0gdGhpcy5hbmNob3JzLmxlbmd0aCApIHtcblx0XHRcdFx0ZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIERpc2FibGUgdGFic1xuXHRcdGZvciAoIGkgPSAwOyAoIGxpID0gdGhpcy50YWJzWyBpIF0gKTsgaSsrICkge1xuXHRcdFx0Y3VycmVudEl0ZW0gPSAkKCBsaSApO1xuXHRcdFx0aWYgKCBkaXNhYmxlZCA9PT0gdHJ1ZSB8fCAkLmluQXJyYXkoIGksIGRpc2FibGVkICkgIT09IC0xICkge1xuXHRcdFx0XHRjdXJyZW50SXRlbS5hdHRyKCBcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIgKTtcblx0XHRcdFx0dGhpcy5fYWRkQ2xhc3MoIGN1cnJlbnRJdGVtLCBudWxsLCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGN1cnJlbnRJdGVtLnJlbW92ZUF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiICk7XG5cdFx0XHRcdHRoaXMuX3JlbW92ZUNsYXNzKCBjdXJyZW50SXRlbSwgbnVsbCwgXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5vcHRpb25zLmRpc2FibGVkID0gZGlzYWJsZWQ7XG5cblx0XHR0aGlzLl90b2dnbGVDbGFzcyggdGhpcy53aWRnZXQoKSwgdGhpcy53aWRnZXRGdWxsTmFtZSArIFwiLWRpc2FibGVkXCIsIG51bGwsXG5cdFx0XHRkaXNhYmxlZCA9PT0gdHJ1ZSApO1xuXHR9LFxuXG5cdF9zZXR1cEV2ZW50czogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBldmVudHMgPSB7fTtcblx0XHRpZiAoIGV2ZW50ICkge1xuXHRcdFx0JC5lYWNoKCBldmVudC5zcGxpdCggXCIgXCIgKSwgZnVuY3Rpb24oIGluZGV4LCBldmVudE5hbWUgKSB7XG5cdFx0XHRcdGV2ZW50c1sgZXZlbnROYW1lIF0gPSBcIl9ldmVudEhhbmRsZXJcIjtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHR0aGlzLl9vZmYoIHRoaXMuYW5jaG9ycy5hZGQoIHRoaXMudGFicyApLmFkZCggdGhpcy5wYW5lbHMgKSApO1xuXG5cdFx0Ly8gQWx3YXlzIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uLCBldmVuIHdoZW4gZGlzYWJsZWRcblx0XHR0aGlzLl9vbiggdHJ1ZSwgdGhpcy5hbmNob3JzLCB7XG5cdFx0XHRjbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0XHR0aGlzLl9vbiggdGhpcy5hbmNob3JzLCBldmVudHMgKTtcblx0XHR0aGlzLl9vbiggdGhpcy50YWJzLCB7IGtleWRvd246IFwiX3RhYktleWRvd25cIiB9ICk7XG5cdFx0dGhpcy5fb24oIHRoaXMucGFuZWxzLCB7IGtleWRvd246IFwiX3BhbmVsS2V5ZG93blwiIH0gKTtcblxuXHRcdHRoaXMuX2ZvY3VzYWJsZSggdGhpcy50YWJzICk7XG5cdFx0dGhpcy5faG92ZXJhYmxlKCB0aGlzLnRhYnMgKTtcblx0fSxcblxuXHRfc2V0dXBIZWlnaHRTdHlsZTogZnVuY3Rpb24oIGhlaWdodFN0eWxlICkge1xuXHRcdHZhciBtYXhIZWlnaHQsXG5cdFx0XHRwYXJlbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50KCk7XG5cblx0XHRpZiAoIGhlaWdodFN0eWxlID09PSBcImZpbGxcIiApIHtcblx0XHRcdG1heEhlaWdodCA9IHBhcmVudC5oZWlnaHQoKTtcblx0XHRcdG1heEhlaWdodCAtPSB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSAtIHRoaXMuZWxlbWVudC5oZWlnaHQoKTtcblxuXHRcdFx0dGhpcy5lbGVtZW50LnNpYmxpbmdzKCBcIjp2aXNpYmxlXCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGVsZW0gPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0cG9zaXRpb24gPSBlbGVtLmNzcyggXCJwb3NpdGlvblwiICk7XG5cblx0XHRcdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG1heEhlaWdodCAtPSBlbGVtLm91dGVySGVpZ2h0KCB0cnVlICk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLm5vdCggdGhpcy5wYW5lbHMgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0bWF4SGVpZ2h0IC09ICQoIHRoaXMgKS5vdXRlckhlaWdodCggdHJ1ZSApO1xuXHRcdFx0fSApO1xuXG5cdFx0XHR0aGlzLnBhbmVscy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0JCggdGhpcyApLmhlaWdodCggTWF0aC5tYXgoIDAsIG1heEhlaWdodCAtXG5cdFx0XHRcdFx0JCggdGhpcyApLmlubmVySGVpZ2h0KCkgKyAkKCB0aGlzICkuaGVpZ2h0KCkgKSApO1xuXHRcdFx0fSApXG5cdFx0XHRcdC5jc3MoIFwib3ZlcmZsb3dcIiwgXCJhdXRvXCIgKTtcblx0XHR9IGVsc2UgaWYgKCBoZWlnaHRTdHlsZSA9PT0gXCJhdXRvXCIgKSB7XG5cdFx0XHRtYXhIZWlnaHQgPSAwO1xuXHRcdFx0dGhpcy5wYW5lbHMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdG1heEhlaWdodCA9IE1hdGgubWF4KCBtYXhIZWlnaHQsICQoIHRoaXMgKS5oZWlnaHQoIFwiXCIgKS5oZWlnaHQoKSApO1xuXHRcdFx0fSApLmhlaWdodCggbWF4SGVpZ2h0ICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9ldmVudEhhbmRsZXI6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcblx0XHRcdGFjdGl2ZSA9IHRoaXMuYWN0aXZlLFxuXHRcdFx0YW5jaG9yID0gJCggZXZlbnQuY3VycmVudFRhcmdldCApLFxuXHRcdFx0dGFiID0gYW5jaG9yLmNsb3Nlc3QoIFwibGlcIiApLFxuXHRcdFx0Y2xpY2tlZElzQWN0aXZlID0gdGFiWyAwIF0gPT09IGFjdGl2ZVsgMCBdLFxuXHRcdFx0Y29sbGFwc2luZyA9IGNsaWNrZWRJc0FjdGl2ZSAmJiBvcHRpb25zLmNvbGxhcHNpYmxlLFxuXHRcdFx0dG9TaG93ID0gY29sbGFwc2luZyA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0YWIgKSxcblx0XHRcdHRvSGlkZSA9ICFhY3RpdmUubGVuZ3RoID8gJCgpIDogdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIGFjdGl2ZSApLFxuXHRcdFx0ZXZlbnREYXRhID0ge1xuXHRcdFx0XHRvbGRUYWI6IGFjdGl2ZSxcblx0XHRcdFx0b2xkUGFuZWw6IHRvSGlkZSxcblx0XHRcdFx0bmV3VGFiOiBjb2xsYXBzaW5nID8gJCgpIDogdGFiLFxuXHRcdFx0XHRuZXdQYW5lbDogdG9TaG93XG5cdFx0XHR9O1xuXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGlmICggdGFiLmhhc0NsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKSB8fFxuXG5cdFx0XHRcdC8vIHRhYiBpcyBhbHJlYWR5IGxvYWRpbmdcblx0XHRcdFx0dGFiLmhhc0NsYXNzKCBcInVpLXRhYnMtbG9hZGluZ1wiICkgfHxcblxuXHRcdFx0XHQvLyBjYW4ndCBzd2l0Y2ggZHVybmluZyBhbiBhbmltYXRpb25cblx0XHRcdFx0dGhpcy5ydW5uaW5nIHx8XG5cblx0XHRcdFx0Ly8gY2xpY2sgb24gYWN0aXZlIGhlYWRlciwgYnV0IG5vdCBjb2xsYXBzaWJsZVxuXHRcdFx0XHQoIGNsaWNrZWRJc0FjdGl2ZSAmJiAhb3B0aW9ucy5jb2xsYXBzaWJsZSApIHx8XG5cblx0XHRcdFx0Ly8gYWxsb3cgY2FuY2VsaW5nIGFjdGl2YXRpb25cblx0XHRcdFx0KCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZUFjdGl2YXRlXCIsIGV2ZW50LCBldmVudERhdGEgKSA9PT0gZmFsc2UgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRvcHRpb25zLmFjdGl2ZSA9IGNvbGxhcHNpbmcgPyBmYWxzZSA6IHRoaXMudGFicy5pbmRleCggdGFiICk7XG5cblx0XHR0aGlzLmFjdGl2ZSA9IGNsaWNrZWRJc0FjdGl2ZSA/ICQoKSA6IHRhYjtcblx0XHRpZiAoIHRoaXMueGhyICkge1xuXHRcdFx0dGhpcy54aHIuYWJvcnQoKTtcblx0XHR9XG5cblx0XHRpZiAoICF0b0hpZGUubGVuZ3RoICYmICF0b1Nob3cubGVuZ3RoICkge1xuXHRcdFx0JC5lcnJvciggXCJqUXVlcnkgVUkgVGFiczogTWlzbWF0Y2hpbmcgZnJhZ21lbnQgaWRlbnRpZmllci5cIiApO1xuXHRcdH1cblxuXHRcdGlmICggdG9TaG93Lmxlbmd0aCApIHtcblx0XHRcdHRoaXMubG9hZCggdGhpcy50YWJzLmluZGV4KCB0YWIgKSwgZXZlbnQgKTtcblx0XHR9XG5cdFx0dGhpcy5fdG9nZ2xlKCBldmVudCwgZXZlbnREYXRhICk7XG5cdH0sXG5cblx0Ly8gSGFuZGxlcyBzaG93L2hpZGUgZm9yIHNlbGVjdGluZyB0YWJzXG5cdF90b2dnbGU6IGZ1bmN0aW9uKCBldmVudCwgZXZlbnREYXRhICkge1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdHRvU2hvdyA9IGV2ZW50RGF0YS5uZXdQYW5lbCxcblx0XHRcdHRvSGlkZSA9IGV2ZW50RGF0YS5vbGRQYW5lbDtcblxuXHRcdHRoaXMucnVubmluZyA9IHRydWU7XG5cblx0XHRmdW5jdGlvbiBjb21wbGV0ZSgpIHtcblx0XHRcdHRoYXQucnVubmluZyA9IGZhbHNlO1xuXHRcdFx0dGhhdC5fdHJpZ2dlciggXCJhY3RpdmF0ZVwiLCBldmVudCwgZXZlbnREYXRhICk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2hvdygpIHtcblx0XHRcdHRoYXQuX2FkZENsYXNzKCBldmVudERhdGEubmV3VGFiLmNsb3Nlc3QoIFwibGlcIiApLCBcInVpLXRhYnMtYWN0aXZlXCIsIFwidWktc3RhdGUtYWN0aXZlXCIgKTtcblxuXHRcdFx0aWYgKCB0b1Nob3cubGVuZ3RoICYmIHRoYXQub3B0aW9ucy5zaG93ICkge1xuXHRcdFx0XHR0aGF0Ll9zaG93KCB0b1Nob3csIHRoYXQub3B0aW9ucy5zaG93LCBjb21wbGV0ZSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG9TaG93LnNob3coKTtcblx0XHRcdFx0Y29tcGxldGUoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTdGFydCBvdXQgYnkgaGlkaW5nLCB0aGVuIHNob3dpbmcsIHRoZW4gY29tcGxldGluZ1xuXHRcdGlmICggdG9IaWRlLmxlbmd0aCAmJiB0aGlzLm9wdGlvbnMuaGlkZSApIHtcblx0XHRcdHRoaXMuX2hpZGUoIHRvSGlkZSwgdGhpcy5vcHRpb25zLmhpZGUsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGF0Ll9yZW1vdmVDbGFzcyggZXZlbnREYXRhLm9sZFRhYi5jbG9zZXN0KCBcImxpXCIgKSxcblx0XHRcdFx0XHRcInVpLXRhYnMtYWN0aXZlXCIsIFwidWktc3RhdGUtYWN0aXZlXCIgKTtcblx0XHRcdFx0c2hvdygpO1xuXHRcdFx0fSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9yZW1vdmVDbGFzcyggZXZlbnREYXRhLm9sZFRhYi5jbG9zZXN0KCBcImxpXCIgKSxcblx0XHRcdFx0XCJ1aS10YWJzLWFjdGl2ZVwiLCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7XG5cdFx0XHR0b0hpZGUuaGlkZSgpO1xuXHRcdFx0c2hvdygpO1xuXHRcdH1cblxuXHRcdHRvSGlkZS5hdHRyKCBcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiICk7XG5cdFx0ZXZlbnREYXRhLm9sZFRhYi5hdHRyKCB7XG5cdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJmYWxzZVwiLFxuXHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwiZmFsc2VcIlxuXHRcdH0gKTtcblxuXHRcdC8vIElmIHdlJ3JlIHN3aXRjaGluZyB0YWJzLCByZW1vdmUgdGhlIG9sZCB0YWIgZnJvbSB0aGUgdGFiIG9yZGVyLlxuXHRcdC8vIElmIHdlJ3JlIG9wZW5pbmcgZnJvbSBjb2xsYXBzZWQgc3RhdGUsIHJlbW92ZSB0aGUgcHJldmlvdXMgdGFiIGZyb20gdGhlIHRhYiBvcmRlci5cblx0XHQvLyBJZiB3ZSdyZSBjb2xsYXBzaW5nLCB0aGVuIGtlZXAgdGhlIGNvbGxhcHNpbmcgdGFiIGluIHRoZSB0YWIgb3JkZXIuXG5cdFx0aWYgKCB0b1Nob3cubGVuZ3RoICYmIHRvSGlkZS5sZW5ndGggKSB7XG5cdFx0XHRldmVudERhdGEub2xkVGFiLmF0dHIoIFwidGFiSW5kZXhcIiwgLTEgKTtcblx0XHR9IGVsc2UgaWYgKCB0b1Nob3cubGVuZ3RoICkge1xuXHRcdFx0dGhpcy50YWJzLmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAkKCB0aGlzICkuYXR0ciggXCJ0YWJJbmRleFwiICkgPT09IDA7XG5cdFx0XHR9IClcblx0XHRcdFx0LmF0dHIoIFwidGFiSW5kZXhcIiwgLTEgKTtcblx0XHR9XG5cblx0XHR0b1Nob3cuYXR0ciggXCJhcmlhLWhpZGRlblwiLCBcImZhbHNlXCIgKTtcblx0XHRldmVudERhdGEubmV3VGFiLmF0dHIoIHtcblx0XHRcdFwiYXJpYS1zZWxlY3RlZFwiOiBcInRydWVcIixcblx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcInRydWVcIixcblx0XHRcdHRhYkluZGV4OiAwXG5cdFx0fSApO1xuXHR9LFxuXG5cdF9hY3RpdmF0ZTogZnVuY3Rpb24oIGluZGV4ICkge1xuXHRcdHZhciBhbmNob3IsXG5cdFx0XHRhY3RpdmUgPSB0aGlzLl9maW5kQWN0aXZlKCBpbmRleCApO1xuXG5cdFx0Ly8gVHJ5aW5nIHRvIGFjdGl2YXRlIHRoZSBhbHJlYWR5IGFjdGl2ZSBwYW5lbFxuXHRcdGlmICggYWN0aXZlWyAwIF0gPT09IHRoaXMuYWN0aXZlWyAwIF0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gVHJ5aW5nIHRvIGNvbGxhcHNlLCBzaW11bGF0ZSBhIGNsaWNrIG9uIHRoZSBjdXJyZW50IGFjdGl2ZSBoZWFkZXJcblx0XHRpZiAoICFhY3RpdmUubGVuZ3RoICkge1xuXHRcdFx0YWN0aXZlID0gdGhpcy5hY3RpdmU7XG5cdFx0fVxuXG5cdFx0YW5jaG9yID0gYWN0aXZlLmZpbmQoIFwiLnVpLXRhYnMtYW5jaG9yXCIgKVsgMCBdO1xuXHRcdHRoaXMuX2V2ZW50SGFuZGxlcigge1xuXHRcdFx0dGFyZ2V0OiBhbmNob3IsXG5cdFx0XHRjdXJyZW50VGFyZ2V0OiBhbmNob3IsXG5cdFx0XHRwcmV2ZW50RGVmYXVsdDogJC5ub29wXG5cdFx0fSApO1xuXHR9LFxuXG5cdF9maW5kQWN0aXZlOiBmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0cmV0dXJuIGluZGV4ID09PSBmYWxzZSA/ICQoKSA6IHRoaXMudGFicy5lcSggaW5kZXggKTtcblx0fSxcblxuXHRfZ2V0SW5kZXg6IGZ1bmN0aW9uKCBpbmRleCApIHtcblxuXHRcdC8vIG1ldGEtZnVuY3Rpb24gdG8gZ2l2ZSB1c2VycyBvcHRpb24gdG8gcHJvdmlkZSBhIGhyZWYgc3RyaW5nIGluc3RlYWQgb2YgYSBudW1lcmljYWwgaW5kZXguXG5cdFx0aWYgKCB0eXBlb2YgaW5kZXggPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRpbmRleCA9IHRoaXMuYW5jaG9ycy5pbmRleCggdGhpcy5hbmNob3JzLmZpbHRlciggXCJbaHJlZiQ9J1wiICtcblx0XHRcdFx0JC51aS5lc2NhcGVTZWxlY3RvciggaW5kZXggKSArIFwiJ11cIiApICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGluZGV4O1xuXHR9LFxuXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHRpZiAoIHRoaXMueGhyICkge1xuXHRcdFx0dGhpcy54aHIuYWJvcnQoKTtcblx0XHR9XG5cblx0XHR0aGlzLnRhYmxpc3Rcblx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApXG5cdFx0XHQub2ZmKCB0aGlzLmV2ZW50TmFtZXNwYWNlICk7XG5cblx0XHR0aGlzLmFuY2hvcnNcblx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGUgdGFiSW5kZXhcIiApXG5cdFx0XHQucmVtb3ZlVW5pcXVlSWQoKTtcblxuXHRcdHRoaXMudGFicy5hZGQoIHRoaXMucGFuZWxzICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICQuZGF0YSggdGhpcywgXCJ1aS10YWJzLWRlc3Ryb3lcIiApICkge1xuXHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQXR0ciggXCJyb2xlIHRhYkluZGV4IFwiICtcblx0XHRcdFx0XHRcImFyaWEtbGl2ZSBhcmlhLWJ1c3kgYXJpYS1zZWxlY3RlZCBhcmlhLWxhYmVsbGVkYnkgYXJpYS1oaWRkZW4gYXJpYS1leHBhbmRlZFwiICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXG5cdFx0dGhpcy50YWJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGxpID0gJCggdGhpcyApLFxuXHRcdFx0XHRwcmV2ID0gbGkuZGF0YSggXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIiApO1xuXHRcdFx0aWYgKCBwcmV2ICkge1xuXHRcdFx0XHRsaVxuXHRcdFx0XHRcdC5hdHRyKCBcImFyaWEtY29udHJvbHNcIiwgcHJldiApXG5cdFx0XHRcdFx0LnJlbW92ZURhdGEoIFwidWktdGFicy1hcmlhLWNvbnRyb2xzXCIgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGxpLnJlbW92ZUF0dHIoIFwiYXJpYS1jb250cm9sc1wiICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXG5cdFx0dGhpcy5wYW5lbHMuc2hvdygpO1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuaGVpZ2h0U3R5bGUgIT09IFwiY29udGVudFwiICkge1xuXHRcdFx0dGhpcy5wYW5lbHMuY3NzKCBcImhlaWdodFwiLCBcIlwiICk7XG5cdFx0fVxuXHR9LFxuXG5cdGVuYWJsZTogZnVuY3Rpb24oIGluZGV4ICkge1xuXHRcdHZhciBkaXNhYmxlZCA9IHRoaXMub3B0aW9ucy5kaXNhYmxlZDtcblx0XHRpZiAoIGRpc2FibGVkID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIGluZGV4ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRkaXNhYmxlZCA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbmRleCA9IHRoaXMuX2dldEluZGV4KCBpbmRleCApO1xuXHRcdFx0aWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7XG5cdFx0XHRcdGRpc2FibGVkID0gJC5tYXAoIGRpc2FibGVkLCBmdW5jdGlvbiggbnVtICkge1xuXHRcdFx0XHRcdHJldHVybiBudW0gIT09IGluZGV4ID8gbnVtIDogbnVsbDtcblx0XHRcdFx0fSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGlzYWJsZWQgPSAkLm1hcCggdGhpcy50YWJzLCBmdW5jdGlvbiggbGksIG51bSApIHtcblx0XHRcdFx0XHRyZXR1cm4gbnVtICE9PSBpbmRleCA/IG51bSA6IG51bGw7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5fc2V0T3B0aW9uRGlzYWJsZWQoIGRpc2FibGVkICk7XG5cdH0sXG5cblx0ZGlzYWJsZTogZnVuY3Rpb24oIGluZGV4ICkge1xuXHRcdHZhciBkaXNhYmxlZCA9IHRoaXMub3B0aW9ucy5kaXNhYmxlZDtcblx0XHRpZiAoIGRpc2FibGVkID09PSB0cnVlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggaW5kZXggPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGRpc2FibGVkID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTtcblx0XHRcdGlmICggJC5pbkFycmF5KCBpbmRleCwgZGlzYWJsZWQgKSAhPT0gLTEgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGlmICggJC5pc0FycmF5KCBkaXNhYmxlZCApICkge1xuXHRcdFx0XHRkaXNhYmxlZCA9ICQubWVyZ2UoIFsgaW5kZXggXSwgZGlzYWJsZWQgKS5zb3J0KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkaXNhYmxlZCA9IFsgaW5kZXggXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5fc2V0T3B0aW9uRGlzYWJsZWQoIGRpc2FibGVkICk7XG5cdH0sXG5cblx0bG9hZDogZnVuY3Rpb24oIGluZGV4LCBldmVudCApIHtcblx0XHRpbmRleCA9IHRoaXMuX2dldEluZGV4KCBpbmRleCApO1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdHRhYiA9IHRoaXMudGFicy5lcSggaW5kZXggKSxcblx0XHRcdGFuY2hvciA9IHRhYi5maW5kKCBcIi51aS10YWJzLWFuY2hvclwiICksXG5cdFx0XHRwYW5lbCA9IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0YWIgKSxcblx0XHRcdGV2ZW50RGF0YSA9IHtcblx0XHRcdFx0dGFiOiB0YWIsXG5cdFx0XHRcdHBhbmVsOiBwYW5lbFxuXHRcdFx0fSxcblx0XHRcdGNvbXBsZXRlID0gZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XG5cdFx0XHRcdGlmICggc3RhdHVzID09PSBcImFib3J0XCIgKSB7XG5cdFx0XHRcdFx0dGhhdC5wYW5lbHMuc3RvcCggZmFsc2UsIHRydWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoYXQuX3JlbW92ZUNsYXNzKCB0YWIsIFwidWktdGFicy1sb2FkaW5nXCIgKTtcblx0XHRcdFx0cGFuZWwucmVtb3ZlQXR0ciggXCJhcmlhLWJ1c3lcIiApO1xuXG5cdFx0XHRcdGlmICgganFYSFIgPT09IHRoYXQueGhyICkge1xuXHRcdFx0XHRcdGRlbGV0ZSB0aGF0Lnhocjtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdC8vIE5vdCByZW1vdGVcblx0XHRpZiAoIHRoaXMuX2lzTG9jYWwoIGFuY2hvclsgMCBdICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy54aHIgPSAkLmFqYXgoIHRoaXMuX2FqYXhTZXR0aW5ncyggYW5jaG9yLCBldmVudCwgZXZlbnREYXRhICkgKTtcblxuXHRcdC8vIFN1cHBvcnQ6IGpRdWVyeSA8MS44XG5cdFx0Ly8galF1ZXJ5IDwxLjggcmV0dXJucyBmYWxzZSBpZiB0aGUgcmVxdWVzdCBpcyBjYW5jZWxlZCBpbiBiZWZvcmVTZW5kLFxuXHRcdC8vIGJ1dCBhcyBvZiAxLjgsICQuYWpheCgpIGFsd2F5cyByZXR1cm5zIGEganFYSFIgb2JqZWN0LlxuXHRcdGlmICggdGhpcy54aHIgJiYgdGhpcy54aHIuc3RhdHVzVGV4dCAhPT0gXCJjYW5jZWxlZFwiICkge1xuXHRcdFx0dGhpcy5fYWRkQ2xhc3MoIHRhYiwgXCJ1aS10YWJzLWxvYWRpbmdcIiApO1xuXHRcdFx0cGFuZWwuYXR0ciggXCJhcmlhLWJ1c3lcIiwgXCJ0cnVlXCIgKTtcblxuXHRcdFx0dGhpcy54aHJcblx0XHRcdFx0LmRvbmUoIGZ1bmN0aW9uKCByZXNwb25zZSwgc3RhdHVzLCBqcVhIUiApIHtcblxuXHRcdFx0XHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XG5cdFx0XHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTE3Nzhcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHBhbmVsLmh0bWwoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR0aGF0Ll90cmlnZ2VyKCBcImxvYWRcIiwgZXZlbnQsIGV2ZW50RGF0YSApO1xuXG5cdFx0XHRcdFx0XHRjb21wbGV0ZSgganFYSFIsIHN0YXR1cyApO1xuXHRcdFx0XHRcdH0sIDEgKTtcblx0XHRcdFx0fSApXG5cdFx0XHRcdC5mYWlsKCBmdW5jdGlvbigganFYSFIsIHN0YXR1cyApIHtcblxuXHRcdFx0XHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XG5cdFx0XHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTE3Nzhcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGNvbXBsZXRlKCBqcVhIUiwgc3RhdHVzICk7XG5cdFx0XHRcdFx0fSwgMSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0fVxuXHR9LFxuXG5cdF9hamF4U2V0dGluZ3M6IGZ1bmN0aW9uKCBhbmNob3IsIGV2ZW50LCBldmVudERhdGEgKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzO1xuXHRcdHJldHVybiB7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFIDwxMSBvbmx5XG5cdFx0XHQvLyBTdHJpcCBhbnkgaGFzaCB0aGF0IGV4aXN0cyB0byBwcmV2ZW50IGVycm9ycyB3aXRoIHRoZSBBamF4IHJlcXVlc3Rcblx0XHRcdHVybDogYW5jaG9yLmF0dHIoIFwiaHJlZlwiICkucmVwbGFjZSggLyMuKiQvLCBcIlwiICksXG5cdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigganFYSFIsIHNldHRpbmdzICkge1xuXHRcdFx0XHRyZXR1cm4gdGhhdC5fdHJpZ2dlciggXCJiZWZvcmVMb2FkXCIsIGV2ZW50LFxuXHRcdFx0XHRcdCQuZXh0ZW5kKCB7IGpxWEhSOiBqcVhIUiwgYWpheFNldHRpbmdzOiBzZXR0aW5ncyB9LCBldmVudERhdGEgKSApO1xuXHRcdFx0fVxuXHRcdH07XG5cdH0sXG5cblx0X2dldFBhbmVsRm9yVGFiOiBmdW5jdGlvbiggdGFiICkge1xuXHRcdHZhciBpZCA9ICQoIHRhYiApLmF0dHIoIFwiYXJpYS1jb250cm9sc1wiICk7XG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKCB0aGlzLl9zYW5pdGl6ZVNlbGVjdG9yKCBcIiNcIiArIGlkICkgKTtcblx0fVxufSApO1xuXG4vLyBERVBSRUNBVEVEXG4vLyBUT0RPOiBTd2l0Y2ggcmV0dXJuIGJhY2sgdG8gd2lkZ2V0IGRlY2xhcmF0aW9uIGF0IHRvcCBvZiBmaWxlIHdoZW4gdGhpcyBpcyByZW1vdmVkXG5pZiAoICQudWlCYWNrQ29tcGF0ICE9PSBmYWxzZSApIHtcblxuXHQvLyBCYWNrY29tcGF0IGZvciB1aS10YWIgY2xhc3MgKG5vdyB1aS10YWJzLXRhYilcblx0JC53aWRnZXQoIFwidWkudGFic1wiLCAkLnVpLnRhYnMsIHtcblx0XHRfcHJvY2Vzc1RhYnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XG5cdFx0XHR0aGlzLl9hZGRDbGFzcyggdGhpcy50YWJzLCBcInVpLXRhYlwiICk7XG5cdFx0fVxuXHR9ICk7XG59XG5cbnJldHVybiAkLnVpLnRhYnM7XG5cbn0gKSApO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==