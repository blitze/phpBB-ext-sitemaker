(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[950],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return s},kt:function(){return m}});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var c=n.createContext({}),u=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},s=function(e){var t=u(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),d=u(a),m=i,b=d["".concat(c,".").concat(m)]||d[m]||p[m]||r;return a?n.createElement(b,l(l({ref:t},s),{},{components:a})):n.createElement(b,l({ref:t},s))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=d;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var u=2;u<r;u++)l[u]=a[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},84:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return o},contentTitle:function(){return c},metadata:function(){return u},toc:function(){return s},default:function(){return d}});var n=a(2122),i=a(9756),r=(a(7294),a(3905)),l=["components"],o={title:"Extindere fpBB SiteMaker",sidebar_position:1},c=void 0,u={unversionedId:"dev/overview",id:"dev/overview",isDocsHomePage:!1,title:"Extindere fpBB SiteMaker",description:"Pute\u021bi extinde/modifica phpBB SiteMaker folosind \xeenlocuirea serviciului, decor serviciu, \u0219i sistemul de evenimente phpBB. Po\u021bi g\u0103si o list\u0103 de evenimente acceptate aici.",source:"@site/i18n/ro/docusaurus-plugin-content-docs/current/dev/overview.md",sourceDirName:"dev",slug:"/dev/overview",permalink:"/phpBB-ext-sitemaker/ro/docs/dev/overview",editUrl:"https://crowdin.com/project/phpbb-ext-sitemaker/ro",version:"current",sidebarPosition:1,frontMatter:{title:"Extindere fpBB SiteMaker",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Particularizare blocuri afi\u015fate",permalink:"/phpBB-ext-sitemaker/ro/docs/user/site/block-modifiers"},next:{title:"Evenimente fpBB SiteMaker",permalink:"/phpBB-ext-sitemaker/ro/docs/dev/events"}},s=[{value:"Crearea unui bloc SiteMaker",id:"crearea-unui-bloc-sitemaker",children:[{value:"Set\u0103ri Bloc",id:"set\u0103ri-bloc",children:[]},{value:"Blocuri de nume",id:"blocuri-de-nume",children:[]},{value:"Traducere",id:"traducere",children:[]},{value:"Redare bloc",id:"redare-bloc",children:[]},{value:"Blocheaz\u0103 active",id:"blocheaz\u0103-active",children:[]}]}],p={toc:s};function d(e){var t=e.components,a=(0,i.Z)(e,l);return(0,r.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Pute\u021bi extinde/modifica phpBB SiteMaker folosind ",(0,r.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-replacement"},"\xeenlocuirea serviciului"),", ",(0,r.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_advanced.html#using-service-decoration"},"decor serviciu"),", \u0219i ",(0,r.kt)("a",{parentName:"p",href:"https://area51.phpbb.com/docs/dev/3.2.x/extensions/tutorial_events.html"},"sistemul de evenimente phpBB"),". Po\u021bi g\u0103si o list\u0103 de evenimente acceptate ",(0,r.kt)("a",{parentName:"p",href:"/phpBB-ext-sitemaker/ro/docs/dev/events"},"aici"),"."),(0,r.kt)("h2",{id:"crearea-unui-bloc-sitemaker"},"Crearea unui bloc SiteMaker"),(0,r.kt)("p",null,"Un bloc phpBB SiteMaker este pur \u0219i simplu o clas\u0103 care extinde blitze\\sitemaker\\services\\blocks\\driver\\block class \u0219i returneaz\u0103 un array din metoda \"display\" cu 'title' \u0219i 'content'. Orice altceva \xeentre tine depinde de tine. Pentru a face blocul t\u0103u s\u0103 poat\u0103 fi descoperit de c\u0103tre phpBB SiteMaker, va trebui s\u0103-i dai eticheta \"sitemaker.block\"."),(0,r.kt)("p",null,'Spune c\u0103 avem o extensie cu v\xe2nz\u0103tor/extensie ca exemplu/exemplu. Pentru a crea un bloc numit "my_block" pentru phpBB SiteMaker:'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'Crea\u021bi un dosar "blocuri"'),(0,r.kt)("li",{parentName:"ul"},"Creaza fisierul my_block.php in folderul blocurilor cu urmatorul continut")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"namespace me\\exemplu\\blocks;\n\nfolose\u0219te blitze\\sitemaker\\services\\blocks\\driver\\block;\n\nclasa my_block extinde blocul\n{\n    /**\n     * {@inheritdoc}\n     */\n    functie publica display(array $settings, $edit_mode = false)\n    {\n        return array(\n            'title' => 'titlul blocului meu',\n            'con\u021binut' => 'Con\u021binutul meu de bloc',\n        );\n    }\n}\n")),(0,r.kt)("p",null,"Apoi in fisierul config.yml, adauga urmatoarele:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yml"},"servicii:\n\n...\n\n    my.example.block.my_block:\n        class: my\\example\\blocks\\my_block\n        apeluri:\n            - [set_name, [my.example.block.my_block]]\n        etichete:\n            - { name: sitemaker.block }\n\n....\n\n")),(0,r.kt)("p",null,"La un nivel minim, asta e tot ce ai nevoie. Dac\u0103 merge\u021bi \xeen modul de editare, trebuie s\u0103 vede\u021bi blocul listat ca 'MY_EXAMPLE_BLOCK_MY_BLOCK' care poate fi mutat \u0219i sc\u0103pat pe orice pozi\u021bie de bloc. Dar acest bloc nu face nimic captivant. Nu are set\u0103ri \u0219i nu traduce numele blocului. Hai s\u0103-l facem mai interesant."),(0,r.kt)("h3",{id:"set\u0103ri-bloc"},"Set\u0103ri Bloc"),(0,r.kt)("p",null,'Hai s\u0103 ne modific\u0103m blocurile/blocurile. hp fi\u015fier \u015fi adaug\u0103 o metod\u0103 "get_config" la returneaz\u0103 un array cu tastele fiind set\u0103rile blocului \u015fi valorile fiind un array care descrie set\u0103rile astfel:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"    /**\n     * @inheritdoc\n     */\n    func\u021bie public\u0103 get_config(array $settings)\n    {\n        $options = array(1 => 'SOME_LANG_VAR', 2 => 'OTHER_LANG_VAR');\n        return array(\n            'legend1' => 'TAB1',\n            'caset\u0103' => array('lang' => 'SOME_LANG_VAR_1', 'validate' => 'string', 'type' => 'checkbox', 'options' => $options, 'implicit' => array(, 'explain' => false),\n            'yes_no' => array('lang' => 'SOME_LANG_VAR_2', 'validate' => 'bool', 'type' => 'radio:yes_no', 'explain' => false, 'default' => false),\n            'radio' => array('lang' => 'SOME_LANG_VAR_3', 'validate' => 'bool', 'type' => 'radio', 'options' => $options, 'explic\u0103' => false, 'implicit' => 'subiect'),\n            'select' => array('lang' => 'SOME_LANG_VAR_4', 'validate' => 'string', 'type' => 'select', 'options' => $options, 'default' => '', 'explic\u0103' => false),\n            'multi' => array('lang' => 'SOME_LANG_VAR_5', 'validate' => 'string', 'type' => 'multi_select', 'op\u021biuni' => $options, 'implicit' => array(), 'explica\u021bi' => false),\n            'legend\u01032' => 'TAB2',\n            'num\u0103r' => array('lang' => 'SOME_LANG_VAR_6', 'validate' => 'int:0:20', 'type' => 'number:0:20', 'maxlength' => 2, 'explain' => false, 'implicit' => 5),\n            'zona text' => array('lang' => 'SOME_LANG_VAR_7', 'validate' => 'string', 'type' => 'textarea:3:40', 'maxlength' => 2, 'explain' => true, 'implicit' => ''),\n            'togglable' => array('lang' => 'SOME_TOGGLABLE_VAR', 'validate' => 'string', 'type' => 'select:1:0:toggle_key', 'options' => $options, 'implicit' => '', 'append' => '<div id=\"toggle_key-1\">Arat\u0103 numai c\xe2nd op\u021biunea 1 este selectat\u0103</div>'),\n        );\n}\n")),(0,r.kt)("p",null,"Aceasta este construit\u0103 \xeen acela\u015fi mod \xeen care phpBB construie\u015fte configura\u0163ia pentru set\u0103rile de sec\u0163iune \xeen ACP. Mai multe exemple ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/phpbb/phpbb/blob/master/phpBB/includes/acp/acp_board.php"},"aici"),"."),(0,r.kt)("p",null,"Dac\u0103 dori\u0163i un tip de c\xe2mp personalizat, pute\u0163i vedea un exemplu ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/blitze/phpBB-ext-sitemaker_content/blob/develop/blocks/recent.php"},"aici")," (setarea ('content_type')."),(0,r.kt)("p",null,"Observa\u021bi 'legend1' \u0219i 'legend2': Acestea sunt folosite pentru a separa set\u0103rile \xeen file."),(0,r.kt)("h3",{id:"blocuri-de-nume"},"Blocuri de nume"),(0,r.kt)("p",null,"Conven\u0163ia pentru numele blocului este c\u0103 numele serviciului (de ex. my.example.block. y",(0,r.kt)("em",{parentName:"p"},"blocul de mai sus) va fi folosit ca tasta de limb\u0103 prin \xeenlocuirea punctelor (.) cu underscore ("),"(ex. MY_EXAMPLE_BLOCK_MY_BLOCK)."),(0,r.kt)("h3",{id:"traducere"},"Traducere"),(0,r.kt)("p",null,'Observa\u021bi de asemenea c\u0103 avem mai multe chei lingvistice care trebuie traduse. Pentru a face acest lucru, crea\u021bi un fi\u0219ier numit "blocks_admin.php" \xeen folderul de limb\u0103. Acest fisier va fi incarcat automat la editarea blocurilor, si ar trebui sa aiba traduceri pentru setarile blocurilor si numele blocurilor.'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$lang = array_merge($lang, array(\n    'SOME_LANG_VAR' => 'Op\u021biunea 1',\n    'OTHER_LANG_VAR' => 'Op\u021biunea 2',\n    'SOME_LANG_VAR_1' => 'Setting 1',\n....\n    'MY_EXAMPLE_BLOCK_MY_BLOCK' => 'Blocul meu',\n);\n")),(0,r.kt)("p",null,"Deoarece 'blocks_admin.php' este \xeenc\u0103rcat doar c\xe2nd editezi blocuri, va trebui s\u0103 adaugi alte traduceri (de ex. blocheaz\u0103 titlul) prin \xeenc\u0103rcarea unui fi\u0219ier de limb\u0103 \xeen metoda afi\u0219at\u0103 ca ",(0,r.kt)("inlineCode",{parentName:"p"},"$language->add_lang('my_lang_file', 'my/exemplu');")),(0,r.kt)("h3",{id:"redare-bloc"},"Redare bloc"),(0,r.kt)("p",null,"Noul bloc va fi afi\u0219at doar \xeen cazul \xeen care randeaz\u0103 ceva. Blocul t\u0103u poate returna orice \u0219ir de caractere ca con\u021binut, dar \xeen majoritatea cazurilor, ai nevoie de un \u0219ablon pentru a reda con\u021binutul t\u0103u. Pentru a reda blocul t\u0103u folosind \u0219abloane, blocul trebuie s\u0103 returneze un array care con\u021bine datele pe care dori\u021bi s\u0103 le transmite\u021bi la \u0219ablon \u0219i trebuie, de asemenea, s\u0103 implementeze metoda ",(0,r.kt)("inlineCode",{parentName:"p"},"get_template")," dup\u0103 cum se arat\u0103 mai jos:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"    /**\n     * @inheritdoc\n     */\n    func\u021bie public\u0103 get_config(array $settings)\n    {\n        $options = array(1 => 'SOME_LANG_VAR', 2 => 'OTHER_LANG_VAR');\n        return array(\n            'legend1' => 'TAB1',\n            'setting' => array('lang' => 'SOME_LANG_VAR_1', 'validate' => 'string', 'type' => 'checkbox', 'options' => $options, 'default' => array(), 'explain' => false),\n        );\n    }\n\n    /**\n     * {@inheritdoc}\n     */\n    func\u021bie public\u0103 get_template()\n    {\n        return '@my_example/my_block. tml';\n    }\n\n    /**\n     * {@inheritdoc}\n     */\n    display(array $data, $edit_mode = false)\n    {\n        if ($edit_mode)\n        {\n            // face ceva numai \xeen modul de editare\n        }\n\n        return array(\n            'title' => 'MY_BLOCK_TITLE',\n            'data' => array(\n                'some_var' => $data['settings']['some_setting'],\n            ),\n        );\n}\n")),(0,r.kt)("p",null,"Apoi fi\u015fierul styles/all/my_block.html sau styles/prosilver/my_block.html ar putea ar\u0103ta astfel:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"<p>Ai selectat: {{ some_var }}</p>\n")),(0,r.kt)("p",null,"Pe scurt, blocul t\u0103u trebuie s\u0103 returneze un array cu o cheie ",(0,r.kt)("inlineCode",{parentName:"p"},"titlu")," (pentru titlul blocului) \u0219i o tast\u0103 ",(0,r.kt)("inlineCode",{parentName:"p"},"con\u021binut")," (dac\u0103 blocul doar afi\u0219eaz\u0103 un \u0219ir de caractere \u0219i nu folose\u0219te un \u0219ablon) sau o cheie ",(0,r.kt)("inlineCode",{parentName:"p"},"de date")," (dac\u0103 blocul folose\u0219te un \u0219ablon, caz \xeen care va trebui de asemenea s\u0103 implementa\u021bi metoda ",(0,r.kt)("inlineCode",{parentName:"p"},"get_template"),")."),(0,r.kt)("h3",{id:"blocheaz\u0103-active"},"Blocheaz\u0103 active"),(0,r.kt)("p",null,"\xcen cazul \xeen care blocul dvs. trebuie s\u0103 adauge active (css/js) la pagin\u0103, v\u0103 recomand s\u0103 folosi\u021bi sitemaker ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/blitze/phpBB-ext-sitemaker/blob/develop/services/util.php"},"util clasa")," pentru asta. Deoarece pot exista mai multe instan\u021be ale aceluia\u0219i bloc pe pagin\u0103, sau alte blocuri ar putea ad\u0103uga acela\u0219i activ, clasa util asigur\u0103 c\u0103 activul este ad\u0103ugat doar unu."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"        $this->util->add_assets(array(\n            'js' => array(\n                '@my_example/assets/unele. s',\n                100 => '@my_example/assets/other. s', // seteaz\u0103 prioritatea\n            ),\n            'css' => array(\n                '@my_example/assets/unele. ss',\n            )\n));\n")),(0,r.kt)("p",null,"Clasa util va trebui, desigur, s\u0103 fie ad\u0103ugat\u0103 la defini\u021biile serviciului \xeen config.yml astfel: ",(0,r.kt)("inlineCode",{parentName:"p"},"- '@blitze.sitemaker. til'")," \u0219i definit \xeen constructorul blocului ",(0,r.kt)("inlineCode",{parentName:"p"},"\\blitze\\sitemaker\\services\\util $util"),"."),(0,r.kt)("p",null,"\u015ei asta e tot. Am terminat!"))}d.isMDXComponent=!0}}]);